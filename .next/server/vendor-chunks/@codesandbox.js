"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@codesandbox";
exports.ids = ["vendor-chunks/@codesandbox"];
exports.modules = {

/***/ "(ssr)/./node_modules/@codesandbox/nodebox/build/index.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@codesandbox/nodebox/build/index.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INJECT_MESSAGE_TYPE: () => (/* binding */ INJECT_MESSAGE_TYPE),\n/* harmony export */   MessageReceiver: () => (/* binding */ MessageReceiver),\n/* harmony export */   MessageSender: () => (/* binding */ MessageSender),\n/* harmony export */   Nodebox: () => (/* binding */ Nodebox),\n/* harmony export */   PREVIEW_LOADED_MESSAGE_TYPE: () => (/* binding */ PREVIEW_LOADED_MESSAGE_TYPE)\n/* harmony export */ });\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/pad.js\nvar require_pad = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/pad.js\"(exports, module) {\n    module.exports = function pad(num, size) {\n      var s = \"000000000\" + num;\n      return s.substr(s.length - size);\n    };\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/fingerprint.browser.js\nvar require_fingerprint_browser = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/fingerprint.browser.js\"(exports, module) {\n    var pad = require_pad();\n    var env = typeof window === \"object\" ? window : self;\n    var globalCount = Object.keys(env).length;\n    var mimeTypesLength = navigator.mimeTypes ? navigator.mimeTypes.length : 0;\n    var clientId = pad((mimeTypesLength + navigator.userAgent.length).toString(36) + globalCount.toString(36), 4);\n    module.exports = function fingerprint() {\n      return clientId;\n    };\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/getRandomValue.browser.js\nvar require_getRandomValue_browser = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/getRandomValue.browser.js\"(exports, module) {\n    var getRandomValue;\n    var crypto = typeof window !== \"undefined\" && (window.crypto || window.msCrypto) || typeof self !== \"undefined\" && self.crypto;\n    if (crypto) {\n      lim = Math.pow(2, 32) - 1;\n      getRandomValue = function() {\n        return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0] / lim);\n      };\n    } else {\n      getRandomValue = Math.random;\n    }\n    var lim;\n    module.exports = getRandomValue;\n  }\n});\n\n// ../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/index.js\nvar require_cuid = __commonJS({\n  \"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/index.js\"(exports, module) {\n    var fingerprint = require_fingerprint_browser();\n    var pad = require_pad();\n    var getRandomValue = require_getRandomValue_browser();\n    var c = 0;\n    var blockSize = 4;\n    var base = 36;\n    var discreteValues = Math.pow(base, blockSize);\n    function randomBlock() {\n      return pad((getRandomValue() * discreteValues << 0).toString(base), blockSize);\n    }\n    function safeCounter() {\n      c = c < discreteValues ? c : 0;\n      c++;\n      return c - 1;\n    }\n    function cuid3() {\n      var letter = \"c\", timestamp = new Date().getTime().toString(base), counter = pad(safeCounter().toString(base), blockSize), print = fingerprint(), random = randomBlock() + randomBlock();\n      return letter + timestamp + counter + print + random;\n    }\n    cuid3.slug = function slug() {\n      var date = new Date().getTime().toString(36), counter = safeCounter().toString(36).slice(-4), print = fingerprint().slice(0, 1) + fingerprint().slice(-1), random = randomBlock().slice(-2);\n      return date.slice(-2) + counter + print + random;\n    };\n    cuid3.isCuid = function isCuid(stringToCheck) {\n      if (typeof stringToCheck !== \"string\")\n        return false;\n      if (stringToCheck.startsWith(\"c\"))\n        return true;\n      return false;\n    };\n    cuid3.isSlug = function isSlug(stringToCheck) {\n      if (typeof stringToCheck !== \"string\")\n        return false;\n      var stringLength = stringToCheck.length;\n      if (stringLength >= 7 && stringLength <= 10)\n        return true;\n      return false;\n    };\n    cuid3.fingerprint = fingerprint;\n    module.exports = cuid3;\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/createDeferredExecutor.js\nvar require_createDeferredExecutor = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/createDeferredExecutor.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.createDeferredExecutor = void 0;\n    function createDeferredExecutor() {\n      const executor = (resolve, reject) => {\n        executor.state = \"pending\";\n        executor.resolve = (data) => {\n          if (executor.state !== \"pending\") {\n            return;\n          }\n          executor.result = data;\n          const onFulfilled = (value) => {\n            executor.state = \"fulfilled\";\n            return value;\n          };\n          return resolve(data instanceof Promise ? data : Promise.resolve(data).then(onFulfilled));\n        };\n        executor.reject = (reason) => {\n          if (executor.state !== \"pending\") {\n            return;\n          }\n          queueMicrotask(() => {\n            executor.state = \"rejected\";\n          });\n          return reject(executor.rejectionReason = reason);\n        };\n      };\n      return executor;\n    }\n    exports.createDeferredExecutor = createDeferredExecutor;\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/DeferredPromise.js\nvar require_DeferredPromise = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/DeferredPromise.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.DeferredPromise = void 0;\n    var createDeferredExecutor_1 = require_createDeferredExecutor();\n    var DeferredPromise4 = class extends Promise {\n      #executor;\n      resolve;\n      reject;\n      constructor(executor = null) {\n        const deferredExecutor = (0, createDeferredExecutor_1.createDeferredExecutor)();\n        super((originalResolve, originalReject) => {\n          deferredExecutor(originalResolve, originalReject);\n          executor?.(deferredExecutor.resolve, deferredExecutor.reject);\n        });\n        this.#executor = deferredExecutor;\n        this.resolve = this.#executor.resolve;\n        this.reject = this.#executor.reject;\n      }\n      get state() {\n        return this.#executor.state;\n      }\n      get rejectionReason() {\n        return this.#executor.rejectionReason;\n      }\n      then(onFulfilled, onRejected) {\n        return this.#decorate(super.then(onFulfilled, onRejected));\n      }\n      catch(onRejected) {\n        return this.#decorate(super.catch(onRejected));\n      }\n      finally(onfinally) {\n        return this.#decorate(super.finally(onfinally));\n      }\n      #decorate(promise) {\n        return Object.defineProperties(promise, {\n          resolve: { configurable: true, value: this.resolve },\n          reject: { configurable: true, value: this.reject }\n        });\n      }\n    };\n    exports.DeferredPromise = DeferredPromise4;\n  }\n});\n\n// ../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/index.js\nvar require_build = __commonJS({\n  \"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/index.js\"(exports) {\n    \"use strict\";\n    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      var desc = Object.getOwnPropertyDescriptor(m, k);\n      if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = { enumerable: true, get: function() {\n          return m[k];\n        } };\n      }\n      Object.defineProperty(o, k2, desc);\n    } : function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      o[k2] = m[k];\n    });\n    var __exportStar = exports && exports.__exportStar || function(m, exports2) {\n      for (var p in m)\n        if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports2, p))\n          __createBinding(exports2, m, p);\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    __exportStar(require_createDeferredExecutor(), exports);\n    __exportStar(require_DeferredPromise(), exports);\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/MemoryLeakError.js\nvar require_MemoryLeakError = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/MemoryLeakError.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.MemoryLeakError = void 0;\n    var MemoryLeakError = class extends Error {\n      emitter;\n      type;\n      count;\n      constructor(emitter, type, count) {\n        super(`Possible EventEmitter memory leak detected. ${count} ${type.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`);\n        this.emitter = emitter;\n        this.type = type;\n        this.count = count;\n        this.name = \"MaxListenersExceededWarning\";\n      }\n    };\n    exports.MemoryLeakError = MemoryLeakError;\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/Emitter.js\nvar require_Emitter = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/Emitter.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.Emitter = void 0;\n    var MemoryLeakError_1 = require_MemoryLeakError();\n    var _events, _maxListeners, _hasWarnedAboutPotentialMemortyLeak, _getListeners, getListeners_fn, _removeListener, removeListener_fn, _wrapOnceListener, wrapOnceListener_fn, _internalEmit, internalEmit_fn;\n    var _Emitter = class {\n      constructor() {\n        __privateAdd(this, _getListeners);\n        __privateAdd(this, _removeListener);\n        __privateAdd(this, _wrapOnceListener);\n        __privateAdd(this, _internalEmit);\n        __privateAdd(this, _events, void 0);\n        __privateAdd(this, _maxListeners, void 0);\n        __privateAdd(this, _hasWarnedAboutPotentialMemortyLeak, void 0);\n        __privateSet(this, _events, /* @__PURE__ */ new Map());\n        __privateSet(this, _maxListeners, _Emitter.defaultMaxListeners);\n        __privateSet(this, _hasWarnedAboutPotentialMemortyLeak, false);\n      }\n      static listenerCount(emitter, eventName) {\n        return emitter.listenerCount(eventName);\n      }\n      setMaxListeners(maxListeners) {\n        __privateSet(this, _maxListeners, maxListeners);\n        return this;\n      }\n      getMaxListeners() {\n        return __privateGet(this, _maxListeners);\n      }\n      eventNames() {\n        return Array.from(__privateGet(this, _events).keys());\n      }\n      emit(eventName, ...data) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        listeners.forEach((listener) => {\n          listener.apply(this, data);\n        });\n        return listeners.length > 0;\n      }\n      addListener(eventName, listener) {\n        __privateMethod(this, _internalEmit, internalEmit_fn).call(this, \"newListener\", eventName, listener);\n        const nextListeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName).concat(listener);\n        __privateGet(this, _events).set(eventName, nextListeners);\n        if (__privateGet(this, _maxListeners) > 0 && this.listenerCount(eventName) > __privateGet(this, _maxListeners) && !__privateGet(this, _hasWarnedAboutPotentialMemortyLeak)) {\n          __privateSet(this, _hasWarnedAboutPotentialMemortyLeak, true);\n          const memoryLeakWarning = new MemoryLeakError_1.MemoryLeakError(this, eventName, this.listenerCount(eventName));\n          console.warn(memoryLeakWarning);\n        }\n        return this;\n      }\n      on(eventName, listener) {\n        return this.addListener(eventName, listener);\n      }\n      once(eventName, listener) {\n        return this.addListener(eventName, __privateMethod(this, _wrapOnceListener, wrapOnceListener_fn).call(this, eventName, listener));\n      }\n      prependListener(eventName, listener) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        if (listeners.length > 0) {\n          const nextListeners = [listener].concat(listeners);\n          __privateGet(this, _events).set(eventName, nextListeners);\n        } else {\n          __privateGet(this, _events).set(eventName, listeners.concat(listener));\n        }\n        return this;\n      }\n      prependOnceListener(eventName, listener) {\n        return this.prependListener(eventName, __privateMethod(this, _wrapOnceListener, wrapOnceListener_fn).call(this, eventName, listener));\n      }\n      removeListener(eventName, listener) {\n        const listeners = __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName);\n        if (listeners.length > 0) {\n          __privateMethod(this, _removeListener, removeListener_fn).call(this, listeners, listener);\n          __privateGet(this, _events).set(eventName, listeners);\n          __privateMethod(this, _internalEmit, internalEmit_fn).call(this, \"removeListener\", eventName, listener);\n        }\n        return this;\n      }\n      off(eventName, listener) {\n        return this.removeListener(eventName, listener);\n      }\n      removeAllListeners(eventName) {\n        if (eventName) {\n          __privateGet(this, _events).delete(eventName);\n        } else {\n          __privateGet(this, _events).clear();\n        }\n        return this;\n      }\n      listeners(eventName) {\n        return Array.from(__privateMethod(this, _getListeners, getListeners_fn).call(this, eventName));\n      }\n      listenerCount(eventName) {\n        return __privateMethod(this, _getListeners, getListeners_fn).call(this, eventName).length;\n      }\n      rawListeners(eventName) {\n        return this.listeners(eventName);\n      }\n    };\n    var Emitter2 = _Emitter;\n    _events = new WeakMap();\n    _maxListeners = new WeakMap();\n    _hasWarnedAboutPotentialMemortyLeak = new WeakMap();\n    _getListeners = new WeakSet();\n    getListeners_fn = function(eventName) {\n      return __privateGet(this, _events).get(eventName) || [];\n    };\n    _removeListener = new WeakSet();\n    removeListener_fn = function(listeners, listener) {\n      const index = listeners.indexOf(listener);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n      return [];\n    };\n    _wrapOnceListener = new WeakSet();\n    wrapOnceListener_fn = function(eventName, listener) {\n      const onceListener = (...data) => {\n        this.removeListener(eventName, onceListener);\n        listener.apply(this, data);\n      };\n      return onceListener;\n    };\n    _internalEmit = new WeakSet();\n    internalEmit_fn = function(internalEventName, eventName, listener) {\n      this.emit(\n        internalEventName,\n        ...[eventName, listener]\n      );\n    };\n    __publicField(Emitter2, \"defaultMaxListeners\", 10);\n    exports.Emitter = Emitter2;\n  }\n});\n\n// ../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/index.js\nvar require_lib = __commonJS({\n  \"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/index.js\"(exports) {\n    \"use strict\";\n    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      var desc = Object.getOwnPropertyDescriptor(m, k);\n      if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = { enumerable: true, get: function() {\n          return m[k];\n        } };\n      }\n      Object.defineProperty(o, k2, desc);\n    } : function(o, m, k, k2) {\n      if (k2 === void 0)\n        k2 = k;\n      o[k2] = m[k];\n    });\n    var __exportStar = exports && exports.__exportStar || function(m, exports2) {\n      for (var p in m)\n        if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports2, p))\n          __createBinding(exports2, m, p);\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    __exportStar(require_Emitter(), exports);\n    __exportStar(require_MemoryLeakError(), exports);\n  }\n});\n\n// src/messages.ts\nvar import_cuid = __toESM(require_cuid());\n\n// ../../node_modules/.pnpm/outvariant@1.4.0/node_modules/outvariant/lib/index.mjs\nvar POSITIONALS_EXP = /(%?)(%([sdjo]))/g;\nfunction serializePositional(positional, flag) {\n  switch (flag) {\n    case \"s\":\n      return positional;\n    case \"d\":\n    case \"i\":\n      return Number(positional);\n    case \"j\":\n      return JSON.stringify(positional);\n    case \"o\": {\n      if (typeof positional === \"string\") {\n        return positional;\n      }\n      const json = JSON.stringify(positional);\n      if (json === \"{}\" || json === \"[]\" || /^\\[object .+?\\]$/.test(json)) {\n        return positional;\n      }\n      return json;\n    }\n  }\n}\nfunction format(message, ...positionals) {\n  if (positionals.length === 0) {\n    return message;\n  }\n  let positionalIndex = 0;\n  let formattedMessage = message.replace(\n    POSITIONALS_EXP,\n    (match, isEscaped, _, flag) => {\n      const positional = positionals[positionalIndex];\n      const value = serializePositional(positional, flag);\n      if (!isEscaped) {\n        positionalIndex++;\n        return value;\n      }\n      return match;\n    }\n  );\n  if (positionalIndex < positionals.length) {\n    formattedMessage += ` ${positionals.slice(positionalIndex).join(\" \")}`;\n  }\n  formattedMessage = formattedMessage.replace(/%{2,2}/g, \"%\");\n  return formattedMessage;\n}\nvar STACK_FRAMES_TO_IGNORE = 2;\nfunction cleanErrorStack(error) {\n  if (!error.stack) {\n    return;\n  }\n  const nextStack = error.stack.split(\"\\n\");\n  nextStack.splice(1, STACK_FRAMES_TO_IGNORE);\n  error.stack = nextStack.join(\"\\n\");\n}\nvar InvariantError = class extends Error {\n  constructor(message, ...positionals) {\n    super(message);\n    this.message = message;\n    this.name = \"Invariant Violation\";\n    this.message = format(message, ...positionals);\n    cleanErrorStack(this);\n  }\n};\nvar invariant = (predicate, message, ...positionals) => {\n  if (!predicate) {\n    throw new InvariantError(message, ...positionals);\n  }\n};\ninvariant.as = (ErrorConstructor, predicate, message, ...positionals) => {\n  if (!predicate) {\n    const isConstructor = ErrorConstructor.prototype.name != null;\n    const error = isConstructor ? new ErrorConstructor(format(message, positionals)) : ErrorConstructor(format(message, positionals));\n    throw error;\n  }\n};\n\n// src/messages.ts\nvar import_deferred_promise = __toESM(require_build());\n\n// src/logger.ts\nvar FLAG = window.localStorage[\"CSB_EMULATOR_DEBUG\"];\nvar DEFAULT = \"\\x1B[0m\";\nvar GREEN = \"\\x1B[32;1m\";\nvar RED = \"\\x1B[31m\";\nvar BLUE = \"\\x1B[34m\";\nvar YELLOW = \"\\x1B[33;1m\";\nvar MAGENTA = \"\\x1B[35;1m\";\nvar CYAN = \"\\x1B[36;1m\";\nvar COLOR_SCOPE = {\n  preview: YELLOW,\n  emulator: MAGENTA,\n  runtime: CYAN,\n  bridge: BLUE,\n  \"runtime:worker\": CYAN\n};\nfunction createDebug(scope) {\n  return function debug3(message, ...data) {\n    if (FLAG === \"true\") {\n      const direction = () => {\n        if (message.includes(\"sender\"))\n          return `${GREEN}sender`;\n        if (message.includes(\"receiver\"))\n          return `${RED}receiver`;\n        return \"\";\n      };\n      const cleanMessage = message.replace(/\\[.+\\]:/, \"\");\n      console.debug(`${COLOR_SCOPE[scope]}${scope}:${direction()}${DEFAULT}:${cleanMessage}`, ...data);\n    }\n  };\n}\n\n// src/messages.ts\nvar debug = createDebug(\"emulator\");\nvar MessageReceiver = class {\n  emitter;\n  senderPort = null;\n  constructor() {\n    this.emitter = new EventTarget();\n    this.waitForHandshake();\n  }\n  waitForHandshake() {\n    const handshakePromise = new import_deferred_promise.DeferredPromise();\n    const handshakeListener = (message) => {\n      const { data } = message;\n      debug(\"[message-receiver]: incoming\", message);\n      if (data.type === \"internal/handshake\") {\n        invariant(\n          message.ports.length > 0,\n          \"Failed to confirm a MessageReceiver handshake: received event has no ports\"\n        );\n        this.senderPort = message.ports[0];\n        this.addMessageListener();\n        debug(\"[message-receiver]: handshake received!\", this.senderPort);\n        this.send(\"internal/handshake/done\");\n        debug(\"[message-receiver]: finish handshake\");\n      }\n    };\n    window.addEventListener(\"message\", handshakeListener);\n    handshakePromise.then(() => {\n      window.removeEventListener(\"message\", handshakeListener);\n    });\n    window.parent.postMessage({ type: \"internal/ready\" }, \"*\");\n    return handshakePromise;\n  }\n  addMessageListener() {\n    invariant(\n      this.senderPort,\n      \"[MessageReceiver] Failed to add a message listener: sender port is not defined. Did you forget to await a handshake?\"\n    );\n    this.senderPort.onmessage = (evt) => {\n      const data = evt.data;\n      if (data.type == null) {\n        return;\n      }\n      this.emitter.dispatchEvent(\n        new MessageEvent(data.type, {\n          data: data.payload\n        })\n      );\n    };\n  }\n  on(event, listener, options) {\n    this.emitter.addEventListener(\n      event,\n      async (message) => {\n        if (!(message instanceof MessageEvent)) {\n          return;\n        }\n        const { operationId, payload } = message.data;\n        try {\n          const listenerPayload = await listener(payload);\n          this.send(\"internal/operation/done\", { operationId, listenerPayload });\n        } catch (error) {\n          if (error instanceof Error) {\n            this.send(\"internal/operation/failed\", { operationId, error });\n          }\n        }\n      },\n      options\n    );\n  }\n  send(event, ...data) {\n    invariant(\n      this.senderPort,\n      '[MessageReceiver] Failed to send a message \"%j\": sender port is not defined. Did you forget to await a handshake?',\n      event\n    );\n    const payload = data[0] || {};\n    debug('[message-receiver]: send \"%s\"', event, payload);\n    this.senderPort.postMessage({ type: event, payload });\n  }\n};\nvar MessageSender = class {\n  constructor(target) {\n    this.target = target;\n    this.emitter = new EventTarget();\n    this.channel = new MessageChannel();\n    this.receiverPort = this.channel.port1;\n    const receiverReadyPromise = new import_deferred_promise.DeferredPromise();\n    const handshakeListener = (message) => {\n      if (message.data.type === \"internal/ready\") {\n        debug(\"[message-sender]: runtime is ready\");\n        receiverReadyPromise.resolve();\n      }\n    };\n    window.addEventListener(\"message\", handshakeListener);\n    receiverReadyPromise.then(() => {\n      window.removeEventListener(\"message\", handshakeListener);\n    });\n    this.receiverReadyPromise = receiverReadyPromise;\n    this.receiverPort.onmessage = (evt) => {\n      const data = evt.data;\n      if (data.type != null) {\n        debug('[message-sender]: emitting \"%s\" event...', data.type, data.payload);\n        this.emitter.dispatchEvent(new MessageEvent(data.type, { data: data.payload }));\n      }\n    };\n  }\n  emitter;\n  channel;\n  receiverPort;\n  receiverReadyPromise;\n  async handshake() {\n    const handshakePromise = new import_deferred_promise.DeferredPromise();\n    await this.receiverReadyPromise;\n    debug(\"[message-sender]: sending handshake\");\n    this.target.postMessage(\n      {\n        type: \"internal/handshake\"\n      },\n      \"*\",\n      [this.channel.port2]\n    );\n    this.on(\"internal/handshake/done\", () => {\n      handshakePromise.resolve();\n      clearTimeout(rejectionTimeout);\n    });\n    const rejectionTimeout = setTimeout(() => {\n      handshakePromise.reject(new Error(\"MessageSender: Handshake timeout\"));\n    }, 5e3);\n    return handshakePromise;\n  }\n  on(event, listener, options) {\n    debug('[message-sender]: add listener \"%s\"', event);\n    this.emitter.addEventListener(\n      event,\n      (message) => {\n        if (message instanceof MessageEvent) {\n          listener(message);\n        }\n      },\n      options\n    );\n  }\n  off(event, listener, options) {\n    this.emitter.removeEventListener(event, listener, options);\n  }\n  async send(event, ...data) {\n    const operationPromise = new import_deferred_promise.DeferredPromise();\n    const operationId = (0, import_cuid.default)();\n    const payload = data[0] || {};\n    debug('[message-sender]: send \"%s\" (%s)', event, operationId, payload);\n    this.receiverPort.postMessage({ type: event, payload: { operationId, payload } });\n    debug('[message-sender]: adding done listener for \"%s\" (%s)', event, operationId);\n    const handleOperationDone = (doneEvent) => {\n      const { data: data2 } = doneEvent;\n      if (data2.operationId === operationId) {\n        const listenerPayload = data2.listenerPayload || {};\n        debug('[message-sender]: resolving \"%s (%s) promise!', event, operationId);\n        operationPromise.resolve({\n          ...listenerPayload,\n          operationId: data2.operationId\n        });\n      }\n    };\n    const handleOperationFailed = (failEvent) => {\n      const { data: data2 } = failEvent;\n      if (data2.operationId === operationId) {\n        debug('[message-sender]: rejecting \"%s (%s) promise!', event, operationId);\n        operationPromise.reject(data2.error);\n      }\n    };\n    this.on(\"internal/operation/done\", handleOperationDone);\n    this.on(\"internal/operation/failed\", handleOperationFailed);\n    return operationPromise.finally(() => {\n      this.emitter.removeEventListener(\"internal/operation/done\", handleOperationDone);\n      this.emitter.removeEventListener(\"internal/operation/failed\", handleOperationFailed);\n    });\n  }\n};\n\n// src/Nodebox.ts\nvar import_deferred_promise3 = __toESM(require_build());\n\n// src/modules/fs.ts\nvar import_cuid2 = __toESM(require_cuid());\nvar FileSystemApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  async init(files) {\n    await this.channel.send(\"fs/init\", { files });\n  }\n  async readFile(path, encoding) {\n    const response = await this.channel.send(\"fs/readFile\", { path, encoding }).catch((error) => {\n      throw new Error(format('Failed to read file at path \"%s\"', path), { cause: error });\n    });\n    if (!response) {\n      throw new Error(\"File not found\");\n    }\n    return response.data;\n  }\n  async writeFile(path, content, options) {\n    let encoding = void 0;\n    let recursive = false;\n    if (typeof options === \"object\") {\n      encoding = options.encoding;\n      recursive = !!options.recursive;\n    } else if (typeof options === \"string\") {\n      encoding = options;\n    }\n    await this.channel.send(\"fs/writeFile\", { path, content, encoding, recursive }).catch((error) => {\n      throw new Error(format('Failed to write file at path \"%s\"', path), { cause: error });\n    });\n  }\n  async readdir(path) {\n    const response = await this.channel.send(\"fs/readdir\", { path }).catch((error) => {\n      throw new Error(format('Failed to read directory at path \"%s\"', path), { cause: error });\n    });\n    if (!response) {\n      throw new Error(\"Directory not found\");\n    }\n    return response.data;\n  }\n  async mkdir(path, options) {\n    const recursive = !!options?.recursive;\n    await this.channel.send(\"fs/mkdir\", { path, recursive }).catch((error) => {\n      throw new Error(format('Failed to make directory at path \"%s\"', path), { cause: error });\n    });\n  }\n  async stat(path) {\n    const response = await this.channel.send(\"fs/stat\", { path }).catch((error) => {\n      throw new Error(format('Failed to stat file at path \"%s\"', path), { cause: error });\n    });\n    if (!response) {\n      throw new Error(\"File not found\");\n    }\n    return response.data;\n  }\n  async rm(path, options) {\n    const { force, recursive } = options || {};\n    await this.channel.send(\"fs/rm\", { path, force, recursive }).catch((error) => {\n      throw new Error(format('Failed to remove file at path \"%s\"', path), { cause: error });\n    });\n  }\n  async watch(includes, excludes, listener) {\n    const watcherId = (0, import_cuid2.default)();\n    await this.channel.send(\"fs/watch\", { watcherId, includes, excludes });\n    this.channel.on(\"fs/watch-event\", ({ data }) => {\n      if (data.watcherId === watcherId && listener) {\n        const evt = { ...data };\n        delete evt.watcherId;\n        listener(evt);\n      }\n    });\n    return {\n      dispose: () => this.channel.send(\"fs/unwatch\", { watcherId })\n    };\n  }\n};\n\n// src/modules/shell.ts\nvar import_strict_event_emitter = __toESM(require_lib());\nvar ShellApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  create() {\n    return new ShellProcess(this.channel);\n  }\n};\nvar ShellProcess = class {\n  constructor(channel) {\n    this.channel = channel;\n    this.state = \"running\";\n    this.stdout = new import_strict_event_emitter.Emitter();\n    this.stderr = new import_strict_event_emitter.Emitter();\n    this.stdin = {\n      write: (data) => {\n        if (!this.id) {\n          throw new Error(\"Failed to write to stdin, no process is currently running\");\n        }\n        return this.channel.send(\"shell/stdin\", { data, workerId: this.id });\n      }\n    };\n    this.forwardStdEvents();\n  }\n  id;\n  state;\n  stdout;\n  stderr;\n  stdin;\n  forwardStdEvents() {\n    this.channel.on(\"worker/tty\", (message) => {\n      const { data } = message;\n      if (data.workerId !== this.id) {\n        return;\n      }\n      switch (data.payload.type) {\n        case \"out\": {\n          this.stdout.emit(\"data\", data.payload.data);\n          break;\n        }\n        case \"err\": {\n          this.stderr.emit(\"data\", data.payload.data);\n          break;\n        }\n      }\n    });\n  }\n  async runCommand(command, args, options = {}) {\n    invariant(!this.id, 'Failed to run \"runCommand\" on a ShellProcess: there is already a process running.');\n    const shellInfo = await this.channel.send(\"shell/runCommand\", { command, args, options });\n    invariant(shellInfo, 'Failed to run \"runCommand\" on a ShellProcess: was not able to retrieve a running process.');\n    this.id = shellInfo.id;\n    this.state = \"running\";\n    return shellInfo;\n  }\n  async on(message, listener) {\n    switch (message) {\n      case \"progress\": {\n        this.channel.on(\"worker/progress\", ({ data }) => {\n          listener(data.status);\n        });\n        return;\n      }\n      case \"exit\": {\n        this.channel.on(\"worker/exit\", ({ data }) => {\n          if (data.workerId === this.id) {\n            listener(data.exitCode, data.error);\n          }\n        });\n        return;\n      }\n    }\n  }\n  async kill() {\n    invariant(\n      this.id,\n      'Failed to run \"kill\" on a ShellProcess: there is no process running. Did you forget to run it?'\n    );\n    this.state = \"idle\";\n    await this.channel.send(\"shell/exit\", { id: this.id }).catch((error) => {\n      throw new Error(format('Failed to kill shell with ID \"%s\"', this.id), { cause: error });\n    });\n    this.id = void 0;\n  }\n};\n\n// src/modules/preview.ts\nvar import_deferred_promise2 = __toESM(require_build());\nvar TIMEOUT = 2e4;\nvar PreviewApi = class {\n  constructor(channel) {\n    this.channel = channel;\n  }\n  async waitFor(payload, predicate, timeout = TIMEOUT) {\n    const readyPromise = new import_deferred_promise2.DeferredPromise();\n    const rejectTimeout = setTimeout(() => {\n      readyPromise.reject();\n    }, timeout);\n    const previewInformation = await this.channel.send(\"preview/get/info\", payload).catch((error) => {\n      readyPromise.reject(\n        new Error(\n          format(\n            'Failed to look up preview information for shell ID \"%s\" (port: %d)',\n            payload.sourceShellId,\n            payload.port\n          )\n        )\n      );\n    });\n    const foundPreview = previewInformation && predicate(previewInformation);\n    if (foundPreview) {\n      readyPromise.resolve({\n        url: previewInformation.url,\n        port: previewInformation.port,\n        sourceShellId: previewInformation.sourceShellId\n      });\n    }\n    this.channel.on(\"preview/port/ready\", ({ data }) => {\n      if (!foundPreview && predicate(data)) {\n        readyPromise.resolve({\n          url: data.url,\n          port: data.port,\n          sourceShellId: data.sourceShellId\n        });\n      }\n    });\n    return readyPromise.finally(() => {\n      clearTimeout(rejectTimeout);\n    });\n  }\n  async getByShellId(sourceShellId, timeout) {\n    return this.waitFor({ sourceShellId }, (data) => data.sourceShellId === sourceShellId, timeout).catch((error) => {\n      throw new Error(format('Failed to get shell by ID \"%s\"', sourceShellId), { cause: error });\n    });\n  }\n  async waitForPort(port, timeout) {\n    return this.waitFor({ port }, (data) => data.port === port, timeout).catch((error) => {\n      throw new Error(format(\"Failed to await port %d\", port), { cause: error });\n    });\n  }\n};\n\n// src/Nodebox.ts\nvar DEFAULT_RUNTIME_URL = \"https://nodebox-runtime.codesandbox.io\";\nvar debug2 = createDebug(\"emulator\");\nvar Nodebox = class {\n  constructor(options) {\n    this.options = options;\n    invariant(\n      this.options.iframe,\n      'Failed to create a Nodebox: expected \"iframe\" argument to be a reference to an <iframe> element but got %j',\n      this.options.iframe\n    );\n    this.url = this.options.runtimeUrl || DEFAULT_RUNTIME_URL;\n    this.isConnected = false;\n  }\n  channel = null;\n  isConnected;\n  url;\n  fileSystemApi = null;\n  shellApi = null;\n  previewApi = null;\n  async connect() {\n    const { iframe, cdnUrl } = this.options;\n    debug2(\"[message-sender]: Connecting to node emulator...\");\n    const connectionPromise = new import_deferred_promise3.DeferredPromise();\n    if (!this.url) {\n      connectionPromise.reject(\n        new Error(\"Nodebox URL is missing. Did you forget to provide it when creating this Nodebox instance?\")\n      );\n    }\n    invariant(\n      iframe.contentWindow,\n      \"Failed to create a MessageChannel with the Nodebox iframe: no content window found\"\n    );\n    this.channel = new MessageSender(iframe.contentWindow);\n    const frameLoadPromise = new import_deferred_promise3.DeferredPromise();\n    iframe.setAttribute(\"src\", this.url);\n    iframe.addEventListener(\n      \"load\",\n      () => {\n        frameLoadPromise.resolve();\n      },\n      { once: true }\n    );\n    iframe.addEventListener(\n      \"error\",\n      (event) => {\n        frameLoadPromise.reject(event.error);\n      },\n      { once: true }\n    );\n    await frameLoadPromise;\n    debug2(\"[message-sender]: IFrame loaded...\");\n    await this.channel.handshake();\n    debug2(\"[message-sender]: Handshake completed...\");\n    this.channel.send(\"connect\", {\n      cdnUrl\n    });\n    this.channel.on(\"runtime/ready\", () => {\n      connectionPromise.resolve();\n    });\n    return connectionPromise.then(() => {\n      debug2(\"[message-sender]: Connected to runtime...\");\n      this.isConnected = true;\n    });\n  }\n  get fs() {\n    invariant(\n      this.isConnected,\n      'Failed to access the File System API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.fileSystemApi) {\n      return this.fileSystemApi;\n    }\n    this.fileSystemApi = new FileSystemApi(this.channel);\n    return this.fileSystemApi;\n  }\n  get shell() {\n    invariant(\n      this.isConnected,\n      'Failed to access the Shell API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.shellApi) {\n      return this.shellApi;\n    }\n    this.shellApi = new ShellApi(this.channel);\n    return this.shellApi;\n  }\n  get preview() {\n    invariant(\n      this.isConnected,\n      'Failed to access the Preview API: consumer is not connected. Did you forget to run \"connect()\"?'\n    );\n    if (this.previewApi) {\n      return this.previewApi;\n    }\n    this.previewApi = new PreviewApi(this.channel);\n    return this.previewApi;\n  }\n};\n\n// src/runtime-protocol.types.ts\nvar INJECT_MESSAGE_TYPE = \"INJECT_AND_INVOKE\";\nvar PREVIEW_LOADED_MESSAGE_TYPE = \"PREVIEW_LOADED\";\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L25vZGVib3gvYnVpbGQvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLDJEQUEyRCxhQUFhO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRyx5RUFBeUUsOEJBQThCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsYUFBYTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGFBQWE7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUNBQXlDO0FBQzlELG9CQUFvQjtBQUNwQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxhQUFhO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsYUFBYTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsT0FBTyxFQUFFLGlCQUFpQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxhQUFhO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsYUFBYTtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQU9FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bjb2Rlc2FuZGJveC9ub2RlYm94L2J1aWxkL2luZGV4Lm1qcz9mZjJhIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRQcm90b09mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19jb21tb25KUyA9IChjYiwgbW9kKSA9PiBmdW5jdGlvbiBfX3JlcXVpcmUoKSB7XG4gIHJldHVybiBtb2QgfHwgKDAsIGNiW19fZ2V0T3duUHJvcE5hbWVzKGNiKVswXV0pKChtb2QgPSB7IGV4cG9ydHM6IHt9IH0pLmV4cG9ydHMsIG1vZCksIG1vZC5leHBvcnRzO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvRVNNID0gKG1vZCwgaXNOb2RlTW9kZSwgdGFyZ2V0KSA9PiAodGFyZ2V0ID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIGlzTm9kZU1vZGUgfHwgIW1vZCB8fCAhbW9kLl9fZXNNb2R1bGUgPyBfX2RlZlByb3AodGFyZ2V0LCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0LFxuICBtb2RcbikpO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiB7XG4gIF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX19hY2Nlc3NDaGVjayA9IChvYmosIG1lbWJlciwgbXNnKSA9PiB7XG4gIGlmICghbWVtYmVyLmhhcyhvYmopKVxuICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpXG4gICAgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIik7XG4gIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbnZhciBfX3ByaXZhdGVNZXRob2QgPSAob2JqLCBtZW1iZXIsIG1ldGhvZCkgPT4ge1xuICBfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcImFjY2VzcyBwcml2YXRlIG1ldGhvZFwiKTtcbiAgcmV0dXJuIG1ldGhvZDtcbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jdWlkQDIuMS44L25vZGVfbW9kdWxlcy9jdWlkL2xpYi9wYWQuanNcbnZhciByZXF1aXJlX3BhZCA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jdWlkQDIuMS44L25vZGVfbW9kdWxlcy9jdWlkL2xpYi9wYWQuanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhZChudW0sIHNpemUpIHtcbiAgICAgIHZhciBzID0gXCIwMDAwMDAwMDBcIiArIG51bTtcbiAgICAgIHJldHVybiBzLnN1YnN0cihzLmxlbmd0aCAtIHNpemUpO1xuICAgIH07XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vY3VpZEAyLjEuOC9ub2RlX21vZHVsZXMvY3VpZC9saWIvZmluZ2VycHJpbnQuYnJvd3Nlci5qc1xudmFyIHJlcXVpcmVfZmluZ2VycHJpbnRfYnJvd3NlciA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jdWlkQDIuMS44L25vZGVfbW9kdWxlcy9jdWlkL2xpYi9maW5nZXJwcmludC5icm93c2VyLmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgdmFyIHBhZCA9IHJlcXVpcmVfcGFkKCk7XG4gICAgdmFyIGVudiA9IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgPyB3aW5kb3cgOiBzZWxmO1xuICAgIHZhciBnbG9iYWxDb3VudCA9IE9iamVjdC5rZXlzKGVudikubGVuZ3RoO1xuICAgIHZhciBtaW1lVHlwZXNMZW5ndGggPSBuYXZpZ2F0b3IubWltZVR5cGVzID8gbmF2aWdhdG9yLm1pbWVUeXBlcy5sZW5ndGggOiAwO1xuICAgIHZhciBjbGllbnRJZCA9IHBhZCgobWltZVR5cGVzTGVuZ3RoICsgbmF2aWdhdG9yLnVzZXJBZ2VudC5sZW5ndGgpLnRvU3RyaW5nKDM2KSArIGdsb2JhbENvdW50LnRvU3RyaW5nKDM2KSwgNCk7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmaW5nZXJwcmludCgpIHtcbiAgICAgIHJldHVybiBjbGllbnRJZDtcbiAgICB9O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2N1aWRAMi4xLjgvbm9kZV9tb2R1bGVzL2N1aWQvbGliL2dldFJhbmRvbVZhbHVlLmJyb3dzZXIuanNcbnZhciByZXF1aXJlX2dldFJhbmRvbVZhbHVlX2Jyb3dzZXIgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vY3VpZEAyLjEuOC9ub2RlX21vZHVsZXMvY3VpZC9saWIvZ2V0UmFuZG9tVmFsdWUuYnJvd3Nlci5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIHZhciBnZXRSYW5kb21WYWx1ZTtcbiAgICB2YXIgY3J5cHRvID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAod2luZG93LmNyeXB0byB8fCB3aW5kb3cubXNDcnlwdG8pIHx8IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY3J5cHRvO1xuICAgIGlmIChjcnlwdG8pIHtcbiAgICAgIGxpbSA9IE1hdGgucG93KDIsIDMyKSAtIDE7XG4gICAgICBnZXRSYW5kb21WYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5hYnMoY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdIC8gbGltKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGdldFJhbmRvbVZhbHVlID0gTWF0aC5yYW5kb207XG4gICAgfVxuICAgIHZhciBsaW07XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBnZXRSYW5kb21WYWx1ZTtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jdWlkQDIuMS44L25vZGVfbW9kdWxlcy9jdWlkL2luZGV4LmpzXG52YXIgcmVxdWlyZV9jdWlkID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2N1aWRAMi4xLjgvbm9kZV9tb2R1bGVzL2N1aWQvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICB2YXIgZmluZ2VycHJpbnQgPSByZXF1aXJlX2ZpbmdlcnByaW50X2Jyb3dzZXIoKTtcbiAgICB2YXIgcGFkID0gcmVxdWlyZV9wYWQoKTtcbiAgICB2YXIgZ2V0UmFuZG9tVmFsdWUgPSByZXF1aXJlX2dldFJhbmRvbVZhbHVlX2Jyb3dzZXIoKTtcbiAgICB2YXIgYyA9IDA7XG4gICAgdmFyIGJsb2NrU2l6ZSA9IDQ7XG4gICAgdmFyIGJhc2UgPSAzNjtcbiAgICB2YXIgZGlzY3JldGVWYWx1ZXMgPSBNYXRoLnBvdyhiYXNlLCBibG9ja1NpemUpO1xuICAgIGZ1bmN0aW9uIHJhbmRvbUJsb2NrKCkge1xuICAgICAgcmV0dXJuIHBhZCgoZ2V0UmFuZG9tVmFsdWUoKSAqIGRpc2NyZXRlVmFsdWVzIDw8IDApLnRvU3RyaW5nKGJhc2UpLCBibG9ja1NpemUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzYWZlQ291bnRlcigpIHtcbiAgICAgIGMgPSBjIDwgZGlzY3JldGVWYWx1ZXMgPyBjIDogMDtcbiAgICAgIGMrKztcbiAgICAgIHJldHVybiBjIC0gMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3VpZDMoKSB7XG4gICAgICB2YXIgbGV0dGVyID0gXCJjXCIsIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKGJhc2UpLCBjb3VudGVyID0gcGFkKHNhZmVDb3VudGVyKCkudG9TdHJpbmcoYmFzZSksIGJsb2NrU2l6ZSksIHByaW50ID0gZmluZ2VycHJpbnQoKSwgcmFuZG9tID0gcmFuZG9tQmxvY2soKSArIHJhbmRvbUJsb2NrKCk7XG4gICAgICByZXR1cm4gbGV0dGVyICsgdGltZXN0YW1wICsgY291bnRlciArIHByaW50ICsgcmFuZG9tO1xuICAgIH1cbiAgICBjdWlkMy5zbHVnID0gZnVuY3Rpb24gc2x1ZygpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoMzYpLCBjb3VudGVyID0gc2FmZUNvdW50ZXIoKS50b1N0cmluZygzNikuc2xpY2UoLTQpLCBwcmludCA9IGZpbmdlcnByaW50KCkuc2xpY2UoMCwgMSkgKyBmaW5nZXJwcmludCgpLnNsaWNlKC0xKSwgcmFuZG9tID0gcmFuZG9tQmxvY2soKS5zbGljZSgtMik7XG4gICAgICByZXR1cm4gZGF0ZS5zbGljZSgtMikgKyBjb3VudGVyICsgcHJpbnQgKyByYW5kb207XG4gICAgfTtcbiAgICBjdWlkMy5pc0N1aWQgPSBmdW5jdGlvbiBpc0N1aWQoc3RyaW5nVG9DaGVjaykge1xuICAgICAgaWYgKHR5cGVvZiBzdHJpbmdUb0NoZWNrICE9PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoc3RyaW5nVG9DaGVjay5zdGFydHNXaXRoKFwiY1wiKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBjdWlkMy5pc1NsdWcgPSBmdW5jdGlvbiBpc1NsdWcoc3RyaW5nVG9DaGVjaykge1xuICAgICAgaWYgKHR5cGVvZiBzdHJpbmdUb0NoZWNrICE9PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB2YXIgc3RyaW5nTGVuZ3RoID0gc3RyaW5nVG9DaGVjay5sZW5ndGg7XG4gICAgICBpZiAoc3RyaW5nTGVuZ3RoID49IDcgJiYgc3RyaW5nTGVuZ3RoIDw9IDEwKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIGN1aWQzLmZpbmdlcnByaW50ID0gZmluZ2VycHJpbnQ7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBjdWlkMztcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3Blbi1kcmFmdCtkZWZlcnJlZC1wcm9taXNlQDIuMS4wL25vZGVfbW9kdWxlcy9Ab3Blbi1kcmFmdC9kZWZlcnJlZC1wcm9taXNlL2J1aWxkL2NyZWF0ZURlZmVycmVkRXhlY3V0b3IuanNcbnZhciByZXF1aXJlX2NyZWF0ZURlZmVycmVkRXhlY3V0b3IgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW4tZHJhZnQrZGVmZXJyZWQtcHJvbWlzZUAyLjEuMC9ub2RlX21vZHVsZXMvQG9wZW4tZHJhZnQvZGVmZXJyZWQtcHJvbWlzZS9idWlsZC9jcmVhdGVEZWZlcnJlZEV4ZWN1dG9yLmpzXCIoZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLmNyZWF0ZURlZmVycmVkRXhlY3V0b3IgPSB2b2lkIDA7XG4gICAgZnVuY3Rpb24gY3JlYXRlRGVmZXJyZWRFeGVjdXRvcigpIHtcbiAgICAgIGNvbnN0IGV4ZWN1dG9yID0gKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBleGVjdXRvci5zdGF0ZSA9IFwicGVuZGluZ1wiO1xuICAgICAgICBleGVjdXRvci5yZXNvbHZlID0gKGRhdGEpID0+IHtcbiAgICAgICAgICBpZiAoZXhlY3V0b3Iuc3RhdGUgIT09IFwicGVuZGluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGV4ZWN1dG9yLnJlc3VsdCA9IGRhdGE7XG4gICAgICAgICAgY29uc3Qgb25GdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGV4ZWN1dG9yLnN0YXRlID0gXCJmdWxmaWxsZWRcIjtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEgaW5zdGFuY2VvZiBQcm9taXNlID8gZGF0YSA6IFByb21pc2UucmVzb2x2ZShkYXRhKS50aGVuKG9uRnVsZmlsbGVkKSk7XG4gICAgICAgIH07XG4gICAgICAgIGV4ZWN1dG9yLnJlamVjdCA9IChyZWFzb24pID0+IHtcbiAgICAgICAgICBpZiAoZXhlY3V0b3Iuc3RhdGUgIT09IFwicGVuZGluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgICAgIGV4ZWN1dG9yLnN0YXRlID0gXCJyZWplY3RlZFwiO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXhlY3V0b3IucmVqZWN0aW9uUmVhc29uID0gcmVhc29uKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gZXhlY3V0b3I7XG4gICAgfVxuICAgIGV4cG9ydHMuY3JlYXRlRGVmZXJyZWRFeGVjdXRvciA9IGNyZWF0ZURlZmVycmVkRXhlY3V0b3I7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW4tZHJhZnQrZGVmZXJyZWQtcHJvbWlzZUAyLjEuMC9ub2RlX21vZHVsZXMvQG9wZW4tZHJhZnQvZGVmZXJyZWQtcHJvbWlzZS9idWlsZC9EZWZlcnJlZFByb21pc2UuanNcbnZhciByZXF1aXJlX0RlZmVycmVkUHJvbWlzZSA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3Blbi1kcmFmdCtkZWZlcnJlZC1wcm9taXNlQDIuMS4wL25vZGVfbW9kdWxlcy9Ab3Blbi1kcmFmdC9kZWZlcnJlZC1wcm9taXNlL2J1aWxkL0RlZmVycmVkUHJvbWlzZS5qc1wiKGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5EZWZlcnJlZFByb21pc2UgPSB2b2lkIDA7XG4gICAgdmFyIGNyZWF0ZURlZmVycmVkRXhlY3V0b3JfMSA9IHJlcXVpcmVfY3JlYXRlRGVmZXJyZWRFeGVjdXRvcigpO1xuICAgIHZhciBEZWZlcnJlZFByb21pc2U0ID0gY2xhc3MgZXh0ZW5kcyBQcm9taXNlIHtcbiAgICAgICNleGVjdXRvcjtcbiAgICAgIHJlc29sdmU7XG4gICAgICByZWplY3Q7XG4gICAgICBjb25zdHJ1Y3RvcihleGVjdXRvciA9IG51bGwpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyZWRFeGVjdXRvciA9ICgwLCBjcmVhdGVEZWZlcnJlZEV4ZWN1dG9yXzEuY3JlYXRlRGVmZXJyZWRFeGVjdXRvcikoKTtcbiAgICAgICAgc3VwZXIoKG9yaWdpbmFsUmVzb2x2ZSwgb3JpZ2luYWxSZWplY3QpID0+IHtcbiAgICAgICAgICBkZWZlcnJlZEV4ZWN1dG9yKG9yaWdpbmFsUmVzb2x2ZSwgb3JpZ2luYWxSZWplY3QpO1xuICAgICAgICAgIGV4ZWN1dG9yPy4oZGVmZXJyZWRFeGVjdXRvci5yZXNvbHZlLCBkZWZlcnJlZEV4ZWN1dG9yLnJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNleGVjdXRvciA9IGRlZmVycmVkRXhlY3V0b3I7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHRoaXMuI2V4ZWN1dG9yLnJlc29sdmU7XG4gICAgICAgIHRoaXMucmVqZWN0ID0gdGhpcy4jZXhlY3V0b3IucmVqZWN0O1xuICAgICAgfVxuICAgICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXhlY3V0b3Iuc3RhdGU7XG4gICAgICB9XG4gICAgICBnZXQgcmVqZWN0aW9uUmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXhlY3V0b3IucmVqZWN0aW9uUmVhc29uO1xuICAgICAgfVxuICAgICAgdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZGVjb3JhdGUoc3VwZXIudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkpO1xuICAgICAgfVxuICAgICAgY2F0Y2gob25SZWplY3RlZCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZGVjb3JhdGUoc3VwZXIuY2F0Y2gob25SZWplY3RlZCkpO1xuICAgICAgfVxuICAgICAgZmluYWxseShvbmZpbmFsbHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2RlY29yYXRlKHN1cGVyLmZpbmFsbHkob25maW5hbGx5KSk7XG4gICAgICB9XG4gICAgICAjZGVjb3JhdGUocHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocHJvbWlzZSwge1xuICAgICAgICAgIHJlc29sdmU6IHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogdGhpcy5yZXNvbHZlIH0sXG4gICAgICAgICAgcmVqZWN0OiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHRoaXMucmVqZWN0IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBleHBvcnRzLkRlZmVycmVkUHJvbWlzZSA9IERlZmVycmVkUHJvbWlzZTQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW4tZHJhZnQrZGVmZXJyZWQtcHJvbWlzZUAyLjEuMC9ub2RlX21vZHVsZXMvQG9wZW4tZHJhZnQvZGVmZXJyZWQtcHJvbWlzZS9idWlsZC9pbmRleC5qc1xudmFyIHJlcXVpcmVfYnVpbGQgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW4tZHJhZnQrZGVmZXJyZWQtcHJvbWlzZUAyLjEuMC9ub2RlX21vZHVsZXMvQG9wZW4tZHJhZnQvZGVmZXJyZWQtcHJvbWlzZS9idWlsZC9pbmRleC5qc1wiKGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgX19jcmVhdGVCaW5kaW5nID0gZXhwb3J0cyAmJiBleHBvcnRzLl9fY3JlYXRlQmluZGluZyB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgICBpZiAoazIgPT09IHZvaWQgMClcbiAgICAgICAgazIgPSBrO1xuICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gbVtrXTtcbiAgICAgICAgfSB9O1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbiAgICB9IDogZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICAgIGlmIChrMiA9PT0gdm9pZCAwKVxuICAgICAgICBrMiA9IGs7XG4gICAgICBvW2syXSA9IG1ba107XG4gICAgfSk7XG4gICAgdmFyIF9fZXhwb3J0U3RhciA9IGV4cG9ydHMgJiYgZXhwb3J0cy5fX2V4cG9ydFN0YXIgfHwgZnVuY3Rpb24obSwgZXhwb3J0czIpIHtcbiAgICAgIGZvciAodmFyIHAgaW4gbSlcbiAgICAgICAgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0czIsIHApKVxuICAgICAgICAgIF9fY3JlYXRlQmluZGluZyhleHBvcnRzMiwgbSwgcCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnRTdGFyKHJlcXVpcmVfY3JlYXRlRGVmZXJyZWRFeGVjdXRvcigpLCBleHBvcnRzKTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZV9EZWZlcnJlZFByb21pc2UoKSwgZXhwb3J0cyk7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3RyaWN0LWV2ZW50LWVtaXR0ZXJAMC40LjMvbm9kZV9tb2R1bGVzL3N0cmljdC1ldmVudC1lbWl0dGVyL2xpYi9NZW1vcnlMZWFrRXJyb3IuanNcbnZhciByZXF1aXJlX01lbW9yeUxlYWtFcnJvciA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdHJpY3QtZXZlbnQtZW1pdHRlckAwLjQuMy9ub2RlX21vZHVsZXMvc3RyaWN0LWV2ZW50LWVtaXR0ZXIvbGliL01lbW9yeUxlYWtFcnJvci5qc1wiKGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5NZW1vcnlMZWFrRXJyb3IgPSB2b2lkIDA7XG4gICAgdmFyIE1lbW9yeUxlYWtFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICAgICAgZW1pdHRlcjtcbiAgICAgIHR5cGU7XG4gICAgICBjb3VudDtcbiAgICAgIGNvbnN0cnVjdG9yKGVtaXR0ZXIsIHR5cGUsIGNvdW50KSB7XG4gICAgICAgIHN1cGVyKGBQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICR7Y291bnR9ICR7dHlwZS50b1N0cmluZygpfSBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0YCk7XG4gICAgICAgIHRoaXMuZW1pdHRlciA9IGVtaXR0ZXI7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmdcIjtcbiAgICAgIH1cbiAgICB9O1xuICAgIGV4cG9ydHMuTWVtb3J5TGVha0Vycm9yID0gTWVtb3J5TGVha0Vycm9yO1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N0cmljdC1ldmVudC1lbWl0dGVyQDAuNC4zL25vZGVfbW9kdWxlcy9zdHJpY3QtZXZlbnQtZW1pdHRlci9saWIvRW1pdHRlci5qc1xudmFyIHJlcXVpcmVfRW1pdHRlciA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdHJpY3QtZXZlbnQtZW1pdHRlckAwLjQuMy9ub2RlX21vZHVsZXMvc3RyaWN0LWV2ZW50LWVtaXR0ZXIvbGliL0VtaXR0ZXIuanNcIihleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMuRW1pdHRlciA9IHZvaWQgMDtcbiAgICB2YXIgTWVtb3J5TGVha0Vycm9yXzEgPSByZXF1aXJlX01lbW9yeUxlYWtFcnJvcigpO1xuICAgIHZhciBfZXZlbnRzLCBfbWF4TGlzdGVuZXJzLCBfaGFzV2FybmVkQWJvdXRQb3RlbnRpYWxNZW1vcnR5TGVhaywgX2dldExpc3RlbmVycywgZ2V0TGlzdGVuZXJzX2ZuLCBfcmVtb3ZlTGlzdGVuZXIsIHJlbW92ZUxpc3RlbmVyX2ZuLCBfd3JhcE9uY2VMaXN0ZW5lciwgd3JhcE9uY2VMaXN0ZW5lcl9mbiwgX2ludGVybmFsRW1pdCwgaW50ZXJuYWxFbWl0X2ZuO1xuICAgIHZhciBfRW1pdHRlciA9IGNsYXNzIHtcbiAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBfX3ByaXZhdGVBZGQodGhpcywgX2dldExpc3RlbmVycyk7XG4gICAgICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfcmVtb3ZlTGlzdGVuZXIpO1xuICAgICAgICBfX3ByaXZhdGVBZGQodGhpcywgX3dyYXBPbmNlTGlzdGVuZXIpO1xuICAgICAgICBfX3ByaXZhdGVBZGQodGhpcywgX2ludGVybmFsRW1pdCk7XG4gICAgICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfZXZlbnRzLCB2b2lkIDApO1xuICAgICAgICBfX3ByaXZhdGVBZGQodGhpcywgX21heExpc3RlbmVycywgdm9pZCAwKTtcbiAgICAgICAgX19wcml2YXRlQWRkKHRoaXMsIF9oYXNXYXJuZWRBYm91dFBvdGVudGlhbE1lbW9ydHlMZWFrLCB2b2lkIDApO1xuICAgICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2V2ZW50cywgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7XG4gICAgICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfbWF4TGlzdGVuZXJzLCBfRW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzKTtcbiAgICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9oYXNXYXJuZWRBYm91dFBvdGVudGlhbE1lbW9ydHlMZWFrLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBzdGF0aWMgbGlzdGVuZXJDb3VudChlbWl0dGVyLCBldmVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudChldmVudE5hbWUpO1xuICAgICAgfVxuICAgICAgc2V0TWF4TGlzdGVuZXJzKG1heExpc3RlbmVycykge1xuICAgICAgICBfX3ByaXZhdGVTZXQodGhpcywgX21heExpc3RlbmVycywgbWF4TGlzdGVuZXJzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX21heExpc3RlbmVycyk7XG4gICAgICB9XG4gICAgICBldmVudE5hbWVzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShfX3ByaXZhdGVHZXQodGhpcywgX2V2ZW50cykua2V5cygpKTtcbiAgICAgIH1cbiAgICAgIGVtaXQoZXZlbnROYW1lLCAuLi5kYXRhKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfZ2V0TGlzdGVuZXJzLCBnZXRMaXN0ZW5lcnNfZm4pLmNhbGwodGhpcywgZXZlbnROYW1lKTtcbiAgICAgICAgbGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgICBhZGRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfaW50ZXJuYWxFbWl0LCBpbnRlcm5hbEVtaXRfZm4pLmNhbGwodGhpcywgXCJuZXdMaXN0ZW5lclwiLCBldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgICAgY29uc3QgbmV4dExpc3RlbmVycyA9IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfZ2V0TGlzdGVuZXJzLCBnZXRMaXN0ZW5lcnNfZm4pLmNhbGwodGhpcywgZXZlbnROYW1lKS5jb25jYXQobGlzdGVuZXIpO1xuICAgICAgICBfX3ByaXZhdGVHZXQodGhpcywgX2V2ZW50cykuc2V0KGV2ZW50TmFtZSwgbmV4dExpc3RlbmVycyk7XG4gICAgICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX21heExpc3RlbmVycykgPiAwICYmIHRoaXMubGlzdGVuZXJDb3VudChldmVudE5hbWUpID4gX19wcml2YXRlR2V0KHRoaXMsIF9tYXhMaXN0ZW5lcnMpICYmICFfX3ByaXZhdGVHZXQodGhpcywgX2hhc1dhcm5lZEFib3V0UG90ZW50aWFsTWVtb3J0eUxlYWspKSB7XG4gICAgICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9oYXNXYXJuZWRBYm91dFBvdGVudGlhbE1lbW9ydHlMZWFrLCB0cnVlKTtcbiAgICAgICAgICBjb25zdCBtZW1vcnlMZWFrV2FybmluZyA9IG5ldyBNZW1vcnlMZWFrRXJyb3JfMS5NZW1vcnlMZWFrRXJyb3IodGhpcywgZXZlbnROYW1lLCB0aGlzLmxpc3RlbmVyQ291bnQoZXZlbnROYW1lKSk7XG4gICAgICAgICAgY29uc29sZS53YXJuKG1lbW9yeUxlYWtXYXJuaW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIG9uKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICBvbmNlKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoZXZlbnROYW1lLCBfX3ByaXZhdGVNZXRob2QodGhpcywgX3dyYXBPbmNlTGlzdGVuZXIsIHdyYXBPbmNlTGlzdGVuZXJfZm4pLmNhbGwodGhpcywgZXZlbnROYW1lLCBsaXN0ZW5lcikpO1xuICAgICAgfVxuICAgICAgcHJlcGVuZExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9nZXRMaXN0ZW5lcnMsIGdldExpc3RlbmVyc19mbikuY2FsbCh0aGlzLCBldmVudE5hbWUpO1xuICAgICAgICBpZiAobGlzdGVuZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBuZXh0TGlzdGVuZXJzID0gW2xpc3RlbmVyXS5jb25jYXQobGlzdGVuZXJzKTtcbiAgICAgICAgICBfX3ByaXZhdGVHZXQodGhpcywgX2V2ZW50cykuc2V0KGV2ZW50TmFtZSwgbmV4dExpc3RlbmVycyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9ldmVudHMpLnNldChldmVudE5hbWUsIGxpc3RlbmVycy5jb25jYXQobGlzdGVuZXIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHByZXBlbmRPbmNlTGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVwZW5kTGlzdGVuZXIoZXZlbnROYW1lLCBfX3ByaXZhdGVNZXRob2QodGhpcywgX3dyYXBPbmNlTGlzdGVuZXIsIHdyYXBPbmNlTGlzdGVuZXJfZm4pLmNhbGwodGhpcywgZXZlbnROYW1lLCBsaXN0ZW5lcikpO1xuICAgICAgfVxuICAgICAgcmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBfX3ByaXZhdGVNZXRob2QodGhpcywgX2dldExpc3RlbmVycywgZ2V0TGlzdGVuZXJzX2ZuKS5jYWxsKHRoaXMsIGV2ZW50TmFtZSk7XG4gICAgICAgIGlmIChsaXN0ZW5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfcmVtb3ZlTGlzdGVuZXIsIHJlbW92ZUxpc3RlbmVyX2ZuKS5jYWxsKHRoaXMsIGxpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgICAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfZXZlbnRzKS5zZXQoZXZlbnROYW1lLCBsaXN0ZW5lcnMpO1xuICAgICAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfaW50ZXJuYWxFbWl0LCBpbnRlcm5hbEVtaXRfZm4pLmNhbGwodGhpcywgXCJyZW1vdmVMaXN0ZW5lclwiLCBldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIG9mZihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50TmFtZSkge1xuICAgICAgICBpZiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9ldmVudHMpLmRlbGV0ZShldmVudE5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfZXZlbnRzKS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgbGlzdGVuZXJzKGV2ZW50TmFtZSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShfX3ByaXZhdGVNZXRob2QodGhpcywgX2dldExpc3RlbmVycywgZ2V0TGlzdGVuZXJzX2ZuKS5jYWxsKHRoaXMsIGV2ZW50TmFtZSkpO1xuICAgICAgfVxuICAgICAgbGlzdGVuZXJDb3VudChldmVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfZ2V0TGlzdGVuZXJzLCBnZXRMaXN0ZW5lcnNfZm4pLmNhbGwodGhpcywgZXZlbnROYW1lKS5sZW5ndGg7XG4gICAgICB9XG4gICAgICByYXdMaXN0ZW5lcnMoZXZlbnROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVycyhldmVudE5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIEVtaXR0ZXIyID0gX0VtaXR0ZXI7XG4gICAgX2V2ZW50cyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgX21heExpc3RlbmVycyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgX2hhc1dhcm5lZEFib3V0UG90ZW50aWFsTWVtb3J0eUxlYWsgPSBuZXcgV2Vha01hcCgpO1xuICAgIF9nZXRMaXN0ZW5lcnMgPSBuZXcgV2Vha1NldCgpO1xuICAgIGdldExpc3RlbmVyc19mbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xuICAgICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfZXZlbnRzKS5nZXQoZXZlbnROYW1lKSB8fCBbXTtcbiAgICB9O1xuICAgIF9yZW1vdmVMaXN0ZW5lciA9IG5ldyBXZWFrU2V0KCk7XG4gICAgcmVtb3ZlTGlzdGVuZXJfZm4gPSBmdW5jdGlvbihsaXN0ZW5lcnMsIGxpc3RlbmVyKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtdO1xuICAgIH07XG4gICAgX3dyYXBPbmNlTGlzdGVuZXIgPSBuZXcgV2Vha1NldCgpO1xuICAgIHdyYXBPbmNlTGlzdGVuZXJfZm4gPSBmdW5jdGlvbihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICBjb25zdCBvbmNlTGlzdGVuZXIgPSAoLi4uZGF0YSkgPT4ge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgb25jZUxpc3RlbmVyKTtcbiAgICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgZGF0YSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIG9uY2VMaXN0ZW5lcjtcbiAgICB9O1xuICAgIF9pbnRlcm5hbEVtaXQgPSBuZXcgV2Vha1NldCgpO1xuICAgIGludGVybmFsRW1pdF9mbiA9IGZ1bmN0aW9uKGludGVybmFsRXZlbnROYW1lLCBldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICB0aGlzLmVtaXQoXG4gICAgICAgIGludGVybmFsRXZlbnROYW1lLFxuICAgICAgICAuLi5bZXZlbnROYW1lLCBsaXN0ZW5lcl1cbiAgICAgICk7XG4gICAgfTtcbiAgICBfX3B1YmxpY0ZpZWxkKEVtaXR0ZXIyLCBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiwgMTApO1xuICAgIGV4cG9ydHMuRW1pdHRlciA9IEVtaXR0ZXIyO1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N0cmljdC1ldmVudC1lbWl0dGVyQDAuNC4zL25vZGVfbW9kdWxlcy9zdHJpY3QtZXZlbnQtZW1pdHRlci9saWIvaW5kZXguanNcbnZhciByZXF1aXJlX2xpYiA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdHJpY3QtZXZlbnQtZW1pdHRlckAwLjQuMy9ub2RlX21vZHVsZXMvc3RyaWN0LWV2ZW50LWVtaXR0ZXIvbGliL2luZGV4LmpzXCIoZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBleHBvcnRzICYmIGV4cG9ydHMuX19jcmVhdGVCaW5kaW5nIHx8IChPYmplY3QuY3JlYXRlID8gZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICAgIGlmIChrMiA9PT0gdm9pZCAwKVxuICAgICAgICBrMiA9IGs7XG4gICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBtW2tdO1xuICAgICAgICB9IH07XG4gICAgICB9XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xuICAgIH0gOiBmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgICAgaWYgKGsyID09PSB2b2lkIDApXG4gICAgICAgIGsyID0gaztcbiAgICAgIG9bazJdID0gbVtrXTtcbiAgICB9KTtcbiAgICB2YXIgX19leHBvcnRTdGFyID0gZXhwb3J0cyAmJiBleHBvcnRzLl9fZXhwb3J0U3RhciB8fCBmdW5jdGlvbihtLCBleHBvcnRzMikge1xuICAgICAgZm9yICh2YXIgcCBpbiBtKVxuICAgICAgICBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzMiwgcCkpXG4gICAgICAgICAgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMyLCBtLCBwKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydFN0YXIocmVxdWlyZV9FbWl0dGVyKCksIGV4cG9ydHMpO1xuICAgIF9fZXhwb3J0U3RhcihyZXF1aXJlX01lbW9yeUxlYWtFcnJvcigpLCBleHBvcnRzKTtcbiAgfVxufSk7XG5cbi8vIHNyYy9tZXNzYWdlcy50c1xudmFyIGltcG9ydF9jdWlkID0gX190b0VTTShyZXF1aXJlX2N1aWQoKSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9vdXR2YXJpYW50QDEuNC4wL25vZGVfbW9kdWxlcy9vdXR2YXJpYW50L2xpYi9pbmRleC5tanNcbnZhciBQT1NJVElPTkFMU19FWFAgPSAvKCU/KSglKFtzZGpvXSkpL2c7XG5mdW5jdGlvbiBzZXJpYWxpemVQb3NpdGlvbmFsKHBvc2l0aW9uYWwsIGZsYWcpIHtcbiAgc3dpdGNoIChmbGFnKSB7XG4gICAgY2FzZSBcInNcIjpcbiAgICAgIHJldHVybiBwb3NpdGlvbmFsO1xuICAgIGNhc2UgXCJkXCI6XG4gICAgY2FzZSBcImlcIjpcbiAgICAgIHJldHVybiBOdW1iZXIocG9zaXRpb25hbCk7XG4gICAgY2FzZSBcImpcIjpcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShwb3NpdGlvbmFsKTtcbiAgICBjYXNlIFwib1wiOiB7XG4gICAgICBpZiAodHlwZW9mIHBvc2l0aW9uYWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uYWw7XG4gICAgICB9XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkocG9zaXRpb25hbCk7XG4gICAgICBpZiAoanNvbiA9PT0gXCJ7fVwiIHx8IGpzb24gPT09IFwiW11cIiB8fCAvXlxcW29iamVjdCAuKz9cXF0kLy50ZXN0KGpzb24pKSB7XG4gICAgICAgIHJldHVybiBwb3NpdGlvbmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBmb3JtYXQobWVzc2FnZSwgLi4ucG9zaXRpb25hbHMpIHtcbiAgaWYgKHBvc2l0aW9uYWxzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGxldCBwb3NpdGlvbmFsSW5kZXggPSAwO1xuICBsZXQgZm9ybWF0dGVkTWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZShcbiAgICBQT1NJVElPTkFMU19FWFAsXG4gICAgKG1hdGNoLCBpc0VzY2FwZWQsIF8sIGZsYWcpID0+IHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uYWwgPSBwb3NpdGlvbmFsc1twb3NpdGlvbmFsSW5kZXhdO1xuICAgICAgY29uc3QgdmFsdWUgPSBzZXJpYWxpemVQb3NpdGlvbmFsKHBvc2l0aW9uYWwsIGZsYWcpO1xuICAgICAgaWYgKCFpc0VzY2FwZWQpIHtcbiAgICAgICAgcG9zaXRpb25hbEluZGV4Kys7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9XG4gICk7XG4gIGlmIChwb3NpdGlvbmFsSW5kZXggPCBwb3NpdGlvbmFscy5sZW5ndGgpIHtcbiAgICBmb3JtYXR0ZWRNZXNzYWdlICs9IGAgJHtwb3NpdGlvbmFscy5zbGljZShwb3NpdGlvbmFsSW5kZXgpLmpvaW4oXCIgXCIpfWA7XG4gIH1cbiAgZm9ybWF0dGVkTWVzc2FnZSA9IGZvcm1hdHRlZE1lc3NhZ2UucmVwbGFjZSgvJXsyLDJ9L2csIFwiJVwiKTtcbiAgcmV0dXJuIGZvcm1hdHRlZE1lc3NhZ2U7XG59XG52YXIgU1RBQ0tfRlJBTUVTX1RPX0lHTk9SRSA9IDI7XG5mdW5jdGlvbiBjbGVhbkVycm9yU3RhY2soZXJyb3IpIHtcbiAgaWYgKCFlcnJvci5zdGFjaykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBuZXh0U3RhY2sgPSBlcnJvci5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgbmV4dFN0YWNrLnNwbGljZSgxLCBTVEFDS19GUkFNRVNfVE9fSUdOT1JFKTtcbiAgZXJyb3Iuc3RhY2sgPSBuZXh0U3RhY2suam9pbihcIlxcblwiKTtcbn1cbnZhciBJbnZhcmlhbnRFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCAuLi5wb3NpdGlvbmFscykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy5uYW1lID0gXCJJbnZhcmlhbnQgVmlvbGF0aW9uXCI7XG4gICAgdGhpcy5tZXNzYWdlID0gZm9ybWF0KG1lc3NhZ2UsIC4uLnBvc2l0aW9uYWxzKTtcbiAgICBjbGVhbkVycm9yU3RhY2sodGhpcyk7XG4gIH1cbn07XG52YXIgaW52YXJpYW50ID0gKHByZWRpY2F0ZSwgbWVzc2FnZSwgLi4ucG9zaXRpb25hbHMpID0+IHtcbiAgaWYgKCFwcmVkaWNhdGUpIHtcbiAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IobWVzc2FnZSwgLi4ucG9zaXRpb25hbHMpO1xuICB9XG59O1xuaW52YXJpYW50LmFzID0gKEVycm9yQ29uc3RydWN0b3IsIHByZWRpY2F0ZSwgbWVzc2FnZSwgLi4ucG9zaXRpb25hbHMpID0+IHtcbiAgaWYgKCFwcmVkaWNhdGUpIHtcbiAgICBjb25zdCBpc0NvbnN0cnVjdG9yID0gRXJyb3JDb25zdHJ1Y3Rvci5wcm90b3R5cGUubmFtZSAhPSBudWxsO1xuICAgIGNvbnN0IGVycm9yID0gaXNDb25zdHJ1Y3RvciA/IG5ldyBFcnJvckNvbnN0cnVjdG9yKGZvcm1hdChtZXNzYWdlLCBwb3NpdGlvbmFscykpIDogRXJyb3JDb25zdHJ1Y3Rvcihmb3JtYXQobWVzc2FnZSwgcG9zaXRpb25hbHMpKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuLy8gc3JjL21lc3NhZ2VzLnRzXG52YXIgaW1wb3J0X2RlZmVycmVkX3Byb21pc2UgPSBfX3RvRVNNKHJlcXVpcmVfYnVpbGQoKSk7XG5cbi8vIHNyYy9sb2dnZXIudHNcbnZhciBGTEFHID0gd2luZG93LmxvY2FsU3RvcmFnZVtcIkNTQl9FTVVMQVRPUl9ERUJVR1wiXTtcbnZhciBERUZBVUxUID0gXCJcXHgxQlswbVwiO1xudmFyIEdSRUVOID0gXCJcXHgxQlszMjsxbVwiO1xudmFyIFJFRCA9IFwiXFx4MUJbMzFtXCI7XG52YXIgQkxVRSA9IFwiXFx4MUJbMzRtXCI7XG52YXIgWUVMTE9XID0gXCJcXHgxQlszMzsxbVwiO1xudmFyIE1BR0VOVEEgPSBcIlxceDFCWzM1OzFtXCI7XG52YXIgQ1lBTiA9IFwiXFx4MUJbMzY7MW1cIjtcbnZhciBDT0xPUl9TQ09QRSA9IHtcbiAgcHJldmlldzogWUVMTE9XLFxuICBlbXVsYXRvcjogTUFHRU5UQSxcbiAgcnVudGltZTogQ1lBTixcbiAgYnJpZGdlOiBCTFVFLFxuICBcInJ1bnRpbWU6d29ya2VyXCI6IENZQU5cbn07XG5mdW5jdGlvbiBjcmVhdGVEZWJ1ZyhzY29wZSkge1xuICByZXR1cm4gZnVuY3Rpb24gZGVidWczKG1lc3NhZ2UsIC4uLmRhdGEpIHtcbiAgICBpZiAoRkxBRyA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoXCJzZW5kZXJcIikpXG4gICAgICAgICAgcmV0dXJuIGAke0dSRUVOfXNlbmRlcmA7XG4gICAgICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKFwicmVjZWl2ZXJcIikpXG4gICAgICAgICAgcmV0dXJuIGAke1JFRH1yZWNlaXZlcmA7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGNsZWFuTWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvXFxbLitcXF06LywgXCJcIik7XG4gICAgICBjb25zb2xlLmRlYnVnKGAke0NPTE9SX1NDT1BFW3Njb3BlXX0ke3Njb3BlfToke2RpcmVjdGlvbigpfSR7REVGQVVMVH06JHtjbGVhbk1lc3NhZ2V9YCwgLi4uZGF0YSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnZXMudHNcbnZhciBkZWJ1ZyA9IGNyZWF0ZURlYnVnKFwiZW11bGF0b3JcIik7XG52YXIgTWVzc2FnZVJlY2VpdmVyID0gY2xhc3Mge1xuICBlbWl0dGVyO1xuICBzZW5kZXJQb3J0ID0gbnVsbDtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbWl0dGVyID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgdGhpcy53YWl0Rm9ySGFuZHNoYWtlKCk7XG4gIH1cbiAgd2FpdEZvckhhbmRzaGFrZSgpIHtcbiAgICBjb25zdCBoYW5kc2hha2VQcm9taXNlID0gbmV3IGltcG9ydF9kZWZlcnJlZF9wcm9taXNlLkRlZmVycmVkUHJvbWlzZSgpO1xuICAgIGNvbnN0IGhhbmRzaGFrZUxpc3RlbmVyID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gbWVzc2FnZTtcbiAgICAgIGRlYnVnKFwiW21lc3NhZ2UtcmVjZWl2ZXJdOiBpbmNvbWluZ1wiLCBtZXNzYWdlKTtcbiAgICAgIGlmIChkYXRhLnR5cGUgPT09IFwiaW50ZXJuYWwvaGFuZHNoYWtlXCIpIHtcbiAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgIG1lc3NhZ2UucG9ydHMubGVuZ3RoID4gMCxcbiAgICAgICAgICBcIkZhaWxlZCB0byBjb25maXJtIGEgTWVzc2FnZVJlY2VpdmVyIGhhbmRzaGFrZTogcmVjZWl2ZWQgZXZlbnQgaGFzIG5vIHBvcnRzXCJcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zZW5kZXJQb3J0ID0gbWVzc2FnZS5wb3J0c1swXTtcbiAgICAgICAgdGhpcy5hZGRNZXNzYWdlTGlzdGVuZXIoKTtcbiAgICAgICAgZGVidWcoXCJbbWVzc2FnZS1yZWNlaXZlcl06IGhhbmRzaGFrZSByZWNlaXZlZCFcIiwgdGhpcy5zZW5kZXJQb3J0KTtcbiAgICAgICAgdGhpcy5zZW5kKFwiaW50ZXJuYWwvaGFuZHNoYWtlL2RvbmVcIik7XG4gICAgICAgIGRlYnVnKFwiW21lc3NhZ2UtcmVjZWl2ZXJdOiBmaW5pc2ggaGFuZHNoYWtlXCIpO1xuICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRzaGFrZUxpc3RlbmVyKTtcbiAgICBoYW5kc2hha2VQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRzaGFrZUxpc3RlbmVyKTtcbiAgICB9KTtcbiAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJpbnRlcm5hbC9yZWFkeVwiIH0sIFwiKlwiKTtcbiAgICByZXR1cm4gaGFuZHNoYWtlUHJvbWlzZTtcbiAgfVxuICBhZGRNZXNzYWdlTGlzdGVuZXIoKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy5zZW5kZXJQb3J0LFxuICAgICAgXCJbTWVzc2FnZVJlY2VpdmVyXSBGYWlsZWQgdG8gYWRkIGEgbWVzc2FnZSBsaXN0ZW5lcjogc2VuZGVyIHBvcnQgaXMgbm90IGRlZmluZWQuIERpZCB5b3UgZm9yZ2V0IHRvIGF3YWl0IGEgaGFuZHNoYWtlP1wiXG4gICAgKTtcbiAgICB0aGlzLnNlbmRlclBvcnQub25tZXNzYWdlID0gKGV2dCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGV2dC5kYXRhO1xuICAgICAgaWYgKGRhdGEudHlwZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZW1pdHRlci5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgTWVzc2FnZUV2ZW50KGRhdGEudHlwZSwge1xuICAgICAgICAgIGRhdGE6IGRhdGEucGF5bG9hZFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9O1xuICB9XG4gIG9uKGV2ZW50LCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgIHRoaXMuZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgZXZlbnQsXG4gICAgICBhc3luYyAobWVzc2FnZSkgPT4ge1xuICAgICAgICBpZiAoIShtZXNzYWdlIGluc3RhbmNlb2YgTWVzc2FnZUV2ZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG9wZXJhdGlvbklkLCBwYXlsb2FkIH0gPSBtZXNzYWdlLmRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbGlzdGVuZXJQYXlsb2FkID0gYXdhaXQgbGlzdGVuZXIocGF5bG9hZCk7XG4gICAgICAgICAgdGhpcy5zZW5kKFwiaW50ZXJuYWwvb3BlcmF0aW9uL2RvbmVcIiwgeyBvcGVyYXRpb25JZCwgbGlzdGVuZXJQYXlsb2FkIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmQoXCJpbnRlcm5hbC9vcGVyYXRpb24vZmFpbGVkXCIsIHsgb3BlcmF0aW9uSWQsIGVycm9yIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9XG4gIHNlbmQoZXZlbnQsIC4uLmRhdGEpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLnNlbmRlclBvcnQsXG4gICAgICAnW01lc3NhZ2VSZWNlaXZlcl0gRmFpbGVkIHRvIHNlbmQgYSBtZXNzYWdlIFwiJWpcIjogc2VuZGVyIHBvcnQgaXMgbm90IGRlZmluZWQuIERpZCB5b3UgZm9yZ2V0IHRvIGF3YWl0IGEgaGFuZHNoYWtlPycsXG4gICAgICBldmVudFxuICAgICk7XG4gICAgY29uc3QgcGF5bG9hZCA9IGRhdGFbMF0gfHwge307XG4gICAgZGVidWcoJ1ttZXNzYWdlLXJlY2VpdmVyXTogc2VuZCBcIiVzXCInLCBldmVudCwgcGF5bG9hZCk7XG4gICAgdGhpcy5zZW5kZXJQb3J0LnBvc3RNZXNzYWdlKHsgdHlwZTogZXZlbnQsIHBheWxvYWQgfSk7XG4gIH1cbn07XG52YXIgTWVzc2FnZVNlbmRlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IodGFyZ2V0KSB7XG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgdGhpcy5lbWl0dGVyID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgdGhpcy5jaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgdGhpcy5yZWNlaXZlclBvcnQgPSB0aGlzLmNoYW5uZWwucG9ydDE7XG4gICAgY29uc3QgcmVjZWl2ZXJSZWFkeVByb21pc2UgPSBuZXcgaW1wb3J0X2RlZmVycmVkX3Byb21pc2UuRGVmZXJyZWRQcm9taXNlKCk7XG4gICAgY29uc3QgaGFuZHNoYWtlTGlzdGVuZXIgPSAobWVzc2FnZSkgPT4ge1xuICAgICAgaWYgKG1lc3NhZ2UuZGF0YS50eXBlID09PSBcImludGVybmFsL3JlYWR5XCIpIHtcbiAgICAgICAgZGVidWcoXCJbbWVzc2FnZS1zZW5kZXJdOiBydW50aW1lIGlzIHJlYWR5XCIpO1xuICAgICAgICByZWNlaXZlclJlYWR5UHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZHNoYWtlTGlzdGVuZXIpO1xuICAgIHJlY2VpdmVyUmVhZHlQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRzaGFrZUxpc3RlbmVyKTtcbiAgICB9KTtcbiAgICB0aGlzLnJlY2VpdmVyUmVhZHlQcm9taXNlID0gcmVjZWl2ZXJSZWFkeVByb21pc2U7XG4gICAgdGhpcy5yZWNlaXZlclBvcnQub25tZXNzYWdlID0gKGV2dCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGV2dC5kYXRhO1xuICAgICAgaWYgKGRhdGEudHlwZSAhPSBudWxsKSB7XG4gICAgICAgIGRlYnVnKCdbbWVzc2FnZS1zZW5kZXJdOiBlbWl0dGluZyBcIiVzXCIgZXZlbnQuLi4nLCBkYXRhLnR5cGUsIGRhdGEucGF5bG9hZCk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyBNZXNzYWdlRXZlbnQoZGF0YS50eXBlLCB7IGRhdGE6IGRhdGEucGF5bG9hZCB9KSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBlbWl0dGVyO1xuICBjaGFubmVsO1xuICByZWNlaXZlclBvcnQ7XG4gIHJlY2VpdmVyUmVhZHlQcm9taXNlO1xuICBhc3luYyBoYW5kc2hha2UoKSB7XG4gICAgY29uc3QgaGFuZHNoYWtlUHJvbWlzZSA9IG5ldyBpbXBvcnRfZGVmZXJyZWRfcHJvbWlzZS5EZWZlcnJlZFByb21pc2UoKTtcbiAgICBhd2FpdCB0aGlzLnJlY2VpdmVyUmVhZHlQcm9taXNlO1xuICAgIGRlYnVnKFwiW21lc3NhZ2Utc2VuZGVyXTogc2VuZGluZyBoYW5kc2hha2VcIik7XG4gICAgdGhpcy50YXJnZXQucG9zdE1lc3NhZ2UoXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwiaW50ZXJuYWwvaGFuZHNoYWtlXCJcbiAgICAgIH0sXG4gICAgICBcIipcIixcbiAgICAgIFt0aGlzLmNoYW5uZWwucG9ydDJdXG4gICAgKTtcbiAgICB0aGlzLm9uKFwiaW50ZXJuYWwvaGFuZHNoYWtlL2RvbmVcIiwgKCkgPT4ge1xuICAgICAgaGFuZHNoYWtlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICBjbGVhclRpbWVvdXQocmVqZWN0aW9uVGltZW91dCk7XG4gICAgfSk7XG4gICAgY29uc3QgcmVqZWN0aW9uVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaGFuZHNoYWtlUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTWVzc2FnZVNlbmRlcjogSGFuZHNoYWtlIHRpbWVvdXRcIikpO1xuICAgIH0sIDVlMyk7XG4gICAgcmV0dXJuIGhhbmRzaGFrZVByb21pc2U7XG4gIH1cbiAgb24oZXZlbnQsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gICAgZGVidWcoJ1ttZXNzYWdlLXNlbmRlcl06IGFkZCBsaXN0ZW5lciBcIiVzXCInLCBldmVudCk7XG4gICAgdGhpcy5lbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBldmVudCxcbiAgICAgIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgTWVzc2FnZUV2ZW50KSB7XG4gICAgICAgICAgbGlzdGVuZXIobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICBvZmYoZXZlbnQsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyBzZW5kKGV2ZW50LCAuLi5kYXRhKSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uUHJvbWlzZSA9IG5ldyBpbXBvcnRfZGVmZXJyZWRfcHJvbWlzZS5EZWZlcnJlZFByb21pc2UoKTtcbiAgICBjb25zdCBvcGVyYXRpb25JZCA9ICgwLCBpbXBvcnRfY3VpZC5kZWZhdWx0KSgpO1xuICAgIGNvbnN0IHBheWxvYWQgPSBkYXRhWzBdIHx8IHt9O1xuICAgIGRlYnVnKCdbbWVzc2FnZS1zZW5kZXJdOiBzZW5kIFwiJXNcIiAoJXMpJywgZXZlbnQsIG9wZXJhdGlvbklkLCBwYXlsb2FkKTtcbiAgICB0aGlzLnJlY2VpdmVyUG9ydC5wb3N0TWVzc2FnZSh7IHR5cGU6IGV2ZW50LCBwYXlsb2FkOiB7IG9wZXJhdGlvbklkLCBwYXlsb2FkIH0gfSk7XG4gICAgZGVidWcoJ1ttZXNzYWdlLXNlbmRlcl06IGFkZGluZyBkb25lIGxpc3RlbmVyIGZvciBcIiVzXCIgKCVzKScsIGV2ZW50LCBvcGVyYXRpb25JZCk7XG4gICAgY29uc3QgaGFuZGxlT3BlcmF0aW9uRG9uZSA9IChkb25lRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogZGF0YTIgfSA9IGRvbmVFdmVudDtcbiAgICAgIGlmIChkYXRhMi5vcGVyYXRpb25JZCA9PT0gb3BlcmF0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJQYXlsb2FkID0gZGF0YTIubGlzdGVuZXJQYXlsb2FkIHx8IHt9O1xuICAgICAgICBkZWJ1ZygnW21lc3NhZ2Utc2VuZGVyXTogcmVzb2x2aW5nIFwiJXMgKCVzKSBwcm9taXNlIScsIGV2ZW50LCBvcGVyYXRpb25JZCk7XG4gICAgICAgIG9wZXJhdGlvblByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgLi4ubGlzdGVuZXJQYXlsb2FkLFxuICAgICAgICAgIG9wZXJhdGlvbklkOiBkYXRhMi5vcGVyYXRpb25JZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZU9wZXJhdGlvbkZhaWxlZCA9IChmYWlsRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogZGF0YTIgfSA9IGZhaWxFdmVudDtcbiAgICAgIGlmIChkYXRhMi5vcGVyYXRpb25JZCA9PT0gb3BlcmF0aW9uSWQpIHtcbiAgICAgICAgZGVidWcoJ1ttZXNzYWdlLXNlbmRlcl06IHJlamVjdGluZyBcIiVzICglcykgcHJvbWlzZSEnLCBldmVudCwgb3BlcmF0aW9uSWQpO1xuICAgICAgICBvcGVyYXRpb25Qcm9taXNlLnJlamVjdChkYXRhMi5lcnJvcik7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLm9uKFwiaW50ZXJuYWwvb3BlcmF0aW9uL2RvbmVcIiwgaGFuZGxlT3BlcmF0aW9uRG9uZSk7XG4gICAgdGhpcy5vbihcImludGVybmFsL29wZXJhdGlvbi9mYWlsZWRcIiwgaGFuZGxlT3BlcmF0aW9uRmFpbGVkKTtcbiAgICByZXR1cm4gb3BlcmF0aW9uUHJvbWlzZS5maW5hbGx5KCgpID0+IHtcbiAgICAgIHRoaXMuZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW50ZXJuYWwvb3BlcmF0aW9uL2RvbmVcIiwgaGFuZGxlT3BlcmF0aW9uRG9uZSk7XG4gICAgICB0aGlzLmVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImludGVybmFsL29wZXJhdGlvbi9mYWlsZWRcIiwgaGFuZGxlT3BlcmF0aW9uRmFpbGVkKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gc3JjL05vZGVib3gudHNcbnZhciBpbXBvcnRfZGVmZXJyZWRfcHJvbWlzZTMgPSBfX3RvRVNNKHJlcXVpcmVfYnVpbGQoKSk7XG5cbi8vIHNyYy9tb2R1bGVzL2ZzLnRzXG52YXIgaW1wb3J0X2N1aWQyID0gX190b0VTTShyZXF1aXJlX2N1aWQoKSk7XG52YXIgRmlsZVN5c3RlbUFwaSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY2hhbm5lbCkge1xuICAgIHRoaXMuY2hhbm5lbCA9IGNoYW5uZWw7XG4gIH1cbiAgYXN5bmMgaW5pdChmaWxlcykge1xuICAgIGF3YWl0IHRoaXMuY2hhbm5lbC5zZW5kKFwiZnMvaW5pdFwiLCB7IGZpbGVzIH0pO1xuICB9XG4gIGFzeW5jIHJlYWRGaWxlKHBhdGgsIGVuY29kaW5nKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNoYW5uZWwuc2VuZChcImZzL3JlYWRGaWxlXCIsIHsgcGF0aCwgZW5jb2RpbmcgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KCdGYWlsZWQgdG8gcmVhZCBmaWxlIGF0IHBhdGggXCIlc1wiJywgcGF0aCksIHsgY2F1c2U6IGVycm9yIH0pO1xuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpbGUgbm90IGZvdW5kXCIpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfVxuICBhc3luYyB3cml0ZUZpbGUocGF0aCwgY29udGVudCwgb3B0aW9ucykge1xuICAgIGxldCBlbmNvZGluZyA9IHZvaWQgMDtcbiAgICBsZXQgcmVjdXJzaXZlID0gZmFsc2U7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gICAgICByZWN1cnNpdmUgPSAhIW9wdGlvbnMucmVjdXJzaXZlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGVuY29kaW5nID0gb3B0aW9ucztcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jaGFubmVsLnNlbmQoXCJmcy93cml0ZUZpbGVcIiwgeyBwYXRoLCBjb250ZW50LCBlbmNvZGluZywgcmVjdXJzaXZlIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdCgnRmFpbGVkIHRvIHdyaXRlIGZpbGUgYXQgcGF0aCBcIiVzXCInLCBwYXRoKSwgeyBjYXVzZTogZXJyb3IgfSk7XG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgcmVhZGRpcihwYXRoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNoYW5uZWwuc2VuZChcImZzL3JlYWRkaXJcIiwgeyBwYXRoIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdCgnRmFpbGVkIHRvIHJlYWQgZGlyZWN0b3J5IGF0IHBhdGggXCIlc1wiJywgcGF0aCksIHsgY2F1c2U6IGVycm9yIH0pO1xuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRpcmVjdG9yeSBub3QgZm91bmRcIik7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICB9XG4gIGFzeW5jIG1rZGlyKHBhdGgsIG9wdGlvbnMpIHtcbiAgICBjb25zdCByZWN1cnNpdmUgPSAhIW9wdGlvbnM/LnJlY3Vyc2l2ZTtcbiAgICBhd2FpdCB0aGlzLmNoYW5uZWwuc2VuZChcImZzL21rZGlyXCIsIHsgcGF0aCwgcmVjdXJzaXZlIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdCgnRmFpbGVkIHRvIG1ha2UgZGlyZWN0b3J5IGF0IHBhdGggXCIlc1wiJywgcGF0aCksIHsgY2F1c2U6IGVycm9yIH0pO1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIHN0YXQocGF0aCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jaGFubmVsLnNlbmQoXCJmcy9zdGF0XCIsIHsgcGF0aCB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihmb3JtYXQoJ0ZhaWxlZCB0byBzdGF0IGZpbGUgYXQgcGF0aCBcIiVzXCInLCBwYXRoKSwgeyBjYXVzZTogZXJyb3IgfSk7XG4gICAgfSk7XG4gICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmlsZSBub3QgZm91bmRcIik7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICB9XG4gIGFzeW5jIHJtKHBhdGgsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGZvcmNlLCByZWN1cnNpdmUgfSA9IG9wdGlvbnMgfHwge307XG4gICAgYXdhaXQgdGhpcy5jaGFubmVsLnNlbmQoXCJmcy9ybVwiLCB7IHBhdGgsIGZvcmNlLCByZWN1cnNpdmUgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KCdGYWlsZWQgdG8gcmVtb3ZlIGZpbGUgYXQgcGF0aCBcIiVzXCInLCBwYXRoKSwgeyBjYXVzZTogZXJyb3IgfSk7XG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgd2F0Y2goaW5jbHVkZXMsIGV4Y2x1ZGVzLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IHdhdGNoZXJJZCA9ICgwLCBpbXBvcnRfY3VpZDIuZGVmYXVsdCkoKTtcbiAgICBhd2FpdCB0aGlzLmNoYW5uZWwuc2VuZChcImZzL3dhdGNoXCIsIHsgd2F0Y2hlcklkLCBpbmNsdWRlcywgZXhjbHVkZXMgfSk7XG4gICAgdGhpcy5jaGFubmVsLm9uKFwiZnMvd2F0Y2gtZXZlbnRcIiwgKHsgZGF0YSB9KSA9PiB7XG4gICAgICBpZiAoZGF0YS53YXRjaGVySWQgPT09IHdhdGNoZXJJZCAmJiBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldnQgPSB7IC4uLmRhdGEgfTtcbiAgICAgICAgZGVsZXRlIGV2dC53YXRjaGVySWQ7XG4gICAgICAgIGxpc3RlbmVyKGV2dCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHRoaXMuY2hhbm5lbC5zZW5kKFwiZnMvdW53YXRjaFwiLCB7IHdhdGNoZXJJZCB9KVxuICAgIH07XG4gIH1cbn07XG5cbi8vIHNyYy9tb2R1bGVzL3NoZWxsLnRzXG52YXIgaW1wb3J0X3N0cmljdF9ldmVudF9lbWl0dGVyID0gX190b0VTTShyZXF1aXJlX2xpYigpKTtcbnZhciBTaGVsbEFwaSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY2hhbm5lbCkge1xuICAgIHRoaXMuY2hhbm5lbCA9IGNoYW5uZWw7XG4gIH1cbiAgY3JlYXRlKCkge1xuICAgIHJldHVybiBuZXcgU2hlbGxQcm9jZXNzKHRoaXMuY2hhbm5lbCk7XG4gIH1cbn07XG52YXIgU2hlbGxQcm9jZXNzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihjaGFubmVsKSB7XG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbDtcbiAgICB0aGlzLnN0YXRlID0gXCJydW5uaW5nXCI7XG4gICAgdGhpcy5zdGRvdXQgPSBuZXcgaW1wb3J0X3N0cmljdF9ldmVudF9lbWl0dGVyLkVtaXR0ZXIoKTtcbiAgICB0aGlzLnN0ZGVyciA9IG5ldyBpbXBvcnRfc3RyaWN0X2V2ZW50X2VtaXR0ZXIuRW1pdHRlcigpO1xuICAgIHRoaXMuc3RkaW4gPSB7XG4gICAgICB3cml0ZTogKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHdyaXRlIHRvIHN0ZGluLCBubyBwcm9jZXNzIGlzIGN1cnJlbnRseSBydW5uaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwuc2VuZChcInNoZWxsL3N0ZGluXCIsIHsgZGF0YSwgd29ya2VySWQ6IHRoaXMuaWQgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmZvcndhcmRTdGRFdmVudHMoKTtcbiAgfVxuICBpZDtcbiAgc3RhdGU7XG4gIHN0ZG91dDtcbiAgc3RkZXJyO1xuICBzdGRpbjtcbiAgZm9yd2FyZFN0ZEV2ZW50cygpIHtcbiAgICB0aGlzLmNoYW5uZWwub24oXCJ3b3JrZXIvdHR5XCIsIChtZXNzYWdlKSA9PiB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IG1lc3NhZ2U7XG4gICAgICBpZiAoZGF0YS53b3JrZXJJZCAhPT0gdGhpcy5pZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGRhdGEucGF5bG9hZC50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJvdXRcIjoge1xuICAgICAgICAgIHRoaXMuc3Rkb3V0LmVtaXQoXCJkYXRhXCIsIGRhdGEucGF5bG9hZC5kYXRhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiZXJyXCI6IHtcbiAgICAgICAgICB0aGlzLnN0ZGVyci5lbWl0KFwiZGF0YVwiLCBkYXRhLnBheWxvYWQuZGF0YSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBhc3luYyBydW5Db21tYW5kKGNvbW1hbmQsIGFyZ3MsIG9wdGlvbnMgPSB7fSkge1xuICAgIGludmFyaWFudCghdGhpcy5pZCwgJ0ZhaWxlZCB0byBydW4gXCJydW5Db21tYW5kXCIgb24gYSBTaGVsbFByb2Nlc3M6IHRoZXJlIGlzIGFscmVhZHkgYSBwcm9jZXNzIHJ1bm5pbmcuJyk7XG4gICAgY29uc3Qgc2hlbGxJbmZvID0gYXdhaXQgdGhpcy5jaGFubmVsLnNlbmQoXCJzaGVsbC9ydW5Db21tYW5kXCIsIHsgY29tbWFuZCwgYXJncywgb3B0aW9ucyB9KTtcbiAgICBpbnZhcmlhbnQoc2hlbGxJbmZvLCAnRmFpbGVkIHRvIHJ1biBcInJ1bkNvbW1hbmRcIiBvbiBhIFNoZWxsUHJvY2Vzczogd2FzIG5vdCBhYmxlIHRvIHJldHJpZXZlIGEgcnVubmluZyBwcm9jZXNzLicpO1xuICAgIHRoaXMuaWQgPSBzaGVsbEluZm8uaWQ7XG4gICAgdGhpcy5zdGF0ZSA9IFwicnVubmluZ1wiO1xuICAgIHJldHVybiBzaGVsbEluZm87XG4gIH1cbiAgYXN5bmMgb24obWVzc2FnZSwgbGlzdGVuZXIpIHtcbiAgICBzd2l0Y2ggKG1lc3NhZ2UpIHtcbiAgICAgIGNhc2UgXCJwcm9ncmVzc1wiOiB7XG4gICAgICAgIHRoaXMuY2hhbm5lbC5vbihcIndvcmtlci9wcm9ncmVzc1wiLCAoeyBkYXRhIH0pID0+IHtcbiAgICAgICAgICBsaXN0ZW5lcihkYXRhLnN0YXR1cyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjYXNlIFwiZXhpdFwiOiB7XG4gICAgICAgIHRoaXMuY2hhbm5lbC5vbihcIndvcmtlci9leGl0XCIsICh7IGRhdGEgfSkgPT4ge1xuICAgICAgICAgIGlmIChkYXRhLndvcmtlcklkID09PSB0aGlzLmlkKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihkYXRhLmV4aXRDb2RlLCBkYXRhLmVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFzeW5jIGtpbGwoKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy5pZCxcbiAgICAgICdGYWlsZWQgdG8gcnVuIFwia2lsbFwiIG9uIGEgU2hlbGxQcm9jZXNzOiB0aGVyZSBpcyBubyBwcm9jZXNzIHJ1bm5pbmcuIERpZCB5b3UgZm9yZ2V0IHRvIHJ1biBpdD8nXG4gICAgKTtcbiAgICB0aGlzLnN0YXRlID0gXCJpZGxlXCI7XG4gICAgYXdhaXQgdGhpcy5jaGFubmVsLnNlbmQoXCJzaGVsbC9leGl0XCIsIHsgaWQ6IHRoaXMuaWQgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KCdGYWlsZWQgdG8ga2lsbCBzaGVsbCB3aXRoIElEIFwiJXNcIicsIHRoaXMuaWQpLCB7IGNhdXNlOiBlcnJvciB9KTtcbiAgICB9KTtcbiAgICB0aGlzLmlkID0gdm9pZCAwO1xuICB9XG59O1xuXG4vLyBzcmMvbW9kdWxlcy9wcmV2aWV3LnRzXG52YXIgaW1wb3J0X2RlZmVycmVkX3Byb21pc2UyID0gX190b0VTTShyZXF1aXJlX2J1aWxkKCkpO1xudmFyIFRJTUVPVVQgPSAyZTQ7XG52YXIgUHJldmlld0FwaSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY2hhbm5lbCkge1xuICAgIHRoaXMuY2hhbm5lbCA9IGNoYW5uZWw7XG4gIH1cbiAgYXN5bmMgd2FpdEZvcihwYXlsb2FkLCBwcmVkaWNhdGUsIHRpbWVvdXQgPSBUSU1FT1VUKSB7XG4gICAgY29uc3QgcmVhZHlQcm9taXNlID0gbmV3IGltcG9ydF9kZWZlcnJlZF9wcm9taXNlMi5EZWZlcnJlZFByb21pc2UoKTtcbiAgICBjb25zdCByZWplY3RUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZWFkeVByb21pc2UucmVqZWN0KCk7XG4gICAgfSwgdGltZW91dCk7XG4gICAgY29uc3QgcHJldmlld0luZm9ybWF0aW9uID0gYXdhaXQgdGhpcy5jaGFubmVsLnNlbmQoXCJwcmV2aWV3L2dldC9pbmZvXCIsIHBheWxvYWQpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgcmVhZHlQcm9taXNlLnJlamVjdChcbiAgICAgICAgbmV3IEVycm9yKFxuICAgICAgICAgIGZvcm1hdChcbiAgICAgICAgICAgICdGYWlsZWQgdG8gbG9vayB1cCBwcmV2aWV3IGluZm9ybWF0aW9uIGZvciBzaGVsbCBJRCBcIiVzXCIgKHBvcnQ6ICVkKScsXG4gICAgICAgICAgICBwYXlsb2FkLnNvdXJjZVNoZWxsSWQsXG4gICAgICAgICAgICBwYXlsb2FkLnBvcnRcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSk7XG4gICAgY29uc3QgZm91bmRQcmV2aWV3ID0gcHJldmlld0luZm9ybWF0aW9uICYmIHByZWRpY2F0ZShwcmV2aWV3SW5mb3JtYXRpb24pO1xuICAgIGlmIChmb3VuZFByZXZpZXcpIHtcbiAgICAgIHJlYWR5UHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgdXJsOiBwcmV2aWV3SW5mb3JtYXRpb24udXJsLFxuICAgICAgICBwb3J0OiBwcmV2aWV3SW5mb3JtYXRpb24ucG9ydCxcbiAgICAgICAgc291cmNlU2hlbGxJZDogcHJldmlld0luZm9ybWF0aW9uLnNvdXJjZVNoZWxsSWRcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLmNoYW5uZWwub24oXCJwcmV2aWV3L3BvcnQvcmVhZHlcIiwgKHsgZGF0YSB9KSA9PiB7XG4gICAgICBpZiAoIWZvdW5kUHJldmlldyAmJiBwcmVkaWNhdGUoZGF0YSkpIHtcbiAgICAgICAgcmVhZHlQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIHVybDogZGF0YS51cmwsXG4gICAgICAgICAgcG9ydDogZGF0YS5wb3J0LFxuICAgICAgICAgIHNvdXJjZVNoZWxsSWQ6IGRhdGEuc291cmNlU2hlbGxJZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVhZHlQcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHJlamVjdFRpbWVvdXQpO1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIGdldEJ5U2hlbGxJZChzb3VyY2VTaGVsbElkLCB0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHRoaXMud2FpdEZvcih7IHNvdXJjZVNoZWxsSWQgfSwgKGRhdGEpID0+IGRhdGEuc291cmNlU2hlbGxJZCA9PT0gc291cmNlU2hlbGxJZCwgdGltZW91dCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KCdGYWlsZWQgdG8gZ2V0IHNoZWxsIGJ5IElEIFwiJXNcIicsIHNvdXJjZVNoZWxsSWQpLCB7IGNhdXNlOiBlcnJvciB9KTtcbiAgICB9KTtcbiAgfVxuICBhc3luYyB3YWl0Rm9yUG9ydChwb3J0LCB0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHRoaXMud2FpdEZvcih7IHBvcnQgfSwgKGRhdGEpID0+IGRhdGEucG9ydCA9PT0gcG9ydCwgdGltZW91dCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KFwiRmFpbGVkIHRvIGF3YWl0IHBvcnQgJWRcIiwgcG9ydCksIHsgY2F1c2U6IGVycm9yIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBzcmMvTm9kZWJveC50c1xudmFyIERFRkFVTFRfUlVOVElNRV9VUkwgPSBcImh0dHBzOi8vbm9kZWJveC1ydW50aW1lLmNvZGVzYW5kYm94LmlvXCI7XG52YXIgZGVidWcyID0gY3JlYXRlRGVidWcoXCJlbXVsYXRvclwiKTtcbnZhciBOb2RlYm94ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLm9wdGlvbnMuaWZyYW1lLFxuICAgICAgJ0ZhaWxlZCB0byBjcmVhdGUgYSBOb2RlYm94OiBleHBlY3RlZCBcImlmcmFtZVwiIGFyZ3VtZW50IHRvIGJlIGEgcmVmZXJlbmNlIHRvIGFuIDxpZnJhbWU+IGVsZW1lbnQgYnV0IGdvdCAlaicsXG4gICAgICB0aGlzLm9wdGlvbnMuaWZyYW1lXG4gICAgKTtcbiAgICB0aGlzLnVybCA9IHRoaXMub3B0aW9ucy5ydW50aW1lVXJsIHx8IERFRkFVTFRfUlVOVElNRV9VUkw7XG4gICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICB9XG4gIGNoYW5uZWwgPSBudWxsO1xuICBpc0Nvbm5lY3RlZDtcbiAgdXJsO1xuICBmaWxlU3lzdGVtQXBpID0gbnVsbDtcbiAgc2hlbGxBcGkgPSBudWxsO1xuICBwcmV2aWV3QXBpID0gbnVsbDtcbiAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICBjb25zdCB7IGlmcmFtZSwgY2RuVXJsIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgZGVidWcyKFwiW21lc3NhZ2Utc2VuZGVyXTogQ29ubmVjdGluZyB0byBub2RlIGVtdWxhdG9yLi4uXCIpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb25Qcm9taXNlID0gbmV3IGltcG9ydF9kZWZlcnJlZF9wcm9taXNlMy5EZWZlcnJlZFByb21pc2UoKTtcbiAgICBpZiAoIXRoaXMudXJsKSB7XG4gICAgICBjb25uZWN0aW9uUHJvbWlzZS5yZWplY3QoXG4gICAgICAgIG5ldyBFcnJvcihcIk5vZGVib3ggVVJMIGlzIG1pc3NpbmcuIERpZCB5b3UgZm9yZ2V0IHRvIHByb3ZpZGUgaXQgd2hlbiBjcmVhdGluZyB0aGlzIE5vZGVib3ggaW5zdGFuY2U/XCIpXG4gICAgICApO1xuICAgIH1cbiAgICBpbnZhcmlhbnQoXG4gICAgICBpZnJhbWUuY29udGVudFdpbmRvdyxcbiAgICAgIFwiRmFpbGVkIHRvIGNyZWF0ZSBhIE1lc3NhZ2VDaGFubmVsIHdpdGggdGhlIE5vZGVib3ggaWZyYW1lOiBubyBjb250ZW50IHdpbmRvdyBmb3VuZFwiXG4gICAgKTtcbiAgICB0aGlzLmNoYW5uZWwgPSBuZXcgTWVzc2FnZVNlbmRlcihpZnJhbWUuY29udGVudFdpbmRvdyk7XG4gICAgY29uc3QgZnJhbWVMb2FkUHJvbWlzZSA9IG5ldyBpbXBvcnRfZGVmZXJyZWRfcHJvbWlzZTMuRGVmZXJyZWRQcm9taXNlKCk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLnVybCk7XG4gICAgaWZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImxvYWRcIixcbiAgICAgICgpID0+IHtcbiAgICAgICAgZnJhbWVMb2FkUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9LFxuICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICApO1xuICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJlcnJvclwiLFxuICAgICAgKGV2ZW50KSA9PiB7XG4gICAgICAgIGZyYW1lTG9hZFByb21pc2UucmVqZWN0KGV2ZW50LmVycm9yKTtcbiAgICAgIH0sXG4gICAgICB7IG9uY2U6IHRydWUgfVxuICAgICk7XG4gICAgYXdhaXQgZnJhbWVMb2FkUHJvbWlzZTtcbiAgICBkZWJ1ZzIoXCJbbWVzc2FnZS1zZW5kZXJdOiBJRnJhbWUgbG9hZGVkLi4uXCIpO1xuICAgIGF3YWl0IHRoaXMuY2hhbm5lbC5oYW5kc2hha2UoKTtcbiAgICBkZWJ1ZzIoXCJbbWVzc2FnZS1zZW5kZXJdOiBIYW5kc2hha2UgY29tcGxldGVkLi4uXCIpO1xuICAgIHRoaXMuY2hhbm5lbC5zZW5kKFwiY29ubmVjdFwiLCB7XG4gICAgICBjZG5VcmxcbiAgICB9KTtcbiAgICB0aGlzLmNoYW5uZWwub24oXCJydW50aW1lL3JlYWR5XCIsICgpID0+IHtcbiAgICAgIGNvbm5lY3Rpb25Qcm9taXNlLnJlc29sdmUoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29ubmVjdGlvblByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICBkZWJ1ZzIoXCJbbWVzc2FnZS1zZW5kZXJdOiBDb25uZWN0ZWQgdG8gcnVudGltZS4uLlwiKTtcbiAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgIH0pO1xuICB9XG4gIGdldCBmcygpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLmlzQ29ubmVjdGVkLFxuICAgICAgJ0ZhaWxlZCB0byBhY2Nlc3MgdGhlIEZpbGUgU3lzdGVtIEFQSTogY29uc3VtZXIgaXMgbm90IGNvbm5lY3RlZC4gRGlkIHlvdSBmb3JnZXQgdG8gcnVuIFwiY29ubmVjdCgpXCI/J1xuICAgICk7XG4gICAgaWYgKHRoaXMuZmlsZVN5c3RlbUFwaSkge1xuICAgICAgcmV0dXJuIHRoaXMuZmlsZVN5c3RlbUFwaTtcbiAgICB9XG4gICAgdGhpcy5maWxlU3lzdGVtQXBpID0gbmV3IEZpbGVTeXN0ZW1BcGkodGhpcy5jaGFubmVsKTtcbiAgICByZXR1cm4gdGhpcy5maWxlU3lzdGVtQXBpO1xuICB9XG4gIGdldCBzaGVsbCgpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLmlzQ29ubmVjdGVkLFxuICAgICAgJ0ZhaWxlZCB0byBhY2Nlc3MgdGhlIFNoZWxsIEFQSTogY29uc3VtZXIgaXMgbm90IGNvbm5lY3RlZC4gRGlkIHlvdSBmb3JnZXQgdG8gcnVuIFwiY29ubmVjdCgpXCI/J1xuICAgICk7XG4gICAgaWYgKHRoaXMuc2hlbGxBcGkpIHtcbiAgICAgIHJldHVybiB0aGlzLnNoZWxsQXBpO1xuICAgIH1cbiAgICB0aGlzLnNoZWxsQXBpID0gbmV3IFNoZWxsQXBpKHRoaXMuY2hhbm5lbCk7XG4gICAgcmV0dXJuIHRoaXMuc2hlbGxBcGk7XG4gIH1cbiAgZ2V0IHByZXZpZXcoKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy5pc0Nvbm5lY3RlZCxcbiAgICAgICdGYWlsZWQgdG8gYWNjZXNzIHRoZSBQcmV2aWV3IEFQSTogY29uc3VtZXIgaXMgbm90IGNvbm5lY3RlZC4gRGlkIHlvdSBmb3JnZXQgdG8gcnVuIFwiY29ubmVjdCgpXCI/J1xuICAgICk7XG4gICAgaWYgKHRoaXMucHJldmlld0FwaSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJldmlld0FwaTtcbiAgICB9XG4gICAgdGhpcy5wcmV2aWV3QXBpID0gbmV3IFByZXZpZXdBcGkodGhpcy5jaGFubmVsKTtcbiAgICByZXR1cm4gdGhpcy5wcmV2aWV3QXBpO1xuICB9XG59O1xuXG4vLyBzcmMvcnVudGltZS1wcm90b2NvbC50eXBlcy50c1xudmFyIElOSkVDVF9NRVNTQUdFX1RZUEUgPSBcIklOSkVDVF9BTkRfSU5WT0tFXCI7XG52YXIgUFJFVklFV19MT0FERURfTUVTU0FHRV9UWVBFID0gXCJQUkVWSUVXX0xPQURFRFwiO1xuZXhwb3J0IHtcbiAgSU5KRUNUX01FU1NBR0VfVFlQRSxcbiAgTWVzc2FnZVJlY2VpdmVyLFxuICBNZXNzYWdlU2VuZGVyLFxuICBOb2RlYm94LFxuICBQUkVWSUVXX0xPQURFRF9NRVNTQUdFX1RZUEVcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/nodebox/build/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S: () => (/* binding */ SandpackClient)\n/* harmony export */ });\n/* harmony import */ var dequal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dequal */ \"(ssr)/./node_modules/dequal/dist/index.mjs\");\n\n\nvar SandpackClient = /** @class */ (function () {\n    function SandpackClient(iframeSelector, sandboxSetup, options) {\n        if (options === void 0) { options = {}; }\n        this.status = \"idle\";\n        this.options = options;\n        this.sandboxSetup = sandboxSetup;\n        this.iframeSelector = iframeSelector;\n    }\n    /**\n     * Clients handles\n     */\n    SandpackClient.prototype.updateOptions = function (options) {\n        if (!(0,dequal__WEBPACK_IMPORTED_MODULE_0__.dequal)(this.options, options)) {\n            this.options = options;\n            this.updateSandbox();\n        }\n    };\n    SandpackClient.prototype.updateSandbox = function (_sandboxSetup, _isInitializationCompile) {\n        if (_sandboxSetup === void 0) { _sandboxSetup = this.sandboxSetup; }\n        throw Error(\"Method not implemented\");\n    };\n    SandpackClient.prototype.destroy = function () {\n        throw Error(\"Method not implemented\");\n    };\n    /**\n     * Bundler communication\n     */\n    SandpackClient.prototype.dispatch = function (_message) {\n        throw Error(\"Method not implemented\");\n    };\n    SandpackClient.prototype.listen = function (_listener) {\n        throw Error(\"Method not implemented\");\n    };\n    return SandpackClient;\n}());\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudC9kaXN0L2Jhc2UtODBhMWY3NjAubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdDOztBQUVoQztBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOENBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUU4QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvYmFzZS04MGExZjc2MC5tanM/Y2UxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXF1YWwgfSBmcm9tICdkZXF1YWwnO1xuXG52YXIgU2FuZHBhY2tDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2FuZHBhY2tDbGllbnQoaWZyYW1lU2VsZWN0b3IsIHNhbmRib3hTZXR1cCwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB0aGlzLnN0YXR1cyA9IFwiaWRsZVwiO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLnNhbmRib3hTZXR1cCA9IHNhbmRib3hTZXR1cDtcbiAgICAgICAgdGhpcy5pZnJhbWVTZWxlY3RvciA9IGlmcmFtZVNlbGVjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGllbnRzIGhhbmRsZXNcbiAgICAgKi9cbiAgICBTYW5kcGFja0NsaWVudC5wcm90b3R5cGUudXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmICghZGVxdWFsKHRoaXMub3B0aW9ucywgb3B0aW9ucykpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNhbmRib3goKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FuZHBhY2tDbGllbnQucHJvdG90eXBlLnVwZGF0ZVNhbmRib3ggPSBmdW5jdGlvbiAoX3NhbmRib3hTZXR1cCwgX2lzSW5pdGlhbGl6YXRpb25Db21waWxlKSB7XG4gICAgICAgIGlmIChfc2FuZGJveFNldHVwID09PSB2b2lkIDApIHsgX3NhbmRib3hTZXR1cCA9IHRoaXMuc2FuZGJveFNldHVwOyB9XG4gICAgICAgIHRocm93IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9O1xuICAgIFNhbmRwYWNrQ2xpZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdW5kbGVyIGNvbW11bmljYXRpb25cbiAgICAgKi9cbiAgICBTYW5kcGFja0NsaWVudC5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoX21lc3NhZ2UpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH07XG4gICAgU2FuZHBhY2tDbGllbnQucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChfbGlzdGVuZXIpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhbmRwYWNrQ2xpZW50O1xufSgpKTtcblxuZXhwb3J0IHsgU2FuZHBhY2tDbGllbnQgYXMgUyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@codesandbox/sandpack-client/dist/clients/node/index.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/clients/node/index.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SandpackNode: () => (/* binding */ SandpackNode)\n/* harmony export */ });\n/* harmony import */ var _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../types-0877c553.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs\");\n/* harmony import */ var _codesandbox_nodebox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @codesandbox/nodebox */ \"(ssr)/./node_modules/@codesandbox/nodebox/build/index.mjs\");\n/* harmony import */ var _base_80a1f760_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../base-80a1f760.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs\");\n/* harmony import */ var _consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../consoleHook-cdbe54ab.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/consoleHook-cdbe54ab.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var dequal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dequal */ \"(ssr)/./node_modules/dequal/dist/index.mjs\");\n\n\n\n\n\n\n\nfunction loadPreviewIframe(iframe, url) {\n    return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n        var contentWindow, TIME_OUT, MAX_MANY_TIRES, tries, timeout;\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_a) {\n            contentWindow = iframe.contentWindow;\n            (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.n)(contentWindow, \"Failed to await preview iframe: no content window found\");\n            TIME_OUT = 90000;\n            MAX_MANY_TIRES = 20;\n            tries = 0;\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    var triesToSetUrl = function () {\n                        var onLoadPage = function () {\n                            clearTimeout(timeout);\n                            tries = MAX_MANY_TIRES;\n                            resolve();\n                            iframe.removeEventListener(\"load\", onLoadPage);\n                        };\n                        if (tries >= MAX_MANY_TIRES) {\n                            reject((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.c)(\"Could not able to connect to preview.\"));\n                            return;\n                        }\n                        iframe.setAttribute(\"src\", url);\n                        timeout = setTimeout(function () {\n                            triesToSetUrl();\n                            iframe.removeEventListener(\"load\", onLoadPage);\n                        }, TIME_OUT);\n                        tries = tries + 1;\n                        iframe.addEventListener(\"load\", onLoadPage);\n                    };\n                    iframe.addEventListener(\"error\", function () { return reject(new Error(\"Iframe error\")); });\n                    iframe.addEventListener(\"abort\", function () { return reject(new Error(\"Aborted\")); });\n                    triesToSetUrl();\n                })];\n        });\n    });\n}\nvar setPreviewIframeProperties = function (iframe, options) {\n    iframe.style.border = \"0\";\n    iframe.style.width = options.width || \"100%\";\n    iframe.style.height = options.height || \"100%\";\n    iframe.style.overflow = \"hidden\";\n    iframe.allow = \"cross-origin-isolated\";\n};\n\n/* eslint-disable @typescript-eslint/ban-ts-comment, @typescript-eslint/explicit-function-return-type, no-restricted-globals, @typescript-eslint/no-explicit-any  */\nfunction setupHistoryListeners(_a) {\n    var scope = _a.scope;\n    // @ts-ignore\n    var origHistoryProto = window.history.__proto__;\n    var historyList = [];\n    var historyPosition = 0;\n    var dispatchMessage = function (url) {\n        parent.postMessage({\n            type: \"urlchange\",\n            url: url,\n            back: historyPosition > 0,\n            forward: historyPosition < historyList.length - 1,\n            channelId: scope.channelId,\n        }, \"*\");\n    };\n    function pushHistory(url, state) {\n        // remove \"future\" locations\n        historyList.splice(historyPosition + 1);\n        historyList.push({ url: url, state: state });\n        historyPosition = historyList.length - 1;\n    }\n    Object.assign(window.history, {\n        go: function (delta) {\n            var newPos = historyPosition + delta;\n            if (newPos >= 0 && newPos <= historyList.length - 1) {\n                historyPosition = newPos;\n                var _a = historyList[historyPosition], url = _a.url, state = _a.state;\n                origHistoryProto.replaceState.call(window.history, state, \"\", url);\n                var newURL = document.location.href;\n                dispatchMessage(newURL);\n                window.dispatchEvent(new PopStateEvent(\"popstate\", { state: state }));\n            }\n        },\n        back: function () {\n            window.history.go(-1);\n        },\n        forward: function () {\n            window.history.go(1);\n        },\n        pushState: function (state, title, url) {\n            origHistoryProto.replaceState.call(window.history, state, title, url);\n            pushHistory(url, state);\n            dispatchMessage(document.location.href);\n        },\n        replaceState: function (state, title, url) {\n            origHistoryProto.replaceState.call(window.history, state, title, url);\n            historyList[historyPosition] = { state: state, url: url };\n            dispatchMessage(document.location.href);\n        },\n    });\n    function handleMessage(_a) {\n        var data = _a.data;\n        if (data.type === \"urlback\") {\n            history.back();\n        }\n        else if (data.type === \"urlforward\") {\n            history.forward();\n        }\n        else if (data.type === \"refresh\") {\n            document.location.reload();\n        }\n    }\n    window.addEventListener(\"message\", handleMessage);\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction watchResize(_a) {\n    var scope = _a.scope;\n    var lastHeight = 0;\n    function getDocumentHeight() {\n        if (typeof window === \"undefined\")\n            return 0;\n        var body = document.body;\n        var html = document.documentElement;\n        return Math.max(body.scrollHeight, body.offsetHeight, html.offsetHeight);\n    }\n    function sendResizeEvent() {\n        var height = getDocumentHeight();\n        if (lastHeight !== height) {\n            window.parent.postMessage({\n                type: \"resize\",\n                height: height,\n                codesandbox: true,\n                channelId: scope.channelId,\n            }, \"*\");\n        }\n        lastHeight = height;\n    }\n    sendResizeEvent();\n    var throttle;\n    var observer = new MutationObserver(function () {\n        if (throttle === undefined) {\n            sendResizeEvent();\n            throttle = setTimeout(function () {\n                throttle = undefined;\n            }, 300);\n        }\n    });\n    observer.observe(document, {\n        attributes: true,\n        childList: true,\n        subtree: true,\n    });\n    /**\n     * Ideally we should only use a `MutationObserver` to trigger a resize event,\n     * however, we noted that it's not 100% reliable, so we went for polling strategy as well\n     */\n    setInterval(sendResizeEvent, 300);\n}\n\n/* eslint-disable @typescript-eslint/ban-ts-comment */\nvar scripts = [\n    { code: setupHistoryListeners.toString(), id: \"historyListener\" },\n    {\n        code: \"function consoleHook({ scope }) {\" + _consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.c + \"\\n};\",\n        id: \"consoleHook\",\n    },\n    { code: watchResize.toString(), id: \"watchResize\" },\n];\nvar injectScriptToIframe = function (iframe, channelId) {\n    scripts.forEach(function (_a) {\n        var _b;\n        var code = _a.code, id = _a.id;\n        var message = {\n            uid: id,\n            type: _codesandbox_nodebox__WEBPACK_IMPORTED_MODULE_0__.INJECT_MESSAGE_TYPE,\n            code: \"exports.activate = \".concat(code),\n            scope: { channelId: channelId },\n        };\n        (_b = iframe.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage(message, \"*\");\n    });\n};\n\n/* eslint-disable no-console,@typescript-eslint/no-explicit-any,prefer-rest-params,@typescript-eslint/explicit-module-boundary-types */\nvar SandpackNode = /** @class */ (function (_super) {\n    (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.g)(SandpackNode, _super);\n    function SandpackNode(selector, sandboxInfo, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, selector, sandboxInfo, (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.h)({}, options), { bundlerURL: options.bundlerURL })) || this;\n        _this._modulesCache = new Map();\n        _this.messageChannelId = (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.g)();\n        _this._initPromise = null;\n        _this.emitter = new _consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.E();\n        // Assign iframes\n        _this.manageIframes(selector);\n        // Init emulator\n        _this.emulator = new _codesandbox_nodebox__WEBPACK_IMPORTED_MODULE_0__.Nodebox({\n            iframe: _this.emulatorIframe,\n            runtimeUrl: _this.options.bundlerURL,\n        });\n        // Trigger initial compile\n        _this.updateSandbox(sandboxInfo);\n        return _this;\n    }\n    // Initialize nodebox, should only ever be called once\n    SandpackNode.prototype._init = function (files) {\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.emulator.connect()];\n                    case 1:\n                        _a.sent();\n                        // 2. Setup\n                        return [4 /*yield*/, this.emulator.fs.init(files)];\n                    case 2:\n                        // 2. Setup\n                        _a.sent();\n                        // 2.1 Other dependencies\n                        return [4 /*yield*/, this.globalListeners()];\n                    case 3:\n                        // 2.1 Other dependencies\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * It initializes the emulator and provide it with files, template and script to run\n     */\n    SandpackNode.prototype.compile = function (files) {\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            var shellId, err_1;\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 5, , 6]);\n                        // 1. Init\n                        this.status = \"initializing\";\n                        this.dispatch({ type: \"start\", firstLoad: true });\n                        if (!this._initPromise) {\n                            this._initPromise = this._init(files);\n                        }\n                        return [4 /*yield*/, this._initPromise];\n                    case 1:\n                        _a.sent();\n                        this.dispatch({ type: \"connected\" });\n                        return [4 /*yield*/, this.createShellProcessFromTask(files)];\n                    case 2:\n                        shellId = (_a.sent()).id;\n                        // 4. Launch Preview\n                        return [4 /*yield*/, this.createPreviewURLFromId(shellId)];\n                    case 3:\n                        // 4. Launch Preview\n                        _a.sent();\n                        return [4 /*yield*/, this.setLocationURLIntoIFrame()];\n                    case 4:\n                        _a.sent();\n                        // 5. Returns to consumer\n                        this.dispatchDoneMessage();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _a.sent();\n                        this.dispatch({\n                            type: \"action\",\n                            action: \"notification\",\n                            notificationType: \"error\",\n                            title: (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(err_1),\n                        });\n                        this.dispatch({ type: \"done\", compilatonError: true });\n                        return [3 /*break*/, 6];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * It creates a new shell and run the starting task\n     */\n    SandpackNode.prototype.createShellProcessFromTask = function (files) {\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            var packageJsonContent;\n            var _a;\n            var _this = this;\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        packageJsonContent = (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.r)(files[\"/package.json\"]);\n                        this.emulatorCommand = (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.b)(packageJsonContent);\n                        this.emulatorShellProcess = this.emulator.shell.create();\n                        // Shell listeners\n                        return [4 /*yield*/, this.emulatorShellProcess.on(\"exit\", function (exitCode) {\n                                _this.dispatch({\n                                    type: \"action\",\n                                    action: \"notification\",\n                                    notificationType: \"error\",\n                                    title: (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.c)(\"Error: process.exit(\".concat(exitCode, \") called.\")),\n                                });\n                            })];\n                    case 1:\n                        // Shell listeners\n                        _b.sent();\n                        return [4 /*yield*/, this.emulatorShellProcess.on(\"progress\", function (data) {\n                                var _a, _b;\n                                if (data.state === \"command_running\" ||\n                                    data.state === \"starting_command\") {\n                                    _this.dispatch({\n                                        type: \"shell/progress\",\n                                        data: (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.h)({}, data), { command: [\n                                                (_a = _this.emulatorCommand) === null || _a === void 0 ? void 0 : _a[0],\n                                                (_b = _this.emulatorCommand) === null || _b === void 0 ? void 0 : _b[1].join(\" \"),\n                                            ].join(\" \") }),\n                                    });\n                                    _this.status = \"installing-dependencies\";\n                                    return;\n                                }\n                                _this.dispatch({ type: \"shell/progress\", data: data });\n                            })];\n                    case 2:\n                        _b.sent();\n                        this.emulatorShellProcess.stdout.on(\"data\", function (data) {\n                            _this.dispatch({ type: \"stdout\", payload: { data: data, type: \"out\" } });\n                        });\n                        this.emulatorShellProcess.stderr.on(\"data\", function (data) {\n                            _this.dispatch({ type: \"stdout\", payload: { data: data, type: \"err\" } });\n                        });\n                        return [4 /*yield*/, (_a = this.emulatorShellProcess).runCommand.apply(_a, this.emulatorCommand)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.createPreviewURLFromId = function (id) {\n        var _a;\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            var url;\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.iframePreviewUrl = undefined;\n                        return [4 /*yield*/, this.emulator.preview.getByShellId(id)];\n                    case 1:\n                        url = (_b.sent()).url;\n                        this.iframePreviewUrl = url + ((_a = this.options.startRoute) !== null && _a !== void 0 ? _a : \"\");\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Nodebox needs to handle two types of iframes at the same time:\n     *\n     * 1. Runtime iframe: where the emulator process runs, which is responsible\n     *    for creating the other iframes (hidden);\n     * 2. Preview iframes: any other node process that contains a PORT (public);\n     */\n    SandpackNode.prototype.manageIframes = function (selector) {\n        var _a;\n        /**\n         * Pick the preview iframe\n         */\n        if (typeof selector === \"string\") {\n            var element = document.querySelector(selector);\n            (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.n)(element, \"The element '\".concat(selector, \"' was not found\"));\n            this.iframe = document.createElement(\"iframe\");\n        }\n        else {\n            this.iframe = selector;\n        }\n        // Set preview iframe styles\n        setPreviewIframeProperties(this.iframe, this.options);\n        (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.n)(this.iframe.parentNode, \"The given iframe does not have a parent.\");\n        /**\n         * Create the runtime iframe, which is hidden sibling\n         * from the preview one\n         */\n        this.emulatorIframe = document.createElement(\"iframe\");\n        this.emulatorIframe.classList.add(\"sp-bridge-frame\");\n        (_a = this.iframe.parentNode) === null || _a === void 0 ? void 0 : _a.appendChild(this.emulatorIframe);\n    };\n    SandpackNode.prototype.setLocationURLIntoIFrame = function () {\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.iframePreviewUrl) return [3 /*break*/, 2];\n                        return [4 /*yield*/, loadPreviewIframe(this.iframe, this.iframePreviewUrl)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Send all messages and events to tell to the\n     * consumer that the bundler is ready without any error\n     */\n    SandpackNode.prototype.dispatchDoneMessage = function () {\n        this.status = \"done\";\n        this.dispatch({ type: \"done\", compilatonError: false });\n        if (this.iframePreviewUrl) {\n            this.dispatch({\n                type: \"urlchange\",\n                url: this.iframePreviewUrl,\n                back: false,\n                forward: false,\n            });\n        }\n    };\n    SandpackNode.prototype.globalListeners = function () {\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        window.addEventListener(\"message\", function (event) {\n                            if (event.data.type === _codesandbox_nodebox__WEBPACK_IMPORTED_MODULE_0__.PREVIEW_LOADED_MESSAGE_TYPE) {\n                                injectScriptToIframe(_this.iframe, _this.messageChannelId);\n                            }\n                            if (event.data.type === \"urlchange\" &&\n                                event.data.channelId === _this.messageChannelId) {\n                                _this.dispatch({\n                                    type: \"urlchange\",\n                                    url: event.data.url,\n                                    back: event.data.back,\n                                    forward: event.data.forward,\n                                });\n                            }\n                            else if (event.data.channelId === _this.messageChannelId) {\n                                _this.dispatch(event.data);\n                            }\n                        });\n                        return [4 /*yield*/, this.emulator.fs.watch([\"*\"], [\n                                \".next\",\n                                \"node_modules\",\n                                \"build\",\n                                \"dist\",\n                                \"vendor\",\n                                \".config\",\n                                \".vuepress\",\n                            ], function (message) { return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(_this, void 0, void 0, function () {\n                                var event, path, type, _a, content, newContent, err_2;\n                                return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0:\n                                            if (!message)\n                                                return [2 /*return*/];\n                                            event = message;\n                                            path = \"newPath\" in event\n                                                ? event.newPath\n                                                : \"path\" in event\n                                                    ? event.path\n                                                    : \"\";\n                                            return [4 /*yield*/, this.emulator.fs.stat(path)];\n                                        case 1:\n                                            type = (_b.sent()).type;\n                                            if (type !== \"file\")\n                                                return [2 /*return*/, null];\n                                            _b.label = 2;\n                                        case 2:\n                                            _b.trys.push([2, 10, , 11]);\n                                            _a = event.type;\n                                            switch (_a) {\n                                                case \"change\": return [3 /*break*/, 3];\n                                                case \"create\": return [3 /*break*/, 3];\n                                                case \"remove\": return [3 /*break*/, 5];\n                                                case \"rename\": return [3 /*break*/, 6];\n                                                case \"close\": return [3 /*break*/, 8];\n                                            }\n                                            return [3 /*break*/, 9];\n                                        case 3: return [4 /*yield*/, this.emulator.fs.readFile(event.path, \"utf8\")];\n                                        case 4:\n                                            content = _b.sent();\n                                            this.dispatch({\n                                                type: \"fs/change\",\n                                                path: event.path,\n                                                content: content,\n                                            });\n                                            this._modulesCache.set(event.path, (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.w)(content));\n                                            return [3 /*break*/, 9];\n                                        case 5:\n                                            this.dispatch({\n                                                type: \"fs/remove\",\n                                                path: event.path,\n                                            });\n                                            this._modulesCache.delete(event.path);\n                                            return [3 /*break*/, 9];\n                                        case 6:\n                                            this.dispatch({\n                                                type: \"fs/remove\",\n                                                path: event.oldPath,\n                                            });\n                                            this._modulesCache.delete(event.oldPath);\n                                            return [4 /*yield*/, this.emulator.fs.readFile(event.newPath, \"utf8\")];\n                                        case 7:\n                                            newContent = _b.sent();\n                                            this.dispatch({\n                                                type: \"fs/change\",\n                                                path: event.newPath,\n                                                content: newContent,\n                                            });\n                                            this._modulesCache.set(event.newPath, (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.w)(newContent));\n                                            return [3 /*break*/, 9];\n                                        case 8: return [3 /*break*/, 9];\n                                        case 9: return [3 /*break*/, 11];\n                                        case 10:\n                                            err_2 = _b.sent();\n                                            this.dispatch({\n                                                type: \"action\",\n                                                action: \"notification\",\n                                                notificationType: \"error\",\n                                                title: (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(err_2),\n                                            });\n                                            return [3 /*break*/, 11];\n                                        case 11: return [2 /*return*/];\n                                    }\n                                });\n                            }); })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * PUBLIC Methods\n     */\n    SandpackNode.prototype.restartShellProcess = function () {\n        var _a;\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.emulatorShellProcess && this.emulatorCommand)) return [3 /*break*/, 3];\n                        // 1. Set the loading state and clean the URL\n                        this.dispatch({ type: \"start\", firstLoad: true });\n                        this.status = \"initializing\";\n                        // 2. Exit shell\n                        return [4 /*yield*/, this.emulatorShellProcess.kill()];\n                    case 1:\n                        // 2. Exit shell\n                        _b.sent();\n                        (_a = this.iframe) === null || _a === void 0 ? void 0 : _a.removeAttribute(\"attr\");\n                        this.emulator.fs.rm(\"/node_modules/.vite\", {\n                            recursive: true,\n                            force: true,\n                        });\n                        // 3 Run command again\n                        return [4 /*yield*/, this.compile(Object.fromEntries(this._modulesCache))];\n                    case 2:\n                        // 3 Run command again\n                        _b.sent();\n                        _b.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.updateSandbox = function (setup) {\n        var _this = this;\n        var _a;\n        var modules = (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.f)(setup.files);\n        /**\n         * Update file changes\n         */\n        if (((_a = this.emulatorShellProcess) === null || _a === void 0 ? void 0 : _a.state) === \"running\") {\n            Object.entries(modules).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (!_this._modulesCache.get(key) ||\n                    (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.r)(value) !== (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.r)(_this._modulesCache.get(key))) {\n                    _this.emulator.fs.writeFile(key, value, { recursive: true });\n                }\n            });\n            return;\n        }\n        /**\n         * Pass init files to the bundler\n         */\n        this.dispatch({\n            codesandbox: true,\n            modules: modules,\n            template: setup.template,\n            type: \"compile\",\n        });\n        /**\n         * Add modules to cache, this will ensure uniqueness changes\n         *\n         * Keep it after the compile action, in order to update the cache at the right moment\n         */\n        Object.entries(modules).forEach(function (_a) {\n            var key = _a[0], value = _a[1];\n            _this._modulesCache.set(key, (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.w)(value));\n        });\n    };\n    SandpackNode.prototype.dispatch = function (message) {\n        var _a, _b;\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            var _c;\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        _c = message.type;\n                        switch (_c) {\n                            case \"compile\": return [3 /*break*/, 1];\n                            case \"refresh\": return [3 /*break*/, 2];\n                            case \"urlback\": return [3 /*break*/, 4];\n                            case \"urlforward\": return [3 /*break*/, 4];\n                            case \"shell/restart\": return [3 /*break*/, 5];\n                            case \"shell/openPreview\": return [3 /*break*/, 6];\n                        }\n                        return [3 /*break*/, 7];\n                    case 1:\n                        this.compile(message.modules);\n                        return [3 /*break*/, 8];\n                    case 2: return [4 /*yield*/, this.setLocationURLIntoIFrame()];\n                    case 3:\n                        _d.sent();\n                        return [3 /*break*/, 8];\n                    case 4:\n                        (_b = (_a = this.iframe) === null || _a === void 0 ? void 0 : _a.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage(message, \"*\");\n                        return [3 /*break*/, 8];\n                    case 5:\n                        this.restartShellProcess();\n                        return [3 /*break*/, 8];\n                    case 6:\n                        window.open(this.iframePreviewUrl, \"_blank\");\n                        return [3 /*break*/, 8];\n                    case 7:\n                        this.emitter.dispatch(message);\n                        _d.label = 8;\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.listen = function (listener) {\n        return this.emitter.listener(listener);\n    };\n    SandpackNode.prototype.destroy = function () {\n        this.emulatorIframe.remove();\n        this.emitter.cleanup();\n    };\n    return SandpackNode;\n}(_base_80a1f760_mjs__WEBPACK_IMPORTED_MODULE_5__.S));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudC9kaXN0L2NsaWVudHMvbm9kZS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE4STtBQUM3QztBQUNuQztBQUN1SztBQUNqTjtBQUNKOztBQUVoQjtBQUNBLFdBQVcsc0RBQVM7QUFDcEI7QUFDQSxlQUFlLHNEQUFXO0FBQzFCO0FBQ0EsWUFBWSxzREFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0RBQVc7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSwyQ0FBMkM7QUFDOUcsbUVBQW1FLHNDQUFzQztBQUN6RztBQUNBLGlCQUFpQjtBQUNqQixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxjQUFjO0FBQ25GO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsQ0FBQyxpREFBYzs7QUFFUSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvY2xpZW50cy9ub2RlL2luZGV4Lm1qcz9jYWU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF8gYXMgX19hd2FpdGVyLCBhIGFzIF9fZ2VuZXJhdG9yLCBuIGFzIG51bGx0aHJvd3MsIGMgYXMgY3JlYXRlRXJyb3IsIGcgYXMgX19leHRlbmRzLCBoIGFzIF9fYXNzaWduIH0gZnJvbSAnLi4vLi4vdHlwZXMtMDg3N2M1NTMubWpzJztcbmltcG9ydCB7IElOSkVDVF9NRVNTQUdFX1RZUEUsIE5vZGVib3gsIFBSRVZJRVdfTE9BREVEX01FU1NBR0VfVFlQRSB9IGZyb20gJ0Bjb2Rlc2FuZGJveC9ub2RlYm94JztcbmltcG9ydCB7IFMgYXMgU2FuZHBhY2tDbGllbnQgfSBmcm9tICcuLi8uLi9iYXNlLTgwYTFmNzYwLm1qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbnNvbGVIb29rLCBmIGFzIGZyb21CdW5kbGVyRmlsZXNUb0ZTLCByIGFzIHJlYWRCdWZmZXIsIHcgYXMgd3JpdGVCdWZmZXIsIGcgYXMgZ2VuZXJhdGVSYW5kb21JZCwgRSBhcyBFdmVudEVtaXR0ZXIsIGEgYXMgZ2V0TWVzc2FnZUZyb21FcnJvciwgYiBhcyBmaW5kU3RhcnRTY3JpcHRQYWNrYWdlSnNvbiB9IGZyb20gJy4uLy4uL2NvbnNvbGVIb29rLWNkYmU1NGFiLm1qcyc7XG5pbXBvcnQgJ291dHZhcmlhbnQnO1xuaW1wb3J0ICdkZXF1YWwnO1xuXG5mdW5jdGlvbiBsb2FkUHJldmlld0lmcmFtZShpZnJhbWUsIHVybCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRlbnRXaW5kb3csIFRJTUVfT1VULCBNQVhfTUFOWV9USVJFUywgdHJpZXMsIHRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIGNvbnRlbnRXaW5kb3cgPSBpZnJhbWUuY29udGVudFdpbmRvdztcbiAgICAgICAgICAgIG51bGx0aHJvd3MoY29udGVudFdpbmRvdywgXCJGYWlsZWQgdG8gYXdhaXQgcHJldmlldyBpZnJhbWU6IG5vIGNvbnRlbnQgd2luZG93IGZvdW5kXCIpO1xuICAgICAgICAgICAgVElNRV9PVVQgPSA5MDAwMDtcbiAgICAgICAgICAgIE1BWF9NQU5ZX1RJUkVTID0gMjA7XG4gICAgICAgICAgICB0cmllcyA9IDA7XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJpZXNUb1NldFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbkxvYWRQYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmllcyA9IE1BWF9NQU5ZX1RJUkVTO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgb25Mb2FkUGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWVzID49IE1BWF9NQU5ZX1RJUkVTKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKFwiQ291bGQgbm90IGFibGUgdG8gY29ubmVjdCB0byBwcmV2aWV3LlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCB1cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWVzVG9TZXRVcmwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgb25Mb2FkUGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBUSU1FX09VVCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmllcyA9IHRyaWVzICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBvbkxvYWRQYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiByZWplY3QobmV3IEVycm9yKFwiSWZyYW1lIGVycm9yXCIpKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihcIkFib3J0ZWRcIikpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdHJpZXNUb1NldFVybCgpO1xuICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG52YXIgc2V0UHJldmlld0lmcmFtZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoaWZyYW1lLCBvcHRpb25zKSB7XG4gICAgaWZyYW1lLnN0eWxlLmJvcmRlciA9IFwiMFwiO1xuICAgIGlmcmFtZS5zdHlsZS53aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgXCIxMDAlXCI7XG4gICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IFwiMTAwJVwiO1xuICAgIGlmcmFtZS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgaWZyYW1lLmFsbG93ID0gXCJjcm9zcy1vcmlnaW4taXNvbGF0ZWRcIjtcbn07XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudCwgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LWZ1bmN0aW9uLXJldHVybi10eXBlLCBuby1yZXN0cmljdGVkLWdsb2JhbHMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgICovXG5mdW5jdGlvbiBzZXR1cEhpc3RvcnlMaXN0ZW5lcnMoX2EpIHtcbiAgICB2YXIgc2NvcGUgPSBfYS5zY29wZTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdmFyIG9yaWdIaXN0b3J5UHJvdG8gPSB3aW5kb3cuaGlzdG9yeS5fX3Byb3RvX187XG4gICAgdmFyIGhpc3RvcnlMaXN0ID0gW107XG4gICAgdmFyIGhpc3RvcnlQb3NpdGlvbiA9IDA7XG4gICAgdmFyIGRpc3BhdGNoTWVzc2FnZSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6IFwidXJsY2hhbmdlXCIsXG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIGJhY2s6IGhpc3RvcnlQb3NpdGlvbiA+IDAsXG4gICAgICAgICAgICBmb3J3YXJkOiBoaXN0b3J5UG9zaXRpb24gPCBoaXN0b3J5TGlzdC5sZW5ndGggLSAxLFxuICAgICAgICAgICAgY2hhbm5lbElkOiBzY29wZS5jaGFubmVsSWQsXG4gICAgICAgIH0sIFwiKlwiKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHB1c2hIaXN0b3J5KHVybCwgc3RhdGUpIHtcbiAgICAgICAgLy8gcmVtb3ZlIFwiZnV0dXJlXCIgbG9jYXRpb25zXG4gICAgICAgIGhpc3RvcnlMaXN0LnNwbGljZShoaXN0b3J5UG9zaXRpb24gKyAxKTtcbiAgICAgICAgaGlzdG9yeUxpc3QucHVzaCh7IHVybDogdXJsLCBzdGF0ZTogc3RhdGUgfSk7XG4gICAgICAgIGhpc3RvcnlQb3NpdGlvbiA9IGhpc3RvcnlMaXN0Lmxlbmd0aCAtIDE7XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24od2luZG93Lmhpc3RvcnksIHtcbiAgICAgICAgZ286IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICAgICAgdmFyIG5ld1BvcyA9IGhpc3RvcnlQb3NpdGlvbiArIGRlbHRhO1xuICAgICAgICAgICAgaWYgKG5ld1BvcyA+PSAwICYmIG5ld1BvcyA8PSBoaXN0b3J5TGlzdC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgaGlzdG9yeVBvc2l0aW9uID0gbmV3UG9zO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IGhpc3RvcnlMaXN0W2hpc3RvcnlQb3NpdGlvbl0sIHVybCA9IF9hLnVybCwgc3RhdGUgPSBfYS5zdGF0ZTtcbiAgICAgICAgICAgICAgICBvcmlnSGlzdG9yeVByb3RvLnJlcGxhY2VTdGF0ZS5jYWxsKHdpbmRvdy5oaXN0b3J5LCBzdGF0ZSwgXCJcIiwgdXJsKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3VVJMID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaE1lc3NhZ2UobmV3VVJMKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgUG9wU3RhdGVFdmVudChcInBvcHN0YXRlXCIsIHsgc3RhdGU6IHN0YXRlIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYmFjazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkuZ28oLTEpO1xuICAgICAgICB9LFxuICAgICAgICBmb3J3YXJkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5nbygxKTtcbiAgICAgICAgfSxcbiAgICAgICAgcHVzaFN0YXRlOiBmdW5jdGlvbiAoc3RhdGUsIHRpdGxlLCB1cmwpIHtcbiAgICAgICAgICAgIG9yaWdIaXN0b3J5UHJvdG8ucmVwbGFjZVN0YXRlLmNhbGwod2luZG93Lmhpc3RvcnksIHN0YXRlLCB0aXRsZSwgdXJsKTtcbiAgICAgICAgICAgIHB1c2hIaXN0b3J5KHVybCwgc3RhdGUpO1xuICAgICAgICAgICAgZGlzcGF0Y2hNZXNzYWdlKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICB9LFxuICAgICAgICByZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIChzdGF0ZSwgdGl0bGUsIHVybCkge1xuICAgICAgICAgICAgb3JpZ0hpc3RvcnlQcm90by5yZXBsYWNlU3RhdGUuY2FsbCh3aW5kb3cuaGlzdG9yeSwgc3RhdGUsIHRpdGxlLCB1cmwpO1xuICAgICAgICAgICAgaGlzdG9yeUxpc3RbaGlzdG9yeVBvc2l0aW9uXSA9IHsgc3RhdGU6IHN0YXRlLCB1cmw6IHVybCB9O1xuICAgICAgICAgICAgZGlzcGF0Y2hNZXNzYWdlKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGhhbmRsZU1lc3NhZ2UoX2EpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBfYS5kYXRhO1xuICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcInVybGJhY2tcIikge1xuICAgICAgICAgICAgaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSBcInVybGZvcndhcmRcIikge1xuICAgICAgICAgICAgaGlzdG9yeS5mb3J3YXJkKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSBcInJlZnJlc2hcIikge1xuICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRsZU1lc3NhZ2UpO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5mdW5jdGlvbiB3YXRjaFJlc2l6ZShfYSkge1xuICAgIHZhciBzY29wZSA9IF9hLnNjb3BlO1xuICAgIHZhciBsYXN0SGVpZ2h0ID0gMDtcbiAgICBmdW5jdGlvbiBnZXREb2N1bWVudEhlaWdodCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICB2YXIgaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGJvZHkuc2Nyb2xsSGVpZ2h0LCBib2R5Lm9mZnNldEhlaWdodCwgaHRtbC5vZmZzZXRIZWlnaHQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZW5kUmVzaXplRXZlbnQoKSB7XG4gICAgICAgIHZhciBoZWlnaHQgPSBnZXREb2N1bWVudEhlaWdodCgpO1xuICAgICAgICBpZiAobGFzdEhlaWdodCAhPT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlc2l6ZVwiLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGNvZGVzYW5kYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxJZDogc2NvcGUuY2hhbm5lbElkLFxuICAgICAgICAgICAgfSwgXCIqXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RIZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICAgIHNlbmRSZXNpemVFdmVudCgpO1xuICAgIHZhciB0aHJvdHRsZTtcbiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aHJvdHRsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZW5kUmVzaXplRXZlbnQoKTtcbiAgICAgICAgICAgIHRocm90dGxlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3R0bGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgIHN1YnRyZWU6IHRydWUsXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogSWRlYWxseSB3ZSBzaG91bGQgb25seSB1c2UgYSBgTXV0YXRpb25PYnNlcnZlcmAgdG8gdHJpZ2dlciBhIHJlc2l6ZSBldmVudCxcbiAgICAgKiBob3dldmVyLCB3ZSBub3RlZCB0aGF0IGl0J3Mgbm90IDEwMCUgcmVsaWFibGUsIHNvIHdlIHdlbnQgZm9yIHBvbGxpbmcgc3RyYXRlZ3kgYXMgd2VsbFxuICAgICAqL1xuICAgIHNldEludGVydmFsKHNlbmRSZXNpemVFdmVudCwgMzAwKTtcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50ICovXG52YXIgc2NyaXB0cyA9IFtcbiAgICB7IGNvZGU6IHNldHVwSGlzdG9yeUxpc3RlbmVycy50b1N0cmluZygpLCBpZDogXCJoaXN0b3J5TGlzdGVuZXJcIiB9LFxuICAgIHtcbiAgICAgICAgY29kZTogXCJmdW5jdGlvbiBjb25zb2xlSG9vayh7IHNjb3BlIH0pIHtcIiArIGNvbnNvbGVIb29rICsgXCJcXG59O1wiLFxuICAgICAgICBpZDogXCJjb25zb2xlSG9va1wiLFxuICAgIH0sXG4gICAgeyBjb2RlOiB3YXRjaFJlc2l6ZS50b1N0cmluZygpLCBpZDogXCJ3YXRjaFJlc2l6ZVwiIH0sXG5dO1xudmFyIGluamVjdFNjcmlwdFRvSWZyYW1lID0gZnVuY3Rpb24gKGlmcmFtZSwgY2hhbm5lbElkKSB7XG4gICAgc2NyaXB0cy5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgX2I7XG4gICAgICAgIHZhciBjb2RlID0gX2EuY29kZSwgaWQgPSBfYS5pZDtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XG4gICAgICAgICAgICB1aWQ6IGlkLFxuICAgICAgICAgICAgdHlwZTogSU5KRUNUX01FU1NBR0VfVFlQRSxcbiAgICAgICAgICAgIGNvZGU6IFwiZXhwb3J0cy5hY3RpdmF0ZSA9IFwiLmNvbmNhdChjb2RlKSxcbiAgICAgICAgICAgIHNjb3BlOiB7IGNoYW5uZWxJZDogY2hhbm5lbElkIH0sXG4gICAgICAgIH07XG4gICAgICAgIChfYiA9IGlmcmFtZS5jb250ZW50V2luZG93KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucG9zdE1lc3NhZ2UobWVzc2FnZSwgXCIqXCIpO1xuICAgIH0pO1xufTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LHByZWZlci1yZXN0LXBhcmFtcyxAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzICovXG52YXIgU2FuZHBhY2tOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTYW5kcGFja05vZGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FuZHBhY2tOb2RlKHNlbGVjdG9yLCBzYW5kYm94SW5mbywgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzZWxlY3Rvciwgc2FuZGJveEluZm8sIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBidW5kbGVyVVJMOiBvcHRpb25zLmJ1bmRsZXJVUkwgfSkpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9tb2R1bGVzQ2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIF90aGlzLm1lc3NhZ2VDaGFubmVsSWQgPSBnZW5lcmF0ZVJhbmRvbUlkKCk7XG4gICAgICAgIF90aGlzLl9pbml0UHJvbWlzZSA9IG51bGw7XG4gICAgICAgIF90aGlzLmVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8vIEFzc2lnbiBpZnJhbWVzXG4gICAgICAgIF90aGlzLm1hbmFnZUlmcmFtZXMoc2VsZWN0b3IpO1xuICAgICAgICAvLyBJbml0IGVtdWxhdG9yXG4gICAgICAgIF90aGlzLmVtdWxhdG9yID0gbmV3IE5vZGVib3goe1xuICAgICAgICAgICAgaWZyYW1lOiBfdGhpcy5lbXVsYXRvcklmcmFtZSxcbiAgICAgICAgICAgIHJ1bnRpbWVVcmw6IF90aGlzLm9wdGlvbnMuYnVuZGxlclVSTCxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRyaWdnZXIgaW5pdGlhbCBjb21waWxlXG4gICAgICAgIF90aGlzLnVwZGF0ZVNhbmRib3goc2FuZGJveEluZm8pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8vIEluaXRpYWxpemUgbm9kZWJveCwgc2hvdWxkIG9ubHkgZXZlciBiZSBjYWxsZWQgb25jZVxuICAgIFNhbmRwYWNrTm9kZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoZmlsZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yLmNvbm5lY3QoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuIFNldHVwXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yLmZzLmluaXQoZmlsZXMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gU2V0dXBcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuMSBPdGhlciBkZXBlbmRlbmNpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2xvYmFsTGlzdGVuZXJzKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLjEgT3RoZXIgZGVwZW5kZW5jaWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXQgaW5pdGlhbGl6ZXMgdGhlIGVtdWxhdG9yIGFuZCBwcm92aWRlIGl0IHdpdGggZmlsZXMsIHRlbXBsYXRlIGFuZCBzY3JpcHQgdG8gcnVuXG4gICAgICovXG4gICAgU2FuZHBhY2tOb2RlLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24gKGZpbGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzaGVsbElkLCBlcnJfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgNSwgLCA2XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAxLiBJbml0XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFwiaW5pdGlhbGl6aW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogXCJzdGFydFwiLCBmaXJzdExvYWQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5pdFByb21pc2UgPSB0aGlzLl9pbml0KGZpbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuX2luaXRQcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IFwiY29ubmVjdGVkXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNyZWF0ZVNoZWxsUHJvY2Vzc0Zyb21UYXNrKGZpbGVzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWxsSWQgPSAoX2Euc2VudCgpKS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDQuIExhdW5jaCBQcmV2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNyZWF0ZVByZXZpZXdVUkxGcm9tSWQoc2hlbGxJZCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA0LiBMYXVuY2ggUHJldmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zZXRMb2NhdGlvblVSTEludG9JRnJhbWUoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDUuIFJldHVybnMgdG8gY29uc3VtZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hEb25lTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwibm90aWZpY2F0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uVHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBnZXRNZXNzYWdlRnJvbUVycm9yKGVycl8xKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IFwiZG9uZVwiLCBjb21waWxhdG9uRXJyb3I6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXQgY3JlYXRlcyBhIG5ldyBzaGVsbCBhbmQgcnVuIHRoZSBzdGFydGluZyB0YXNrXG4gICAgICovXG4gICAgU2FuZHBhY2tOb2RlLnByb3RvdHlwZS5jcmVhdGVTaGVsbFByb2Nlc3NGcm9tVGFzayA9IGZ1bmN0aW9uIChmaWxlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFja2FnZUpzb25Db250ZW50O1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2VKc29uQ29udGVudCA9IHJlYWRCdWZmZXIoZmlsZXNbXCIvcGFja2FnZS5qc29uXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW11bGF0b3JDb21tYW5kID0gZmluZFN0YXJ0U2NyaXB0UGFja2FnZUpzb24ocGFja2FnZUpzb25Db250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW11bGF0b3JTaGVsbFByb2Nlc3MgPSB0aGlzLmVtdWxhdG9yLnNoZWxsLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hlbGwgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yU2hlbGxQcm9jZXNzLm9uKFwiZXhpdFwiLCBmdW5jdGlvbiAoZXhpdENvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJub3RpZmljYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblR5cGU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBjcmVhdGVFcnJvcihcIkVycm9yOiBwcm9jZXNzLmV4aXQoXCIuY29uY2F0KGV4aXRDb2RlLCBcIikgY2FsbGVkLlwiKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hlbGwgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yU2hlbGxQcm9jZXNzLm9uKFwicHJvZ3Jlc3NcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdGUgPT09IFwiY29tbWFuZF9ydW5uaW5nXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc3RhdGUgPT09IFwic3RhcnRpbmdfY29tbWFuZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzaGVsbC9wcm9ncmVzc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBkYXRhKSwgeyBjb21tYW5kOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX2EgPSBfdGhpcy5lbXVsYXRvckNvbW1hbmQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfYiA9IF90aGlzLmVtdWxhdG9yQ29tbWFuZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iWzFdLmpvaW4oXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGF0dXMgPSBcImluc3RhbGxpbmctZGVwZW5kZW5jaWVzXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGlzcGF0Y2goeyB0eXBlOiBcInNoZWxsL3Byb2dyZXNzXCIsIGRhdGE6IGRhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtdWxhdG9yU2hlbGxQcm9jZXNzLnN0ZG91dC5vbihcImRhdGFcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXNwYXRjaCh7IHR5cGU6IFwic3Rkb3V0XCIsIHBheWxvYWQ6IHsgZGF0YTogZGF0YSwgdHlwZTogXCJvdXRcIiB9IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtdWxhdG9yU2hlbGxQcm9jZXNzLnN0ZGVyci5vbihcImRhdGFcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXNwYXRjaCh7IHR5cGU6IFwic3Rkb3V0XCIsIHBheWxvYWQ6IHsgZGF0YTogZGF0YSwgdHlwZTogXCJlcnJcIiB9IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoX2EgPSB0aGlzLmVtdWxhdG9yU2hlbGxQcm9jZXNzKS5ydW5Db21tYW5kLmFwcGx5KF9hLCB0aGlzLmVtdWxhdG9yQ29tbWFuZCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovLCBfYi5zZW50KCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFNhbmRwYWNrTm9kZS5wcm90b3R5cGUuY3JlYXRlUHJldmlld1VSTEZyb21JZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1cmw7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlmcmFtZVByZXZpZXdVcmwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yLnByZXZpZXcuZ2V0QnlTaGVsbElkKGlkKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IChfYi5zZW50KCkpLnVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWZyYW1lUHJldmlld1VybCA9IHVybCArICgoX2EgPSB0aGlzLm9wdGlvbnMuc3RhcnRSb3V0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm9kZWJveCBuZWVkcyB0byBoYW5kbGUgdHdvIHR5cGVzIG9mIGlmcmFtZXMgYXQgdGhlIHNhbWUgdGltZTpcbiAgICAgKlxuICAgICAqIDEuIFJ1bnRpbWUgaWZyYW1lOiB3aGVyZSB0aGUgZW11bGF0b3IgcHJvY2VzcyBydW5zLCB3aGljaCBpcyByZXNwb25zaWJsZVxuICAgICAqICAgIGZvciBjcmVhdGluZyB0aGUgb3RoZXIgaWZyYW1lcyAoaGlkZGVuKTtcbiAgICAgKiAyLiBQcmV2aWV3IGlmcmFtZXM6IGFueSBvdGhlciBub2RlIHByb2Nlc3MgdGhhdCBjb250YWlucyBhIFBPUlQgKHB1YmxpYyk7XG4gICAgICovXG4gICAgU2FuZHBhY2tOb2RlLnByb3RvdHlwZS5tYW5hZ2VJZnJhbWVzID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBpY2sgdGhlIHByZXZpZXcgaWZyYW1lXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgbnVsbHRocm93cyhlbGVtZW50LCBcIlRoZSBlbGVtZW50ICdcIi5jb25jYXQoc2VsZWN0b3IsIFwiJyB3YXMgbm90IGZvdW5kXCIpKTtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lID0gc2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHByZXZpZXcgaWZyYW1lIHN0eWxlc1xuICAgICAgICBzZXRQcmV2aWV3SWZyYW1lUHJvcGVydGllcyh0aGlzLmlmcmFtZSwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgbnVsbHRocm93cyh0aGlzLmlmcmFtZS5wYXJlbnROb2RlLCBcIlRoZSBnaXZlbiBpZnJhbWUgZG9lcyBub3QgaGF2ZSBhIHBhcmVudC5cIik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUgdGhlIHJ1bnRpbWUgaWZyYW1lLCB3aGljaCBpcyBoaWRkZW4gc2libGluZ1xuICAgICAgICAgKiBmcm9tIHRoZSBwcmV2aWV3IG9uZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbXVsYXRvcklmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgIHRoaXMuZW11bGF0b3JJZnJhbWUuY2xhc3NMaXN0LmFkZChcInNwLWJyaWRnZS1mcmFtZVwiKTtcbiAgICAgICAgKF9hID0gdGhpcy5pZnJhbWUucGFyZW50Tm9kZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFwcGVuZENoaWxkKHRoaXMuZW11bGF0b3JJZnJhbWUpO1xuICAgIH07XG4gICAgU2FuZHBhY2tOb2RlLnByb3RvdHlwZS5zZXRMb2NhdGlvblVSTEludG9JRnJhbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pZnJhbWVQcmV2aWV3VXJsKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRQcmV2aWV3SWZyYW1lKHRoaXMuaWZyYW1lLCB0aGlzLmlmcmFtZVByZXZpZXdVcmwpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZW5kIGFsbCBtZXNzYWdlcyBhbmQgZXZlbnRzIHRvIHRlbGwgdG8gdGhlXG4gICAgICogY29uc3VtZXIgdGhhdCB0aGUgYnVuZGxlciBpcyByZWFkeSB3aXRob3V0IGFueSBlcnJvclxuICAgICAqL1xuICAgIFNhbmRwYWNrTm9kZS5wcm90b3R5cGUuZGlzcGF0Y2hEb25lTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBcImRvbmVcIjtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IFwiZG9uZVwiLCBjb21waWxhdG9uRXJyb3I6IGZhbHNlIH0pO1xuICAgICAgICBpZiAodGhpcy5pZnJhbWVQcmV2aWV3VXJsKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVybGNoYW5nZVwiLFxuICAgICAgICAgICAgICAgIHVybDogdGhpcy5pZnJhbWVQcmV2aWV3VXJsLFxuICAgICAgICAgICAgICAgIGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGZvcndhcmQ6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhbmRwYWNrTm9kZS5wcm90b3R5cGUuZ2xvYmFsTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnR5cGUgPT09IFBSRVZJRVdfTE9BREVEX01FU1NBR0VfVFlQRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmplY3RTY3JpcHRUb0lmcmFtZShfdGhpcy5pZnJhbWUsIF90aGlzLm1lc3NhZ2VDaGFubmVsSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS50eXBlID09PSBcInVybGNoYW5nZVwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuY2hhbm5lbElkID09PSBfdGhpcy5tZXNzYWdlQ2hhbm5lbElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidXJsY2hhbmdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGV2ZW50LmRhdGEudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFjazogZXZlbnQuZGF0YS5iYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yd2FyZDogZXZlbnQuZGF0YS5mb3J3YXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQuZGF0YS5jaGFubmVsSWQgPT09IF90aGlzLm1lc3NhZ2VDaGFubmVsSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGlzcGF0Y2goZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yLmZzLndhdGNoKFtcIipcIl0sIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIubmV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5vZGVfbW9kdWxlc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGlzdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInZlbmRvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi5jb25maWdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIudnVlcHJlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLCBmdW5jdGlvbiAobWVzc2FnZSkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQsIHBhdGgsIHR5cGUsIF9hLCBjb250ZW50LCBuZXdDb250ZW50LCBlcnJfMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBcIm5ld1BhdGhcIiBpbiBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBldmVudC5uZXdQYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicGF0aFwiIGluIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBldmVudC5wYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yLmZzLnN0YXQocGF0aCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IChfYi5zZW50KCkpLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlICE9PSBcImZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBudWxsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFsyLCAxMCwgLCAxMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYSA9IGV2ZW50LnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjaGFuZ2VcIjogcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3JlYXRlXCI6IHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJlbW92ZVwiOiByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZW5hbWVcIjogcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2xvc2VcIjogcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yLmZzLnJlYWRGaWxlKGV2ZW50LnBhdGgsIFwidXRmOFwiKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnMvY2hhbmdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBldmVudC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vZHVsZXNDYWNoZS5zZXQoZXZlbnQucGF0aCwgd3JpdGVCdWZmZXIoY29udGVudCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmcy9yZW1vdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGV2ZW50LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb2R1bGVzQ2FjaGUuZGVsZXRlKGV2ZW50LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmcy9yZW1vdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGV2ZW50Lm9sZFBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb2R1bGVzQ2FjaGUuZGVsZXRlKGV2ZW50Lm9sZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yLmZzLnJlYWRGaWxlKGV2ZW50Lm5ld1BhdGgsIFwidXRmOFwiKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50ID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnMvY2hhbmdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBldmVudC5uZXdQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbmV3Q29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vZHVsZXNDYWNoZS5zZXQoZXZlbnQubmV3UGF0aCwgd3JpdGVCdWZmZXIobmV3Q29udGVudCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6IHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFszIC8qYnJlYWsqLywgMTFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwibm90aWZpY2F0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25UeXBlOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZ2V0TWVzc2FnZUZyb21FcnJvcihlcnJfMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUFVCTElDIE1ldGhvZHNcbiAgICAgKi9cbiAgICBTYW5kcGFja05vZGUucHJvdG90eXBlLnJlc3RhcnRTaGVsbFByb2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5lbXVsYXRvclNoZWxsUHJvY2VzcyAmJiB0aGlzLmVtdWxhdG9yQ29tbWFuZCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gU2V0IHRoZSBsb2FkaW5nIHN0YXRlIGFuZCBjbGVhbiB0aGUgVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogXCJzdGFydFwiLCBmaXJzdExvYWQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFwiaW5pdGlhbGl6aW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBFeGl0IHNoZWxsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtdWxhdG9yU2hlbGxQcm9jZXNzLmtpbGwoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuIEV4aXQgc2hlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuaWZyYW1lKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVtb3ZlQXR0cmlidXRlKFwiYXR0clwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW11bGF0b3IuZnMucm0oXCIvbm9kZV9tb2R1bGVzLy52aXRlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2U6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDMgUnVuIGNvbW1hbmQgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY29tcGlsZShPYmplY3QuZnJvbUVudHJpZXModGhpcy5fbW9kdWxlc0NhY2hlKSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAzIFJ1biBjb21tYW5kIGFnYWluXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFNhbmRwYWNrTm9kZS5wcm90b3R5cGUudXBkYXRlU2FuZGJveCA9IGZ1bmN0aW9uIChzZXR1cCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBtb2R1bGVzID0gZnJvbUJ1bmRsZXJGaWxlc1RvRlMoc2V0dXAuZmlsZXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGZpbGUgY2hhbmdlc1xuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLmVtdWxhdG9yU2hlbGxQcm9jZXNzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RhdGUpID09PSBcInJ1bm5pbmdcIikge1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMobW9kdWxlcykuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2FbMF0sIHZhbHVlID0gX2FbMV07XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5fbW9kdWxlc0NhY2hlLmdldChrZXkpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlYWRCdWZmZXIodmFsdWUpICE9PSByZWFkQnVmZmVyKF90aGlzLl9tb2R1bGVzQ2FjaGUuZ2V0KGtleSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVtdWxhdG9yLmZzLndyaXRlRmlsZShrZXksIHZhbHVlLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUGFzcyBpbml0IGZpbGVzIHRvIHRoZSBidW5kbGVyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGNvZGVzYW5kYm94OiB0cnVlLFxuICAgICAgICAgICAgbW9kdWxlczogbW9kdWxlcyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR1cC50ZW1wbGF0ZSxcbiAgICAgICAgICAgIHR5cGU6IFwiY29tcGlsZVwiLFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBtb2R1bGVzIHRvIGNhY2hlLCB0aGlzIHdpbGwgZW5zdXJlIHVuaXF1ZW5lc3MgY2hhbmdlc1xuICAgICAgICAgKlxuICAgICAgICAgKiBLZWVwIGl0IGFmdGVyIHRoZSBjb21waWxlIGFjdGlvbiwgaW4gb3JkZXIgdG8gdXBkYXRlIHRoZSBjYWNoZSBhdCB0aGUgcmlnaHQgbW9tZW50XG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZW50cmllcyhtb2R1bGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IF9hWzBdLCB2YWx1ZSA9IF9hWzFdO1xuICAgICAgICAgICAgX3RoaXMuX21vZHVsZXNDYWNoZS5zZXQoa2V5LCB3cml0ZUJ1ZmZlcih2YWx1ZSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFNhbmRwYWNrTm9kZS5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2M7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9kKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfZC5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYyA9IG1lc3NhZ2UudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29tcGlsZVwiOiByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVmcmVzaFwiOiByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidXJsYmFja1wiOiByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidXJsZm9yd2FyZFwiOiByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2hlbGwvcmVzdGFydFwiOiByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2hlbGwvb3BlblByZXZpZXdcIjogcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21waWxlKG1lc3NhZ2UubW9kdWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnNldExvY2F0aW9uVVJMSW50b0lGcmFtZSgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Quc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYiA9IChfYSA9IHRoaXMuaWZyYW1lKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGVudFdpbmRvdykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFwiKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RhcnRTaGVsbFByb2Nlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3Blbih0aGlzLmlmcmFtZVByZXZpZXdVcmwsIFwiX2JsYW5rXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5kaXNwYXRjaChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kLmxhYmVsID0gODtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2FuZHBhY2tOb2RlLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1pdHRlci5saXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgfTtcbiAgICBTYW5kcGFja05vZGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZW11bGF0b3JJZnJhbWUucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5jbGVhbnVwKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FuZHBhY2tOb2RlO1xufShTYW5kcGFja0NsaWVudCkpO1xuXG5leHBvcnQgeyBTYW5kcGFja05vZGUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/sandpack-client/dist/clients/node/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@codesandbox/sandpack-client/dist/clients/runtime/index.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/clients/runtime/index.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SandpackRuntime: () => (/* binding */ SandpackRuntime)\n/* harmony export */ });\n/* harmony import */ var _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../types-0877c553.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs\");\n/* harmony import */ var dequal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dequal */ \"(ssr)/./node_modules/dequal/dist/index.mjs\");\n/* harmony import */ var _base_80a1f760_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../base-80a1f760.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n\n\n\n\n\n/**\n * This file is a copy of the resolver from the `codesandbox-api` package.\n * We wanted to avoid to reference codesandbox-api because of the code that runs on load in the package.\n * The plan is to take some time and refactor codesandbox-api into what it was supposed to be in the first place,\n * an abstraction over the actions that can be dispatched between the bundler and the iframe.\n */\nvar Protocol = /** @class */ (function () {\n    function Protocol(type, handleMessage, protocol) {\n        var _this = this;\n        this.type = type;\n        this.handleMessage = handleMessage;\n        this.protocol = protocol;\n        this._disposeMessageListener = this.protocol.channelListen(function (msg) { return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__._)(_this, void 0, void 0, function () {\n            var message, result, response, err_1, response;\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(msg.type === this.getTypeId() && msg.method)) return [3 /*break*/, 4];\n                        message = msg;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.handleMessage(message)];\n                    case 2:\n                        result = _a.sent();\n                        response = {\n                            type: this.getTypeId(),\n                            msgId: message.msgId,\n                            result: result,\n                        };\n                        this.protocol.dispatch(response);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        response = {\n                            type: this.getTypeId(),\n                            msgId: message.msgId,\n                            error: {\n                                message: err_1.message,\n                            },\n                        };\n                        this.protocol.dispatch(response);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); });\n    }\n    Protocol.prototype.getTypeId = function () {\n        return \"protocol-\".concat(this.type);\n    };\n    Protocol.prototype.dispose = function () {\n        this._disposeMessageListener();\n    };\n    return Protocol;\n}());\n\nvar IFrameProtocol = /** @class */ (function () {\n    function IFrameProtocol(iframe, origin) {\n        // React to messages from any iframe\n        this.globalListeners = {};\n        this.globalListenersCount = 0;\n        // React to messages from the iframe owned by this instance\n        this.channelListeners = {};\n        this.channelListenersCount = 0;\n        // Random number to identify this instance of the client when messages are coming from multiple iframes\n        this.channelId = Math.floor(Math.random() * 1000000);\n        this.frameWindow = iframe.contentWindow;\n        this.origin = origin;\n        this.globalListeners = [];\n        this.channelListeners = [];\n        this.eventListener = this.eventListener.bind(this);\n        if (typeof window !== \"undefined\") {\n            window.addEventListener(\"message\", this.eventListener);\n        }\n    }\n    IFrameProtocol.prototype.cleanup = function () {\n        window.removeEventListener(\"message\", this.eventListener);\n        this.globalListeners = {};\n        this.channelListeners = {};\n        this.globalListenersCount = 0;\n        this.channelListenersCount = 0;\n    };\n    // Sends the channelId and triggers an iframeHandshake promise to resolve,\n    // so the iframe can start listening for messages (based on the id)\n    IFrameProtocol.prototype.register = function () {\n        if (!this.frameWindow) {\n            return;\n        }\n        this.frameWindow.postMessage({\n            type: \"register-frame\",\n            origin: document.location.origin,\n            id: this.channelId,\n        }, this.origin);\n    };\n    // Messages are dispatched from the client directly to the instance iframe\n    IFrameProtocol.prototype.dispatch = function (message) {\n        if (!this.frameWindow) {\n            return;\n        }\n        this.frameWindow.postMessage((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({ $id: this.channelId, codesandbox: true }, message), this.origin);\n    };\n    // Add a listener that is called on any message coming from an iframe in the page\n    // This is needed for the `initialize` message which comes without a channelId\n    IFrameProtocol.prototype.globalListen = function (listener) {\n        var _this = this;\n        if (typeof listener !== \"function\") {\n            return function () {\n                return;\n            };\n        }\n        var listenerId = this.globalListenersCount;\n        this.globalListeners[listenerId] = listener;\n        this.globalListenersCount++;\n        return function () {\n            delete _this.globalListeners[listenerId];\n        };\n    };\n    // Add a listener that is called on any message coming from an iframe with the instance channelId\n    // All other messages (eg: from other iframes) are ignored\n    IFrameProtocol.prototype.channelListen = function (listener) {\n        var _this = this;\n        if (typeof listener !== \"function\") {\n            return function () {\n                return;\n            };\n        }\n        var listenerId = this.channelListenersCount;\n        this.channelListeners[listenerId] = listener;\n        this.channelListenersCount++;\n        return function () {\n            delete _this.channelListeners[listenerId];\n        };\n    };\n    // Handles message windows coming from iframes\n    IFrameProtocol.prototype.eventListener = function (evt) {\n        // skip events originating from different iframes\n        if (evt.source !== this.frameWindow) {\n            return;\n        }\n        var message = evt.data;\n        if (!message.codesandbox) {\n            return;\n        }\n        Object.values(this.globalListeners).forEach(function (listener) {\n            return listener(message);\n        });\n        if (message.$id !== this.channelId) {\n            return;\n        }\n        Object.values(this.channelListeners).forEach(function (listener) {\n            return listener(message);\n        });\n    };\n    return IFrameProtocol;\n}());\n\nvar MAX_CLIENT_DEPENDENCY_COUNT = 50;\nfunction getTemplate(pkg, \n/* eslint-disable @typescript-eslint/no-explicit-any */\nmodules) {\n    if (!pkg) {\n        return \"static\";\n    }\n    var _a = pkg.dependencies, dependencies = _a === void 0 ? {} : _a, _b = pkg.devDependencies, devDependencies = _b === void 0 ? {} : _b;\n    var totalDependencies = (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.i)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.i)([], Object.keys(dependencies), true), Object.keys(devDependencies), true);\n    var moduleNames = Object.keys(modules);\n    var adonis = [\"@adonisjs/framework\", \"@adonisjs/core\"];\n    if (totalDependencies.some(function (dep) { return adonis.indexOf(dep) > -1; })) {\n        return \"adonis\";\n    }\n    var nuxt = [\"nuxt\", \"nuxt-edge\", \"nuxt-ts\", \"nuxt-ts-edge\", \"nuxt3\"];\n    if (totalDependencies.some(function (dep) { return nuxt.indexOf(dep) > -1; })) {\n        return \"nuxt\";\n    }\n    if (totalDependencies.indexOf(\"next\") > -1) {\n        return \"next\";\n    }\n    var apollo = [\n        \"apollo-server\",\n        \"apollo-server-express\",\n        \"apollo-server-hapi\",\n        \"apollo-server-koa\",\n        \"apollo-server-lambda\",\n        \"apollo-server-micro\",\n    ];\n    if (totalDependencies.some(function (dep) { return apollo.indexOf(dep) > -1; })) {\n        return \"apollo\";\n    }\n    if (totalDependencies.indexOf(\"mdx-deck\") > -1) {\n        return \"mdx-deck\";\n    }\n    if (totalDependencies.indexOf(\"gridsome\") > -1) {\n        return \"gridsome\";\n    }\n    if (totalDependencies.indexOf(\"vuepress\") > -1) {\n        return \"vuepress\";\n    }\n    if (totalDependencies.indexOf(\"ember-cli\") > -1) {\n        return \"ember\";\n    }\n    if (totalDependencies.indexOf(\"sapper\") > -1) {\n        return \"sapper\";\n    }\n    if (totalDependencies.indexOf(\"gatsby\") > -1) {\n        return \"gatsby\";\n    }\n    if (totalDependencies.indexOf(\"quasar\") > -1) {\n        return \"quasar\";\n    }\n    if (totalDependencies.indexOf(\"@docusaurus/core\") > -1) {\n        return \"docusaurus\";\n    }\n    if (totalDependencies.indexOf(\"remix\") > -1) {\n        return \"remix\";\n    }\n    if (totalDependencies.indexOf(\"astro\") > -1) {\n        return \"node\";\n    }\n    // CLIENT\n    if (moduleNames.some(function (m) { return m.endsWith(\".re\"); })) {\n        return \"reason\";\n    }\n    var parcel = [\"parcel-bundler\", \"parcel\"];\n    if (totalDependencies.some(function (dep) { return parcel.indexOf(dep) > -1; })) {\n        return \"parcel\";\n    }\n    var dojo = [\"@dojo/core\", \"@dojo/framework\"];\n    if (totalDependencies.some(function (dep) { return dojo.indexOf(dep) > -1; })) {\n        return \"@dojo/cli-create-app\";\n    }\n    if (totalDependencies.indexOf(\"@nestjs/core\") > -1 ||\n        totalDependencies.indexOf(\"@nestjs/common\") > -1) {\n        return \"nest\";\n    }\n    if (totalDependencies.indexOf(\"react-styleguidist\") > -1) {\n        return \"styleguidist\";\n    }\n    if (totalDependencies.indexOf(\"react-scripts\") > -1) {\n        return \"create-react-app\";\n    }\n    if (totalDependencies.indexOf(\"react-scripts-ts\") > -1) {\n        return \"create-react-app-typescript\";\n    }\n    if (totalDependencies.indexOf(\"@angular/core\") > -1) {\n        return \"angular-cli\";\n    }\n    if (totalDependencies.indexOf(\"preact-cli\") > -1) {\n        return \"preact-cli\";\n    }\n    if (totalDependencies.indexOf(\"@sveltech/routify\") > -1 ||\n        totalDependencies.indexOf(\"@roxi/routify\") > -1) {\n        return \"node\";\n    }\n    if (totalDependencies.indexOf(\"vite\") > -1) {\n        return \"node\";\n    }\n    if (totalDependencies.indexOf(\"@frontity/core\") > -1) {\n        return \"node\";\n    }\n    if (totalDependencies.indexOf(\"svelte\") > -1) {\n        return \"svelte\";\n    }\n    if (totalDependencies.indexOf(\"vue\") > -1) {\n        return \"vue-cli\";\n    }\n    if (totalDependencies.indexOf(\"cx\") > -1) {\n        return \"cxjs\";\n    }\n    var nodeDeps = [\n        \"express\",\n        \"koa\",\n        \"nodemon\",\n        \"ts-node\",\n        \"@tensorflow/tfjs-node\",\n        \"webpack-dev-server\",\n        \"snowpack\",\n    ];\n    if (totalDependencies.some(function (dep) { return nodeDeps.indexOf(dep) > -1; })) {\n        return \"node\";\n    }\n    if (Object.keys(dependencies).length >= MAX_CLIENT_DEPENDENCY_COUNT) {\n        // The dependencies are too much for client sandboxes to handle\n        return \"node\";\n    }\n    return undefined;\n}\n\nvar _a;\nvar BUNDLER_URL = \"https://\".concat((_a = \"2.12.0\") === null || _a === void 0 ? void 0 : _a.replace(/\\./g, \"-\"), \"-sandpack.codesandbox.io/\");\nvar SandpackRuntime = /** @class */ (function (_super) {\n    (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(SandpackRuntime, _super);\n    function SandpackRuntime(selector, sandboxSetup, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, selector, sandboxSetup, options) || this;\n        _this.getTranspilerContext = function () {\n            return new Promise(function (resolve) {\n                var unsubscribe = _this.listen(function (message) {\n                    if (message.type === \"transpiler-context\") {\n                        resolve(message.data);\n                        unsubscribe();\n                    }\n                });\n                _this.dispatch({ type: \"get-transpiler-context\" });\n            });\n        };\n        _this.bundlerURL = options.bundlerURL || BUNDLER_URL;\n        if (options.teamId) {\n            _this.bundlerURL =\n                _this.bundlerURL.replace(\"https://\", \"https://\" + options.teamId + \"-\") +\n                    \"?cache=\".concat(Date.now());\n        }\n        _this.bundlerState = undefined;\n        _this.errors = [];\n        _this.status = \"initializing\";\n        if (typeof selector === \"string\") {\n            _this.selector = selector;\n            var element = document.querySelector(selector);\n            (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(element, \"The element '\".concat(selector, \"' was not found\"));\n            _this.element = element;\n            _this.iframe = document.createElement(\"iframe\");\n            _this.initializeElement();\n        }\n        else {\n            _this.element = selector;\n            _this.iframe = selector;\n        }\n        if (!_this.iframe.getAttribute(\"sandbox\")) {\n            _this.iframe.setAttribute(\"sandbox\", \"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts allow-downloads allow-pointer-lock\");\n            _this.iframe.setAttribute(\"allow\", \"accelerometer; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; clipboard-write;\");\n        }\n        _this.setLocationURLIntoIFrame();\n        _this.iframeProtocol = new IFrameProtocol(_this.iframe, _this.bundlerURL);\n        _this.unsubscribeGlobalListener = _this.iframeProtocol.globalListen(function (mes) {\n            if (mes.type !== \"initialized\" || !_this.iframe.contentWindow) {\n                return;\n            }\n            _this.iframeProtocol.register();\n            if (_this.options.fileResolver) {\n                _this.fileResolverProtocol = new Protocol(\"fs\", function (data) { return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__._)(_this, void 0, void 0, function () {\n                    return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(this, function (_a) {\n                        if (data.method === \"isFile\") {\n                            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                            return [2 /*return*/, this.options.fileResolver.isFile(data.params[0])];\n                        }\n                        else if (data.method === \"readFile\") {\n                            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                            return [2 /*return*/, this.options.fileResolver.readFile(data.params[0])];\n                        }\n                        else {\n                            throw new Error(\"Method not supported\");\n                        }\n                    });\n                }); }, _this.iframeProtocol);\n            }\n            _this.updateSandbox(_this.sandboxSetup, true);\n        });\n        _this.unsubscribeChannelListener = _this.iframeProtocol.channelListen(function (mes) {\n            switch (mes.type) {\n                case \"start\": {\n                    _this.errors = [];\n                    break;\n                }\n                case \"status\": {\n                    _this.status = mes.status;\n                    break;\n                }\n                case \"action\": {\n                    if (mes.action === \"show-error\") {\n                        _this.errors = (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.i)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.i)([], _this.errors, true), [(0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.e)(mes)], false);\n                    }\n                    break;\n                }\n                case \"done\": {\n                    _this.status = \"done\";\n                    break;\n                }\n                case \"state\": {\n                    _this.bundlerState = mes.state;\n                    break;\n                }\n            }\n        });\n        return _this;\n    }\n    SandpackRuntime.prototype.setLocationURLIntoIFrame = function () {\n        var _a;\n        var urlSource = this.options.startRoute\n            ? new URL(this.options.startRoute, this.bundlerURL).toString()\n            : this.bundlerURL;\n        (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.location.replace(urlSource);\n        this.iframe.src = urlSource;\n    };\n    SandpackRuntime.prototype.destroy = function () {\n        this.unsubscribeChannelListener();\n        this.unsubscribeGlobalListener();\n        this.iframeProtocol.cleanup();\n    };\n    SandpackRuntime.prototype.updateOptions = function (options) {\n        if (!(0,dequal__WEBPACK_IMPORTED_MODULE_0__.dequal)(this.options, options)) {\n            this.options = options;\n            this.updateSandbox();\n        }\n    };\n    SandpackRuntime.prototype.updateSandbox = function (sandboxSetup, isInitializationCompile) {\n        var _a, _b, _c, _d;\n        if (sandboxSetup === void 0) { sandboxSetup = this.sandboxSetup; }\n        this.sandboxSetup = (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({}, this.sandboxSetup), sandboxSetup);\n        var files = this.getFiles();\n        var modules = Object.keys(files).reduce(function (prev, next) {\n            var _a;\n            return ((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({}, prev), (_a = {}, _a[next] = {\n                code: files[next].code,\n                path: next,\n            }, _a)));\n        }, {});\n        var packageJSON = JSON.parse((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.b)(this.sandboxSetup.dependencies, this.sandboxSetup.devDependencies, this.sandboxSetup.entry));\n        try {\n            packageJSON = JSON.parse(files[\"/package.json\"].code);\n        }\n        catch (e) {\n            console.error((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(\"could not parse package.json file: \" + e.message));\n        }\n        // TODO move this to a common format\n        var normalizedModules = Object.keys(files).reduce(function (prev, next) {\n            var _a;\n            return ((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({}, prev), (_a = {}, _a[next] = {\n                content: files[next].code,\n                path: next,\n            }, _a)));\n        }, {});\n        this.dispatch({\n            type: \"compile\",\n            codesandbox: true,\n            version: 3,\n            isInitializationCompile: isInitializationCompile,\n            modules: modules,\n            reactDevTools: this.options.reactDevTools,\n            externalResources: this.options.externalResources || [],\n            hasFileResolver: Boolean(this.options.fileResolver),\n            disableDependencyPreprocessing: this.sandboxSetup.disableDependencyPreprocessing,\n            template: this.sandboxSetup.template ||\n                getTemplate(packageJSON, normalizedModules),\n            showOpenInCodeSandbox: (_a = this.options.showOpenInCodeSandbox) !== null && _a !== void 0 ? _a : true,\n            showErrorScreen: (_b = this.options.showErrorScreen) !== null && _b !== void 0 ? _b : true,\n            showLoadingScreen: (_c = this.options.showLoadingScreen) !== null && _c !== void 0 ? _c : false,\n            skipEval: this.options.skipEval || false,\n            clearConsoleDisabled: !this.options.clearConsoleOnFirstCompile,\n            logLevel: (_d = this.options.logLevel) !== null && _d !== void 0 ? _d : _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.S.Info,\n            customNpmRegistries: this.options.customNpmRegistries,\n            teamId: this.options.teamId,\n            sandboxId: this.options.sandboxId,\n        });\n    };\n    SandpackRuntime.prototype.dispatch = function (message) {\n        /**\n         * Intercept \"refresh\" dispatch: this will make sure\n         * that the iframe is still in the location it's supposed to be.\n         * External links inside the iframe will change the location and\n         * prevent the user from navigating back.\n         */\n        if (message.type === \"refresh\") {\n            this.setLocationURLIntoIFrame();\n        }\n        this.iframeProtocol.dispatch(message);\n    };\n    SandpackRuntime.prototype.listen = function (listener) {\n        return this.iframeProtocol.channelListen(listener);\n    };\n    /**\n     * Get the URL of the contents of the current sandbox\n     */\n    SandpackRuntime.prototype.getCodeSandboxURL = function () {\n        var files = this.getFiles();\n        var paramFiles = Object.keys(files).reduce(function (prev, next) {\n            var _a;\n            return ((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({}, prev), (_a = {}, _a[next.replace(\"/\", \"\")] = {\n                content: files[next].code,\n                isBinary: false,\n            }, _a)));\n        }, {});\n        return fetch(\"https://codesandbox.io/api/v1/sandboxes/define?json=1\", {\n            method: \"POST\",\n            body: JSON.stringify({ files: paramFiles }),\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n            },\n        })\n            .then(function (x) { return x.json(); })\n            .then(function (res) { return ({\n            sandboxId: res.sandbox_id,\n            editorUrl: \"https://codesandbox.io/s/\".concat(res.sandbox_id),\n            embedUrl: \"https://codesandbox.io/embed/\".concat(res.sandbox_id),\n        }); });\n    };\n    SandpackRuntime.prototype.getFiles = function () {\n        var sandboxSetup = this.sandboxSetup;\n        if (sandboxSetup.files[\"/package.json\"] === undefined) {\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.d)(sandboxSetup.files, sandboxSetup.dependencies, sandboxSetup.devDependencies, sandboxSetup.entry);\n        }\n        return this.sandboxSetup.files;\n    };\n    SandpackRuntime.prototype.initializeElement = function () {\n        this.iframe.style.border = \"0\";\n        this.iframe.style.width = this.options.width || \"100%\";\n        this.iframe.style.height = this.options.height || \"100%\";\n        this.iframe.style.overflow = \"hidden\";\n        (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(this.element.parentNode, \"The given iframe does not have a parent.\");\n        this.element.parentNode.replaceChild(this.iframe, this.element);\n    };\n    return SandpackRuntime;\n}(_base_80a1f760_mjs__WEBPACK_IMPORTED_MODULE_3__.S));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudC9kaXN0L2NsaWVudHMvcnVudGltZS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd1E7QUFDeE87QUFDOEI7QUFDMUM7O0FBRXBCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixPQUFPLHNEQUFTO0FBQ3BHO0FBQ0EsbUJBQW1CLHNEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsSUFBSTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsc0RBQVEsR0FBRyx3Q0FBd0M7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBLG9CQUFvQixzREFBUSxDQUFDLHNEQUFRLEdBQUcsaUJBQWlCO0FBQ3pEO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxJQUFJO0FBQ2IscUNBQXFDLHNEQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBVztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzREFBUSxDQUFDLHNEQUFRLEdBQUcsaUJBQWlCO0FBQ3pEO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixrREFBZ0I7QUFDcEc7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0RBQVEsQ0FBQyxzREFBUSxHQUFHLGlCQUFpQjtBQUN6RDtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsSUFBSTtBQUNiO0FBQ0E7QUFDQSxtQ0FBbUMsbUJBQW1CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsaUNBQWlDLGtCQUFrQjtBQUNuRCxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0RBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLENBQUMsQ0FBQyxpREFBYzs7QUFFVyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvY2xpZW50cy9ydW50aW1lL2luZGV4Lm1qcz8xMDk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF8gYXMgX19hd2FpdGVyLCBhIGFzIF9fZ2VuZXJhdG9yLCBoIGFzIF9fYXNzaWduLCBpIGFzIF9fc3ByZWFkQXJyYXksIGcgYXMgX19leHRlbmRzLCBiIGFzIGNyZWF0ZVBhY2thZ2VKU09OLCBjIGFzIGNyZWF0ZUVycm9yLCBTIGFzIFNhbmRwYWNrTG9nTGV2ZWwsIGQgYXMgYWRkUGFja2FnZUpTT05JZk5lZWRlZCwgbiBhcyBudWxsdGhyb3dzLCBlIGFzIGV4dHJhY3RFcnJvckRldGFpbHMgfSBmcm9tICcuLi8uLi90eXBlcy0wODc3YzU1My5tanMnO1xuaW1wb3J0IHsgZGVxdWFsIH0gZnJvbSAnZGVxdWFsJztcbmltcG9ydCB7IFMgYXMgU2FuZHBhY2tDbGllbnQgfSBmcm9tICcuLi8uLi9iYXNlLTgwYTFmNzYwLm1qcyc7XG5pbXBvcnQgJ291dHZhcmlhbnQnO1xuXG4vKipcbiAqIFRoaXMgZmlsZSBpcyBhIGNvcHkgb2YgdGhlIHJlc29sdmVyIGZyb20gdGhlIGBjb2Rlc2FuZGJveC1hcGlgIHBhY2thZ2UuXG4gKiBXZSB3YW50ZWQgdG8gYXZvaWQgdG8gcmVmZXJlbmNlIGNvZGVzYW5kYm94LWFwaSBiZWNhdXNlIG9mIHRoZSBjb2RlIHRoYXQgcnVucyBvbiBsb2FkIGluIHRoZSBwYWNrYWdlLlxuICogVGhlIHBsYW4gaXMgdG8gdGFrZSBzb21lIHRpbWUgYW5kIHJlZmFjdG9yIGNvZGVzYW5kYm94LWFwaSBpbnRvIHdoYXQgaXQgd2FzIHN1cHBvc2VkIHRvIGJlIGluIHRoZSBmaXJzdCBwbGFjZSxcbiAqIGFuIGFic3RyYWN0aW9uIG92ZXIgdGhlIGFjdGlvbnMgdGhhdCBjYW4gYmUgZGlzcGF0Y2hlZCBiZXR3ZWVuIHRoZSBidW5kbGVyIGFuZCB0aGUgaWZyYW1lLlxuICovXG52YXIgUHJvdG9jb2wgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJvdG9jb2wodHlwZSwgaGFuZGxlTWVzc2FnZSwgcHJvdG9jb2wpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5oYW5kbGVNZXNzYWdlID0gaGFuZGxlTWVzc2FnZTtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IHByb3RvY29sO1xuICAgICAgICB0aGlzLl9kaXNwb3NlTWVzc2FnZUxpc3RlbmVyID0gdGhpcy5wcm90b2NvbC5jaGFubmVsTGlzdGVuKGZ1bmN0aW9uIChtc2cpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlLCByZXN1bHQsIHJlc3BvbnNlLCBlcnJfMSwgcmVzcG9uc2U7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtc2cudHlwZSA9PT0gdGhpcy5nZXRUeXBlSWQoKSAmJiBtc2cubWV0aG9kKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbXNnO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5oYW5kbGVNZXNzYWdlKG1lc3NhZ2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdGhpcy5nZXRUeXBlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dJZDogbWVzc2FnZS5tc2dJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3RvY29sLmRpc3BhdGNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMuZ2V0VHlwZUlkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnSWQ6IG1lc3NhZ2UubXNnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyXzEubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvdG9jb2wuZGlzcGF0Y2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfSk7XG4gICAgfVxuICAgIFByb3RvY29sLnByb3RvdHlwZS5nZXRUeXBlSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcInByb3RvY29sLVwiLmNvbmNhdCh0aGlzLnR5cGUpO1xuICAgIH07XG4gICAgUHJvdG9jb2wucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VNZXNzYWdlTGlzdGVuZXIoKTtcbiAgICB9O1xuICAgIHJldHVybiBQcm90b2NvbDtcbn0oKSk7XG5cbnZhciBJRnJhbWVQcm90b2NvbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJRnJhbWVQcm90b2NvbChpZnJhbWUsIG9yaWdpbikge1xuICAgICAgICAvLyBSZWFjdCB0byBtZXNzYWdlcyBmcm9tIGFueSBpZnJhbWVcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgICAgIC8vIFJlYWN0IHRvIG1lc3NhZ2VzIGZyb20gdGhlIGlmcmFtZSBvd25lZCBieSB0aGlzIGluc3RhbmNlXG4gICAgICAgIHRoaXMuY2hhbm5lbExpc3RlbmVycyA9IHt9O1xuICAgICAgICB0aGlzLmNoYW5uZWxMaXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgICAgIC8vIFJhbmRvbSBudW1iZXIgdG8gaWRlbnRpZnkgdGhpcyBpbnN0YW5jZSBvZiB0aGUgY2xpZW50IHdoZW4gbWVzc2FnZXMgYXJlIGNvbWluZyBmcm9tIG11bHRpcGxlIGlmcmFtZXNcbiAgICAgICAgdGhpcy5jaGFubmVsSWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKTtcbiAgICAgICAgdGhpcy5mcmFtZVdpbmRvdyA9IGlmcmFtZS5jb250ZW50V2luZG93O1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5jaGFubmVsTGlzdGVuZXJzID0gW107XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lciA9IHRoaXMuZXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuZXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSUZyYW1lUHJvdG9jb2wucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLmV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB0aGlzLmdsb2JhbExpc3RlbmVycyA9IHt9O1xuICAgICAgICB0aGlzLmNoYW5uZWxMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuY2hhbm5lbExpc3RlbmVyc0NvdW50ID0gMDtcbiAgICB9O1xuICAgIC8vIFNlbmRzIHRoZSBjaGFubmVsSWQgYW5kIHRyaWdnZXJzIGFuIGlmcmFtZUhhbmRzaGFrZSBwcm9taXNlIHRvIHJlc29sdmUsXG4gICAgLy8gc28gdGhlIGlmcmFtZSBjYW4gc3RhcnQgbGlzdGVuaW5nIGZvciBtZXNzYWdlcyAoYmFzZWQgb24gdGhlIGlkKVxuICAgIElGcmFtZVByb3RvY29sLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lV2luZG93KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcmFtZVdpbmRvdy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICB0eXBlOiBcInJlZ2lzdGVyLWZyYW1lXCIsXG4gICAgICAgICAgICBvcmlnaW46IGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIGlkOiB0aGlzLmNoYW5uZWxJZCxcbiAgICAgICAgfSwgdGhpcy5vcmlnaW4pO1xuICAgIH07XG4gICAgLy8gTWVzc2FnZXMgYXJlIGRpc3BhdGNoZWQgZnJvbSB0aGUgY2xpZW50IGRpcmVjdGx5IHRvIHRoZSBpbnN0YW5jZSBpZnJhbWVcbiAgICBJRnJhbWVQcm90b2NvbC5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVXaW5kb3cpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lV2luZG93LnBvc3RNZXNzYWdlKF9fYXNzaWduKHsgJGlkOiB0aGlzLmNoYW5uZWxJZCwgY29kZXNhbmRib3g6IHRydWUgfSwgbWVzc2FnZSksIHRoaXMub3JpZ2luKTtcbiAgICB9O1xuICAgIC8vIEFkZCBhIGxpc3RlbmVyIHRoYXQgaXMgY2FsbGVkIG9uIGFueSBtZXNzYWdlIGNvbWluZyBmcm9tIGFuIGlmcmFtZSBpbiB0aGUgcGFnZVxuICAgIC8vIFRoaXMgaXMgbmVlZGVkIGZvciB0aGUgYGluaXRpYWxpemVgIG1lc3NhZ2Ugd2hpY2ggY29tZXMgd2l0aG91dCBhIGNoYW5uZWxJZFxuICAgIElGcmFtZVByb3RvY29sLnByb3RvdHlwZS5nbG9iYWxMaXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3RlbmVySWQgPSB0aGlzLmdsb2JhbExpc3RlbmVyc0NvdW50O1xuICAgICAgICB0aGlzLmdsb2JhbExpc3RlbmVyc1tsaXN0ZW5lcklkXSA9IGxpc3RlbmVyO1xuICAgICAgICB0aGlzLmdsb2JhbExpc3RlbmVyc0NvdW50Kys7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWxldGUgX3RoaXMuZ2xvYmFsTGlzdGVuZXJzW2xpc3RlbmVySWRdO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgLy8gQWRkIGEgbGlzdGVuZXIgdGhhdCBpcyBjYWxsZWQgb24gYW55IG1lc3NhZ2UgY29taW5nIGZyb20gYW4gaWZyYW1lIHdpdGggdGhlIGluc3RhbmNlIGNoYW5uZWxJZFxuICAgIC8vIEFsbCBvdGhlciBtZXNzYWdlcyAoZWc6IGZyb20gb3RoZXIgaWZyYW1lcykgYXJlIGlnbm9yZWRcbiAgICBJRnJhbWVQcm90b2NvbC5wcm90b3R5cGUuY2hhbm5lbExpc3RlbiA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGlzdGVuZXJJZCA9IHRoaXMuY2hhbm5lbExpc3RlbmVyc0NvdW50O1xuICAgICAgICB0aGlzLmNoYW5uZWxMaXN0ZW5lcnNbbGlzdGVuZXJJZF0gPSBsaXN0ZW5lcjtcbiAgICAgICAgdGhpcy5jaGFubmVsTGlzdGVuZXJzQ291bnQrKztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5jaGFubmVsTGlzdGVuZXJzW2xpc3RlbmVySWRdO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgLy8gSGFuZGxlcyBtZXNzYWdlIHdpbmRvd3MgY29taW5nIGZyb20gaWZyYW1lc1xuICAgIElGcmFtZVByb3RvY29sLnByb3RvdHlwZS5ldmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAvLyBza2lwIGV2ZW50cyBvcmlnaW5hdGluZyBmcm9tIGRpZmZlcmVudCBpZnJhbWVzXG4gICAgICAgIGlmIChldnQuc291cmNlICE9PSB0aGlzLmZyYW1lV2luZG93KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBldnQuZGF0YTtcbiAgICAgICAgaWYgKCFtZXNzYWdlLmNvZGVzYW5kYm94KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmdsb2JhbExpc3RlbmVycykuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihtZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChtZXNzYWdlLiRpZCAhPT0gdGhpcy5jaGFubmVsSWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuY2hhbm5lbExpc3RlbmVycykuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihtZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gSUZyYW1lUHJvdG9jb2w7XG59KCkpO1xuXG52YXIgTUFYX0NMSUVOVF9ERVBFTkRFTkNZX0NPVU5UID0gNTA7XG5mdW5jdGlvbiBnZXRUZW1wbGF0ZShwa2csIFxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xubW9kdWxlcykge1xuICAgIGlmICghcGtnKSB7XG4gICAgICAgIHJldHVybiBcInN0YXRpY1wiO1xuICAgIH1cbiAgICB2YXIgX2EgPSBwa2cuZGVwZW5kZW5jaWVzLCBkZXBlbmRlbmNpZXMgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSwgX2IgPSBwa2cuZGV2RGVwZW5kZW5jaWVzLCBkZXZEZXBlbmRlbmNpZXMgPSBfYiA9PT0gdm9pZCAwID8ge30gOiBfYjtcbiAgICB2YXIgdG90YWxEZXBlbmRlbmNpZXMgPSBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIE9iamVjdC5rZXlzKGRlcGVuZGVuY2llcyksIHRydWUpLCBPYmplY3Qua2V5cyhkZXZEZXBlbmRlbmNpZXMpLCB0cnVlKTtcbiAgICB2YXIgbW9kdWxlTmFtZXMgPSBPYmplY3Qua2V5cyhtb2R1bGVzKTtcbiAgICB2YXIgYWRvbmlzID0gW1wiQGFkb25pc2pzL2ZyYW1ld29ya1wiLCBcIkBhZG9uaXNqcy9jb3JlXCJdO1xuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5zb21lKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGFkb25pcy5pbmRleE9mKGRlcCkgPiAtMTsgfSkpIHtcbiAgICAgICAgcmV0dXJuIFwiYWRvbmlzXCI7XG4gICAgfVxuICAgIHZhciBudXh0ID0gW1wibnV4dFwiLCBcIm51eHQtZWRnZVwiLCBcIm51eHQtdHNcIiwgXCJudXh0LXRzLWVkZ2VcIiwgXCJudXh0M1wiXTtcbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuc29tZShmdW5jdGlvbiAoZGVwKSB7IHJldHVybiBudXh0LmluZGV4T2YoZGVwKSA+IC0xOyB9KSkge1xuICAgICAgICByZXR1cm4gXCJudXh0XCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwibmV4dFwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcIm5leHRcIjtcbiAgICB9XG4gICAgdmFyIGFwb2xsbyA9IFtcbiAgICAgICAgXCJhcG9sbG8tc2VydmVyXCIsXG4gICAgICAgIFwiYXBvbGxvLXNlcnZlci1leHByZXNzXCIsXG4gICAgICAgIFwiYXBvbGxvLXNlcnZlci1oYXBpXCIsXG4gICAgICAgIFwiYXBvbGxvLXNlcnZlci1rb2FcIixcbiAgICAgICAgXCJhcG9sbG8tc2VydmVyLWxhbWJkYVwiLFxuICAgICAgICBcImFwb2xsby1zZXJ2ZXItbWljcm9cIixcbiAgICBdO1xuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5zb21lKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGFwb2xsby5pbmRleE9mKGRlcCkgPiAtMTsgfSkpIHtcbiAgICAgICAgcmV0dXJuIFwiYXBvbGxvXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwibWR4LWRlY2tcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJtZHgtZGVja1wiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcImdyaWRzb21lXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3JpZHNvbWVcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJ2dWVwcmVzc1wiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcInZ1ZXByZXNzXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwiZW1iZXItY2xpXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwiZW1iZXJcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJzYXBwZXJcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJzYXBwZXJcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJnYXRzYnlcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJnYXRzYnlcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJxdWFzYXJcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJxdWFzYXJcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJAZG9jdXNhdXJ1cy9jb3JlXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwiZG9jdXNhdXJ1c1wiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInJlbWl4XCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwicmVtaXhcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJhc3Ryb1wiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcIm5vZGVcIjtcbiAgICB9XG4gICAgLy8gQ0xJRU5UXG4gICAgaWYgKG1vZHVsZU5hbWVzLnNvbWUoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uZW5kc1dpdGgoXCIucmVcIik7IH0pKSB7XG4gICAgICAgIHJldHVybiBcInJlYXNvblwiO1xuICAgIH1cbiAgICB2YXIgcGFyY2VsID0gW1wicGFyY2VsLWJ1bmRsZXJcIiwgXCJwYXJjZWxcIl07XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLnNvbWUoZnVuY3Rpb24gKGRlcCkgeyByZXR1cm4gcGFyY2VsLmluZGV4T2YoZGVwKSA+IC0xOyB9KSkge1xuICAgICAgICByZXR1cm4gXCJwYXJjZWxcIjtcbiAgICB9XG4gICAgdmFyIGRvam8gPSBbXCJAZG9qby9jb3JlXCIsIFwiQGRvam8vZnJhbWV3b3JrXCJdO1xuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5zb21lKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGRvam8uaW5kZXhPZihkZXApID4gLTE7IH0pKSB7XG4gICAgICAgIHJldHVybiBcIkBkb2pvL2NsaS1jcmVhdGUtYXBwXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwiQG5lc3Rqcy9jb3JlXCIpID4gLTEgfHxcbiAgICAgICAgdG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcIkBuZXN0anMvY29tbW9uXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwibmVzdFwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInJlYWN0LXN0eWxlZ3VpZGlzdFwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcInN0eWxlZ3VpZGlzdFwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInJlYWN0LXNjcmlwdHNcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJjcmVhdGUtcmVhY3QtYXBwXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwicmVhY3Qtc2NyaXB0cy10c1wiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcImNyZWF0ZS1yZWFjdC1hcHAtdHlwZXNjcmlwdFwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcIkBhbmd1bGFyL2NvcmVcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJhbmd1bGFyLWNsaVwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInByZWFjdC1jbGlcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJwcmVhY3QtY2xpXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwiQHN2ZWx0ZWNoL3JvdXRpZnlcIikgPiAtMSB8fFxuICAgICAgICB0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwiQHJveGkvcm91dGlmeVwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcIm5vZGVcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJ2aXRlXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZVwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcIkBmcm9udGl0eS9jb3JlXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZVwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInN2ZWx0ZVwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcInN2ZWx0ZVwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInZ1ZVwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcInZ1ZS1jbGlcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJjeFwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcImN4anNcIjtcbiAgICB9XG4gICAgdmFyIG5vZGVEZXBzID0gW1xuICAgICAgICBcImV4cHJlc3NcIixcbiAgICAgICAgXCJrb2FcIixcbiAgICAgICAgXCJub2RlbW9uXCIsXG4gICAgICAgIFwidHMtbm9kZVwiLFxuICAgICAgICBcIkB0ZW5zb3JmbG93L3RmanMtbm9kZVwiLFxuICAgICAgICBcIndlYnBhY2stZGV2LXNlcnZlclwiLFxuICAgICAgICBcInNub3dwYWNrXCIsXG4gICAgXTtcbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuc29tZShmdW5jdGlvbiAoZGVwKSB7IHJldHVybiBub2RlRGVwcy5pbmRleE9mKGRlcCkgPiAtMTsgfSkpIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZVwiO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoZGVwZW5kZW5jaWVzKS5sZW5ndGggPj0gTUFYX0NMSUVOVF9ERVBFTkRFTkNZX0NPVU5UKSB7XG4gICAgICAgIC8vIFRoZSBkZXBlbmRlbmNpZXMgYXJlIHRvbyBtdWNoIGZvciBjbGllbnQgc2FuZGJveGVzIHRvIGhhbmRsZVxuICAgICAgICByZXR1cm4gXCJub2RlXCI7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbnZhciBfYTtcbnZhciBCVU5ETEVSX1VSTCA9IFwiaHR0cHM6Ly9cIi5jb25jYXQoKF9hID0gXCIyLjEyLjBcIikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlcGxhY2UoL1xcLi9nLCBcIi1cIiksIFwiLXNhbmRwYWNrLmNvZGVzYW5kYm94LmlvL1wiKTtcbnZhciBTYW5kcGFja1J1bnRpbWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNhbmRwYWNrUnVudGltZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYW5kcGFja1J1bnRpbWUoc2VsZWN0b3IsIHNhbmRib3hTZXR1cCwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzZWxlY3Rvciwgc2FuZGJveFNldHVwLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5nZXRUcmFuc3BpbGVyQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHZhciB1bnN1YnNjcmliZSA9IF90aGlzLmxpc3RlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcInRyYW5zcGlsZXItY29udGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuZGlzcGF0Y2goeyB0eXBlOiBcImdldC10cmFuc3BpbGVyLWNvbnRleHRcIiB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5idW5kbGVyVVJMID0gb3B0aW9ucy5idW5kbGVyVVJMIHx8IEJVTkRMRVJfVVJMO1xuICAgICAgICBpZiAob3B0aW9ucy50ZWFtSWQpIHtcbiAgICAgICAgICAgIF90aGlzLmJ1bmRsZXJVUkwgPVxuICAgICAgICAgICAgICAgIF90aGlzLmJ1bmRsZXJVUkwucmVwbGFjZShcImh0dHBzOi8vXCIsIFwiaHR0cHM6Ly9cIiArIG9wdGlvbnMudGVhbUlkICsgXCItXCIpICtcbiAgICAgICAgICAgICAgICAgICAgXCI/Y2FjaGU9XCIuY29uY2F0KERhdGUubm93KCkpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmJ1bmRsZXJTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgX3RoaXMuZXJyb3JzID0gW107XG4gICAgICAgIF90aGlzLnN0YXR1cyA9IFwiaW5pdGlhbGl6aW5nXCI7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgbnVsbHRocm93cyhlbGVtZW50LCBcIlRoZSBlbGVtZW50ICdcIi5jb25jYXQoc2VsZWN0b3IsIFwiJyB3YXMgbm90IGZvdW5kXCIpKTtcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgX3RoaXMuaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbiAgICAgICAgICAgIF90aGlzLmluaXRpYWxpemVFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gc2VsZWN0b3I7XG4gICAgICAgICAgICBfdGhpcy5pZnJhbWUgPSBzZWxlY3RvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIV90aGlzLmlmcmFtZS5nZXRBdHRyaWJ1dGUoXCJzYW5kYm94XCIpKSB7XG4gICAgICAgICAgICBfdGhpcy5pZnJhbWUuc2V0QXR0cmlidXRlKFwic2FuZGJveFwiLCBcImFsbG93LWZvcm1zIGFsbG93LW1vZGFscyBhbGxvdy1wb3B1cHMgYWxsb3ctcHJlc2VudGF0aW9uIGFsbG93LXNhbWUtb3JpZ2luIGFsbG93LXNjcmlwdHMgYWxsb3ctZG93bmxvYWRzIGFsbG93LXBvaW50ZXItbG9ja1wiKTtcbiAgICAgICAgICAgIF90aGlzLmlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd1wiLCBcImFjY2VsZXJvbWV0ZXI7IGNhbWVyYTsgZW5jcnlwdGVkLW1lZGlhOyBnZW9sb2NhdGlvbjsgZ3lyb3Njb3BlOyBoaWQ7IG1pY3JvcGhvbmU7IG1pZGk7IGNsaXBib2FyZC13cml0ZTtcIik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc2V0TG9jYXRpb25VUkxJbnRvSUZyYW1lKCk7XG4gICAgICAgIF90aGlzLmlmcmFtZVByb3RvY29sID0gbmV3IElGcmFtZVByb3RvY29sKF90aGlzLmlmcmFtZSwgX3RoaXMuYnVuZGxlclVSTCk7XG4gICAgICAgIF90aGlzLnVuc3Vic2NyaWJlR2xvYmFsTGlzdGVuZXIgPSBfdGhpcy5pZnJhbWVQcm90b2NvbC5nbG9iYWxMaXN0ZW4oZnVuY3Rpb24gKG1lcykge1xuICAgICAgICAgICAgaWYgKG1lcy50eXBlICE9PSBcImluaXRpYWxpemVkXCIgfHwgIV90aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuaWZyYW1lUHJvdG9jb2wucmVnaXN0ZXIoKTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmZpbGVSZXNvbHZlcikge1xuICAgICAgICAgICAgICAgIF90aGlzLmZpbGVSZXNvbHZlclByb3RvY29sID0gbmV3IFByb3RvY29sKFwiZnNcIiwgZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubWV0aG9kID09PSBcImlzRmlsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5vcHRpb25zLmZpbGVSZXNvbHZlci5pc0ZpbGUoZGF0YS5wYXJhbXNbMF0pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEubWV0aG9kID09PSBcInJlYWRGaWxlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLm9wdGlvbnMuZmlsZVJlc29sdmVyLnJlYWRGaWxlKGRhdGEucGFyYW1zWzBdKV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7IH0sIF90aGlzLmlmcmFtZVByb3RvY29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVNhbmRib3goX3RoaXMuc2FuZGJveFNldHVwLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIF90aGlzLnVuc3Vic2NyaWJlQ2hhbm5lbExpc3RlbmVyID0gX3RoaXMuaWZyYW1lUHJvdG9jb2wuY2hhbm5lbExpc3RlbihmdW5jdGlvbiAobWVzKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1lcy50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhdHVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RhdHVzID0gbWVzLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3Rpb25cIjoge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzLmFjdGlvbiA9PT0gXCJzaG93LWVycm9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9ycyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX3RoaXMuZXJyb3JzLCB0cnVlKSwgW2V4dHJhY3RFcnJvckRldGFpbHMobWVzKV0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcImRvbmVcIjoge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGF0dXMgPSBcImRvbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmJ1bmRsZXJTdGF0ZSA9IG1lcy5zdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTYW5kcGFja1J1bnRpbWUucHJvdG90eXBlLnNldExvY2F0aW9uVVJMSW50b0lGcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgdXJsU291cmNlID0gdGhpcy5vcHRpb25zLnN0YXJ0Um91dGVcbiAgICAgICAgICAgID8gbmV3IFVSTCh0aGlzLm9wdGlvbnMuc3RhcnRSb3V0ZSwgdGhpcy5idW5kbGVyVVJMKS50b1N0cmluZygpXG4gICAgICAgICAgICA6IHRoaXMuYnVuZGxlclVSTDtcbiAgICAgICAgKF9hID0gdGhpcy5pZnJhbWUuY29udGVudFdpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxvY2F0aW9uLnJlcGxhY2UodXJsU291cmNlKTtcbiAgICAgICAgdGhpcy5pZnJhbWUuc3JjID0gdXJsU291cmNlO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlQ2hhbm5lbExpc3RlbmVyKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVHbG9iYWxMaXN0ZW5lcigpO1xuICAgICAgICB0aGlzLmlmcmFtZVByb3RvY29sLmNsZWFudXAoKTtcbiAgICB9O1xuICAgIFNhbmRwYWNrUnVudGltZS5wcm90b3R5cGUudXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmICghZGVxdWFsKHRoaXMub3B0aW9ucywgb3B0aW9ucykpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNhbmRib3goKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS51cGRhdGVTYW5kYm94ID0gZnVuY3Rpb24gKHNhbmRib3hTZXR1cCwgaXNJbml0aWFsaXphdGlvbkNvbXBpbGUpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBpZiAoc2FuZGJveFNldHVwID09PSB2b2lkIDApIHsgc2FuZGJveFNldHVwID0gdGhpcy5zYW5kYm94U2V0dXA7IH1cbiAgICAgICAgdGhpcy5zYW5kYm94U2V0dXAgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zYW5kYm94U2V0dXApLCBzYW5kYm94U2V0dXApO1xuICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmdldEZpbGVzKCk7XG4gICAgICAgIHZhciBtb2R1bGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgbmV4dCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldiksIChfYSA9IHt9LCBfYVtuZXh0XSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiBmaWxlc1tuZXh0XS5jb2RlLFxuICAgICAgICAgICAgICAgIHBhdGg6IG5leHQsXG4gICAgICAgICAgICB9LCBfYSkpKTtcbiAgICAgICAgfSwge30pO1xuICAgICAgICB2YXIgcGFja2FnZUpTT04gPSBKU09OLnBhcnNlKGNyZWF0ZVBhY2thZ2VKU09OKHRoaXMuc2FuZGJveFNldHVwLmRlcGVuZGVuY2llcywgdGhpcy5zYW5kYm94U2V0dXAuZGV2RGVwZW5kZW5jaWVzLCB0aGlzLnNhbmRib3hTZXR1cC5lbnRyeSkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFja2FnZUpTT04gPSBKU09OLnBhcnNlKGZpbGVzW1wiL3BhY2thZ2UuanNvblwiXS5jb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihjcmVhdGVFcnJvcihcImNvdWxkIG5vdCBwYXJzZSBwYWNrYWdlLmpzb24gZmlsZTogXCIgKyBlLm1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIG1vdmUgdGhpcyB0byBhIGNvbW1vbiBmb3JtYXRcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRNb2R1bGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgbmV4dCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldiksIChfYSA9IHt9LCBfYVtuZXh0XSA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWxlc1tuZXh0XS5jb2RlLFxuICAgICAgICAgICAgICAgIHBhdGg6IG5leHQsXG4gICAgICAgICAgICB9LCBfYSkpKTtcbiAgICAgICAgfSwge30pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwiY29tcGlsZVwiLFxuICAgICAgICAgICAgY29kZXNhbmRib3g6IHRydWUsXG4gICAgICAgICAgICB2ZXJzaW9uOiAzLFxuICAgICAgICAgICAgaXNJbml0aWFsaXphdGlvbkNvbXBpbGU6IGlzSW5pdGlhbGl6YXRpb25Db21waWxlLFxuICAgICAgICAgICAgbW9kdWxlczogbW9kdWxlcyxcbiAgICAgICAgICAgIHJlYWN0RGV2VG9vbHM6IHRoaXMub3B0aW9ucy5yZWFjdERldlRvb2xzLFxuICAgICAgICAgICAgZXh0ZXJuYWxSZXNvdXJjZXM6IHRoaXMub3B0aW9ucy5leHRlcm5hbFJlc291cmNlcyB8fCBbXSxcbiAgICAgICAgICAgIGhhc0ZpbGVSZXNvbHZlcjogQm9vbGVhbih0aGlzLm9wdGlvbnMuZmlsZVJlc29sdmVyKSxcbiAgICAgICAgICAgIGRpc2FibGVEZXBlbmRlbmN5UHJlcHJvY2Vzc2luZzogdGhpcy5zYW5kYm94U2V0dXAuZGlzYWJsZURlcGVuZGVuY3lQcmVwcm9jZXNzaW5nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMuc2FuZGJveFNldHVwLnRlbXBsYXRlIHx8XG4gICAgICAgICAgICAgICAgZ2V0VGVtcGxhdGUocGFja2FnZUpTT04sIG5vcm1hbGl6ZWRNb2R1bGVzKSxcbiAgICAgICAgICAgIHNob3dPcGVuSW5Db2RlU2FuZGJveDogKF9hID0gdGhpcy5vcHRpb25zLnNob3dPcGVuSW5Db2RlU2FuZGJveCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dFcnJvclNjcmVlbjogKF9iID0gdGhpcy5vcHRpb25zLnNob3dFcnJvclNjcmVlbikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dMb2FkaW5nU2NyZWVuOiAoX2MgPSB0aGlzLm9wdGlvbnMuc2hvd0xvYWRpbmdTY3JlZW4pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlLFxuICAgICAgICAgICAgc2tpcEV2YWw6IHRoaXMub3B0aW9ucy5za2lwRXZhbCB8fCBmYWxzZSxcbiAgICAgICAgICAgIGNsZWFyQ29uc29sZURpc2FibGVkOiAhdGhpcy5vcHRpb25zLmNsZWFyQ29uc29sZU9uRmlyc3RDb21waWxlLFxuICAgICAgICAgICAgbG9nTGV2ZWw6IChfZCA9IHRoaXMub3B0aW9ucy5sb2dMZXZlbCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogU2FuZHBhY2tMb2dMZXZlbC5JbmZvLFxuICAgICAgICAgICAgY3VzdG9tTnBtUmVnaXN0cmllczogdGhpcy5vcHRpb25zLmN1c3RvbU5wbVJlZ2lzdHJpZXMsXG4gICAgICAgICAgICB0ZWFtSWQ6IHRoaXMub3B0aW9ucy50ZWFtSWQsXG4gICAgICAgICAgICBzYW5kYm94SWQ6IHRoaXMub3B0aW9ucy5zYW5kYm94SWQsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcmNlcHQgXCJyZWZyZXNoXCIgZGlzcGF0Y2g6IHRoaXMgd2lsbCBtYWtlIHN1cmVcbiAgICAgICAgICogdGhhdCB0aGUgaWZyYW1lIGlzIHN0aWxsIGluIHRoZSBsb2NhdGlvbiBpdCdzIHN1cHBvc2VkIHRvIGJlLlxuICAgICAgICAgKiBFeHRlcm5hbCBsaW5rcyBpbnNpZGUgdGhlIGlmcmFtZSB3aWxsIGNoYW5nZSB0aGUgbG9jYXRpb24gYW5kXG4gICAgICAgICAqIHByZXZlbnQgdGhlIHVzZXIgZnJvbSBuYXZpZ2F0aW5nIGJhY2suXG4gICAgICAgICAqL1xuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcInJlZnJlc2hcIikge1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhdGlvblVSTEludG9JRnJhbWUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlmcmFtZVByb3RvY29sLmRpc3BhdGNoKG1lc3NhZ2UpO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWZyYW1lUHJvdG9jb2wuY2hhbm5lbExpc3RlbihsaXN0ZW5lcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFVSTCBvZiB0aGUgY29udGVudHMgb2YgdGhlIGN1cnJlbnQgc2FuZGJveFxuICAgICAqL1xuICAgIFNhbmRwYWNrUnVudGltZS5wcm90b3R5cGUuZ2V0Q29kZVNhbmRib3hVUkwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaWxlcyA9IHRoaXMuZ2V0RmlsZXMoKTtcbiAgICAgICAgdmFyIHBhcmFtRmlsZXMgPSBPYmplY3Qua2V5cyhmaWxlcykucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBuZXh0KSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2KSwgKF9hID0ge30sIF9hW25leHQucmVwbGFjZShcIi9cIiwgXCJcIildID0ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpbGVzW25leHRdLmNvZGUsXG4gICAgICAgICAgICAgICAgaXNCaW5hcnk6IGZhbHNlLFxuICAgICAgICAgICAgfSwgX2EpKSk7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9hcGkvdjEvc2FuZGJveGVzL2RlZmluZT9qc29uPTFcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZmlsZXM6IHBhcmFtRmlsZXMgfSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5qc29uKCk7IH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiAoe1xuICAgICAgICAgICAgc2FuZGJveElkOiByZXMuc2FuZGJveF9pZCxcbiAgICAgICAgICAgIGVkaXRvclVybDogXCJodHRwczovL2NvZGVzYW5kYm94LmlvL3MvXCIuY29uY2F0KHJlcy5zYW5kYm94X2lkKSxcbiAgICAgICAgICAgIGVtYmVkVXJsOiBcImh0dHBzOi8vY29kZXNhbmRib3guaW8vZW1iZWQvXCIuY29uY2F0KHJlcy5zYW5kYm94X2lkKSxcbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5nZXRGaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNhbmRib3hTZXR1cCA9IHRoaXMuc2FuZGJveFNldHVwO1xuICAgICAgICBpZiAoc2FuZGJveFNldHVwLmZpbGVzW1wiL3BhY2thZ2UuanNvblwiXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkUGFja2FnZUpTT05JZk5lZWRlZChzYW5kYm94U2V0dXAuZmlsZXMsIHNhbmRib3hTZXR1cC5kZXBlbmRlbmNpZXMsIHNhbmRib3hTZXR1cC5kZXZEZXBlbmRlbmNpZXMsIHNhbmRib3hTZXR1cC5lbnRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2FuZGJveFNldHVwLmZpbGVzO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5pbml0aWFsaXplRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pZnJhbWUuc3R5bGUuYm9yZGVyID0gXCIwXCI7XG4gICAgICAgIHRoaXMuaWZyYW1lLnN0eWxlLndpZHRoID0gdGhpcy5vcHRpb25zLndpZHRoIHx8IFwiMTAwJVwiO1xuICAgICAgICB0aGlzLmlmcmFtZS5zdHlsZS5oZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0IHx8IFwiMTAwJVwiO1xuICAgICAgICB0aGlzLmlmcmFtZS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIG51bGx0aHJvd3ModGhpcy5lbGVtZW50LnBhcmVudE5vZGUsIFwiVGhlIGdpdmVuIGlmcmFtZSBkb2VzIG5vdCBoYXZlIGEgcGFyZW50LlwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMuaWZyYW1lLCB0aGlzLmVsZW1lbnQpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhbmRwYWNrUnVudGltZTtcbn0oU2FuZHBhY2tDbGllbnQpKTtcblxuZXhwb3J0IHsgU2FuZHBhY2tSdW50aW1lIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/sandpack-client/dist/clients/runtime/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@codesandbox/sandpack-client/dist/consoleHook-cdbe54ab.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/consoleHook-cdbe54ab.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   E: () => (/* binding */ EventEmitter),\n/* harmony export */   a: () => (/* binding */ getMessageFromError),\n/* harmony export */   b: () => (/* binding */ findStartScriptPackageJson),\n/* harmony export */   c: () => (/* binding */ consoleHook),\n/* harmony export */   f: () => (/* binding */ fromBundlerFilesToFS),\n/* harmony export */   g: () => (/* binding */ generateRandomId),\n/* harmony export */   r: () => (/* binding */ readBuffer),\n/* harmony export */   w: () => (/* binding */ writeBuffer)\n/* harmony export */ });\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types-0877c553.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs\");\n\n\n\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter() {\n        this.listeners = {};\n        this.listenersCount = 0;\n        this.channelId = Math.floor(Math.random() * 1000000);\n        this.listeners = [];\n    }\n    EventEmitter.prototype.cleanup = function () {\n        this.listeners = {};\n        this.listenersCount = 0;\n    };\n    EventEmitter.prototype.dispatch = function (message) {\n        Object.values(this.listeners).forEach(function (listener) { return listener(message); });\n    };\n    EventEmitter.prototype.listener = function (listener) {\n        var _this = this;\n        if (typeof listener !== \"function\") {\n            return function () {\n                return;\n            };\n        }\n        var listenerId = this.listenersCount;\n        this.listeners[listenerId] = listener;\n        this.listenersCount++;\n        return function () {\n            delete _this.listeners[listenerId];\n        };\n    };\n    return EventEmitter;\n}());\n\nfunction isCommand(char) {\n    return /[a-zA-Z.]/.test(char);\n}\nfunction isAlpha(char) {\n    return /[a-zA-Z]/.test(char);\n}\nfunction isWhitespace(char) {\n    return /\\s/.test(char);\n}\nfunction isOperator(char) {\n    return /[&|]/.test(char);\n}\nfunction isArgument(char) {\n    return /-/.test(char);\n}\nfunction isString(char) {\n    return /[\"']/.test(char);\n}\nfunction isEnvVar(char) {\n    return isAlpha(char) && char === char.toUpperCase();\n}\nvar TokenType;\n(function (TokenType) {\n    TokenType[\"OR\"] = \"OR\";\n    TokenType[\"AND\"] = \"AND\";\n    TokenType[\"PIPE\"] = \"PIPE\";\n    TokenType[\"Command\"] = \"Command\";\n    TokenType[\"Argument\"] = \"Argument\";\n    TokenType[\"String\"] = \"String\";\n    TokenType[\"EnvVar\"] = \"EnvVar\";\n})(TokenType || (TokenType = {}));\nvar operators = new Map([\n    [\"&&\", { type: TokenType.AND }],\n    [\"||\", { type: TokenType.OR }],\n    [\"|\", { type: TokenType.PIPE }],\n    [\"-\", { type: TokenType.Argument }],\n]);\nfunction tokenize(input) {\n    var current = 0;\n    var tokens = [];\n    function parseCommand() {\n        var value = \"\";\n        while (isCommand(input[current]) && current < input.length) {\n            value += input[current];\n            current++;\n        }\n        return { type: TokenType.Command, value: value };\n    }\n    function parseOperator() {\n        var value = \"\";\n        while (isOperator(input[current]) && current < input.length) {\n            value += input[current];\n            current++;\n        }\n        return operators.get(value);\n    }\n    function parseArgument() {\n        var value = \"\";\n        while ((isArgument(input[current]) || isAlpha(input[current])) &&\n            current < input.length) {\n            value += input[current];\n            current++;\n        }\n        return { type: TokenType.Argument, value: value };\n    }\n    function parseString() {\n        var openCloseQuote = input[current];\n        var value = input[current];\n        current++;\n        while (input[current] !== openCloseQuote && current < input.length) {\n            value += input[current];\n            current++;\n        }\n        value += input[current];\n        current++;\n        return { type: TokenType.String, value: value };\n    }\n    function parseEnvVars() {\n        var value = {};\n        var parseSingleEnv = function () {\n            var key = \"\";\n            var pair = \"\";\n            while (input[current] !== \"=\" && current < input.length) {\n                key += input[current];\n                current++;\n            }\n            // Skip equal\n            if (input[current] === \"=\") {\n                current++;\n            }\n            while (input[current] !== \" \" && current < input.length) {\n                pair += input[current];\n                current++;\n            }\n            value[key] = pair;\n        };\n        while (isEnvVar(input[current]) && current < input.length) {\n            parseSingleEnv();\n            current++;\n        }\n        return { type: TokenType.EnvVar, value: value };\n    }\n    while (current < input.length) {\n        var currentChar = input[current];\n        if (isWhitespace(currentChar)) {\n            current++;\n            continue;\n        }\n        switch (true) {\n            case isEnvVar(currentChar):\n                tokens.push(parseEnvVars());\n                break;\n            case isCommand(currentChar):\n                tokens.push(parseCommand());\n                break;\n            case isOperator(currentChar):\n                tokens.push(parseOperator());\n                break;\n            case isArgument(currentChar):\n                tokens.push(parseArgument());\n                break;\n            case isString(currentChar):\n                tokens.push(parseString());\n                break;\n            default:\n                throw new Error(\"Unknown character: \".concat(currentChar));\n        }\n    }\n    return tokens;\n}\n\nvar counter = 0;\nfunction generateRandomId() {\n    var now = Date.now();\n    var randomNumber = Math.round(Math.random() * 10000);\n    var count = (counter += 1);\n    return (+\"\".concat(now).concat(randomNumber).concat(count)).toString(16);\n}\nvar writeBuffer = function (content) {\n    if (typeof content === \"string\") {\n        return new TextEncoder().encode(content);\n    }\n    else {\n        return content;\n    }\n};\nvar readBuffer = function (content) {\n    if (typeof content === \"string\") {\n        return content;\n    }\n    else {\n        return new TextDecoder().decode(content);\n    }\n};\nvar fromBundlerFilesToFS = function (files) {\n    return Object.entries(files).reduce(function (acc, _a) {\n        var key = _a[0], value = _a[1];\n        acc[key] = writeBuffer(value.code);\n        return acc;\n    }, {});\n};\n/**\n * Figure out which script it must run to start a server\n */\nvar findStartScriptPackageJson = function (packageJson) {\n    var scripts = {};\n    // TODO: support postinstall\n    var possibleKeys = [\"dev\", \"start\"];\n    try {\n        scripts = JSON.parse(packageJson).scripts;\n    }\n    catch (e) {\n        throw (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_1__.c)(\"Could not parse package.json file: \" + e.message);\n    }\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_0__.invariant)(scripts, \"Failed to start. Please provide a `start` or `dev` script on the package.json\");\n    var _loop_1 = function (index) {\n        if (possibleKeys[index] in scripts) {\n            var script = possibleKeys[index];\n            var candidate = scripts[script];\n            var env_1 = {};\n            var command_1 = \"\";\n            var args_1 = [];\n            tokenize(candidate).forEach(function (item) {\n                var commandNotFoundYet = command_1 === \"\";\n                if (item.type === TokenType.EnvVar) {\n                    env_1 = item.value;\n                }\n                if (item.type === TokenType.Command && commandNotFoundYet) {\n                    command_1 = item.value;\n                }\n                if (item.type === TokenType.Argument ||\n                    (!commandNotFoundYet && item.type === TokenType.Command)) {\n                    args_1.push(item.value);\n                }\n                // TODO: support TokenType.AND, TokenType.OR, TokenType.PIPE\n            });\n            return { value: [command_1, args_1, { env: env_1 }] };\n        }\n    };\n    for (var index = 0; index < possibleKeys.length; index++) {\n        var state_1 = _loop_1(index);\n        if (typeof state_1 === \"object\")\n            return state_1.value;\n    }\n    throw (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_1__.c)(\"Failed to start. Please provide a `start` or `dev` script on the package.json\");\n};\nvar getMessageFromError = function (error) {\n    if (typeof error === \"string\")\n        return error;\n    if (typeof error === \"object\" && \"message\" in error) {\n        return error.message;\n    }\n    return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_1__.c)(\"The server could not be reached. Make sure that the node script is running and that a port has been started.\");\n};\n\nvar consoleHook = \"var t=\\\"undefined\\\"!=typeof globalThis?globalThis:\\\"undefined\\\"!=typeof window?window:\\\"undefined\\\"!=typeof globalThis?globalThis:\\\"undefined\\\"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,\\\"default\\\")?t.default:t}var e={},n={};!function(t){t.__esModule=!0,t.default=[\\\"log\\\",\\\"debug\\\",\\\"info\\\",\\\"warn\\\",\\\"error\\\",\\\"table\\\",\\\"clear\\\",\\\"time\\\",\\\"timeEnd\\\",\\\"count\\\",\\\"assert\\\",\\\"command\\\",\\\"result\\\"]}(n);var a,o={},i={};(a=i).__esModule=!0,a.default=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+\\\"-\\\"+t()+\\\"-\\\"+t()+\\\"-\\\"+t()+\\\"-\\\"+t()+\\\"-\\\"+Date.now()};var u={},s={__esModule:!0};s.update=s.state=void 0,s.update=function(t){s.state=t};var f={},c={};!function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)};r.__esModule=!0,r.initialState=void 0,r.initialState={timings:{},count:{}};var n=function(){return\\\"undefined\\\"!=typeof performance&&performance.now?performance.now():Date.now()};r.default=function(t,a){var o,i,u;switch(void 0===t&&(t=r.initialState),a.type){case\\\"COUNT\\\":var s=t.count[a.name]||0;return e(e({},t),{count:e(e({},t.count),(o={},o[a.name]=s+1,o))});case\\\"TIME_START\\\":return e(e({},t),{timings:e(e({},t.timings),(i={},i[a.name]={start:n()},i))});case\\\"TIME_END\\\":var f=t.timings[a.name],c=n(),l=c-f.start;return e(e({},t),{timings:e(e({},t.timings),(u={},u[a.name]=e(e({},f),{end:c,time:l}),u))});default:return t}}}(c),function(r){var e=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var n=e(c),a=s;r.default=function(t){a.update(n.default(a.state,t))}}(f);var l={__esModule:!0};l.timeEnd=l.timeStart=l.count=void 0,l.count=function(t){return{type:\\\"COUNT\\\",name:t}},l.timeStart=function(t){return{type:\\\"TIME_START\\\",name:t}},l.timeEnd=function(t){return{type:\\\"TIME_END\\\",name:t}};var d=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};u.__esModule=!0,u.stop=u.start=void 0;var p=s,h=d(f),m=l;u.start=function(t){h.default(m.timeStart(t))},u.stop=function(t){var r=null===p.state||void 0===p.state?void 0:p.state.timings[t];return r&&!r.end?(h.default(m.timeEnd(t)),{method:\\\"log\\\",data:[t+\\\": \\\"+p.state.timings[t].time+\\\"ms\\\"]}):{method:\\\"warn\\\",data:[\\\"Timer '\\\"+t+\\\"' does not exist\\\"]}};var y={},v=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};y.__esModule=!0,y.increment=void 0;var _=s,b=v(f),g=l;y.increment=function(t){return b.default(g.count(t)),{method:\\\"log\\\",data:[t+\\\": \\\"+_.state.count[t]]}};var M={},T=t&&t.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var o=arguments[r],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n};M.__esModule=!0,M.test=void 0,M.test=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return!t&&(0===r.length&&r.push(\\\"console.assert\\\"),{method:\\\"error\\\",data:T([\\\"Assertion failed:\\\"],r)})},function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)},n=t&&t.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),a=t&&t.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,\\\"default\\\",{enumerable:!0,value:r})}:function(t,r){t.default=r}),o=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)\\\"default\\\"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&n(r,t,e);return a(r,t),r},s=t&&t.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var o=arguments[r],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n},f=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var c=f(i),l=o(u),d=o(y),p=o(M);r.default=function(t,r,n){var a=n||c.default();switch(t){case\\\"clear\\\":return{method:t,id:a};case\\\"count\\\":return!!(o=\\\"string\\\"==typeof r[0]?r[0]:\\\"default\\\")&&e(e({},d.increment(o)),{id:a});case\\\"time\\\":case\\\"timeEnd\\\":var o;return!!(o=\\\"string\\\"==typeof r[0]?r[0]:\\\"default\\\")&&(\\\"time\\\"===t?(l.start(o),!1):e(e({},l.stop(o)),{id:a}));case\\\"assert\\\":if(0!==r.length){var i=p.test.apply(p,s([r[0]],r.slice(1)));if(i)return e(e({},i),{id:a})}return!1;case\\\"error\\\":return{method:t,id:a,data:r.map((function(t){try{return t.stack||t}catch(r){return t}}))};default:return{method:t,id:a,data:r}}}}(o);var S={},O={};!function(t){var r;t.__esModule=!0,function(t){t[t.infinity=0]=\\\"infinity\\\",t[t.minusInfinity=1]=\\\"minusInfinity\\\",t[t.minusZero=2]=\\\"minusZero\\\"}(r||(r={})),t.default={type:\\\"Arithmetic\\\",lookup:Number,shouldTransform:function(t,r){return\\\"number\\\"===t&&(r===1/0||r===-1/0||function(t){return 1/t==-1/0}(r))},toSerializable:function(t){return t===1/0?r.infinity:t===-1/0?r.minusInfinity:r.minusZero},fromSerializable:function(t){return t===r.infinity?1/0:t===r.minusInfinity?-1/0:t===r.minusZero?-0:t}}}(O);var w={};!function(t){t.__esModule=!0,t.default={type:\\\"Function\\\",lookup:Function,shouldTransform:function(t,r){return\\\"function\\\"==typeof r},toSerializable:function(t){var r=\\\"\\\";try{r=t.toString().substring(r.indexOf(\\\"{\\\")+1,r.lastIndexOf(\\\"}\\\"))}catch(t){}return{name:t.name,body:r,proto:Object.getPrototypeOf(t).constructor.name}},fromSerializable:function(t){try{var r=function(){};return\\\"string\\\"==typeof t.name&&Object.defineProperty(r,\\\"name\\\",{value:t.name,writable:!1}),\\\"string\\\"==typeof t.body&&Object.defineProperty(r,\\\"body\\\",{value:t.body,writable:!1}),\\\"string\\\"==typeof t.proto&&(r.constructor={name:t.proto}),r}catch(r){return t}}}}(w);var A={};!function(t){var r;function e(t){for(var r={},e=0,n=t.attributes;e<n.length;e++){var a=n[e];r[a.name]=a.value}return r}t.__esModule=!0,t.default={type:\\\"HTMLElement\\\",shouldTransform:function(t,r){return r&&r.children&&\\\"string\\\"==typeof r.innerHTML&&\\\"string\\\"==typeof r.tagName},toSerializable:function(t){return{tagName:t.tagName.toLowerCase(),attributes:e(t),innerHTML:t.innerHTML}},fromSerializable:function(t){try{var e=(r||(r=document.implementation.createHTMLDocument(\\\"sandbox\\\"))).createElement(t.tagName);e.innerHTML=t.innerHTML;for(var n=0,a=Object.keys(t.attributes);n<a.length;n++){var o=a[n];try{e.setAttribute(o,t.attributes[o])}catch(t){}}return e}catch(r){return t}}}}(A);var j={};!function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)};r.__esModule=!0,r.default={type:\\\"Map\\\",shouldTransform:function(t,r){return r&&r.constructor&&\\\"Map\\\"===r.constructor.name},toSerializable:function(t){var r={};return t.forEach((function(t,e){var n=\\\"object\\\"==typeof e?JSON.stringify(e):e;r[n]=t})),{name:\\\"Map\\\",body:r,proto:Object.getPrototypeOf(t).constructor.name}},fromSerializable:function(t){var r=t.body,n=e({},r);return\\\"string\\\"==typeof t.proto&&(n.constructor={name:t.proto}),n}}}(j);var z={};!function(t){t.__esModule=!0;var r=\\\"@t\\\",e=/^#*@(t|r)$/,n=(0,eval)(\\\"this\\\"),a=\\\"function\\\"==typeof ArrayBuffer,o=\\\"function\\\"==typeof Map,i=\\\"function\\\"==typeof Set,u=[\\\"Int8Array\\\",\\\"Uint8Array\\\",\\\"Uint8ClampedArray\\\",\\\"Int16Array\\\",\\\"Uint16Array\\\",\\\"Int32Array\\\",\\\"Uint32Array\\\",\\\"Float32Array\\\",\\\"Float64Array\\\"],s=Array.prototype.slice,f={serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)}},c=function(){function t(t,r){this.references=t,this.transforms=r,this.transformsMap=this._makeTransformsMap(),this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}return t._createRefMark=function(t){var r=Object.create(null);return r[\\\"@r\\\"]=t,r},t.prototype._createCircularCandidate=function(t,r,e){this.circularCandidates.push(t),this.circularCandidatesDescrs.push({parent:r,key:e,refIdx:-1})},t.prototype._applyTransform=function(t,e,n,a){var o=Object.create(null),i=a.toSerializable(t);return\\\"object\\\"==typeof i&&this._createCircularCandidate(t,e,n),o[r]=a.type,o.data=this._handleValue((function(){return i}),e,n),o},t.prototype._handleArray=function(t){for(var r=[],e=function(e){r[e]=n._handleValue((function(){return t[e]}),r,e)},n=this,a=0;a<t.length;a++)e(a);return r},t.prototype._handlePlainObject=function(t){var r,n,a=Object.create(null),o=function(r){if(Reflect.has(t,r)){var n=e.test(r)?\\\"#\\\"+r:r;a[n]=i._handleValue((function(){return t[r]}),a,n)}},i=this;for(var u in t)o(u);var s=null===(n=null===(r=null==t?void 0:t.__proto__)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name;return s&&\\\"Object\\\"!==s&&(a.constructor={name:s}),a},t.prototype._handleObject=function(t,r,e){return this._createCircularCandidate(t,r,e),Array.isArray(t)?this._handleArray(t):this._handlePlainObject(t)},t.prototype._ensureCircularReference=function(r){var e=this.circularCandidates.indexOf(r);if(e>-1){var n=this.circularCandidatesDescrs[e];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),t._createRefMark(n.refIdx)}return null},t.prototype._handleValue=function(t,r,e){try{var n=t(),a=typeof n,o=\\\"object\\\"===a&&null!==n;if(o){var i=this._ensureCircularReference(n);if(i)return i}var u=this._findTransform(a,n);return u?this._applyTransform(n,r,e,u):o?this._handleObject(n,r,e):n}catch(t){try{return this._handleValue((function(){return t instanceof Error?t:new Error(t)}),r,e)}catch(t){return null}}},t.prototype._makeTransformsMap=function(){if(o){var t=new Map;return this.transforms.forEach((function(r){r.lookup&&t.set(r.lookup,r)})),t}},t.prototype._findTransform=function(t,r){if(o&&r&&r.constructor&&(null==(a=this.transformsMap.get(r.constructor))?void 0:a.shouldTransform(t,r)))return a;for(var e=0,n=this.transforms;e<n.length;e++){var a;if((a=n[e]).shouldTransform(t,r))return a}},t.prototype.transform=function(){for(var r=this,e=[this._handleValue((function(){return r.references}),null,null)],n=0,a=this.circularCandidatesDescrs;n<a.length;n++){var o=a[n];o.refIdx>0&&(e[o.refIdx]=o.parent[o.key],o.parent[o.key]=t._createRefMark(o.refIdx))}return e},t}(),l=function(){function t(t,r){this.activeTransformsStack=[],this.visitedRefs=Object.create(null),this.references=t,this.transformMap=r}return t.prototype._handlePlainObject=function(t){var r=Object.create(null);for(var n in\\\"constructor\\\"in t&&(t.constructor&&\\\"string\\\"==typeof t.constructor.name||(t.constructor={name:\\\"Object\\\"})),t)t.hasOwnProperty(n)&&(this._handleValue(t[n],t,n),e.test(n)&&(r[n.substring(1)]=t[n],delete t[n]));for(var a in r)t[a]=r[a]},t.prototype._handleTransformedObject=function(t,e,n){var a=t[r],o=this.transformMap[a];if(!o)throw new Error(\\\"Can't find transform for \\\\\\\"\\\"+a+'\\\" type.');this.activeTransformsStack.push(t),this._handleValue(t.data,t,\\\"data\\\"),this.activeTransformsStack.pop(),e[n]=o.fromSerializable(t.data)},t.prototype._handleCircularSelfRefDuringTransform=function(t,r,e){var n=this.references;Object.defineProperty(r,e,{val:void 0,configurable:!0,enumerable:!0,get:function(){return void 0===this.val&&(this.val=n[t]),this.val},set:function(t){this.val=t}})},t.prototype._handleCircularRef=function(t,r,e){this.activeTransformsStack.includes(this.references[t])?this._handleCircularSelfRefDuringTransform(t,r,e):(this.visitedRefs[t]||(this.visitedRefs[t]=!0,this._handleValue(this.references[t],this.references,t)),r[e]=this.references[t])},t.prototype._handleValue=function(t,e,n){if(\\\"object\\\"==typeof t&&null!==t){var a=t[\\\"@r\\\"];if(void 0!==a)this._handleCircularRef(a,e,n);else if(t[r])this._handleTransformedObject(t,e,n);else if(Array.isArray(t))for(var o=0;o<t.length;o++)this._handleValue(t[o],t,o);else this._handlePlainObject(t)}},t.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]},t}(),d=[{type:\\\"[[NaN]]\\\",shouldTransform:function(t,r){return\\\"number\\\"===t&&isNaN(r)},toSerializable:function(){return\\\"\\\"},fromSerializable:function(){return NaN}},{type:\\\"[[undefined]]\\\",shouldTransform:function(t){return\\\"undefined\\\"===t},toSerializable:function(){return\\\"\\\"},fromSerializable:function(){}},{type:\\\"[[Date]]\\\",lookup:Date,shouldTransform:function(t,r){return r instanceof Date},toSerializable:function(t){return t.getTime()},fromSerializable:function(t){var r=new Date;return r.setTime(t),r}},{type:\\\"[[RegExp]]\\\",lookup:RegExp,shouldTransform:function(t,r){return r instanceof RegExp},toSerializable:function(t){var r={src:t.source,flags:\\\"\\\"};return t.globalThis&&(r.flags+=\\\"g\\\"),t.ignoreCase&&(r.flags+=\\\"i\\\"),t.multiline&&(r.flags+=\\\"m\\\"),r},fromSerializable:function(t){return new RegExp(t.src,t.flags)}},{type:\\\"[[Error]]\\\",lookup:Error,shouldTransform:function(t,r){return r instanceof Error},toSerializable:function(t){var r,e;return t.stack||null===(e=(r=Error).captureStackTrace)||void 0===e||e.call(r,t),{name:t.name,message:t.message,stack:t.stack}},fromSerializable:function(t){var r=new(n[t.name]||Error)(t.message);return r.stack=t.stack,r}},{type:\\\"[[ArrayBuffer]]\\\",lookup:a&&ArrayBuffer,shouldTransform:function(t,r){return a&&r instanceof ArrayBuffer},toSerializable:function(t){var r=new Int8Array(t);return s.call(r)},fromSerializable:function(t){if(a){var r=new ArrayBuffer(t.length);return new Int8Array(r).set(t),r}return t}},{type:\\\"[[TypedArray]]\\\",shouldTransform:function(t,r){if(a)return ArrayBuffer.isView(r)&&!(r instanceof DataView);for(var e=0,o=u;e<o.length;e++){var i=o[e];if(\\\"function\\\"==typeof n[i]&&r instanceof n[i])return!0}return!1},toSerializable:function(t){return{ctorName:t.constructor.name,arr:s.call(t)}},fromSerializable:function(t){return\\\"function\\\"==typeof n[t.ctorName]?new n[t.ctorName](t.arr):t.arr}},{type:\\\"[[Map]]\\\",lookup:o&&Map,shouldTransform:function(t,r){return o&&r instanceof Map},toSerializable:function(t){var r=[];return t.forEach((function(t,e){r.push(e),r.push(t)})),r},fromSerializable:function(t){if(o){for(var r=new Map,e=0;e<t.length;e+=2)r.set(t[e],t[e+1]);return r}for(var n=[],a=0;a<t.length;a+=2)n.push([t[e],t[e+1]]);return n}},{type:\\\"[[Set]]\\\",lookup:i&&Set,shouldTransform:function(t,r){return i&&r instanceof Set},toSerializable:function(t){var r=[];return t.forEach((function(t){r.push(t)})),r},fromSerializable:function(t){if(i){for(var r=new Set,e=0;e<t.length;e++)r.add(t[e]);return r}return t}}],p=function(){function t(t){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=t||f,this.addTransforms(d)}return t.prototype.addTransforms=function(t){for(var r=0,e=t=Array.isArray(t)?t:[t];r<e.length;r++){var n=e[r];if(this.transformsMap[n.type])throw new Error('Transform with type \\\"'+n.type+'\\\" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},t.prototype.removeTransforms=function(t){for(var r=0,e=t=Array.isArray(t)?t:[t];r<e.length;r++){var n=e[r],a=this.transforms.indexOf(n);a>-1&&this.transforms.splice(a,1),delete this.transformsMap[n.type]}return this},t.prototype.encode=function(t){var r=new c(t,this.transforms).transform();return this.serializer.serialize(r)},t.prototype.decode=function(t){var r=this.serializer.deserialize(t);return new l(r,this.transformsMap).transform()},t}();t.default=p}(z);var E=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};S.__esModule=!0,S.Decode=P=S.Encode=void 0;var k=E(O),C=E(w),D=E(A),I=E(j),N=E(z),R=[D.default,C.default,k.default,I.default],x=new N.default;x.addTransforms(R);var P=S.Encode=function(t){return JSON.parse(x.encode(t))};S.Decode=function(t){return x.decode(JSON.stringify(t))},function(r){var e=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var a=e(n),i=e(o),u=S;r.default=function(t,r,e){void 0===e&&(e=!0);for(var n=t,o={pointers:{},src:{npm:\\\"https://npmjs.com/package/console-feed\\\",github:\\\"https://github.com/samdenty99/console-feed\\\"}},s=function(t){var a=n[t];n[t]=function(){a.apply(this,arguments);var n=[].slice.call(arguments);setTimeout((function(){var a=i.default(t,n);if(a){var o=a;e&&(o=u.Encode(a)),r(o,a)}}))},o.pointers[t]=a},f=0,c=a.default;f<c.length;f++)s(c[f]);return n.feed=o,n}}(e),r(e)(window.console,(function(t){var r=P(t);parent.postMessage({type:\\\"console\\\",codesandbox:!0,log:Array.isArray(r)?r[0]:r,channelId:scope.channelId},\\\"*\\\")}));\\n\";\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudC9kaXN0L2NvbnNvbGVIb29rLWNkYmU1NGFiLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXVDO0FBQ2lCOztBQUV4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsMkJBQTJCO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhCQUE4QjtBQUMvQjtBQUNBLGFBQWEscUJBQXFCO0FBQ2xDLGFBQWEsb0JBQW9CO0FBQ2pDLFlBQVksc0JBQXNCO0FBQ2xDLFlBQVksMEJBQTBCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0FBZ0MsaUNBQWlDLFVBQVUsRUFBRSxzREFBc0QsNERBQTRELGdCQUFnQixXQUFXLEtBQUssV0FBVyx5REFBeUQsU0FBUyw0QkFBNEIsT0FBTywyQ0FBMkMsOEJBQThCLHlFQUF5RSxFQUFFLDZEQUE2RCwyQkFBMkIsNEJBQTRCLFNBQVMsZ0NBQWdDLG9CQUFvQixLQUFLLDhCQUE4QixNQUFNLHNCQUFzQixXQUFXLHdCQUF3QixTQUFTLGlCQUFpQixXQUFXLDJCQUEyQixVQUFVLEVBQUUsNkRBQTZELDJCQUEyQiw0QkFBNEIsU0FBUyw4QkFBOEIsVUFBVSxLQUFLLDhCQUE4QixNQUFNLHNCQUFzQixXQUFXLGdCQUFnQixTQUFTLFVBQVUsZUFBZSxjQUFjLHFHQUFxRyw2Q0FBNkMsdUNBQXVDLFdBQVcsS0FBSyxXQUFXLHVHQUF1RyxxREFBcUQsWUFBWSwwQ0FBMEMsdUNBQXVDLFdBQVcsS0FBSyx3Q0FBd0Msb0VBQW9FLFlBQVksZ0NBQWdDLDJDQUEyQyxvQ0FBb0MsZ0NBQWdDLHFDQUFxQywrQ0FBK0MsR0FBRyxHQUFHLFlBQVksSUFBSSx3Q0FBd0MsMEJBQTBCLFlBQVksMkNBQTJDLG1HQUFtRyxtQkFBbUIsMkJBQTJCLGdDQUFnQyxxQkFBcUIsbUNBQW1DLGFBQWEsd0NBQXdDLDBCQUEwQixZQUFZLGdCQUFnQixzQkFBc0IsMEJBQTBCLG1CQUFtQixlQUFlLFdBQVcsTUFBTSxzR0FBc0csZUFBZSxXQUFXLGdCQUFnQix3QkFBd0IsK0JBQStCLHVCQUF1QixxQkFBcUIsTUFBTSxRQUFRLDJCQUEyQixHQUFHLGlCQUFpQixpQkFBaUIsV0FBVyxZQUFZLG1CQUFtQixxQ0FBcUMsV0FBVyxvQkFBb0Isc0ZBQXNGLFFBQVEsR0FBRzs7QUFFcm9nQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvY29uc29sZUhvb2stY2RiZTU0YWIubWpzPzNmODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnb3V0dmFyaWFudCc7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZUVycm9yIH0gZnJvbSAnLi90eXBlcy0wODc3YzU1My5tanMnO1xuXG52YXIgRXZlbnRFbWl0dGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuY2hhbm5lbElkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgfTtcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmxpc3RlbmVycykuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIGxpc3RlbmVyKG1lc3NhZ2UpOyB9KTtcbiAgICB9O1xuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3RlbmVySWQgPSB0aGlzLmxpc3RlbmVyc0NvdW50O1xuICAgICAgICB0aGlzLmxpc3RlbmVyc1tsaXN0ZW5lcklkXSA9IGxpc3RlbmVyO1xuICAgICAgICB0aGlzLmxpc3RlbmVyc0NvdW50Kys7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWxldGUgX3RoaXMubGlzdGVuZXJzW2xpc3RlbmVySWRdO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZW50RW1pdHRlcjtcbn0oKSk7XG5cbmZ1bmN0aW9uIGlzQ29tbWFuZChjaGFyKSB7XG4gICAgcmV0dXJuIC9bYS16QS1aLl0vLnRlc3QoY2hhcik7XG59XG5mdW5jdGlvbiBpc0FscGhhKGNoYXIpIHtcbiAgICByZXR1cm4gL1thLXpBLVpdLy50ZXN0KGNoYXIpO1xufVxuZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGNoYXIpIHtcbiAgICByZXR1cm4gL1xccy8udGVzdChjaGFyKTtcbn1cbmZ1bmN0aW9uIGlzT3BlcmF0b3IoY2hhcikge1xuICAgIHJldHVybiAvWyZ8XS8udGVzdChjaGFyKTtcbn1cbmZ1bmN0aW9uIGlzQXJndW1lbnQoY2hhcikge1xuICAgIHJldHVybiAvLS8udGVzdChjaGFyKTtcbn1cbmZ1bmN0aW9uIGlzU3RyaW5nKGNoYXIpIHtcbiAgICByZXR1cm4gL1tcIiddLy50ZXN0KGNoYXIpO1xufVxuZnVuY3Rpb24gaXNFbnZWYXIoY2hhcikge1xuICAgIHJldHVybiBpc0FscGhhKGNoYXIpICYmIGNoYXIgPT09IGNoYXIudG9VcHBlckNhc2UoKTtcbn1cbnZhciBUb2tlblR5cGU7XG4oZnVuY3Rpb24gKFRva2VuVHlwZSkge1xuICAgIFRva2VuVHlwZVtcIk9SXCJdID0gXCJPUlwiO1xuICAgIFRva2VuVHlwZVtcIkFORFwiXSA9IFwiQU5EXCI7XG4gICAgVG9rZW5UeXBlW1wiUElQRVwiXSA9IFwiUElQRVwiO1xuICAgIFRva2VuVHlwZVtcIkNvbW1hbmRcIl0gPSBcIkNvbW1hbmRcIjtcbiAgICBUb2tlblR5cGVbXCJBcmd1bWVudFwiXSA9IFwiQXJndW1lbnRcIjtcbiAgICBUb2tlblR5cGVbXCJTdHJpbmdcIl0gPSBcIlN0cmluZ1wiO1xuICAgIFRva2VuVHlwZVtcIkVudlZhclwiXSA9IFwiRW52VmFyXCI7XG59KShUb2tlblR5cGUgfHwgKFRva2VuVHlwZSA9IHt9KSk7XG52YXIgb3BlcmF0b3JzID0gbmV3IE1hcChbXG4gICAgW1wiJiZcIiwgeyB0eXBlOiBUb2tlblR5cGUuQU5EIH1dLFxuICAgIFtcInx8XCIsIHsgdHlwZTogVG9rZW5UeXBlLk9SIH1dLFxuICAgIFtcInxcIiwgeyB0eXBlOiBUb2tlblR5cGUuUElQRSB9XSxcbiAgICBbXCItXCIsIHsgdHlwZTogVG9rZW5UeXBlLkFyZ3VtZW50IH1dLFxuXSk7XG5mdW5jdGlvbiB0b2tlbml6ZShpbnB1dCkge1xuICAgIHZhciBjdXJyZW50ID0gMDtcbiAgICB2YXIgdG9rZW5zID0gW107XG4gICAgZnVuY3Rpb24gcGFyc2VDb21tYW5kKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBcIlwiO1xuICAgICAgICB3aGlsZSAoaXNDb21tYW5kKGlucHV0W2N1cnJlbnRdKSAmJiBjdXJyZW50IDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBpbnB1dFtjdXJyZW50XTtcbiAgICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB0eXBlOiBUb2tlblR5cGUuQ29tbWFuZCwgdmFsdWU6IHZhbHVlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlT3BlcmF0b3IoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IFwiXCI7XG4gICAgICAgIHdoaWxlIChpc09wZXJhdG9yKGlucHV0W2N1cnJlbnRdKSAmJiBjdXJyZW50IDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBpbnB1dFtjdXJyZW50XTtcbiAgICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3BlcmF0b3JzLmdldCh2YWx1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlQXJndW1lbnQoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IFwiXCI7XG4gICAgICAgIHdoaWxlICgoaXNBcmd1bWVudChpbnB1dFtjdXJyZW50XSkgfHwgaXNBbHBoYShpbnB1dFtjdXJyZW50XSkpICYmXG4gICAgICAgICAgICBjdXJyZW50IDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBpbnB1dFtjdXJyZW50XTtcbiAgICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB0eXBlOiBUb2tlblR5cGUuQXJndW1lbnQsIHZhbHVlOiB2YWx1ZSB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYXJzZVN0cmluZygpIHtcbiAgICAgICAgdmFyIG9wZW5DbG9zZVF1b3RlID0gaW5wdXRbY3VycmVudF07XG4gICAgICAgIHZhciB2YWx1ZSA9IGlucHV0W2N1cnJlbnRdO1xuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIHdoaWxlIChpbnB1dFtjdXJyZW50XSAhPT0gb3BlbkNsb3NlUXVvdGUgJiYgY3VycmVudCA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdmFsdWUgKz0gaW5wdXRbY3VycmVudF07XG4gICAgICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgKz0gaW5wdXRbY3VycmVudF07XG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVG9rZW5UeXBlLlN0cmluZywgdmFsdWU6IHZhbHVlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlRW52VmFycygpIHtcbiAgICAgICAgdmFyIHZhbHVlID0ge307XG4gICAgICAgIHZhciBwYXJzZVNpbmdsZUVudiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIHBhaXIgPSBcIlwiO1xuICAgICAgICAgICAgd2hpbGUgKGlucHV0W2N1cnJlbnRdICE9PSBcIj1cIiAmJiBjdXJyZW50IDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAga2V5ICs9IGlucHV0W2N1cnJlbnRdO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNraXAgZXF1YWxcbiAgICAgICAgICAgIGlmIChpbnB1dFtjdXJyZW50XSA9PT0gXCI9XCIpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaW5wdXRbY3VycmVudF0gIT09IFwiIFwiICYmIGN1cnJlbnQgPCBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBwYWlyICs9IGlucHV0W2N1cnJlbnRdO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlW2tleV0gPSBwYWlyO1xuICAgICAgICB9O1xuICAgICAgICB3aGlsZSAoaXNFbnZWYXIoaW5wdXRbY3VycmVudF0pICYmIGN1cnJlbnQgPCBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBhcnNlU2luZ2xlRW52KCk7XG4gICAgICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVG9rZW5UeXBlLkVudlZhciwgdmFsdWU6IHZhbHVlIH07XG4gICAgfVxuICAgIHdoaWxlIChjdXJyZW50IDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjdXJyZW50Q2hhciA9IGlucHV0W2N1cnJlbnRdO1xuICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGN1cnJlbnRDaGFyKSkge1xuICAgICAgICAgICAgY3VycmVudCsrO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICBjYXNlIGlzRW52VmFyKGN1cnJlbnRDaGFyKTpcbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaChwYXJzZUVudlZhcnMoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGlzQ29tbWFuZChjdXJyZW50Q2hhcik6XG4gICAgICAgICAgICAgICAgdG9rZW5zLnB1c2gocGFyc2VDb21tYW5kKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBpc09wZXJhdG9yKGN1cnJlbnRDaGFyKTpcbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaChwYXJzZU9wZXJhdG9yKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBpc0FyZ3VtZW50KGN1cnJlbnRDaGFyKTpcbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaChwYXJzZUFyZ3VtZW50KCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBpc1N0cmluZyhjdXJyZW50Q2hhcik6XG4gICAgICAgICAgICAgICAgdG9rZW5zLnB1c2gocGFyc2VTdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gY2hhcmFjdGVyOiBcIi5jb25jYXQoY3VycmVudENoYXIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG9rZW5zO1xufVxuXG52YXIgY291bnRlciA9IDA7XG5mdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUlkKCkge1xuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgIHZhciByYW5kb21OdW1iZXIgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7XG4gICAgdmFyIGNvdW50ID0gKGNvdW50ZXIgKz0gMSk7XG4gICAgcmV0dXJuICgrXCJcIi5jb25jYXQobm93KS5jb25jYXQocmFuZG9tTnVtYmVyKS5jb25jYXQoY291bnQpKS50b1N0cmluZygxNik7XG59XG52YXIgd3JpdGVCdWZmZXIgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGNvbnRlbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxufTtcbnZhciByZWFkQnVmZmVyID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGNvbnRlbnQpO1xuICAgIH1cbn07XG52YXIgZnJvbUJ1bmRsZXJGaWxlc1RvRlMgPSBmdW5jdGlvbiAoZmlsZXMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZmlsZXMpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBfYSkge1xuICAgICAgICB2YXIga2V5ID0gX2FbMF0sIHZhbHVlID0gX2FbMV07XG4gICAgICAgIGFjY1trZXldID0gd3JpdGVCdWZmZXIodmFsdWUuY29kZSk7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xufTtcbi8qKlxuICogRmlndXJlIG91dCB3aGljaCBzY3JpcHQgaXQgbXVzdCBydW4gdG8gc3RhcnQgYSBzZXJ2ZXJcbiAqL1xudmFyIGZpbmRTdGFydFNjcmlwdFBhY2thZ2VKc29uID0gZnVuY3Rpb24gKHBhY2thZ2VKc29uKSB7XG4gICAgdmFyIHNjcmlwdHMgPSB7fTtcbiAgICAvLyBUT0RPOiBzdXBwb3J0IHBvc3RpbnN0YWxsXG4gICAgdmFyIHBvc3NpYmxlS2V5cyA9IFtcImRldlwiLCBcInN0YXJ0XCJdO1xuICAgIHRyeSB7XG4gICAgICAgIHNjcmlwdHMgPSBKU09OLnBhcnNlKHBhY2thZ2VKc29uKS5zY3JpcHRzO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSBwYWNrYWdlLmpzb24gZmlsZTogXCIgKyBlLm1lc3NhZ2UpO1xuICAgIH1cbiAgICBpbnZhcmlhbnQoc2NyaXB0cywgXCJGYWlsZWQgdG8gc3RhcnQuIFBsZWFzZSBwcm92aWRlIGEgYHN0YXJ0YCBvciBgZGV2YCBzY3JpcHQgb24gdGhlIHBhY2thZ2UuanNvblwiKTtcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICBpZiAocG9zc2libGVLZXlzW2luZGV4XSBpbiBzY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gcG9zc2libGVLZXlzW2luZGV4XTtcbiAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSBzY3JpcHRzW3NjcmlwdF07XG4gICAgICAgICAgICB2YXIgZW52XzEgPSB7fTtcbiAgICAgICAgICAgIHZhciBjb21tYW5kXzEgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGFyZ3NfMSA9IFtdO1xuICAgICAgICAgICAgdG9rZW5pemUoY2FuZGlkYXRlKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbW1hbmROb3RGb3VuZFlldCA9IGNvbW1hbmRfMSA9PT0gXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSBUb2tlblR5cGUuRW52VmFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudl8xID0gaXRlbS52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gVG9rZW5UeXBlLkNvbW1hbmQgJiYgY29tbWFuZE5vdEZvdW5kWWV0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfMSA9IGl0ZW0udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09IFRva2VuVHlwZS5Bcmd1bWVudCB8fFxuICAgICAgICAgICAgICAgICAgICAoIWNvbW1hbmROb3RGb3VuZFlldCAmJiBpdGVtLnR5cGUgPT09IFRva2VuVHlwZS5Db21tYW5kKSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdzXzEucHVzaChpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogc3VwcG9ydCBUb2tlblR5cGUuQU5ELCBUb2tlblR5cGUuT1IsIFRva2VuVHlwZS5QSVBFXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBbY29tbWFuZF8xLCBhcmdzXzEsIHsgZW52OiBlbnZfMSB9XSB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgcG9zc2libGVLZXlzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgc3RhdGVfMSA9IF9sb29wXzEoaW5kZXgpO1xuICAgICAgICBpZiAodHlwZW9mIHN0YXRlXzEgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVfMS52YWx1ZTtcbiAgICB9XG4gICAgdGhyb3cgY3JlYXRlRXJyb3IoXCJGYWlsZWQgdG8gc3RhcnQuIFBsZWFzZSBwcm92aWRlIGEgYHN0YXJ0YCBvciBgZGV2YCBzY3JpcHQgb24gdGhlIHBhY2thZ2UuanNvblwiKTtcbn07XG52YXIgZ2V0TWVzc2FnZUZyb21FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgIGlmICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICBpZiAodHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIFwibWVzc2FnZVwiIGluIGVycm9yKSB7XG4gICAgICAgIHJldHVybiBlcnJvci5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlRXJyb3IoXCJUaGUgc2VydmVyIGNvdWxkIG5vdCBiZSByZWFjaGVkLiBNYWtlIHN1cmUgdGhhdCB0aGUgbm9kZSBzY3JpcHQgaXMgcnVubmluZyBhbmQgdGhhdCBhIHBvcnQgaGFzIGJlZW4gc3RhcnRlZC5cIik7XG59O1xuXG52YXIgY29uc29sZUhvb2sgPSBcInZhciB0PVxcXCJ1bmRlZmluZWRcXFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOlxcXCJ1bmRlZmluZWRcXFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcXFwidW5kZWZpbmVkXFxcIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczpcXFwidW5kZWZpbmVkXFxcIiE9dHlwZW9mIHNlbGY/c2VsZjp7fTtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LFxcXCJkZWZhdWx0XFxcIik/dC5kZWZhdWx0OnR9dmFyIGU9e30sbj17fTshZnVuY3Rpb24odCl7dC5fX2VzTW9kdWxlPSEwLHQuZGVmYXVsdD1bXFxcImxvZ1xcXCIsXFxcImRlYnVnXFxcIixcXFwiaW5mb1xcXCIsXFxcIndhcm5cXFwiLFxcXCJlcnJvclxcXCIsXFxcInRhYmxlXFxcIixcXFwiY2xlYXJcXFwiLFxcXCJ0aW1lXFxcIixcXFwidGltZUVuZFxcXCIsXFxcImNvdW50XFxcIixcXFwiYXNzZXJ0XFxcIixcXFwiY29tbWFuZFxcXCIsXFxcInJlc3VsdFxcXCJdfShuKTt2YXIgYSxvPXt9LGk9e307KGE9aSkuX19lc01vZHVsZT0hMCxhLmRlZmF1bHQ9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbigpe3JldHVybig2NTUzNiooMStNYXRoLnJhbmRvbSgpKXwwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpfTtyZXR1cm4gdCgpK3QoKStcXFwiLVxcXCIrdCgpK1xcXCItXFxcIit0KCkrXFxcIi1cXFwiK3QoKStcXFwiLVxcXCIrdCgpK1xcXCItXFxcIitEYXRlLm5vdygpfTt2YXIgdT17fSxzPXtfX2VzTW9kdWxlOiEwfTtzLnVwZGF0ZT1zLnN0YXRlPXZvaWQgMCxzLnVwZGF0ZT1mdW5jdGlvbih0KXtzLnN0YXRlPXR9O3ZhciBmPXt9LGM9e307IWZ1bmN0aW9uKHIpe3ZhciBlPXQmJnQuX19hc3NpZ258fGZ1bmN0aW9uKCl7cmV0dXJuIGU9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciByLGU9MSxuPWFyZ3VtZW50cy5sZW5ndGg7ZTxuO2UrKylmb3IodmFyIGEgaW4gcj1hcmd1bWVudHNbZV0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsYSkmJih0W2FdPXJbYV0pO3JldHVybiB0fSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ci5fX2VzTW9kdWxlPSEwLHIuaW5pdGlhbFN0YXRlPXZvaWQgMCxyLmluaXRpYWxTdGF0ZT17dGltaW5nczp7fSxjb3VudDp7fX07dmFyIG49ZnVuY3Rpb24oKXtyZXR1cm5cXFwidW5kZWZpbmVkXFxcIiE9dHlwZW9mIHBlcmZvcm1hbmNlJiZwZXJmb3JtYW5jZS5ub3c/cGVyZm9ybWFuY2Uubm93KCk6RGF0ZS5ub3coKX07ci5kZWZhdWx0PWZ1bmN0aW9uKHQsYSl7dmFyIG8saSx1O3N3aXRjaCh2b2lkIDA9PT10JiYodD1yLmluaXRpYWxTdGF0ZSksYS50eXBlKXtjYXNlXFxcIkNPVU5UXFxcIjp2YXIgcz10LmNvdW50W2EubmFtZV18fDA7cmV0dXJuIGUoZSh7fSx0KSx7Y291bnQ6ZShlKHt9LHQuY291bnQpLChvPXt9LG9bYS5uYW1lXT1zKzEsbykpfSk7Y2FzZVxcXCJUSU1FX1NUQVJUXFxcIjpyZXR1cm4gZShlKHt9LHQpLHt0aW1pbmdzOmUoZSh7fSx0LnRpbWluZ3MpLChpPXt9LGlbYS5uYW1lXT17c3RhcnQ6bigpfSxpKSl9KTtjYXNlXFxcIlRJTUVfRU5EXFxcIjp2YXIgZj10LnRpbWluZ3NbYS5uYW1lXSxjPW4oKSxsPWMtZi5zdGFydDtyZXR1cm4gZShlKHt9LHQpLHt0aW1pbmdzOmUoZSh7fSx0LnRpbWluZ3MpLCh1PXt9LHVbYS5uYW1lXT1lKGUoe30sZikse2VuZDpjLHRpbWU6bH0pLHUpKX0pO2RlZmF1bHQ6cmV0dXJuIHR9fX0oYyksZnVuY3Rpb24ocil7dmFyIGU9dCYmdC5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX07ci5fX2VzTW9kdWxlPSEwO3ZhciBuPWUoYyksYT1zO3IuZGVmYXVsdD1mdW5jdGlvbih0KXthLnVwZGF0ZShuLmRlZmF1bHQoYS5zdGF0ZSx0KSl9fShmKTt2YXIgbD17X19lc01vZHVsZTohMH07bC50aW1lRW5kPWwudGltZVN0YXJ0PWwuY291bnQ9dm9pZCAwLGwuY291bnQ9ZnVuY3Rpb24odCl7cmV0dXJue3R5cGU6XFxcIkNPVU5UXFxcIixuYW1lOnR9fSxsLnRpbWVTdGFydD1mdW5jdGlvbih0KXtyZXR1cm57dHlwZTpcXFwiVElNRV9TVEFSVFxcXCIsbmFtZTp0fX0sbC50aW1lRW5kPWZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOlxcXCJUSU1FX0VORFxcXCIsbmFtZTp0fX07dmFyIGQ9dCYmdC5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX07dS5fX2VzTW9kdWxlPSEwLHUuc3RvcD11LnN0YXJ0PXZvaWQgMDt2YXIgcD1zLGg9ZChmKSxtPWw7dS5zdGFydD1mdW5jdGlvbih0KXtoLmRlZmF1bHQobS50aW1lU3RhcnQodCkpfSx1LnN0b3A9ZnVuY3Rpb24odCl7dmFyIHI9bnVsbD09PXAuc3RhdGV8fHZvaWQgMD09PXAuc3RhdGU/dm9pZCAwOnAuc3RhdGUudGltaW5nc1t0XTtyZXR1cm4gciYmIXIuZW5kPyhoLmRlZmF1bHQobS50aW1lRW5kKHQpKSx7bWV0aG9kOlxcXCJsb2dcXFwiLGRhdGE6W3QrXFxcIjogXFxcIitwLnN0YXRlLnRpbWluZ3NbdF0udGltZStcXFwibXNcXFwiXX0pOnttZXRob2Q6XFxcIndhcm5cXFwiLGRhdGE6W1xcXCJUaW1lciAnXFxcIit0K1xcXCInIGRvZXMgbm90IGV4aXN0XFxcIl19fTt2YXIgeT17fSx2PXQmJnQuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19O3kuX19lc01vZHVsZT0hMCx5LmluY3JlbWVudD12b2lkIDA7dmFyIF89cyxiPXYoZiksZz1sO3kuaW5jcmVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiBiLmRlZmF1bHQoZy5jb3VudCh0KSkse21ldGhvZDpcXFwibG9nXFxcIixkYXRhOlt0K1xcXCI6IFxcXCIrXy5zdGF0ZS5jb3VudFt0XV19fTt2YXIgTT17fSxUPXQmJnQuX19zcHJlYWRBcnJheXN8fGZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAscj0wLGU9YXJndW1lbnRzLmxlbmd0aDtyPGU7cisrKXQrPWFyZ3VtZW50c1tyXS5sZW5ndGg7dmFyIG49QXJyYXkodCksYT0wO2ZvcihyPTA7cjxlO3IrKylmb3IodmFyIG89YXJndW1lbnRzW3JdLGk9MCx1PW8ubGVuZ3RoO2k8dTtpKyssYSsrKW5bYV09b1tpXTtyZXR1cm4gbn07TS5fX2VzTW9kdWxlPSEwLE0udGVzdD12b2lkIDAsTS50ZXN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj1bXSxlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylyW2UtMV09YXJndW1lbnRzW2VdO3JldHVybiF0JiYoMD09PXIubGVuZ3RoJiZyLnB1c2goXFxcImNvbnNvbGUuYXNzZXJ0XFxcIikse21ldGhvZDpcXFwiZXJyb3JcXFwiLGRhdGE6VChbXFxcIkFzc2VydGlvbiBmYWlsZWQ6XFxcIl0scil9KX0sZnVuY3Rpb24ocil7dmFyIGU9dCYmdC5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4gZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIHIsZT0xLG49YXJndW1lbnRzLmxlbmd0aDtlPG47ZSsrKWZvcih2YXIgYSBpbiByPWFyZ3VtZW50c1tlXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixhKSYmKHRbYV09clthXSk7cmV0dXJuIHR9LGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxuPXQmJnQuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbih0LHIsZSxuKXt2b2lkIDA9PT1uJiYobj1lKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiByW2VdfX0pfTpmdW5jdGlvbih0LHIsZSxuKXt2b2lkIDA9PT1uJiYobj1lKSx0W25dPXJbZV19KSxhPXQmJnQuX19zZXRNb2R1bGVEZWZhdWx0fHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbih0LHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFxcXCJkZWZhdWx0XFxcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTpyfSl9OmZ1bmN0aW9uKHQscil7dC5kZWZhdWx0PXJ9KSxvPXQmJnQuX19pbXBvcnRTdGFyfHxmdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIHI9e307aWYobnVsbCE9dClmb3IodmFyIGUgaW4gdClcXFwiZGVmYXVsdFxcXCIhPT1lJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSYmbihyLHQsZSk7cmV0dXJuIGEocix0KSxyfSxzPXQmJnQuX19zcHJlYWRBcnJheXN8fGZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAscj0wLGU9YXJndW1lbnRzLmxlbmd0aDtyPGU7cisrKXQrPWFyZ3VtZW50c1tyXS5sZW5ndGg7dmFyIG49QXJyYXkodCksYT0wO2ZvcihyPTA7cjxlO3IrKylmb3IodmFyIG89YXJndW1lbnRzW3JdLGk9MCx1PW8ubGVuZ3RoO2k8dTtpKyssYSsrKW5bYV09b1tpXTtyZXR1cm4gbn0sZj10JiZ0Ll9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fTtyLl9fZXNNb2R1bGU9ITA7dmFyIGM9ZihpKSxsPW8odSksZD1vKHkpLHA9byhNKTtyLmRlZmF1bHQ9ZnVuY3Rpb24odCxyLG4pe3ZhciBhPW58fGMuZGVmYXVsdCgpO3N3aXRjaCh0KXtjYXNlXFxcImNsZWFyXFxcIjpyZXR1cm57bWV0aG9kOnQsaWQ6YX07Y2FzZVxcXCJjb3VudFxcXCI6cmV0dXJuISEobz1cXFwic3RyaW5nXFxcIj09dHlwZW9mIHJbMF0/clswXTpcXFwiZGVmYXVsdFxcXCIpJiZlKGUoe30sZC5pbmNyZW1lbnQobykpLHtpZDphfSk7Y2FzZVxcXCJ0aW1lXFxcIjpjYXNlXFxcInRpbWVFbmRcXFwiOnZhciBvO3JldHVybiEhKG89XFxcInN0cmluZ1xcXCI9PXR5cGVvZiByWzBdP3JbMF06XFxcImRlZmF1bHRcXFwiKSYmKFxcXCJ0aW1lXFxcIj09PXQ/KGwuc3RhcnQobyksITEpOmUoZSh7fSxsLnN0b3AobykpLHtpZDphfSkpO2Nhc2VcXFwiYXNzZXJ0XFxcIjppZigwIT09ci5sZW5ndGgpe3ZhciBpPXAudGVzdC5hcHBseShwLHMoW3JbMF1dLHIuc2xpY2UoMSkpKTtpZihpKXJldHVybiBlKGUoe30saSkse2lkOmF9KX1yZXR1cm4hMTtjYXNlXFxcImVycm9yXFxcIjpyZXR1cm57bWV0aG9kOnQsaWQ6YSxkYXRhOnIubWFwKChmdW5jdGlvbih0KXt0cnl7cmV0dXJuIHQuc3RhY2t8fHR9Y2F0Y2gocil7cmV0dXJuIHR9fSkpfTtkZWZhdWx0OnJldHVybnttZXRob2Q6dCxpZDphLGRhdGE6cn19fX0obyk7dmFyIFM9e30sTz17fTshZnVuY3Rpb24odCl7dmFyIHI7dC5fX2VzTW9kdWxlPSEwLGZ1bmN0aW9uKHQpe3RbdC5pbmZpbml0eT0wXT1cXFwiaW5maW5pdHlcXFwiLHRbdC5taW51c0luZmluaXR5PTFdPVxcXCJtaW51c0luZmluaXR5XFxcIix0W3QubWludXNaZXJvPTJdPVxcXCJtaW51c1plcm9cXFwifShyfHwocj17fSkpLHQuZGVmYXVsdD17dHlwZTpcXFwiQXJpdGhtZXRpY1xcXCIsbG9va3VwOk51bWJlcixzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCxyKXtyZXR1cm5cXFwibnVtYmVyXFxcIj09PXQmJihyPT09MS8wfHxyPT09LTEvMHx8ZnVuY3Rpb24odCl7cmV0dXJuIDEvdD09LTEvMH0ocikpfSx0b1NlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gdD09PTEvMD9yLmluZmluaXR5OnQ9PT0tMS8wP3IubWludXNJbmZpbml0eTpyLm1pbnVzWmVyb30sZnJvbVNlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gdD09PXIuaW5maW5pdHk/MS8wOnQ9PT1yLm1pbnVzSW5maW5pdHk/LTEvMDp0PT09ci5taW51c1plcm8/LTA6dH19fShPKTt2YXIgdz17fTshZnVuY3Rpb24odCl7dC5fX2VzTW9kdWxlPSEwLHQuZGVmYXVsdD17dHlwZTpcXFwiRnVuY3Rpb25cXFwiLGxvb2t1cDpGdW5jdGlvbixzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCxyKXtyZXR1cm5cXFwiZnVuY3Rpb25cXFwiPT10eXBlb2Ygcn0sdG9TZXJpYWxpemFibGU6ZnVuY3Rpb24odCl7dmFyIHI9XFxcIlxcXCI7dHJ5e3I9dC50b1N0cmluZygpLnN1YnN0cmluZyhyLmluZGV4T2YoXFxcIntcXFwiKSsxLHIubGFzdEluZGV4T2YoXFxcIn1cXFwiKSl9Y2F0Y2godCl7fXJldHVybntuYW1lOnQubmFtZSxib2R5OnIscHJvdG86T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yLm5hbWV9fSxmcm9tU2VyaWFsaXphYmxlOmZ1bmN0aW9uKHQpe3RyeXt2YXIgcj1mdW5jdGlvbigpe307cmV0dXJuXFxcInN0cmluZ1xcXCI9PXR5cGVvZiB0Lm5hbWUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFxcXCJuYW1lXFxcIix7dmFsdWU6dC5uYW1lLHdyaXRhYmxlOiExfSksXFxcInN0cmluZ1xcXCI9PXR5cGVvZiB0LmJvZHkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFxcXCJib2R5XFxcIix7dmFsdWU6dC5ib2R5LHdyaXRhYmxlOiExfSksXFxcInN0cmluZ1xcXCI9PXR5cGVvZiB0LnByb3RvJiYoci5jb25zdHJ1Y3Rvcj17bmFtZTp0LnByb3RvfSkscn1jYXRjaChyKXtyZXR1cm4gdH19fX0odyk7dmFyIEE9e307IWZ1bmN0aW9uKHQpe3ZhciByO2Z1bmN0aW9uIGUodCl7Zm9yKHZhciByPXt9LGU9MCxuPXQuYXR0cmlidXRlcztlPG4ubGVuZ3RoO2UrKyl7dmFyIGE9bltlXTtyW2EubmFtZV09YS52YWx1ZX1yZXR1cm4gcn10Ll9fZXNNb2R1bGU9ITAsdC5kZWZhdWx0PXt0eXBlOlxcXCJIVE1MRWxlbWVudFxcXCIsc2hvdWxkVHJhbnNmb3JtOmZ1bmN0aW9uKHQscil7cmV0dXJuIHImJnIuY2hpbGRyZW4mJlxcXCJzdHJpbmdcXFwiPT10eXBlb2Ygci5pbm5lckhUTUwmJlxcXCJzdHJpbmdcXFwiPT10eXBlb2Ygci50YWdOYW1lfSx0b1NlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXtyZXR1cm57dGFnTmFtZTp0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSxhdHRyaWJ1dGVzOmUodCksaW5uZXJIVE1MOnQuaW5uZXJIVE1MfX0sZnJvbVNlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXt0cnl7dmFyIGU9KHJ8fChyPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcXFwic2FuZGJveFxcXCIpKSkuY3JlYXRlRWxlbWVudCh0LnRhZ05hbWUpO2UuaW5uZXJIVE1MPXQuaW5uZXJIVE1MO2Zvcih2YXIgbj0wLGE9T2JqZWN0LmtleXModC5hdHRyaWJ1dGVzKTtuPGEubGVuZ3RoO24rKyl7dmFyIG89YVtuXTt0cnl7ZS5zZXRBdHRyaWJ1dGUobyx0LmF0dHJpYnV0ZXNbb10pfWNhdGNoKHQpe319cmV0dXJuIGV9Y2F0Y2gocil7cmV0dXJuIHR9fX19KEEpO3ZhciBqPXt9OyFmdW5jdGlvbihyKXt2YXIgZT10JiZ0Ll9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybiBlPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgcixlPTEsbj1hcmd1bWVudHMubGVuZ3RoO2U8bjtlKyspZm9yKHZhciBhIGluIHI9YXJndW1lbnRzW2VdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLGEpJiYodFthXT1yW2FdKTtyZXR1cm4gdH0sZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3IuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9e3R5cGU6XFxcIk1hcFxcXCIsc2hvdWxkVHJhbnNmb3JtOmZ1bmN0aW9uKHQscil7cmV0dXJuIHImJnIuY29uc3RydWN0b3ImJlxcXCJNYXBcXFwiPT09ci5jb25zdHJ1Y3Rvci5uYW1lfSx0b1NlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXt2YXIgcj17fTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3ZhciBuPVxcXCJvYmplY3RcXFwiPT10eXBlb2YgZT9KU09OLnN0cmluZ2lmeShlKTplO3Jbbl09dH0pKSx7bmFtZTpcXFwiTWFwXFxcIixib2R5OnIscHJvdG86T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yLm5hbWV9fSxmcm9tU2VyaWFsaXphYmxlOmZ1bmN0aW9uKHQpe3ZhciByPXQuYm9keSxuPWUoe30scik7cmV0dXJuXFxcInN0cmluZ1xcXCI9PXR5cGVvZiB0LnByb3RvJiYobi5jb25zdHJ1Y3Rvcj17bmFtZTp0LnByb3RvfSksbn19fShqKTt2YXIgej17fTshZnVuY3Rpb24odCl7dC5fX2VzTW9kdWxlPSEwO3ZhciByPVxcXCJAdFxcXCIsZT0vXiMqQCh0fHIpJC8sbj0oMCxldmFsKShcXFwidGhpc1xcXCIpLGE9XFxcImZ1bmN0aW9uXFxcIj09dHlwZW9mIEFycmF5QnVmZmVyLG89XFxcImZ1bmN0aW9uXFxcIj09dHlwZW9mIE1hcCxpPVxcXCJmdW5jdGlvblxcXCI9PXR5cGVvZiBTZXQsdT1bXFxcIkludDhBcnJheVxcXCIsXFxcIlVpbnQ4QXJyYXlcXFwiLFxcXCJVaW50OENsYW1wZWRBcnJheVxcXCIsXFxcIkludDE2QXJyYXlcXFwiLFxcXCJVaW50MTZBcnJheVxcXCIsXFxcIkludDMyQXJyYXlcXFwiLFxcXCJVaW50MzJBcnJheVxcXCIsXFxcIkZsb2F0MzJBcnJheVxcXCIsXFxcIkZsb2F0NjRBcnJheVxcXCJdLHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLGY9e3NlcmlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCl9LGRlc2VyaWFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiBKU09OLnBhcnNlKHQpfX0sYz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxyKXt0aGlzLnJlZmVyZW5jZXM9dCx0aGlzLnRyYW5zZm9ybXM9cix0aGlzLnRyYW5zZm9ybXNNYXA9dGhpcy5fbWFrZVRyYW5zZm9ybXNNYXAoKSx0aGlzLmNpcmN1bGFyQ2FuZGlkYXRlcz1bXSx0aGlzLmNpcmN1bGFyQ2FuZGlkYXRlc0Rlc2Nycz1bXSx0aGlzLmNpcmN1bGFyUmVmQ291bnQ9MH1yZXR1cm4gdC5fY3JlYXRlUmVmTWFyaz1mdW5jdGlvbih0KXt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiByW1xcXCJAclxcXCJdPXQscn0sdC5wcm90b3R5cGUuX2NyZWF0ZUNpcmN1bGFyQ2FuZGlkYXRlPWZ1bmN0aW9uKHQscixlKXt0aGlzLmNpcmN1bGFyQ2FuZGlkYXRlcy5wdXNoKHQpLHRoaXMuY2lyY3VsYXJDYW5kaWRhdGVzRGVzY3JzLnB1c2goe3BhcmVudDpyLGtleTplLHJlZklkeDotMX0pfSx0LnByb3RvdHlwZS5fYXBwbHlUcmFuc2Zvcm09ZnVuY3Rpb24odCxlLG4sYSl7dmFyIG89T2JqZWN0LmNyZWF0ZShudWxsKSxpPWEudG9TZXJpYWxpemFibGUodCk7cmV0dXJuXFxcIm9iamVjdFxcXCI9PXR5cGVvZiBpJiZ0aGlzLl9jcmVhdGVDaXJjdWxhckNhbmRpZGF0ZSh0LGUsbiksb1tyXT1hLnR5cGUsby5kYXRhPXRoaXMuX2hhbmRsZVZhbHVlKChmdW5jdGlvbigpe3JldHVybiBpfSksZSxuKSxvfSx0LnByb3RvdHlwZS5faGFuZGxlQXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLGU9ZnVuY3Rpb24oZSl7cltlXT1uLl9oYW5kbGVWYWx1ZSgoZnVuY3Rpb24oKXtyZXR1cm4gdFtlXX0pLHIsZSl9LG49dGhpcyxhPTA7YTx0Lmxlbmd0aDthKyspZShhKTtyZXR1cm4gcn0sdC5wcm90b3R5cGUuX2hhbmRsZVBsYWluT2JqZWN0PWZ1bmN0aW9uKHQpe3ZhciByLG4sYT1PYmplY3QuY3JlYXRlKG51bGwpLG89ZnVuY3Rpb24ocil7aWYoUmVmbGVjdC5oYXModCxyKSl7dmFyIG49ZS50ZXN0KHIpP1xcXCIjXFxcIityOnI7YVtuXT1pLl9oYW5kbGVWYWx1ZSgoZnVuY3Rpb24oKXtyZXR1cm4gdFtyXX0pLGEsbil9fSxpPXRoaXM7Zm9yKHZhciB1IGluIHQpbyh1KTt2YXIgcz1udWxsPT09KG49bnVsbD09PShyPW51bGw9PXQ/dm9pZCAwOnQuX19wcm90b19fKXx8dm9pZCAwPT09cj92b2lkIDA6ci5jb25zdHJ1Y3Rvcil8fHZvaWQgMD09PW4/dm9pZCAwOm4ubmFtZTtyZXR1cm4gcyYmXFxcIk9iamVjdFxcXCIhPT1zJiYoYS5jb25zdHJ1Y3Rvcj17bmFtZTpzfSksYX0sdC5wcm90b3R5cGUuX2hhbmRsZU9iamVjdD1mdW5jdGlvbih0LHIsZSl7cmV0dXJuIHRoaXMuX2NyZWF0ZUNpcmN1bGFyQ2FuZGlkYXRlKHQscixlKSxBcnJheS5pc0FycmF5KHQpP3RoaXMuX2hhbmRsZUFycmF5KHQpOnRoaXMuX2hhbmRsZVBsYWluT2JqZWN0KHQpfSx0LnByb3RvdHlwZS5fZW5zdXJlQ2lyY3VsYXJSZWZlcmVuY2U9ZnVuY3Rpb24ocil7dmFyIGU9dGhpcy5jaXJjdWxhckNhbmRpZGF0ZXMuaW5kZXhPZihyKTtpZihlPi0xKXt2YXIgbj10aGlzLmNpcmN1bGFyQ2FuZGlkYXRlc0Rlc2Nyc1tlXTtyZXR1cm4tMT09PW4ucmVmSWR4JiYobi5yZWZJZHg9bi5wYXJlbnQ/Kyt0aGlzLmNpcmN1bGFyUmVmQ291bnQ6MCksdC5fY3JlYXRlUmVmTWFyayhuLnJlZklkeCl9cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLl9oYW5kbGVWYWx1ZT1mdW5jdGlvbih0LHIsZSl7dHJ5e3ZhciBuPXQoKSxhPXR5cGVvZiBuLG89XFxcIm9iamVjdFxcXCI9PT1hJiZudWxsIT09bjtpZihvKXt2YXIgaT10aGlzLl9lbnN1cmVDaXJjdWxhclJlZmVyZW5jZShuKTtpZihpKXJldHVybiBpfXZhciB1PXRoaXMuX2ZpbmRUcmFuc2Zvcm0oYSxuKTtyZXR1cm4gdT90aGlzLl9hcHBseVRyYW5zZm9ybShuLHIsZSx1KTpvP3RoaXMuX2hhbmRsZU9iamVjdChuLHIsZSk6bn1jYXRjaCh0KXt0cnl7cmV0dXJuIHRoaXMuX2hhbmRsZVZhbHVlKChmdW5jdGlvbigpe3JldHVybiB0IGluc3RhbmNlb2YgRXJyb3I/dDpuZXcgRXJyb3IodCl9KSxyLGUpfWNhdGNoKHQpe3JldHVybiBudWxsfX19LHQucHJvdG90eXBlLl9tYWtlVHJhbnNmb3Jtc01hcD1mdW5jdGlvbigpe2lmKG8pe3ZhciB0PW5ldyBNYXA7cmV0dXJuIHRoaXMudHJhbnNmb3Jtcy5mb3JFYWNoKChmdW5jdGlvbihyKXtyLmxvb2t1cCYmdC5zZXQoci5sb29rdXAscil9KSksdH19LHQucHJvdG90eXBlLl9maW5kVHJhbnNmb3JtPWZ1bmN0aW9uKHQscil7aWYobyYmciYmci5jb25zdHJ1Y3RvciYmKG51bGw9PShhPXRoaXMudHJhbnNmb3Jtc01hcC5nZXQoci5jb25zdHJ1Y3RvcikpP3ZvaWQgMDphLnNob3VsZFRyYW5zZm9ybSh0LHIpKSlyZXR1cm4gYTtmb3IodmFyIGU9MCxuPXRoaXMudHJhbnNmb3JtcztlPG4ubGVuZ3RoO2UrKyl7dmFyIGE7aWYoKGE9bltlXSkuc2hvdWxkVHJhbnNmb3JtKHQscikpcmV0dXJuIGF9fSx0LnByb3RvdHlwZS50cmFuc2Zvcm09ZnVuY3Rpb24oKXtmb3IodmFyIHI9dGhpcyxlPVt0aGlzLl9oYW5kbGVWYWx1ZSgoZnVuY3Rpb24oKXtyZXR1cm4gci5yZWZlcmVuY2VzfSksbnVsbCxudWxsKV0sbj0wLGE9dGhpcy5jaXJjdWxhckNhbmRpZGF0ZXNEZXNjcnM7bjxhLmxlbmd0aDtuKyspe3ZhciBvPWFbbl07by5yZWZJZHg+MCYmKGVbby5yZWZJZHhdPW8ucGFyZW50W28ua2V5XSxvLnBhcmVudFtvLmtleV09dC5fY3JlYXRlUmVmTWFyayhvLnJlZklkeCkpfXJldHVybiBlfSx0fSgpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQscil7dGhpcy5hY3RpdmVUcmFuc2Zvcm1zU3RhY2s9W10sdGhpcy52aXNpdGVkUmVmcz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMucmVmZXJlbmNlcz10LHRoaXMudHJhbnNmb3JtTWFwPXJ9cmV0dXJuIHQucHJvdG90eXBlLl9oYW5kbGVQbGFpbk9iamVjdD1mdW5jdGlvbih0KXt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbiBpblxcXCJjb25zdHJ1Y3RvclxcXCJpbiB0JiYodC5jb25zdHJ1Y3RvciYmXFxcInN0cmluZ1xcXCI9PXR5cGVvZiB0LmNvbnN0cnVjdG9yLm5hbWV8fCh0LmNvbnN0cnVjdG9yPXtuYW1lOlxcXCJPYmplY3RcXFwifSkpLHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmKHRoaXMuX2hhbmRsZVZhbHVlKHRbbl0sdCxuKSxlLnRlc3QobikmJihyW24uc3Vic3RyaW5nKDEpXT10W25dLGRlbGV0ZSB0W25dKSk7Zm9yKHZhciBhIGluIHIpdFthXT1yW2FdfSx0LnByb3RvdHlwZS5faGFuZGxlVHJhbnNmb3JtZWRPYmplY3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciBhPXRbcl0sbz10aGlzLnRyYW5zZm9ybU1hcFthXTtpZighbyl0aHJvdyBuZXcgRXJyb3IoXFxcIkNhbid0IGZpbmQgdHJhbnNmb3JtIGZvciBcXFxcXFxcIlxcXCIrYSsnXFxcIiB0eXBlLicpO3RoaXMuYWN0aXZlVHJhbnNmb3Jtc1N0YWNrLnB1c2godCksdGhpcy5faGFuZGxlVmFsdWUodC5kYXRhLHQsXFxcImRhdGFcXFwiKSx0aGlzLmFjdGl2ZVRyYW5zZm9ybXNTdGFjay5wb3AoKSxlW25dPW8uZnJvbVNlcmlhbGl6YWJsZSh0LmRhdGEpfSx0LnByb3RvdHlwZS5faGFuZGxlQ2lyY3VsYXJTZWxmUmVmRHVyaW5nVHJhbnNmb3JtPWZ1bmN0aW9uKHQscixlKXt2YXIgbj10aGlzLnJlZmVyZW5jZXM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsZSx7dmFsOnZvaWQgMCxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy52YWwmJih0aGlzLnZhbD1uW3RdKSx0aGlzLnZhbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudmFsPXR9fSl9LHQucHJvdG90eXBlLl9oYW5kbGVDaXJjdWxhclJlZj1mdW5jdGlvbih0LHIsZSl7dGhpcy5hY3RpdmVUcmFuc2Zvcm1zU3RhY2suaW5jbHVkZXModGhpcy5yZWZlcmVuY2VzW3RdKT90aGlzLl9oYW5kbGVDaXJjdWxhclNlbGZSZWZEdXJpbmdUcmFuc2Zvcm0odCxyLGUpOih0aGlzLnZpc2l0ZWRSZWZzW3RdfHwodGhpcy52aXNpdGVkUmVmc1t0XT0hMCx0aGlzLl9oYW5kbGVWYWx1ZSh0aGlzLnJlZmVyZW5jZXNbdF0sdGhpcy5yZWZlcmVuY2VzLHQpKSxyW2VdPXRoaXMucmVmZXJlbmNlc1t0XSl9LHQucHJvdG90eXBlLl9oYW5kbGVWYWx1ZT1mdW5jdGlvbih0LGUsbil7aWYoXFxcIm9iamVjdFxcXCI9PXR5cGVvZiB0JiZudWxsIT09dCl7dmFyIGE9dFtcXFwiQHJcXFwiXTtpZih2b2lkIDAhPT1hKXRoaXMuX2hhbmRsZUNpcmN1bGFyUmVmKGEsZSxuKTtlbHNlIGlmKHRbcl0pdGhpcy5faGFuZGxlVHJhbnNmb3JtZWRPYmplY3QodCxlLG4pO2Vsc2UgaWYoQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIG89MDtvPHQubGVuZ3RoO28rKyl0aGlzLl9oYW5kbGVWYWx1ZSh0W29dLHQsbyk7ZWxzZSB0aGlzLl9oYW5kbGVQbGFpbk9iamVjdCh0KX19LHQucHJvdG90eXBlLnRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2l0ZWRSZWZzWzBdPSEwLHRoaXMuX2hhbmRsZVZhbHVlKHRoaXMucmVmZXJlbmNlc1swXSx0aGlzLnJlZmVyZW5jZXMsMCksdGhpcy5yZWZlcmVuY2VzWzBdfSx0fSgpLGQ9W3t0eXBlOlxcXCJbW05hTl1dXFxcIixzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCxyKXtyZXR1cm5cXFwibnVtYmVyXFxcIj09PXQmJmlzTmFOKHIpfSx0b1NlcmlhbGl6YWJsZTpmdW5jdGlvbigpe3JldHVyblxcXCJcXFwifSxmcm9tU2VyaWFsaXphYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIE5hTn19LHt0eXBlOlxcXCJbW3VuZGVmaW5lZF1dXFxcIixzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCl7cmV0dXJuXFxcInVuZGVmaW5lZFxcXCI9PT10fSx0b1NlcmlhbGl6YWJsZTpmdW5jdGlvbigpe3JldHVyblxcXCJcXFwifSxmcm9tU2VyaWFsaXphYmxlOmZ1bmN0aW9uKCl7fX0se3R5cGU6XFxcIltbRGF0ZV1dXFxcIixsb29rdXA6RGF0ZSxzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCxyKXtyZXR1cm4gciBpbnN0YW5jZW9mIERhdGV9LHRvU2VyaWFsaXphYmxlOmZ1bmN0aW9uKHQpe3JldHVybiB0LmdldFRpbWUoKX0sZnJvbVNlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXt2YXIgcj1uZXcgRGF0ZTtyZXR1cm4gci5zZXRUaW1lKHQpLHJ9fSx7dHlwZTpcXFwiW1tSZWdFeHBdXVxcXCIsbG9va3VwOlJlZ0V4cCxzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCxyKXtyZXR1cm4gciBpbnN0YW5jZW9mIFJlZ0V4cH0sdG9TZXJpYWxpemFibGU6ZnVuY3Rpb24odCl7dmFyIHI9e3NyYzp0LnNvdXJjZSxmbGFnczpcXFwiXFxcIn07cmV0dXJuIHQuZ2xvYmFsVGhpcyYmKHIuZmxhZ3MrPVxcXCJnXFxcIiksdC5pZ25vcmVDYXNlJiYoci5mbGFncys9XFxcImlcXFwiKSx0Lm11bHRpbGluZSYmKHIuZmxhZ3MrPVxcXCJtXFxcIikscn0sZnJvbVNlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFJlZ0V4cCh0LnNyYyx0LmZsYWdzKX19LHt0eXBlOlxcXCJbW0Vycm9yXV1cXFwiLGxvb2t1cDpFcnJvcixzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCxyKXtyZXR1cm4gciBpbnN0YW5jZW9mIEVycm9yfSx0b1NlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXt2YXIgcixlO3JldHVybiB0LnN0YWNrfHxudWxsPT09KGU9KHI9RXJyb3IpLmNhcHR1cmVTdGFja1RyYWNlKXx8dm9pZCAwPT09ZXx8ZS5jYWxsKHIsdCkse25hbWU6dC5uYW1lLG1lc3NhZ2U6dC5tZXNzYWdlLHN0YWNrOnQuc3RhY2t9fSxmcm9tU2VyaWFsaXphYmxlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyhuW3QubmFtZV18fEVycm9yKSh0Lm1lc3NhZ2UpO3JldHVybiByLnN0YWNrPXQuc3RhY2sscn19LHt0eXBlOlxcXCJbW0FycmF5QnVmZmVyXV1cXFwiLGxvb2t1cDphJiZBcnJheUJ1ZmZlcixzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCxyKXtyZXR1cm4gYSYmciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfSx0b1NlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXt2YXIgcj1uZXcgSW50OEFycmF5KHQpO3JldHVybiBzLmNhbGwocil9LGZyb21TZXJpYWxpemFibGU6ZnVuY3Rpb24odCl7aWYoYSl7dmFyIHI9bmV3IEFycmF5QnVmZmVyKHQubGVuZ3RoKTtyZXR1cm4gbmV3IEludDhBcnJheShyKS5zZXQodCkscn1yZXR1cm4gdH19LHt0eXBlOlxcXCJbW1R5cGVkQXJyYXldXVxcXCIsc2hvdWxkVHJhbnNmb3JtOmZ1bmN0aW9uKHQscil7aWYoYSlyZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KHIpJiYhKHIgaW5zdGFuY2VvZiBEYXRhVmlldyk7Zm9yKHZhciBlPTAsbz11O2U8by5sZW5ndGg7ZSsrKXt2YXIgaT1vW2VdO2lmKFxcXCJmdW5jdGlvblxcXCI9PXR5cGVvZiBuW2ldJiZyIGluc3RhbmNlb2YgbltpXSlyZXR1cm4hMH1yZXR1cm4hMX0sdG9TZXJpYWxpemFibGU6ZnVuY3Rpb24odCl7cmV0dXJue2N0b3JOYW1lOnQuY29uc3RydWN0b3IubmFtZSxhcnI6cy5jYWxsKHQpfX0sZnJvbVNlcmlhbGl6YWJsZTpmdW5jdGlvbih0KXtyZXR1cm5cXFwiZnVuY3Rpb25cXFwiPT10eXBlb2Ygblt0LmN0b3JOYW1lXT9uZXcgblt0LmN0b3JOYW1lXSh0LmFycik6dC5hcnJ9fSx7dHlwZTpcXFwiW1tNYXBdXVxcXCIsbG9va3VwOm8mJk1hcCxzaG91bGRUcmFuc2Zvcm06ZnVuY3Rpb24odCxyKXtyZXR1cm4gbyYmciBpbnN0YW5jZW9mIE1hcH0sdG9TZXJpYWxpemFibGU6ZnVuY3Rpb24odCl7dmFyIHI9W107cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXtyLnB1c2goZSksci5wdXNoKHQpfSkpLHJ9LGZyb21TZXJpYWxpemFibGU6ZnVuY3Rpb24odCl7aWYobyl7Zm9yKHZhciByPW5ldyBNYXAsZT0wO2U8dC5sZW5ndGg7ZSs9MilyLnNldCh0W2VdLHRbZSsxXSk7cmV0dXJuIHJ9Zm9yKHZhciBuPVtdLGE9MDthPHQubGVuZ3RoO2ErPTIpbi5wdXNoKFt0W2VdLHRbZSsxXV0pO3JldHVybiBufX0se3R5cGU6XFxcIltbU2V0XV1cXFwiLGxvb2t1cDppJiZTZXQsc2hvdWxkVHJhbnNmb3JtOmZ1bmN0aW9uKHQscil7cmV0dXJuIGkmJnIgaW5zdGFuY2VvZiBTZXR9LHRvU2VyaWFsaXphYmxlOmZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3IucHVzaCh0KX0pKSxyfSxmcm9tU2VyaWFsaXphYmxlOmZ1bmN0aW9uKHQpe2lmKGkpe2Zvcih2YXIgcj1uZXcgU2V0LGU9MDtlPHQubGVuZ3RoO2UrKylyLmFkZCh0W2VdKTtyZXR1cm4gcn1yZXR1cm4gdH19XSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnRyYW5zZm9ybXM9W10sdGhpcy50cmFuc2Zvcm1zTWFwPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5zZXJpYWxpemVyPXR8fGYsdGhpcy5hZGRUcmFuc2Zvcm1zKGQpfXJldHVybiB0LnByb3RvdHlwZS5hZGRUcmFuc2Zvcm1zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0wLGU9dD1BcnJheS5pc0FycmF5KHQpP3Q6W3RdO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO2lmKHRoaXMudHJhbnNmb3Jtc01hcFtuLnR5cGVdKXRocm93IG5ldyBFcnJvcignVHJhbnNmb3JtIHdpdGggdHlwZSBcXFwiJytuLnR5cGUrJ1xcXCIgd2FzIGFscmVhZHkgYWRkZWQuJyk7dGhpcy50cmFuc2Zvcm1zLnB1c2gobiksdGhpcy50cmFuc2Zvcm1zTWFwW24udHlwZV09bn1yZXR1cm4gdGhpc30sdC5wcm90b3R5cGUucmVtb3ZlVHJhbnNmb3Jtcz1mdW5jdGlvbih0KXtmb3IodmFyIHI9MCxlPXQ9QXJyYXkuaXNBcnJheSh0KT90Olt0XTtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXSxhPXRoaXMudHJhbnNmb3Jtcy5pbmRleE9mKG4pO2E+LTEmJnRoaXMudHJhbnNmb3Jtcy5zcGxpY2UoYSwxKSxkZWxldGUgdGhpcy50cmFuc2Zvcm1zTWFwW24udHlwZV19cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbih0KXt2YXIgcj1uZXcgYyh0LHRoaXMudHJhbnNmb3JtcykudHJhbnNmb3JtKCk7cmV0dXJuIHRoaXMuc2VyaWFsaXplci5zZXJpYWxpemUocil9LHQucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbih0KXt2YXIgcj10aGlzLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUodCk7cmV0dXJuIG5ldyBsKHIsdGhpcy50cmFuc2Zvcm1zTWFwKS50cmFuc2Zvcm0oKX0sdH0oKTt0LmRlZmF1bHQ9cH0oeik7dmFyIEU9dCYmdC5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX07Uy5fX2VzTW9kdWxlPSEwLFMuRGVjb2RlPVA9Uy5FbmNvZGU9dm9pZCAwO3ZhciBrPUUoTyksQz1FKHcpLEQ9RShBKSxJPUUoaiksTj1FKHopLFI9W0QuZGVmYXVsdCxDLmRlZmF1bHQsay5kZWZhdWx0LEkuZGVmYXVsdF0seD1uZXcgTi5kZWZhdWx0O3guYWRkVHJhbnNmb3JtcyhSKTt2YXIgUD1TLkVuY29kZT1mdW5jdGlvbih0KXtyZXR1cm4gSlNPTi5wYXJzZSh4LmVuY29kZSh0KSl9O1MuRGVjb2RlPWZ1bmN0aW9uKHQpe3JldHVybiB4LmRlY29kZShKU09OLnN0cmluZ2lmeSh0KSl9LGZ1bmN0aW9uKHIpe3ZhciBlPXQmJnQuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19O3IuX19lc01vZHVsZT0hMDt2YXIgYT1lKG4pLGk9ZShvKSx1PVM7ci5kZWZhdWx0PWZ1bmN0aW9uKHQscixlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPXQsbz17cG9pbnRlcnM6e30sc3JjOntucG06XFxcImh0dHBzOi8vbnBtanMuY29tL3BhY2thZ2UvY29uc29sZS1mZWVkXFxcIixnaXRodWI6XFxcImh0dHBzOi8vZ2l0aHViLmNvbS9zYW1kZW50eTk5L2NvbnNvbGUtZmVlZFxcXCJ9fSxzPWZ1bmN0aW9uKHQpe3ZhciBhPW5bdF07blt0XT1mdW5jdGlvbigpe2EuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBuPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtzZXRUaW1lb3V0KChmdW5jdGlvbigpe3ZhciBhPWkuZGVmYXVsdCh0LG4pO2lmKGEpe3ZhciBvPWE7ZSYmKG89dS5FbmNvZGUoYSkpLHIobyxhKX19KSl9LG8ucG9pbnRlcnNbdF09YX0sZj0wLGM9YS5kZWZhdWx0O2Y8Yy5sZW5ndGg7ZisrKXMoY1tmXSk7cmV0dXJuIG4uZmVlZD1vLG59fShlKSxyKGUpKHdpbmRvdy5jb25zb2xlLChmdW5jdGlvbih0KXt2YXIgcj1QKHQpO3BhcmVudC5wb3N0TWVzc2FnZSh7dHlwZTpcXFwiY29uc29sZVxcXCIsY29kZXNhbmRib3g6ITAsbG9nOkFycmF5LmlzQXJyYXkocik/clswXTpyLGNoYW5uZWxJZDpzY29wZS5jaGFubmVsSWR9LFxcXCIqXFxcIil9KSk7XFxuXCI7XG5cbmV4cG9ydCB7IEV2ZW50RW1pdHRlciBhcyBFLCBnZXRNZXNzYWdlRnJvbUVycm9yIGFzIGEsIGZpbmRTdGFydFNjcmlwdFBhY2thZ2VKc29uIGFzIGIsIGNvbnNvbGVIb29rIGFzIGMsIGZyb21CdW5kbGVyRmlsZXNUb0ZTIGFzIGYsIGdlbmVyYXRlUmFuZG9tSWQgYXMgZywgcmVhZEJ1ZmZlciBhcyByLCB3cml0ZUJ1ZmZlciBhcyB3IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/sandpack-client/dist/consoleHook-cdbe54ab.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@codesandbox/sandpack-client/dist/index-292de3b8.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/index-292de3b8.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SandpackStatic: () => (/* binding */ SandpackStatic)\n/* harmony export */ });\n/* harmony import */ var _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types-0877c553.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs\");\n/* harmony import */ var static_browser_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! static-browser-server */ \"(ssr)/./node_modules/static-browser-server/out/lib/main.js\");\n/* harmony import */ var _consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./consoleHook-cdbe54ab.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/consoleHook-cdbe54ab.mjs\");\n/* harmony import */ var _base_80a1f760_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base-80a1f760.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var dequal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dequal */ \"(ssr)/./node_modules/dequal/dist/index.mjs\");\n\n\n\n\n\n\n\nvar insertHtmlAfterRegex = function (regex, content, insertable) {\n    var match = regex.exec(content);\n    if (match && match.length >= 1) {\n        var offset = match.index + match[0].length;\n        var prefix = content.substring(0, offset);\n        var suffix = content.substring(offset);\n        return prefix + insertable + suffix;\n    }\n};\nvar readBuffer = function (content) {\n    if (typeof content === \"string\") {\n        return content;\n    }\n    else {\n        return new TextDecoder().decode(content);\n    }\n};\nvar validateHtml = function (content) {\n    // Make it a string\n    var contentString = readBuffer(content);\n    var domParser = new DOMParser();\n    var doc = domParser.parseFromString(contentString, \"text/html\");\n    if (!doc.documentElement.getAttribute(\"lang\")) {\n        doc.documentElement.setAttribute(\"lang\", \"en\");\n    }\n    var html = doc.documentElement.outerHTML;\n    return \"<!DOCTYPE html>\\n\".concat(html);\n};\n\nvar SandpackStatic = /** @class */ (function (_super) {\n    (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.g)(SandpackStatic, _super);\n    function SandpackStatic(selector, sandboxSetup, options) {\n        if (options === void 0) { options = {}; }\n        var _a;\n        var _this = _super.call(this, selector, sandboxSetup, options) || this;\n        _this.files = new Map();\n        _this.status = \"initializing\";\n        _this.emitter = new _consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.E();\n        _this.previewController = new static_browser_server__WEBPACK_IMPORTED_MODULE_0__.PreviewController({\n            baseUrl: (_a = options.bundlerURL) !== null && _a !== void 0 ? _a : \"https://preview.sandpack-static-server.codesandbox.io\",\n            // filepath is always normalized to start with / and not end with a slash\n            getFileContent: function (filepath) {\n                var content = _this.files.get(filepath);\n                if (!content) {\n                    throw new Error(\"File not found\");\n                }\n                if (filepath.endsWith(\".html\") || filepath.endsWith(\".htm\")) {\n                    try {\n                        content = validateHtml(content);\n                        content = _this.injectProtocolScript(content);\n                        content = _this.injectExternalResources(content, options.externalResources);\n                        content = _this.injectScriptIntoHead(content, {\n                            script: _consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.c,\n                            scope: { channelId: (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.g)() },\n                        });\n                    }\n                    catch (err) {\n                        console.error(\"Runtime injection failed\", err);\n                    }\n                }\n                return content;\n            },\n        });\n        if (typeof selector === \"string\") {\n            _this.selector = selector;\n            var element = document.querySelector(selector);\n            _this.element = element;\n            _this.iframe = document.createElement(\"iframe\");\n        }\n        else {\n            _this.element = selector;\n            _this.iframe = selector;\n        }\n        if (!_this.iframe.getAttribute(\"sandbox\")) {\n            _this.iframe.setAttribute(\"sandbox\", \"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts allow-downloads allow-pointer-lock\");\n            _this.iframe.setAttribute(\"allow\", \"accelerometer; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; clipboard-write;\");\n        }\n        _this.eventListener = _this.eventListener.bind(_this);\n        if (typeof window !== \"undefined\") {\n            window.addEventListener(\"message\", _this.eventListener);\n        }\n        // Dispatch very first compile action\n        _this.updateSandbox();\n        return _this;\n    }\n    SandpackStatic.prototype.injectContentIntoHead = function (content, contentToInsert) {\n        var _a;\n        // Make it a string\n        content = readBuffer(content);\n        // Inject script\n        content =\n            (_a = insertHtmlAfterRegex(/<head[^<>]*>/g, content, \"\\n\" + contentToInsert)) !== null && _a !== void 0 ? _a : contentToInsert + \"\\n\" + content;\n        return content;\n    };\n    SandpackStatic.prototype.injectProtocolScript = function (content) {\n        var scriptToInsert = \"<script>\\n  window.addEventListener(\\\"message\\\", (message) => {\\n    if(message.data.type === \\\"refresh\\\") {\\n      window.location.reload();\\n    }\\n  })\\n</script>\";\n        return this.injectContentIntoHead(content, scriptToInsert);\n    };\n    SandpackStatic.prototype.injectExternalResources = function (content, externalResources) {\n        if (externalResources === void 0) { externalResources = []; }\n        var tagsToInsert = externalResources\n            .map(function (resource) {\n            var match = resource.match(/\\.([^.]*)$/);\n            var fileType = match === null || match === void 0 ? void 0 : match[1];\n            if (fileType === \"css\" || resource.includes(\"fonts.googleapis\")) {\n                return \"<link rel=\\\"stylesheet\\\" href=\\\"\".concat(resource, \"\\\">\");\n            }\n            if (fileType === \"js\") {\n                return \"<script src=\\\"\".concat(resource, \"\\\"></script>\");\n            }\n            throw new Error(\"Unable to determine file type for external resource: \".concat(resource));\n        })\n            .join(\"\\n\");\n        return this.injectContentIntoHead(content, tagsToInsert);\n    };\n    SandpackStatic.prototype.injectScriptIntoHead = function (content, opts) {\n        var script = opts.script, _a = opts.scope, scope = _a === void 0 ? {} : _a;\n        var scriptToInsert = \"\\n    <script>\\n      const scope = \".concat(JSON.stringify(scope), \";\\n      \").concat(script, \"\\n    </script>\\n    \").trim();\n        return this.injectContentIntoHead(content, scriptToInsert);\n    };\n    SandpackStatic.prototype.updateSandbox = function (setup, _isInitializationCompile) {\n        if (setup === void 0) { setup = this.sandboxSetup; }\n        var modules = (0,_consoleHook_cdbe54ab_mjs__WEBPACK_IMPORTED_MODULE_4__.f)(setup.files);\n        /**\n         * Pass init files to the bundler\n         */\n        this.dispatch({\n            codesandbox: true,\n            modules: modules,\n            template: setup.template,\n            type: \"compile\",\n        });\n    };\n    SandpackStatic.prototype.compile = function (files) {\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__._)(this, void 0, void 0, function () {\n            var previewUrl;\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.files = new Map(Object.entries(files));\n                        return [4 /*yield*/, this.previewController.initPreview()];\n                    case 1:\n                        previewUrl = _a.sent();\n                        this.iframe.setAttribute(\"src\", previewUrl);\n                        this.status = \"done\";\n                        this.dispatch({ type: \"done\", compilatonError: false });\n                        this.dispatch({\n                            type: \"urlchange\",\n                            url: previewUrl,\n                            back: false,\n                            forward: false,\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // Handles message windows coming from iframes\n    SandpackStatic.prototype.eventListener = function (evt) {\n        // skip events originating from different iframes\n        if (evt.source !== this.iframe.contentWindow) {\n            return;\n        }\n        var message = evt.data;\n        if (!message.codesandbox) {\n            return;\n        }\n        this.dispatch(message);\n    };\n    /**\n     * Bundler communication\n     */\n    SandpackStatic.prototype.dispatch = function (message) {\n        var _a;\n        switch (message.type) {\n            case \"compile\":\n                this.compile(message.modules);\n                break;\n            default:\n                (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.postMessage(message, \"*\");\n                this.emitter.dispatch(message);\n        }\n    };\n    SandpackStatic.prototype.listen = function (listener) {\n        return this.emitter.listener(listener);\n    };\n    SandpackStatic.prototype.destroy = function () {\n        this.emitter.cleanup();\n        if (typeof window !== \"undefined\") {\n            window.removeEventListener(\"message\", this.eventListener);\n        }\n    };\n    return SandpackStatic;\n}(_base_80a1f760_mjs__WEBPACK_IMPORTED_MODULE_5__.S));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudC9kaXN0L2luZGV4LTI5MmRlM2I4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdGO0FBQzlCO0FBQ3lFO0FBQ3pFO0FBQ3RDO0FBQ0o7O0FBRWhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxzREFBUztBQUNiO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdEQUFZO0FBQ3hDLHNDQUFzQyxvRUFBaUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msd0RBQVc7QUFDL0MscUNBQXFDLFdBQVcsNERBQWdCLElBQUk7QUFDcEUseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFFBQVEsaUJBQWlCLGFBQWEsV0FBVyxLQUFLLFlBQVksTUFBTSxnQkFBZ0I7QUFDdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RkFBNkYsNkNBQTZDLGlDQUFpQyxPQUFPLEtBQUs7QUFDdkw7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEU7QUFDOUUsb0dBQW9HO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQyxzQkFBc0IsNERBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsc0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsc0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxzQ0FBc0M7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsQ0FBQyxpREFBYzs7QUFFVSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvaW5kZXgtMjkyZGUzYjgubWpzPzMzMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZyBhcyBfX2V4dGVuZHMsIF8gYXMgX19hd2FpdGVyLCBhIGFzIF9fZ2VuZXJhdG9yIH0gZnJvbSAnLi90eXBlcy0wODc3YzU1My5tanMnO1xuaW1wb3J0IHsgUHJldmlld0NvbnRyb2xsZXIgfSBmcm9tICdzdGF0aWMtYnJvd3Nlci1zZXJ2ZXInO1xuaW1wb3J0IHsgRSBhcyBFdmVudEVtaXR0ZXIsIGMgYXMgY29uc29sZUhvb2ssIGcgYXMgZ2VuZXJhdGVSYW5kb21JZCwgZiBhcyBmcm9tQnVuZGxlckZpbGVzVG9GUyB9IGZyb20gJy4vY29uc29sZUhvb2stY2RiZTU0YWIubWpzJztcbmltcG9ydCB7IFMgYXMgU2FuZHBhY2tDbGllbnQgfSBmcm9tICcuL2Jhc2UtODBhMWY3NjAubWpzJztcbmltcG9ydCAnb3V0dmFyaWFudCc7XG5pbXBvcnQgJ2RlcXVhbCc7XG5cbnZhciBpbnNlcnRIdG1sQWZ0ZXJSZWdleCA9IGZ1bmN0aW9uIChyZWdleCwgY29udGVudCwgaW5zZXJ0YWJsZSkge1xuICAgIHZhciBtYXRjaCA9IHJlZ2V4LmV4ZWMoY29udGVudCk7XG4gICAgaWYgKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgdmFyIHByZWZpeCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIG9mZnNldCk7XG4gICAgICAgIHZhciBzdWZmaXggPSBjb250ZW50LnN1YnN0cmluZyhvZmZzZXQpO1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgaW5zZXJ0YWJsZSArIHN1ZmZpeDtcbiAgICB9XG59O1xudmFyIHJlYWRCdWZmZXIgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoY29udGVudCk7XG4gICAgfVxufTtcbnZhciB2YWxpZGF0ZUh0bWwgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIC8vIE1ha2UgaXQgYSBzdHJpbmdcbiAgICB2YXIgY29udGVudFN0cmluZyA9IHJlYWRCdWZmZXIoY29udGVudCk7XG4gICAgdmFyIGRvbVBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgICB2YXIgZG9jID0gZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyhjb250ZW50U3RyaW5nLCBcInRleHQvaHRtbFwiKTtcbiAgICBpZiAoIWRvYy5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkge1xuICAgICAgICBkb2MuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcImxhbmdcIiwgXCJlblwiKTtcbiAgICB9XG4gICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICByZXR1cm4gXCI8IURPQ1RZUEUgaHRtbD5cXG5cIi5jb25jYXQoaHRtbCk7XG59O1xuXG52YXIgU2FuZHBhY2tTdGF0aWMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNhbmRwYWNrU3RhdGljLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNhbmRwYWNrU3RhdGljKHNlbGVjdG9yLCBzYW5kYm94U2V0dXAsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzZWxlY3Rvciwgc2FuZGJveFNldHVwLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5maWxlcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgX3RoaXMuc3RhdHVzID0gXCJpbml0aWFsaXppbmdcIjtcbiAgICAgICAgX3RoaXMuZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgX3RoaXMucHJldmlld0NvbnRyb2xsZXIgPSBuZXcgUHJldmlld0NvbnRyb2xsZXIoe1xuICAgICAgICAgICAgYmFzZVVybDogKF9hID0gb3B0aW9ucy5idW5kbGVyVVJMKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcImh0dHBzOi8vcHJldmlldy5zYW5kcGFjay1zdGF0aWMtc2VydmVyLmNvZGVzYW5kYm94LmlvXCIsXG4gICAgICAgICAgICAvLyBmaWxlcGF0aCBpcyBhbHdheXMgbm9ybWFsaXplZCB0byBzdGFydCB3aXRoIC8gYW5kIG5vdCBlbmQgd2l0aCBhIHNsYXNoXG4gICAgICAgICAgICBnZXRGaWxlQ29udGVudDogZnVuY3Rpb24gKGZpbGVwYXRoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBfdGhpcy5maWxlcy5nZXQoZmlsZXBhdGgpO1xuICAgICAgICAgICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWxlIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVwYXRoLmVuZHNXaXRoKFwiLmh0bWxcIikgfHwgZmlsZXBhdGguZW5kc1dpdGgoXCIuaHRtXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gdmFsaWRhdGVIdG1sKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IF90aGlzLmluamVjdFByb3RvY29sU2NyaXB0KGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IF90aGlzLmluamVjdEV4dGVybmFsUmVzb3VyY2VzKGNvbnRlbnQsIG9wdGlvbnMuZXh0ZXJuYWxSZXNvdXJjZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IF90aGlzLmluamVjdFNjcmlwdEludG9IZWFkKGNvbnRlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQ6IGNvbnNvbGVIb29rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlOiB7IGNoYW5uZWxJZDogZ2VuZXJhdGVSYW5kb21JZCgpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUnVudGltZSBpbmplY3Rpb24gZmFpbGVkXCIsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgX3RoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIF90aGlzLmlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gc2VsZWN0b3I7XG4gICAgICAgICAgICBfdGhpcy5pZnJhbWUgPSBzZWxlY3RvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIV90aGlzLmlmcmFtZS5nZXRBdHRyaWJ1dGUoXCJzYW5kYm94XCIpKSB7XG4gICAgICAgICAgICBfdGhpcy5pZnJhbWUuc2V0QXR0cmlidXRlKFwic2FuZGJveFwiLCBcImFsbG93LWZvcm1zIGFsbG93LW1vZGFscyBhbGxvdy1wb3B1cHMgYWxsb3ctcHJlc2VudGF0aW9uIGFsbG93LXNhbWUtb3JpZ2luIGFsbG93LXNjcmlwdHMgYWxsb3ctZG93bmxvYWRzIGFsbG93LXBvaW50ZXItbG9ja1wiKTtcbiAgICAgICAgICAgIF90aGlzLmlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd1wiLCBcImFjY2VsZXJvbWV0ZXI7IGNhbWVyYTsgZW5jcnlwdGVkLW1lZGlhOyBnZW9sb2NhdGlvbjsgZ3lyb3Njb3BlOyBoaWQ7IG1pY3JvcGhvbmU7IG1pZGk7IGNsaXBib2FyZC13cml0ZTtcIik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuZXZlbnRMaXN0ZW5lciA9IF90aGlzLmV2ZW50TGlzdGVuZXIuYmluZChfdGhpcyk7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgX3RoaXMuZXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGlzcGF0Y2ggdmVyeSBmaXJzdCBjb21waWxlIGFjdGlvblxuICAgICAgICBfdGhpcy51cGRhdGVTYW5kYm94KCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU2FuZHBhY2tTdGF0aWMucHJvdG90eXBlLmluamVjdENvbnRlbnRJbnRvSGVhZCA9IGZ1bmN0aW9uIChjb250ZW50LCBjb250ZW50VG9JbnNlcnQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvLyBNYWtlIGl0IGEgc3RyaW5nXG4gICAgICAgIGNvbnRlbnQgPSByZWFkQnVmZmVyKGNvbnRlbnQpO1xuICAgICAgICAvLyBJbmplY3Qgc2NyaXB0XG4gICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgKF9hID0gaW5zZXJ0SHRtbEFmdGVyUmVnZXgoLzxoZWFkW148Pl0qPi9nLCBjb250ZW50LCBcIlxcblwiICsgY29udGVudFRvSW5zZXJ0KSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY29udGVudFRvSW5zZXJ0ICsgXCJcXG5cIiArIGNvbnRlbnQ7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH07XG4gICAgU2FuZHBhY2tTdGF0aWMucHJvdG90eXBlLmluamVjdFByb3RvY29sU2NyaXB0ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgdmFyIHNjcmlwdFRvSW5zZXJ0ID0gXCI8c2NyaXB0PlxcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXFxcIm1lc3NhZ2VcXFwiLCAobWVzc2FnZSkgPT4ge1xcbiAgICBpZihtZXNzYWdlLmRhdGEudHlwZSA9PT0gXFxcInJlZnJlc2hcXFwiKSB7XFxuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xcbiAgICB9XFxuICB9KVxcbjwvc2NyaXB0PlwiO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RDb250ZW50SW50b0hlYWQoY29udGVudCwgc2NyaXB0VG9JbnNlcnQpO1xuICAgIH07XG4gICAgU2FuZHBhY2tTdGF0aWMucHJvdG90eXBlLmluamVjdEV4dGVybmFsUmVzb3VyY2VzID0gZnVuY3Rpb24gKGNvbnRlbnQsIGV4dGVybmFsUmVzb3VyY2VzKSB7XG4gICAgICAgIGlmIChleHRlcm5hbFJlc291cmNlcyA9PT0gdm9pZCAwKSB7IGV4dGVybmFsUmVzb3VyY2VzID0gW107IH1cbiAgICAgICAgdmFyIHRhZ3NUb0luc2VydCA9IGV4dGVybmFsUmVzb3VyY2VzXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNvdXJjZSkge1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gcmVzb3VyY2UubWF0Y2goL1xcLihbXi5dKikkLyk7XG4gICAgICAgICAgICB2YXIgZmlsZVR5cGUgPSBtYXRjaCA9PT0gbnVsbCB8fCBtYXRjaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hbMV07XG4gICAgICAgICAgICBpZiAoZmlsZVR5cGUgPT09IFwiY3NzXCIgfHwgcmVzb3VyY2UuaW5jbHVkZXMoXCJmb250cy5nb29nbGVhcGlzXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPGxpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCJcIi5jb25jYXQocmVzb3VyY2UsIFwiXFxcIj5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsZVR5cGUgPT09IFwianNcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIjxzY3JpcHQgc3JjPVxcXCJcIi5jb25jYXQocmVzb3VyY2UsIFwiXFxcIj48L3NjcmlwdD5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZGV0ZXJtaW5lIGZpbGUgdHlwZSBmb3IgZXh0ZXJuYWwgcmVzb3VyY2U6IFwiLmNvbmNhdChyZXNvdXJjZSkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIHJldHVybiB0aGlzLmluamVjdENvbnRlbnRJbnRvSGVhZChjb250ZW50LCB0YWdzVG9JbnNlcnQpO1xuICAgIH07XG4gICAgU2FuZHBhY2tTdGF0aWMucHJvdG90eXBlLmluamVjdFNjcmlwdEludG9IZWFkID0gZnVuY3Rpb24gKGNvbnRlbnQsIG9wdHMpIHtcbiAgICAgICAgdmFyIHNjcmlwdCA9IG9wdHMuc2NyaXB0LCBfYSA9IG9wdHMuc2NvcGUsIHNjb3BlID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2E7XG4gICAgICAgIHZhciBzY3JpcHRUb0luc2VydCA9IFwiXFxuICAgIDxzY3JpcHQ+XFxuICAgICAgY29uc3Qgc2NvcGUgPSBcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoc2NvcGUpLCBcIjtcXG4gICAgICBcIikuY29uY2F0KHNjcmlwdCwgXCJcXG4gICAgPC9zY3JpcHQ+XFxuICAgIFwiKS50cmltKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmluamVjdENvbnRlbnRJbnRvSGVhZChjb250ZW50LCBzY3JpcHRUb0luc2VydCk7XG4gICAgfTtcbiAgICBTYW5kcGFja1N0YXRpYy5wcm90b3R5cGUudXBkYXRlU2FuZGJveCA9IGZ1bmN0aW9uIChzZXR1cCwgX2lzSW5pdGlhbGl6YXRpb25Db21waWxlKSB7XG4gICAgICAgIGlmIChzZXR1cCA9PT0gdm9pZCAwKSB7IHNldHVwID0gdGhpcy5zYW5kYm94U2V0dXA7IH1cbiAgICAgICAgdmFyIG1vZHVsZXMgPSBmcm9tQnVuZGxlckZpbGVzVG9GUyhzZXR1cC5maWxlcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXNzIGluaXQgZmlsZXMgdG8gdGhlIGJ1bmRsZXJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgY29kZXNhbmRib3g6IHRydWUsXG4gICAgICAgICAgICBtb2R1bGVzOiBtb2R1bGVzLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHVwLnRlbXBsYXRlLFxuICAgICAgICAgICAgdHlwZTogXCJjb21waWxlXCIsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2FuZHBhY2tTdGF0aWMucHJvdG90eXBlLmNvbXBpbGUgPSBmdW5jdGlvbiAoZmlsZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHByZXZpZXdVcmw7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhmaWxlcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wcmV2aWV3Q29udHJvbGxlci5pbml0UHJldmlldygpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld1VybCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCBwcmV2aWV3VXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gXCJkb25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogXCJkb25lXCIsIGNvbXBpbGF0b25FcnJvcjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInVybGNoYW5nZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcHJldmlld1VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3J3YXJkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIEhhbmRsZXMgbWVzc2FnZSB3aW5kb3dzIGNvbWluZyBmcm9tIGlmcmFtZXNcbiAgICBTYW5kcGFja1N0YXRpYy5wcm90b3R5cGUuZXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgLy8gc2tpcCBldmVudHMgb3JpZ2luYXRpbmcgZnJvbSBkaWZmZXJlbnQgaWZyYW1lc1xuICAgICAgICBpZiAoZXZ0LnNvdXJjZSAhPT0gdGhpcy5pZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtZXNzYWdlID0gZXZ0LmRhdGE7XG4gICAgICAgIGlmICghbWVzc2FnZS5jb2Rlc2FuZGJveCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcGF0Y2gobWVzc2FnZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdW5kbGVyIGNvbW11bmljYXRpb25cbiAgICAgKi9cbiAgICBTYW5kcGFja1N0YXRpYy5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiY29tcGlsZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZShtZXNzYWdlLm1vZHVsZXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zdE1lc3NhZ2UobWVzc2FnZSwgXCIqXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5kaXNwYXRjaChtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FuZHBhY2tTdGF0aWMucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbWl0dGVyLmxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICB9O1xuICAgIFNhbmRwYWNrU3RhdGljLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtaXR0ZXIuY2xlYW51cCgpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuZXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTYW5kcGFja1N0YXRpYztcbn0oU2FuZHBhY2tDbGllbnQpKTtcblxuZXhwb3J0IHsgU2FuZHBhY2tTdGF0aWMgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/sandpack-client/dist/index-292de3b8.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@codesandbox/sandpack-client/dist/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SandpackLogLevel: () => (/* reexport safe */ _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__.S),\n/* harmony export */   addPackageJSONIfNeeded: () => (/* reexport safe */ _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__.d),\n/* harmony export */   createError: () => (/* reexport safe */ _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   createPackageJSON: () => (/* reexport safe */ _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__.b),\n/* harmony export */   extractErrorDetails: () => (/* reexport safe */ _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__.e),\n/* harmony export */   loadSandpackClient: () => (/* binding */ loadSandpackClient),\n/* harmony export */   normalizePath: () => (/* reexport safe */ _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__.f),\n/* harmony export */   nullthrows: () => (/* reexport safe */ _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__.n)\n/* harmony export */ });\n/* harmony import */ var _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types-0877c553.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n\n\n\n\nfunction loadSandpackClient(iframeSelector, sandboxSetup, options) {\n    var _a;\n    if (options === void 0) { options = {}; }\n    return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__._)(this, void 0, void 0, function () {\n        var template, Client, _b;\n        return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    template = (_a = sandboxSetup.template) !== null && _a !== void 0 ? _a : \"parcel\";\n                    _b = template;\n                    switch (_b) {\n                        case \"node\": return [3 /*break*/, 1];\n                        case \"static\": return [3 /*break*/, 3];\n                    }\n                    return [3 /*break*/, 5];\n                case 1: return [4 /*yield*/, __webpack_require__.e(/*! import() */ \"vendor-chunks/@codesandbox\").then(__webpack_require__.bind(__webpack_require__, /*! ./clients/node/index.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/clients/node/index.mjs\")).then(function (m) { return m.SandpackNode; })];\n                case 2:\n                    Client = _c.sent();\n                    return [3 /*break*/, 7];\n                case 3: return [4 /*yield*/, Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@codesandbox\"), __webpack_require__.e(\"vendor-chunks/static-browser-server\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./index-292de3b8.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/index-292de3b8.mjs\")).then(function (m) { return m.SandpackStatic; })];\n                case 4:\n                    Client = _c.sent();\n                    return [3 /*break*/, 7];\n                case 5: return [4 /*yield*/, __webpack_require__.e(/*! import() */ \"vendor-chunks/@codesandbox\").then(__webpack_require__.bind(__webpack_require__, /*! ./clients/runtime/index.mjs */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/clients/runtime/index.mjs\")).then(function (m) { return m.SandpackRuntime; })];\n                case 6:\n                    Client = _c.sent();\n                    _c.label = 7;\n                case 7: return [2 /*return*/, new Client(iframeSelector, sandboxSetup, options)];\n            }\n        });\n    });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXdFO0FBQzJIO0FBQy9LOztBQUVwQjtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCLFdBQVcsc0RBQVM7QUFDcEI7QUFDQSxlQUFlLHNEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx3T0FBa0MscUJBQXFCLHdCQUF3QjtBQUM1SDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsNFNBQThCLHFCQUFxQiwwQkFBMEI7QUFDMUg7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDhPQUFxQyxxQkFBcUIsMkJBQTJCO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUU4QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvaW5kZXgubWpzP2JmZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgXyBhcyBfX2F3YWl0ZXIsIGEgYXMgX19nZW5lcmF0b3IgfSBmcm9tICcuL3R5cGVzLTA4NzdjNTUzLm1qcyc7XG5leHBvcnQgeyBTIGFzIFNhbmRwYWNrTG9nTGV2ZWwsIGQgYXMgYWRkUGFja2FnZUpTT05JZk5lZWRlZCwgYyBhcyBjcmVhdGVFcnJvciwgYiBhcyBjcmVhdGVQYWNrYWdlSlNPTiwgZSBhcyBleHRyYWN0RXJyb3JEZXRhaWxzLCBmIGFzIG5vcm1hbGl6ZVBhdGgsIG4gYXMgbnVsbHRocm93cyB9IGZyb20gJy4vdHlwZXMtMDg3N2M1NTMubWpzJztcbmltcG9ydCAnb3V0dmFyaWFudCc7XG5cbmZ1bmN0aW9uIGxvYWRTYW5kcGFja0NsaWVudChpZnJhbWVTZWxlY3Rvciwgc2FuZGJveFNldHVwLCBvcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGVtcGxhdGUsIENsaWVudCwgX2I7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gKF9hID0gc2FuZGJveFNldHVwLnRlbXBsYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcInBhcmNlbFwiO1xuICAgICAgICAgICAgICAgICAgICBfYiA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9kZVwiOiByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdGF0aWNcIjogcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoJy4vY2xpZW50cy9ub2RlL2luZGV4Lm1qcycpLnRoZW4oZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uU2FuZHBhY2tOb2RlOyB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBDbGllbnQgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KCcuL2luZGV4LTI5MmRlM2I4Lm1qcycpLnRoZW4oZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uU2FuZHBhY2tTdGF0aWM7IH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIENsaWVudCA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XG4gICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoJy4vY2xpZW50cy9ydW50aW1lL2luZGV4Lm1qcycpLnRoZW4oZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uU2FuZHBhY2tSdW50aW1lOyB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBDbGllbnQgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gNztcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgQ2xpZW50KGlmcmFtZVNlbGVjdG9yLCBzYW5kYm94U2V0dXAsIG9wdGlvbnMpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7IGxvYWRTYW5kcGFja0NsaWVudCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/sandpack-client/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S: () => (/* binding */ SandpackLogLevel),\n/* harmony export */   _: () => (/* binding */ __awaiter),\n/* harmony export */   a: () => (/* binding */ __generator),\n/* harmony export */   b: () => (/* binding */ createPackageJSON),\n/* harmony export */   c: () => (/* binding */ createError),\n/* harmony export */   d: () => (/* binding */ addPackageJSONIfNeeded),\n/* harmony export */   e: () => (/* binding */ extractErrorDetails),\n/* harmony export */   f: () => (/* binding */ normalizePath),\n/* harmony export */   g: () => (/* binding */ __extends),\n/* harmony export */   h: () => (/* binding */ __assign),\n/* harmony export */   i: () => (/* binding */ __spreadArray),\n/* harmony export */   n: () => (/* binding */ nullthrows)\n/* harmony export */ });\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* globalThis Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nvar createError = function (message) {\n    return \"[sandpack-client]: \".concat(message);\n};\nfunction nullthrows(value, err) {\n    if (err === void 0) { err = \"Value is nullish\"; }\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_0__.invariant)(value != null, createError(err));\n    return value;\n}\nvar DEPENDENCY_ERROR_MESSAGE = \"\\\"dependencies\\\" was not specified - provide either a package.json or a \\\"dependencies\\\" value\";\nvar ENTRY_ERROR_MESSAGE = \"\\\"entry\\\" was not specified - provide either a package.json with the \\\"main\\\" field or an \\\"entry\\\" value\";\nfunction createPackageJSON(dependencies, devDependencies, entry) {\n    if (dependencies === void 0) { dependencies = {}; }\n    if (devDependencies === void 0) { devDependencies = {}; }\n    if (entry === void 0) { entry = \"/index.js\"; }\n    return JSON.stringify({\n        name: \"sandpack-project\",\n        main: entry,\n        dependencies: dependencies,\n        devDependencies: devDependencies,\n    }, null, 2);\n}\nfunction addPackageJSONIfNeeded(files, dependencies, devDependencies, entry) {\n    var _a, _b;\n    var normalizedFilesPath = normalizePath(files);\n    var packageJsonFile = normalizedFilesPath[\"/package.json\"];\n    /**\n     * Create a new package json\n     */\n    if (!packageJsonFile) {\n        nullthrows(dependencies, DEPENDENCY_ERROR_MESSAGE);\n        nullthrows(entry, ENTRY_ERROR_MESSAGE);\n        normalizedFilesPath[\"/package.json\"] = {\n            code: createPackageJSON(dependencies, devDependencies, entry),\n        };\n        return normalizedFilesPath;\n    }\n    /**\n     * Merge package json with custom setup\n     */\n    if (packageJsonFile) {\n        var packageJsonContent = JSON.parse(packageJsonFile.code);\n        nullthrows(!(!dependencies && !packageJsonContent.dependencies), ENTRY_ERROR_MESSAGE);\n        if (dependencies) {\n            packageJsonContent.dependencies = __assign(__assign({}, ((_a = packageJsonContent.dependencies) !== null && _a !== void 0 ? _a : {})), (dependencies !== null && dependencies !== void 0 ? dependencies : {}));\n        }\n        if (devDependencies) {\n            packageJsonContent.devDependencies = __assign(__assign({}, ((_b = packageJsonContent.devDependencies) !== null && _b !== void 0 ? _b : {})), (devDependencies !== null && devDependencies !== void 0 ? devDependencies : {}));\n        }\n        if (entry) {\n            packageJsonContent.main = entry;\n        }\n        normalizedFilesPath[\"/package.json\"] = {\n            code: JSON.stringify(packageJsonContent, null, 2),\n        };\n    }\n    return normalizedFilesPath;\n}\nfunction extractErrorDetails(msg) {\n    var _a;\n    if (msg.title === \"SyntaxError\") {\n        var title = msg.title, path = msg.path, message = msg.message, line = msg.line, column = msg.column;\n        return { title: title, path: path, message: message, line: line, column: column };\n    }\n    var relevantStackFrame = getRelevantStackFrame((_a = msg.payload) === null || _a === void 0 ? void 0 : _a.frames);\n    if (!relevantStackFrame) {\n        return { message: msg.message };\n    }\n    var errorInCode = getErrorInOriginalCode(relevantStackFrame);\n    var errorLocation = getErrorLocation(relevantStackFrame);\n    var errorMessage = formatErrorMessage(relevantStackFrame._originalFileName, msg.message, errorLocation, errorInCode);\n    return {\n        message: errorMessage,\n        title: msg.title,\n        path: relevantStackFrame._originalFileName,\n        line: relevantStackFrame._originalLineNumber,\n        column: relevantStackFrame._originalColumnNumber,\n    };\n}\nfunction getRelevantStackFrame(frames) {\n    if (!frames) {\n        return;\n    }\n    return frames.find(function (frame) { return !!frame._originalFileName; });\n}\nfunction getErrorLocation(errorFrame) {\n    return errorFrame\n        ? \" (\".concat(errorFrame._originalLineNumber, \":\").concat(errorFrame._originalColumnNumber, \")\")\n        : \"\";\n}\nfunction getErrorInOriginalCode(errorFrame) {\n    var lastScriptLine = errorFrame._originalScriptCode[errorFrame._originalScriptCode.length - 1];\n    var numberOfLineNumberCharacters = lastScriptLine.lineNumber.toString().length;\n    var leadingCharacterOffset = 2;\n    var barSeparatorCharacterOffset = 3;\n    var extraLineLeadingSpaces = leadingCharacterOffset +\n        numberOfLineNumberCharacters +\n        barSeparatorCharacterOffset +\n        errorFrame._originalColumnNumber;\n    return errorFrame._originalScriptCode.reduce(function (result, scriptLine) {\n        var leadingChar = scriptLine.highlight ? \">\" : \" \";\n        var lineNumber = scriptLine.lineNumber.toString().length === numberOfLineNumberCharacters\n            ? \"\".concat(scriptLine.lineNumber)\n            : \" \".concat(scriptLine.lineNumber);\n        var extraLine = scriptLine.highlight\n            ? \"\\n\" + \" \".repeat(extraLineLeadingSpaces) + \"^\"\n            : \"\";\n        return (result + // accumulator\n            \"\\n\" +\n            leadingChar + // > or \" \"\n            \" \" +\n            lineNumber + // line number on equal number of characters\n            \" | \" +\n            scriptLine.content + // code\n            extraLine // line under the highlighed line to show the column index\n        );\n    }, \"\");\n}\nfunction formatErrorMessage(filePath, message, location, errorInCode) {\n    return \"\".concat(filePath, \": \").concat(message).concat(location, \"\\n\").concat(errorInCode);\n}\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar normalizePath = function (path) {\n    if (typeof path === \"string\") {\n        return (path.startsWith(\"/\") ? path : \"/\".concat(path));\n    }\n    if (Array.isArray(path)) {\n        return path.map(function (p) { return (p.startsWith(\"/\") ? p : \"/\".concat(p)); });\n    }\n    if (typeof path === \"object\" && path !== null) {\n        return Object.entries(path).reduce(function (acc, _a) {\n            var key = _a[0], content = _a[1];\n            var fileName = key.startsWith(\"/\") ? key : \"/\".concat(key);\n            acc[fileName] = content;\n            return acc;\n        }, {});\n    }\n    return null;\n};\n\nvar SandpackLogLevel;\n(function (SandpackLogLevel) {\n    SandpackLogLevel[SandpackLogLevel[\"None\"] = 0] = \"None\";\n    SandpackLogLevel[SandpackLogLevel[\"Error\"] = 10] = \"Error\";\n    SandpackLogLevel[SandpackLogLevel[\"Warning\"] = 20] = \"Warning\";\n    SandpackLogLevel[SandpackLogLevel[\"Info\"] = 30] = \"Info\";\n    SandpackLogLevel[SandpackLogLevel[\"Debug\"] = 40] = \"Debug\";\n})(SandpackLogLevel || (SandpackLogLevel = {}));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudC9kaXN0L3R5cGVzLTA4NzdjNTUzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXVDOztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQixzQ0FBc0Msa0JBQWtCO0FBQ25GLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLGlCQUFpQixvREFBb0QscUVBQXFFLGNBQWM7QUFDeEosdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsT0FBTztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQixJQUFJLHFEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxzQ0FBc0M7QUFDdEMsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSw2RUFBNkUseUVBQXlFO0FBQ3hOO0FBQ0E7QUFDQSxxRUFBcUUsZ0ZBQWdGLGtGQUFrRjtBQUN2TztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxtQ0FBbUM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxpREFBaUQ7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRDQUE0Qzs7QUFFK00iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudC9kaXN0L3R5cGVzLTA4NzdjNTUzLm1qcz8xNzFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ291dHZhcmlhbnQnO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsVGhpcyBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG52YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cblxudmFyIGNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gXCJbc2FuZHBhY2stY2xpZW50XTogXCIuY29uY2F0KG1lc3NhZ2UpO1xufTtcbmZ1bmN0aW9uIG51bGx0aHJvd3ModmFsdWUsIGVycikge1xuICAgIGlmIChlcnIgPT09IHZvaWQgMCkgeyBlcnIgPSBcIlZhbHVlIGlzIG51bGxpc2hcIjsgfVxuICAgIGludmFyaWFudCh2YWx1ZSAhPSBudWxsLCBjcmVhdGVFcnJvcihlcnIpKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG52YXIgREVQRU5ERU5DWV9FUlJPUl9NRVNTQUdFID0gXCJcXFwiZGVwZW5kZW5jaWVzXFxcIiB3YXMgbm90IHNwZWNpZmllZCAtIHByb3ZpZGUgZWl0aGVyIGEgcGFja2FnZS5qc29uIG9yIGEgXFxcImRlcGVuZGVuY2llc1xcXCIgdmFsdWVcIjtcbnZhciBFTlRSWV9FUlJPUl9NRVNTQUdFID0gXCJcXFwiZW50cnlcXFwiIHdhcyBub3Qgc3BlY2lmaWVkIC0gcHJvdmlkZSBlaXRoZXIgYSBwYWNrYWdlLmpzb24gd2l0aCB0aGUgXFxcIm1haW5cXFwiIGZpZWxkIG9yIGFuIFxcXCJlbnRyeVxcXCIgdmFsdWVcIjtcbmZ1bmN0aW9uIGNyZWF0ZVBhY2thZ2VKU09OKGRlcGVuZGVuY2llcywgZGV2RGVwZW5kZW5jaWVzLCBlbnRyeSkge1xuICAgIGlmIChkZXBlbmRlbmNpZXMgPT09IHZvaWQgMCkgeyBkZXBlbmRlbmNpZXMgPSB7fTsgfVxuICAgIGlmIChkZXZEZXBlbmRlbmNpZXMgPT09IHZvaWQgMCkgeyBkZXZEZXBlbmRlbmNpZXMgPSB7fTsgfVxuICAgIGlmIChlbnRyeSA9PT0gdm9pZCAwKSB7IGVudHJ5ID0gXCIvaW5kZXguanNcIjsgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IFwic2FuZHBhY2stcHJvamVjdFwiLFxuICAgICAgICBtYWluOiBlbnRyeSxcbiAgICAgICAgZGVwZW5kZW5jaWVzOiBkZXBlbmRlbmNpZXMsXG4gICAgICAgIGRldkRlcGVuZGVuY2llczogZGV2RGVwZW5kZW5jaWVzLFxuICAgIH0sIG51bGwsIDIpO1xufVxuZnVuY3Rpb24gYWRkUGFja2FnZUpTT05JZk5lZWRlZChmaWxlcywgZGVwZW5kZW5jaWVzLCBkZXZEZXBlbmRlbmNpZXMsIGVudHJ5KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICB2YXIgbm9ybWFsaXplZEZpbGVzUGF0aCA9IG5vcm1hbGl6ZVBhdGgoZmlsZXMpO1xuICAgIHZhciBwYWNrYWdlSnNvbkZpbGUgPSBub3JtYWxpemVkRmlsZXNQYXRoW1wiL3BhY2thZ2UuanNvblwiXTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcGFja2FnZSBqc29uXG4gICAgICovXG4gICAgaWYgKCFwYWNrYWdlSnNvbkZpbGUpIHtcbiAgICAgICAgbnVsbHRocm93cyhkZXBlbmRlbmNpZXMsIERFUEVOREVOQ1lfRVJST1JfTUVTU0FHRSk7XG4gICAgICAgIG51bGx0aHJvd3MoZW50cnksIEVOVFJZX0VSUk9SX01FU1NBR0UpO1xuICAgICAgICBub3JtYWxpemVkRmlsZXNQYXRoW1wiL3BhY2thZ2UuanNvblwiXSA9IHtcbiAgICAgICAgICAgIGNvZGU6IGNyZWF0ZVBhY2thZ2VKU09OKGRlcGVuZGVuY2llcywgZGV2RGVwZW5kZW5jaWVzLCBlbnRyeSksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBub3JtYWxpemVkRmlsZXNQYXRoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXJnZSBwYWNrYWdlIGpzb24gd2l0aCBjdXN0b20gc2V0dXBcbiAgICAgKi9cbiAgICBpZiAocGFja2FnZUpzb25GaWxlKSB7XG4gICAgICAgIHZhciBwYWNrYWdlSnNvbkNvbnRlbnQgPSBKU09OLnBhcnNlKHBhY2thZ2VKc29uRmlsZS5jb2RlKTtcbiAgICAgICAgbnVsbHRocm93cyghKCFkZXBlbmRlbmNpZXMgJiYgIXBhY2thZ2VKc29uQ29udGVudC5kZXBlbmRlbmNpZXMpLCBFTlRSWV9FUlJPUl9NRVNTQUdFKTtcbiAgICAgICAgaWYgKGRlcGVuZGVuY2llcykge1xuICAgICAgICAgICAgcGFja2FnZUpzb25Db250ZW50LmRlcGVuZGVuY2llcyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCAoKF9hID0gcGFja2FnZUpzb25Db250ZW50LmRlcGVuZGVuY2llcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pKSwgKGRlcGVuZGVuY2llcyAhPT0gbnVsbCAmJiBkZXBlbmRlbmNpZXMgIT09IHZvaWQgMCA/IGRlcGVuZGVuY2llcyA6IHt9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRldkRlcGVuZGVuY2llcykge1xuICAgICAgICAgICAgcGFja2FnZUpzb25Db250ZW50LmRldkRlcGVuZGVuY2llcyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCAoKF9iID0gcGFja2FnZUpzb25Db250ZW50LmRldkRlcGVuZGVuY2llcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pKSwgKGRldkRlcGVuZGVuY2llcyAhPT0gbnVsbCAmJiBkZXZEZXBlbmRlbmNpZXMgIT09IHZvaWQgMCA/IGRldkRlcGVuZGVuY2llcyA6IHt9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICBwYWNrYWdlSnNvbkNvbnRlbnQubWFpbiA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIG5vcm1hbGl6ZWRGaWxlc1BhdGhbXCIvcGFja2FnZS5qc29uXCJdID0ge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkocGFja2FnZUpzb25Db250ZW50LCBudWxsLCAyKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRGaWxlc1BhdGg7XG59XG5mdW5jdGlvbiBleHRyYWN0RXJyb3JEZXRhaWxzKG1zZykge1xuICAgIHZhciBfYTtcbiAgICBpZiAobXNnLnRpdGxlID09PSBcIlN5bnRheEVycm9yXCIpIHtcbiAgICAgICAgdmFyIHRpdGxlID0gbXNnLnRpdGxlLCBwYXRoID0gbXNnLnBhdGgsIG1lc3NhZ2UgPSBtc2cubWVzc2FnZSwgbGluZSA9IG1zZy5saW5lLCBjb2x1bW4gPSBtc2cuY29sdW1uO1xuICAgICAgICByZXR1cm4geyB0aXRsZTogdGl0bGUsIHBhdGg6IHBhdGgsIG1lc3NhZ2U6IG1lc3NhZ2UsIGxpbmU6IGxpbmUsIGNvbHVtbjogY29sdW1uIH07XG4gICAgfVxuICAgIHZhciByZWxldmFudFN0YWNrRnJhbWUgPSBnZXRSZWxldmFudFN0YWNrRnJhbWUoKF9hID0gbXNnLnBheWxvYWQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mcmFtZXMpO1xuICAgIGlmICghcmVsZXZhbnRTdGFja0ZyYW1lKSB7XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1zZy5tZXNzYWdlIH07XG4gICAgfVxuICAgIHZhciBlcnJvckluQ29kZSA9IGdldEVycm9ySW5PcmlnaW5hbENvZGUocmVsZXZhbnRTdGFja0ZyYW1lKTtcbiAgICB2YXIgZXJyb3JMb2NhdGlvbiA9IGdldEVycm9yTG9jYXRpb24ocmVsZXZhbnRTdGFja0ZyYW1lKTtcbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gZm9ybWF0RXJyb3JNZXNzYWdlKHJlbGV2YW50U3RhY2tGcmFtZS5fb3JpZ2luYWxGaWxlTmFtZSwgbXNnLm1lc3NhZ2UsIGVycm9yTG9jYXRpb24sIGVycm9ySW5Db2RlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIHRpdGxlOiBtc2cudGl0bGUsXG4gICAgICAgIHBhdGg6IHJlbGV2YW50U3RhY2tGcmFtZS5fb3JpZ2luYWxGaWxlTmFtZSxcbiAgICAgICAgbGluZTogcmVsZXZhbnRTdGFja0ZyYW1lLl9vcmlnaW5hbExpbmVOdW1iZXIsXG4gICAgICAgIGNvbHVtbjogcmVsZXZhbnRTdGFja0ZyYW1lLl9vcmlnaW5hbENvbHVtbk51bWJlcixcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0UmVsZXZhbnRTdGFja0ZyYW1lKGZyYW1lcykge1xuICAgIGlmICghZnJhbWVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGZyYW1lcy5maW5kKGZ1bmN0aW9uIChmcmFtZSkgeyByZXR1cm4gISFmcmFtZS5fb3JpZ2luYWxGaWxlTmFtZTsgfSk7XG59XG5mdW5jdGlvbiBnZXRFcnJvckxvY2F0aW9uKGVycm9yRnJhbWUpIHtcbiAgICByZXR1cm4gZXJyb3JGcmFtZVxuICAgICAgICA/IFwiIChcIi5jb25jYXQoZXJyb3JGcmFtZS5fb3JpZ2luYWxMaW5lTnVtYmVyLCBcIjpcIikuY29uY2F0KGVycm9yRnJhbWUuX29yaWdpbmFsQ29sdW1uTnVtYmVyLCBcIilcIilcbiAgICAgICAgOiBcIlwiO1xufVxuZnVuY3Rpb24gZ2V0RXJyb3JJbk9yaWdpbmFsQ29kZShlcnJvckZyYW1lKSB7XG4gICAgdmFyIGxhc3RTY3JpcHRMaW5lID0gZXJyb3JGcmFtZS5fb3JpZ2luYWxTY3JpcHRDb2RlW2Vycm9yRnJhbWUuX29yaWdpbmFsU2NyaXB0Q29kZS5sZW5ndGggLSAxXTtcbiAgICB2YXIgbnVtYmVyT2ZMaW5lTnVtYmVyQ2hhcmFjdGVycyA9IGxhc3RTY3JpcHRMaW5lLmxpbmVOdW1iZXIudG9TdHJpbmcoKS5sZW5ndGg7XG4gICAgdmFyIGxlYWRpbmdDaGFyYWN0ZXJPZmZzZXQgPSAyO1xuICAgIHZhciBiYXJTZXBhcmF0b3JDaGFyYWN0ZXJPZmZzZXQgPSAzO1xuICAgIHZhciBleHRyYUxpbmVMZWFkaW5nU3BhY2VzID0gbGVhZGluZ0NoYXJhY3Rlck9mZnNldCArXG4gICAgICAgIG51bWJlck9mTGluZU51bWJlckNoYXJhY3RlcnMgK1xuICAgICAgICBiYXJTZXBhcmF0b3JDaGFyYWN0ZXJPZmZzZXQgK1xuICAgICAgICBlcnJvckZyYW1lLl9vcmlnaW5hbENvbHVtbk51bWJlcjtcbiAgICByZXR1cm4gZXJyb3JGcmFtZS5fb3JpZ2luYWxTY3JpcHRDb2RlLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBzY3JpcHRMaW5lKSB7XG4gICAgICAgIHZhciBsZWFkaW5nQ2hhciA9IHNjcmlwdExpbmUuaGlnaGxpZ2h0ID8gXCI+XCIgOiBcIiBcIjtcbiAgICAgICAgdmFyIGxpbmVOdW1iZXIgPSBzY3JpcHRMaW5lLmxpbmVOdW1iZXIudG9TdHJpbmcoKS5sZW5ndGggPT09IG51bWJlck9mTGluZU51bWJlckNoYXJhY3RlcnNcbiAgICAgICAgICAgID8gXCJcIi5jb25jYXQoc2NyaXB0TGluZS5saW5lTnVtYmVyKVxuICAgICAgICAgICAgOiBcIiBcIi5jb25jYXQoc2NyaXB0TGluZS5saW5lTnVtYmVyKTtcbiAgICAgICAgdmFyIGV4dHJhTGluZSA9IHNjcmlwdExpbmUuaGlnaGxpZ2h0XG4gICAgICAgICAgICA/IFwiXFxuXCIgKyBcIiBcIi5yZXBlYXQoZXh0cmFMaW5lTGVhZGluZ1NwYWNlcykgKyBcIl5cIlxuICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICByZXR1cm4gKHJlc3VsdCArIC8vIGFjY3VtdWxhdG9yXG4gICAgICAgICAgICBcIlxcblwiICtcbiAgICAgICAgICAgIGxlYWRpbmdDaGFyICsgLy8gPiBvciBcIiBcIlxuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgbGluZU51bWJlciArIC8vIGxpbmUgbnVtYmVyIG9uIGVxdWFsIG51bWJlciBvZiBjaGFyYWN0ZXJzXG4gICAgICAgICAgICBcIiB8IFwiICtcbiAgICAgICAgICAgIHNjcmlwdExpbmUuY29udGVudCArIC8vIGNvZGVcbiAgICAgICAgICAgIGV4dHJhTGluZSAvLyBsaW5lIHVuZGVyIHRoZSBoaWdobGlnaGVkIGxpbmUgdG8gc2hvdyB0aGUgY29sdW1uIGluZGV4XG4gICAgICAgICk7XG4gICAgfSwgXCJcIik7XG59XG5mdW5jdGlvbiBmb3JtYXRFcnJvck1lc3NhZ2UoZmlsZVBhdGgsIG1lc3NhZ2UsIGxvY2F0aW9uLCBlcnJvckluQ29kZSkge1xuICAgIHJldHVybiBcIlwiLmNvbmNhdChmaWxlUGF0aCwgXCI6IFwiKS5jb25jYXQobWVzc2FnZSkuY29uY2F0KGxvY2F0aW9uLCBcIlxcblwiKS5jb25jYXQoZXJyb3JJbkNvZGUpO1xufVxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xudmFyIG5vcm1hbGl6ZVBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gKHBhdGguc3RhcnRzV2l0aChcIi9cIikgPyBwYXRoIDogXCIvXCIuY29uY2F0KHBhdGgpKTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGgubWFwKGZ1bmN0aW9uIChwKSB7IHJldHVybiAocC5zdGFydHNXaXRoKFwiL1wiKSA/IHAgOiBcIi9cIi5jb25jYXQocCkpOyB9KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSBcIm9iamVjdFwiICYmIHBhdGggIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHBhdGgpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBfYSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IF9hWzBdLCBjb250ZW50ID0gX2FbMV07XG4gICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBrZXkuc3RhcnRzV2l0aChcIi9cIikgPyBrZXkgOiBcIi9cIi5jb25jYXQoa2V5KTtcbiAgICAgICAgICAgIGFjY1tmaWxlTmFtZV0gPSBjb250ZW50O1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbnZhciBTYW5kcGFja0xvZ0xldmVsO1xuKGZ1bmN0aW9uIChTYW5kcGFja0xvZ0xldmVsKSB7XG4gICAgU2FuZHBhY2tMb2dMZXZlbFtTYW5kcGFja0xvZ0xldmVsW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgU2FuZHBhY2tMb2dMZXZlbFtTYW5kcGFja0xvZ0xldmVsW1wiRXJyb3JcIl0gPSAxMF0gPSBcIkVycm9yXCI7XG4gICAgU2FuZHBhY2tMb2dMZXZlbFtTYW5kcGFja0xvZ0xldmVsW1wiV2FybmluZ1wiXSA9IDIwXSA9IFwiV2FybmluZ1wiO1xuICAgIFNhbmRwYWNrTG9nTGV2ZWxbU2FuZHBhY2tMb2dMZXZlbFtcIkluZm9cIl0gPSAzMF0gPSBcIkluZm9cIjtcbiAgICBTYW5kcGFja0xvZ0xldmVsW1NhbmRwYWNrTG9nTGV2ZWxbXCJEZWJ1Z1wiXSA9IDQwXSA9IFwiRGVidWdcIjtcbn0pKFNhbmRwYWNrTG9nTGV2ZWwgfHwgKFNhbmRwYWNrTG9nTGV2ZWwgPSB7fSkpO1xuXG5leHBvcnQgeyBTYW5kcGFja0xvZ0xldmVsIGFzIFMsIF9fYXdhaXRlciBhcyBfLCBfX2dlbmVyYXRvciBhcyBhLCBjcmVhdGVQYWNrYWdlSlNPTiBhcyBiLCBjcmVhdGVFcnJvciBhcyBjLCBhZGRQYWNrYWdlSlNPTklmTmVlZGVkIGFzIGQsIGV4dHJhY3RFcnJvckRldGFpbHMgYXMgZSwgbm9ybWFsaXplUGF0aCBhcyBmLCBfX2V4dGVuZHMgYXMgZywgX19hc3NpZ24gYXMgaCwgX19zcHJlYWRBcnJheSBhcyBpLCBudWxsdGhyb3dzIGFzIG4gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@codesandbox/sandpack-react/dist/index.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-react/dist/index.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANGULAR_TEMPLATE: () => (/* binding */ ANGULAR_TEMPLATE),\n/* harmony export */   ASTRO_TEMPLATE: () => (/* binding */ ASTRO_TEMPLATE),\n/* harmony export */   BackwardIcon: () => (/* binding */ BackwardIcon),\n/* harmony export */   CleanIcon: () => (/* binding */ CleanIcon),\n/* harmony export */   CloseIcon: () => (/* binding */ CloseIcon),\n/* harmony export */   CodeEditor: () => (/* binding */ CodeMirror),\n/* harmony export */   ConsoleIcon: () => (/* binding */ ConsoleIcon),\n/* harmony export */   DependenciesProgress: () => (/* binding */ DependenciesProgress),\n/* harmony export */   DirectoryIconClosed: () => (/* binding */ DirectoryIconClosed),\n/* harmony export */   DirectoryIconOpen: () => (/* binding */ DirectoryIconOpen),\n/* harmony export */   ErrorOverlay: () => (/* binding */ ErrorOverlay),\n/* harmony export */   ExportIcon: () => (/* binding */ ExportIcon),\n/* harmony export */   FADE_ANIMATION_DURATION: () => (/* binding */ FADE_ANIMATION_DURATION),\n/* harmony export */   FileIcon: () => (/* binding */ FileIcon),\n/* harmony export */   FileTabs: () => (/* binding */ FileTabs),\n/* harmony export */   ForwardIcon: () => (/* binding */ ForwardIcon),\n/* harmony export */   LoadingOverlay: () => (/* binding */ LoadingOverlay),\n/* harmony export */   Navigator: () => (/* binding */ Navigator),\n/* harmony export */   OpenInCodeSandboxButton: () => (/* binding */ OpenInCodeSandboxButton),\n/* harmony export */   REACT_TEMPLATE: () => (/* binding */ REACT_TEMPLATE),\n/* harmony export */   REACT_TYPESCRIPT_TEMPLATE: () => (/* binding */ REACT_TYPESCRIPT_TEMPLATE),\n/* harmony export */   RefreshIcon: () => (/* binding */ RefreshIcon),\n/* harmony export */   RestartIcon: () => (/* binding */ RestartIcon),\n/* harmony export */   RoundedButton: () => (/* binding */ RoundedButton),\n/* harmony export */   RunButton: () => (/* binding */ RunButton$1),\n/* harmony export */   RunIcon: () => (/* binding */ RunIcon),\n/* harmony export */   SANDBOX_TEMPLATES: () => (/* binding */ SANDBOX_TEMPLATES),\n/* harmony export */   SANDPACK_THEMES: () => (/* binding */ SANDPACK_THEMES),\n/* harmony export */   SOLID_TEMPLATE: () => (/* binding */ SOLID_TEMPLATE),\n/* harmony export */   SVELTE_TEMPLATE: () => (/* binding */ SVELTE_TEMPLATE),\n/* harmony export */   Sandpack: () => (/* binding */ Sandpack),\n/* harmony export */   SandpackCodeEditor: () => (/* binding */ SandpackCodeEditor),\n/* harmony export */   SandpackCodeViewer: () => (/* binding */ SandpackCodeViewer),\n/* harmony export */   SandpackConsole: () => (/* binding */ SandpackConsole),\n/* harmony export */   SandpackConsumer: () => (/* binding */ SandpackConsumer),\n/* harmony export */   SandpackFileExplorer: () => (/* binding */ SandpackFileExplorer),\n/* harmony export */   SandpackLayout: () => (/* binding */ SandpackLayout),\n/* harmony export */   SandpackPreview: () => (/* binding */ SandpackPreview),\n/* harmony export */   SandpackProvider: () => (/* binding */ SandpackProvider),\n/* harmony export */   SandpackReactContext: () => (/* binding */ Sandpack$1),\n/* harmony export */   SandpackStack: () => (/* binding */ SandpackStack),\n/* harmony export */   SandpackTests: () => (/* binding */ SandpackTests),\n/* harmony export */   SandpackThemeConsumer: () => (/* binding */ SandpackThemeConsumer),\n/* harmony export */   SandpackThemeContext: () => (/* binding */ SandpackThemeContext),\n/* harmony export */   SandpackThemeProvider: () => (/* binding */ SandpackThemeProvider),\n/* harmony export */   SandpackTranspiledCode: () => (/* binding */ SandpackTranspiledCode),\n/* harmony export */   SignInIcon: () => (/* binding */ SignInIcon),\n/* harmony export */   SignOutIcon: () => (/* binding */ SignOutIcon),\n/* harmony export */   TEST_TYPESCRIPT_TEMPLATE: () => (/* binding */ TEST_TYPESCRIPT_TEMPLATE),\n/* harmony export */   UnstyledOpenInCodeSandboxButton: () => (/* binding */ UnstyledOpenInCodeSandboxButton),\n/* harmony export */   VANILLA_TEMPLATE: () => (/* binding */ VANILLA_TEMPLATE),\n/* harmony export */   VANILLA_TYPESCRIPT_TEMPLATE: () => (/* binding */ VANILLA_TYPESCRIPT_TEMPLATE),\n/* harmony export */   VUE_TEMPLATE: () => (/* binding */ VUE_TEMPLATE),\n/* harmony export */   defaultDark: () => (/* binding */ defaultDark),\n/* harmony export */   defaultLight: () => (/* binding */ defaultLight),\n/* harmony export */   getSandpackCssText: () => (/* binding */ getCssText),\n/* harmony export */   layoutClassName: () => (/* binding */ layoutClassName),\n/* harmony export */   stackClassName: () => (/* binding */ stackClassName),\n/* harmony export */   tabButton: () => (/* binding */ tabButton),\n/* harmony export */   useActiveCode: () => (/* binding */ useActiveCode),\n/* harmony export */   useClassNames: () => (/* binding */ useClassNames),\n/* harmony export */   useErrorMessage: () => (/* binding */ useErrorMessage),\n/* harmony export */   useLoadingOverlayState: () => (/* binding */ useLoadingOverlayState),\n/* harmony export */   useSandpack: () => (/* binding */ useSandpack),\n/* harmony export */   useSandpackClient: () => (/* binding */ useSandpackClient),\n/* harmony export */   useSandpackConsole: () => (/* binding */ useSandpackConsole),\n/* harmony export */   useSandpackNavigation: () => (/* binding */ useSandpackNavigation),\n/* harmony export */   useSandpackPreviewProgress: () => (/* binding */ useSandpackPreviewProgress),\n/* harmony export */   useSandpackShell: () => (/* binding */ useSandpackShell),\n/* harmony export */   useSandpackShellStdout: () => (/* binding */ useSandpackShellStdout),\n/* harmony export */   useSandpackTheme: () => (/* binding */ useSandpackTheme),\n/* harmony export */   useTranspiledCode: () => (/* binding */ useTranspiledCode)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _stitches_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @stitches/core */ \"(ssr)/./node_modules/@stitches/core/dist/index.mjs\");\n/* harmony import */ var dequal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dequal */ \"(ssr)/./node_modules/dequal/dist/index.mjs\");\n/* harmony import */ var _codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @codesandbox/sandpack-client */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs\");\n/* harmony import */ var _codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @codesandbox/sandpack-client */ \"(ssr)/./node_modules/@codesandbox/sandpack-client/dist/index.mjs\");\n/* harmony import */ var _codemirror_autocomplete__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @codemirror/autocomplete */ \"(ssr)/./node_modules/@codemirror/autocomplete/dist/index.js\");\n/* harmony import */ var _codemirror_commands__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @codemirror/commands */ \"(ssr)/./node_modules/@codemirror/commands/dist/index.js\");\n/* harmony import */ var _codemirror_language__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @codemirror/language */ \"(ssr)/./node_modules/@codemirror/language/dist/index.js\");\n/* harmony import */ var _codemirror_state__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @codemirror/state */ \"(ssr)/./node_modules/@codemirror/state/dist/index.js\");\n/* harmony import */ var _codemirror_view__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @codemirror/view */ \"(ssr)/./node_modules/@codemirror/view/dist/index.js\");\n/* harmony import */ var _react_hook_intersection_observer__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @react-hook/intersection-observer */ \"(ssr)/./node_modules/@react-hook/intersection-observer/dist/esm/index.mjs\");\n/* harmony import */ var _codemirror_lang_css__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @codemirror/lang-css */ \"(ssr)/./node_modules/@codemirror/lang-css/dist/index.js\");\n/* harmony import */ var _codemirror_lang_html__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @codemirror/lang-html */ \"(ssr)/./node_modules/@codemirror/lang-html/dist/index.js\");\n/* harmony import */ var _codemirror_lang_javascript__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @codemirror/lang-javascript */ \"(ssr)/./node_modules/@codemirror/lang-javascript/dist/index.js\");\n/* harmony import */ var _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lezer/highlight */ \"(ssr)/./node_modules/@lezer/highlight/dist/index.js\");\n/* harmony import */ var anser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! anser */ \"(ssr)/./node_modules/anser/lib/index.js\");\n/* harmony import */ var escape_carriage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! escape-carriage */ \"(ssr)/./node_modules/escape-carriage/index.js\");\n/* harmony import */ var lz_string__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lz-string */ \"(ssr)/./node_modules/lz-string/libs/lz-string.js\");\n/* harmony import */ var clean_set__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! clean-set */ \"(ssr)/./node_modules/clean-set/dist/clean-set.es.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nvar SVG = function (props) { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", __assign({ fill: \"currentColor\", height: \"16\", viewBox: \"0 0 16 16\", width: \"16\", xmlns: \"http://www.w3.org/2000/svg\" }, props))); };\nvar SignInIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { viewBox: \"0 0 48 48\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Sign in\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M9 42q-1.2 0-2.1-.9Q6 40.2 6 39V9q0-1.2.9-2.1Q7.8 6 9 6h14.55v3H9v30h14.55v3Zm24.3-9.25-2.15-2.15 5.1-5.1h-17.5v-3h17.4l-5.1-5.1 2.15-2.15 8.8 8.8Z\" })] })); };\nvar SignOutIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { viewBox: \"0 0 48 48\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Sign out\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M9 42q-1.2 0-2.1-.9Q6 40.2 6 39V9q0-1.2.9-2.1Q7.8 6 9 6h14.55v3H9v30h14.55v3Zm24.3-9.25-2.15-2.15 5.1-5.1h-17.5v-3h17.4l-5.1-5.1 2.15-2.15 8.8 8.8Z\" })] })); };\nvar RestartIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { fill: \"none\", stroke: \"currentColor\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Restart script\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M8 2C4.68629 2 2 4.68629 2 8C2 10.0946 3.07333 11.9385 4.7 13.0118\", strokeLinecap: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M14.0005 7.9998C14.0005 5.82095 12.8391 3.91335 11.1016 2.8623\", strokeLinecap: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M14.0003 2.3335H11.167C10.8908 2.3335 10.667 2.55735 10.667 2.8335V5.66683\", strokeLinecap: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M1.99967 13.6665L4.83301 13.6665C5.10915 13.6665 5.33301 13.4426 5.33301 13.1665L5.33301 10.3332\", strokeLinecap: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M10 10L12 12L10 14\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M14.667 14L12.667 14\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })] })); };\nvar RunIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Run sandbox\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M11.0792 8.1078C11.2793 8.25007 11.27 8.55012 11.0616 8.67981L6.02535 11.8135C5.79638 11.956 5.5 11.7913 5.5 11.5216L5.5 8.40703L5.5 4.80661C5.5 4.52735 5.81537 4.36463 6.04296 4.52647L11.0792 8.1078Z\" })] })); };\nvar BackwardIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Click to go back\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M9.64645 12.3536C9.84171 12.5488 10.1583 12.5488 10.3536 12.3536C10.5488 12.1583 10.5488 11.8417 10.3536 11.6464L9.64645 12.3536ZM10.3536 4.35355C10.5488 4.15829 10.5488 3.84171 10.3536 3.64644C10.1583 3.45118 9.84171 3.45118 9.64645 3.64644L10.3536 4.35355ZM6.07072 7.92929L5.71716 7.57573L6.07072 7.92929ZM10.3536 11.6464L6.42427 7.71716L5.71716 8.42426L9.64645 12.3536L10.3536 11.6464ZM6.42427 8.28284L10.3536 4.35355L9.64645 3.64644L5.71716 7.57573L6.42427 8.28284ZM6.42427 7.71716C6.58048 7.87337 6.58048 8.12663 6.42427 8.28284L5.71716 7.57573C5.48285 7.81005 5.48285 8.18995 5.71716 8.42426L6.42427 7.71716Z\" })] })); };\nvar ForwardIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Click to go forward\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M6.35355 3.64645C6.15829 3.45118 5.84171 3.45118 5.64645 3.64645C5.45118 3.84171 5.45118 4.15829 5.64645 4.35355L6.35355 3.64645ZM5.64645 11.6464C5.45118 11.8417 5.45118 12.1583 5.64645 12.3536C5.84171 12.5488 6.15829 12.5488 6.35355 12.3536L5.64645 11.6464ZM9.92929 8.07071L10.2828 8.42426L9.92929 8.07071ZM5.64645 4.35355L9.57574 8.28284L10.2828 7.57574L6.35355 3.64645L5.64645 4.35355ZM9.57574 7.71716L5.64645 11.6464L6.35355 12.3536L10.2828 8.42426L9.57574 7.71716ZM9.57574 8.28284C9.41952 8.12663 9.41953 7.87337 9.57574 7.71716L10.2828 8.42426C10.5172 8.18995 10.5172 7.81005 10.2828 7.57574L9.57574 8.28284Z\" })] })); };\nvar RefreshIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Refresh preview\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { clipRule: \"evenodd\", d: \"M3.83325 7.99992C3.83325 5.69867 5.69853 3.83325 7.99934 3.83325C9.81246 3.83325 11.3563 4.99195 11.9285 6.61097C11.9396 6.6425 11.9536 6.67221 11.97 6.69992H8.80005C8.52391 6.69992 8.30005 6.92378 8.30005 7.19992C8.30005 7.47606 8.52391 7.69992 8.80005 7.69992H12.5667C12.8981 7.69992 13.1667 7.43129 13.1667 7.09992V3.33325C13.1667 3.05711 12.9429 2.83325 12.6667 2.83325C12.3906 2.83325 12.1667 3.05711 12.1667 3.33325V4.94608C11.2268 3.66522 9.7106 2.83325 7.99934 2.83325C5.14613 2.83325 2.83325 5.14651 2.83325 7.99992C2.83325 10.8533 5.14613 13.1666 7.99934 13.1666C9.91218 13.1666 11.5815 12.1266 12.474 10.5836C12.6123 10.3446 12.5306 10.0387 12.2915 9.90044C12.0525 9.76218 11.7466 9.84387 11.6084 10.0829C10.8873 11.3296 9.54072 12.1666 7.99934 12.1666C5.69853 12.1666 3.83325 10.3012 3.83325 7.99992Z\", fillRule: \"evenodd\" })] })); };\nvar CleanIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { fill: \"none\", stroke: \"currentColor\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Clean\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { cx: \"7.99998\", cy: \"8.00004\", r: \"4.66667\", strokeLinecap: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M4.66669 4.66663L11.3334 11.3333\" })] })); };\nvar ExportIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { fill: \"none\", stroke: \"currentColor\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Open on CodeSandbox\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M6.66665 3.33337H4.33331C3.78103 3.33337 3.33331 3.78109 3.33331 4.33337V11.6667C3.33331 12.219 3.78103 12.6667 4.33331 12.6667H11.6666C12.2189 12.6667 12.6666 12.219 12.6666 11.6667V9.33337\", strokeLinecap: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M10 3.33337H12.5667C12.6219 3.33337 12.6667 3.37815 12.6667 3.43337V6.00004\", strokeLinecap: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M7.33331 8.66668L12.5333 3.46667\", strokeLinecap: \"round\" })] })); };\nvar DirectoryIconOpen = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Directory\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M12.5526 12.6667H3.66675C3.2922 12.6667 2.96575 12.4608 2.79442 12.156L3.81072 8.0908C3.92201 7.64563 4.32199 7.33333 4.78086 7.33333H13.386C14.0365 7.33333 14.5139 7.94472 14.3561 8.57587L13.5228 11.9092C13.4115 12.3544 13.0115 12.6667 12.5526 12.6667Z\", fill: \"currentColor\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M13.3334 6.63333V6.33333C13.3334 5.78105 12.8857 5.33333 12.3334 5.33333H8.30286C8.10543 5.33333 7.91242 5.2749 7.74816 5.16538L6.25201 4.16795C6.08774 4.05844 5.89473 4 5.69731 4H3.66675C3.11446 4 2.66675 4.44772 2.66675 5L2.66675 11.6667C2.66675 12.219 3.11446 12.6667 3.66675 12.6667H12.5526C13.0115 12.6667 13.4115 12.3544 13.5228 11.9092L14.3561 8.57587C14.5139 7.94472 14.0365 7.33333 13.386 7.33333H4.78086C4.32199 7.33333 3.92201 7.64563 3.81072 8.0908L2.75008 12.3333\", fill: \"none\", stroke: \"currentColor\", strokeLinecap: \"round\" })] })); };\nvar DirectoryIconClosed = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Directory\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M12.3334 12.6667H3.66675C3.11446 12.6667 2.66675 12.219 2.66675 11.6667V5C2.66675 4.44772 3.11446 4 3.66675 4H5.69731C5.89473 4 6.08774 4.05844 6.25201 4.16795L7.74816 5.16538C7.91242 5.2749 8.10543 5.33333 8.30286 5.33333H12.3334C12.8857 5.33333 13.3334 5.78105 13.3334 6.33333V11.6667C13.3334 12.219 12.8857 12.6667 12.3334 12.6667Z\", fill: \"currentColor\", stroke: \"currentColor\", strokeLinecap: \"round\" })] })); };\nvar FileIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { fill: \"currentColor\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"File\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { clipRule: \"evenodd\", d: \"M4.5 4.33325C4.5 4.05711 4.72386 3.83325 5 3.83325H8.16675V6.56659C8.16675 6.89795 8.43538 7.16658 8.76675 7.16658H11.5V12.3333C11.5 12.6094 11.2761 12.8333 11 12.8333H5C4.72386 12.8333 4.5 12.6094 4.5 12.3333V4.33325ZM12.5 6.67568C12.5001 6.67265 12.5001 6.66962 12.5001 6.66658C12.5001 6.66355 12.5001 6.66052 12.5 6.65749V6.41413C12.5 6.01631 12.342 5.63478 12.0607 5.35347L9.97978 3.27259C9.69848 2.99129 9.31694 2.83325 8.91912 2.83325H8.66675H5C4.17157 2.83325 3.5 3.50483 3.5 4.33325V12.3333C3.5 13.1617 4.17157 13.8333 5 13.8333H11C11.8284 13.8333 12.5 13.1617 12.5 12.3333V6.67568ZM9.16675 3.89888C9.20518 3.92078 9.24085 3.94787 9.27267 3.9797L11.3536 6.06058C11.3854 6.09243 11.4125 6.12813 11.4344 6.16658H9.16675V3.89888Z\", fillRule: \"evenodd\" })] })); };\nvar CloseIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { stroke: \"currentColor\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Close file\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M12 4L4 12\", strokeLinecap: \"round\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M4 4L12 12\", strokeLinecap: \"round\" })] })); };\nvar ConsoleIcon = function () { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SVG, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", { children: \"Open browser console\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M5.65871 3.62037C5.44905 3.44066 5.1334 3.46494 4.95368 3.6746C4.77397 3.88427 4.79825 4.19992 5.00792 4.37963L5.65871 3.62037ZM5.00792 11.6204C4.79825 11.8001 4.77397 12.1157 4.95368 12.3254C5.1334 12.5351 5.44905 12.5593 5.65871 12.3796L5.00792 11.6204ZM9.9114 7.92407L10.2368 7.54445L9.9114 7.92407ZM5.00792 4.37963L9.586 8.3037L10.2368 7.54445L5.65871 3.62037L5.00792 4.37963ZM9.586 7.6963L5.00792 11.6204L5.65871 12.3796L10.2368 8.45555L9.586 7.6963ZM9.586 8.3037C9.39976 8.14407 9.39976 7.85594 9.586 7.6963L10.2368 8.45555C10.5162 8.2161 10.5162 7.7839 10.2368 7.54445L9.586 8.3037Z\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"M10 11.5C9.72386 11.5 9.5 11.7239 9.5 12C9.5 12.2761 9.72386 12.5 10 12.5V11.5ZM14.6667 12.5C14.9428 12.5 15.1667 12.2761 15.1667 12C15.1667 11.7239 14.9428 11.5 14.6667 11.5V12.5ZM10 12.5H14.6667V11.5H10V12.5Z\" })] })); };\n\nvar _a$a;\n/**\n * @category Theme\n */\nvar defaultLight = {\n    colors: {\n        surface1: \"#ffffff\",\n        surface2: \"#EFEFEF\",\n        surface3: \"#F3F3F3\",\n        disabled: \"#C5C5C5\",\n        base: \"#323232\",\n        clickable: \"#808080\",\n        hover: \"#4D4D4D\",\n        accent: \"#3973E0\",\n        error: \"#EA3323\",\n        errorSurface: \"#FCF1F0\",\n        warning: \"#6A4516\",\n        warningSurface: \"#FEF2C0\",\n    },\n    syntax: {\n        plain: \"#151515\",\n        comment: { color: \"#999\", fontStyle: \"italic\" },\n        keyword: \"#7C5AE3\",\n        tag: \"#0971F1\",\n        punctuation: \"#3B3B3B\",\n        definition: \"#85A600\",\n        property: \"#3B3B3B\",\n        static: \"#3B3B3B\",\n        string: \"#2E6BD0\",\n    },\n    font: {\n        body: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n        mono: '\"Fira Mono\", \"DejaVu Sans Mono\", Menlo, Consolas, \"Liberation Mono\", Monaco, \"Lucida Console\", monospace',\n        size: \"13px\",\n        lineHeight: \"20px\",\n    },\n};\n/**\n * @category Theme\n */\nvar defaultDark = {\n    colors: {\n        surface1: \"#151515\",\n        surface2: \"#252525\",\n        surface3: \"#2F2F2F\",\n        disabled: \"#4D4D4D\",\n        base: \"#808080\",\n        clickable: \"#999999\",\n        hover: \"#C5C5C5\",\n        accent: \"#E5E5E5\",\n        error: \"#FFB4A6\",\n        errorSurface: \"#690000\",\n        warning: \"#E7C400\",\n        warningSurface: \"#3A3000\",\n    },\n    syntax: {\n        plain: \"#FFFFFF\",\n        comment: { color: \"#757575\", fontStyle: \"italic\" },\n        keyword: \"#77B7D7\",\n        tag: \"#DFAB5C\",\n        punctuation: \"#ffffff\",\n        definition: \"#86D9CA\",\n        property: \"#77B7D7\",\n        static: \"#C64640\",\n        string: \"#977CDC\",\n    },\n    font: {\n        body: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n        mono: '\"Fira Mono\", \"DejaVu Sans Mono\", Menlo, Consolas, \"Liberation Mono\", Monaco, \"Lucida Console\", monospace',\n        size: \"13px\",\n        lineHeight: \"20px\",\n    },\n};\n/**\n * @category Theme\n */\nvar SANDPACK_THEMES = {\n    light: defaultLight,\n    dark: defaultDark,\n    auto: typeof window !== \"undefined\"\n        ? ((_a$a = window === null || window === void 0 ? void 0 : window.matchMedia) === null || _a$a === void 0 ? void 0 : _a$a.call(window, \"(prefers-color-scheme: dark)\").matches)\n            ? defaultDark\n            : defaultLight\n        : defaultLight,\n};\n\nvar getFileName = function (filePath) {\n    var lastIndexOfSlash = filePath.lastIndexOf(\"/\");\n    return filePath.slice(lastIndexOfSlash + 1);\n};\nvar calculateNearestUniquePath = function (currentPath, otherPaths) {\n    var currentPathParts = (currentPath[0] === \"/\" ? currentPath.slice(1) : currentPath).split(\"/\");\n    var resultPathParts = [];\n    // If path is on root, there are no parts to loop through\n    if (currentPathParts.length === 1) {\n        resultPathParts.unshift(currentPathParts[0]);\n    }\n    else {\n        // Loop over all other paths to find a unique path\n        for (var fileIndex = 0; fileIndex < otherPaths.length; fileIndex++) {\n            // We go over each part of the path from end to start to find the closest unique directory\n            var otherPathParts = otherPaths[fileIndex].split(\"/\");\n            for (var partsFromEnd = 1; partsFromEnd <= currentPathParts.length; partsFromEnd++) {\n                var currentPathPart = currentPathParts[currentPathParts.length - partsFromEnd];\n                var otherPathPart = otherPathParts[otherPathParts.length - partsFromEnd];\n                // If this part hasn't been added to the result path, we add it here\n                if (resultPathParts.length < partsFromEnd) {\n                    resultPathParts.unshift(currentPathPart);\n                }\n                // If this part is different between the current path and other path we break\n                // as from this moment the current path is unique compared to this other path\n                if (currentPathPart !== otherPathPart) {\n                    break;\n                }\n            }\n        }\n    }\n    // Add `..` if this is a relative path\n    if (resultPathParts.length < currentPathParts.length) {\n        resultPathParts.unshift(\"..\");\n    }\n    // Join the result path parts into a path string\n    return resultPathParts.join(\"/\");\n};\n// Checks both rgb and hex colors for contrast and returns true if the color is in the dark spectrum\nvar isDarkColor = function (color) {\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    if (color.startsWith(\"#\")) {\n        if (color.length < 7) {\n            return true;\n        }\n        r = parseInt(color.substr(1, 2), 16);\n        g = parseInt(color.substr(3, 2), 16);\n        b = parseInt(color.substr(5, 2), 16);\n    }\n    else {\n        var rgbValues = color\n            .replace(\"rgb(\", \"\")\n            .replace(\"rgba(\", \"\")\n            .replace(\")\", \"\")\n            .split(\",\");\n        if (rgbValues.length < 3) {\n            return true;\n        }\n        r = parseInt(rgbValues[0], 10);\n        g = parseInt(rgbValues[1], 10);\n        b = parseInt(rgbValues[2], 10);\n    }\n    var yiq = (r * 299 + g * 587 + b * 114) / 1000;\n    return yiq < 128;\n};\n// Minimal cuid-like id\nvar lastCount = 0;\nvar generateRandomId = function () {\n    var random = +(Date.now().toString(10).substr(0, 4) + lastCount++);\n    return random.toString(16);\n};\n\nvar toString = function () { return \"\"; };\nvar defineProperty = Object.getOwnPropertyDescriptors({ toString: toString });\nObject.defineProperties(toString, defineProperty);\n\nvar _a$9;\n/**\n * @category Theme\n */\nvar THEME_PREFIX = \"sp\";\n/**\n * @category Theme\n */\n// prettier-ignore\nvar createTheme = (_a$9 = (0,_stitches_core__WEBPACK_IMPORTED_MODULE_8__.createStitches)({\n        prefix: THEME_PREFIX,\n    }), _a$9.createTheme), css = _a$9.css, getCssText = _a$9.getCssText, keyframes = _a$9.keyframes;\nvar defaultVariables = {\n    space: new Array(11).fill(\" \").reduce(function (acc, _, index) {\n        var _a;\n        return __assign(__assign({}, acc), (_a = {}, _a[index + 1] = \"\".concat((index + 1) * 4, \"px\"), _a));\n    }, {}),\n    border: { radius: \"4px\" },\n    layout: { height: \"300px\", headerHeight: \"40px\" },\n    transitions: { default: \"150ms ease\" },\n    zIndices: {\n        base: \"1\",\n        overlay: \"2\",\n        top: \"3\",\n    },\n};\n/**\n * @category Theme\n */\nvar standardizeStitchesTheme = function (theme) {\n    // Flat values\n    var syntaxEntries = Object.entries(theme.syntax);\n    var syntax = syntaxEntries.reduce(function (tokenAcc, _a) {\n        var _b;\n        var tokenName = _a[0], tokenValue = _a[1];\n        // Single property\n        var newValues = (_b = {}, _b[\"color-\".concat(tokenName)] = tokenValue, _b);\n        // Multiples properties\n        if (typeof tokenValue === \"object\") {\n            newValues = Object.entries(tokenValue).reduce(function (valueAcc, _a) {\n                var _b;\n                var styleProp = _a[0], styleValue = _a[1];\n                return __assign(__assign({}, valueAcc), (_b = {}, _b[\"\".concat(styleProp, \"-\").concat(tokenName)] = styleValue, _b));\n            }, {});\n        }\n        return __assign(__assign({}, tokenAcc), newValues);\n    }, {});\n    return __assign(__assign({}, defaultVariables), { colors: theme.colors, font: theme.font, syntax: syntax });\n};\n/**\n * @category Theme\n */\nvar standardizeTheme = function (inputTheme) {\n    var _a, _b, _c, _d, _e;\n    if (inputTheme === void 0) { inputTheme = \"light\"; }\n    var defaultLightThemeKey = \"default\";\n    /**\n     * Set a local theme: dark or light\n     */\n    if (typeof inputTheme === \"string\") {\n        var predefinedTheme = SANDPACK_THEMES[inputTheme];\n        if (!predefinedTheme) {\n            throw new Error(\"[sandpack-react]: invalid theme '\".concat(inputTheme, \"' provided.\"));\n        }\n        return {\n            theme: predefinedTheme,\n            id: inputTheme,\n            mode: isDarkColor(predefinedTheme.colors.surface1) ? \"dark\" : \"light\",\n        };\n    }\n    /**\n     * Fullfill the colors key, in case it's missing any key\n     */\n    var mode = isDarkColor((_b = (_a = inputTheme === null || inputTheme === void 0 ? void 0 : inputTheme.colors) === null || _a === void 0 ? void 0 : _a.surface1) !== null && _b !== void 0 ? _b : defaultLight.colors.surface1)\n        ? \"dark\"\n        : \"light\";\n    /**\n     * Figure out what's the properly default colors it should be\n     * error, warning and success colors have different values between dark and light\n     */\n    var baseTheme = mode === \"dark\" ? defaultDark : defaultLight;\n    var colorsByMode = __assign(__assign({}, baseTheme.colors), ((_c = inputTheme === null || inputTheme === void 0 ? void 0 : inputTheme.colors) !== null && _c !== void 0 ? _c : {}));\n    var syntaxByMode = __assign(__assign({}, baseTheme.syntax), ((_d = inputTheme === null || inputTheme === void 0 ? void 0 : inputTheme.syntax) !== null && _d !== void 0 ? _d : {}));\n    var fontByMode = __assign(__assign({}, baseTheme.font), ((_e = inputTheme === null || inputTheme === void 0 ? void 0 : inputTheme.font) !== null && _e !== void 0 ? _e : {}));\n    var theme = {\n        colors: colorsByMode,\n        syntax: syntaxByMode,\n        font: fontByMode,\n    };\n    var id = inputTheme\n        ? simpleHashFunction(JSON.stringify(theme))\n        : defaultLightThemeKey;\n    return {\n        theme: theme,\n        id: \"sp-\".concat(id),\n        mode: mode,\n    };\n};\nvar simpleHashFunction = function (str) {\n    var hash = 0;\n    for (var i = 0; i < str.length; hash &= hash) {\n        hash = 31 * hash + str.charCodeAt(i++);\n    }\n    return Math.abs(hash);\n};\n/**\n * The fake `css` function used to match the real `css` function usage\n * We use this for the unstyled bundle which do not need real class names\n * `css` is a factory which return a className generator, but also it be used in scenarios which `toString` will be invoked\n * so we also need to add the `toString` method to it.\n */\nvar fakeCss = function () { return \"\"; };\nfakeCss.toString = fakeCss;\n\n/**\n * <ClassNamesContext classes={{\n *     \"sp-wrapper\": \"custom-wrapper\",\n *     \"sp-layout\": \"custom-layout\",\n *     \"sp-tab-button\": \"custom-tab\",\n *  }}>\n *  ...\n * </ClassNamesContext>\n */\nvar ClassNamesContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({});\nvar ClassNamesProvider = function (_a) {\n    var children = _a.children, classes = _a.classes;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ClassNamesContext.Provider, { value: classes || {}, children: children }));\n};\nvar useClassNames = function () {\n    var contextClassNames = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ClassNamesContext);\n    return function sandpackClassNames(customClassName, \n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    allClassNames) {\n        if (allClassNames === void 0) { allClassNames = []; }\n        var custom = \"\".concat(THEME_PREFIX, \"-\").concat(customClassName);\n        return joinClassNames.apply(void 0, __spreadArray(__spreadArray([], allClassNames, false), [custom, contextClassNames[custom]], false));\n    };\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar joinClassNames = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return args.filter(Boolean).join(\" \");\n};\n\nvar wrapperClassName$3 = css({\n    all: \"initial\",\n    fontSize: \"$font$size\",\n    fontFamily: \"$font$body\",\n    display: \"block\",\n    boxSizing: \"border-box\",\n    textRendering: \"optimizeLegibility\",\n    WebkitTapHighlightColor: \"transparent\",\n    WebkitFontSmoothing: \"subpixel-antialiased\",\n    variants: {\n        variant: {\n            dark: { colorScheme: \"dark\" },\n            light: { colorScheme: \"light\" },\n        },\n    },\n    \"@media screen and (min-resolution: 2dppx)\": {\n        WebkitFontSmoothing: \"antialiased\",\n        MozOsxFontSmoothing: \"grayscale\",\n    },\n    \"*\": { boxSizing: \"border-box\" },\n    \".sp-wrapper:focus\": { outline: \"0\" },\n});\nvar SandpackThemeContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext({\n    theme: defaultLight,\n    id: \"light\",\n    mode: \"light\",\n});\n/**\n * @category Theme\n */\nvar SandpackThemeProvider = function (_a) {\n    var themeFromProps = _a.theme, children = _a.children, className = _a.className, props = __rest(_a, [\"theme\", \"children\", \"className\"]);\n    var _b = react__WEBPACK_IMPORTED_MODULE_1__.useState(themeFromProps), prefferedTheme = _b[0], setPreferredTheme = _b[1];\n    var _c = standardizeTheme(prefferedTheme), theme = _c.theme, id = _c.id, mode = _c.mode;\n    var classNames = useClassNames();\n    var themeClassName = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(function () {\n        return createTheme(id, standardizeStitchesTheme(theme));\n    }, [theme, id]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        if (themeFromProps !== \"auto\")\n            return;\n        var colorSchemeChange = function (_a) {\n            var matches = _a.matches;\n            setPreferredTheme(matches ? \"dark\" : \"light\");\n        };\n        window\n            .matchMedia(\"(prefers-color-scheme: dark)\")\n            .addEventListener(\"change\", colorSchemeChange);\n        return function () {\n            window\n                .matchMedia(\"(prefers-color-scheme: dark)\")\n                .removeEventListener(\"change\", colorSchemeChange);\n        };\n    }, [themeFromProps]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackThemeContext.Provider, { value: { theme: theme, id: id, mode: mode }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", __assign({ className: classNames(\"wrapper\", [\n                themeClassName,\n                wrapperClassName$3({ variant: mode }),\n                className,\n            ]) }, props, { children: children })) }));\n};\nvar SandpackThemeConsumer = SandpackThemeContext.Consumer;\n\nvar commonFiles = {\n    \"/styles.css\": {\n        code: \"body {\\n  font-family: sans-serif;\\n  -webkit-font-smoothing: auto;\\n  -moz-font-smoothing: auto;\\n  -moz-osx-font-smoothing: grayscale;\\n  font-smoothing: auto;\\n  text-rendering: optimizeLegibility;\\n  font-smooth: always;\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n}\\n\\nh1 {\\n  font-size: 1.5rem;\\n}\",\n    },\n};\n\n/**\n * @hidden\n */\nvar ASTRO_TEMPLATE = {\n    files: {\n        \"/src/styles.css\": commonFiles[\"/styles.css\"],\n        \"/src/pages/index.astro\": {\n            code: \"---\\nimport \\\"../styles.css\\\";\\nconst data = \\\"world\\\";\\n---\\n\\n<h1>Hello {data}</h1>\\n\\n<style>\\n  h1 {\\n    font-size: 1.5rem;\\n  }\\n</style>\",\n        },\n        \".env\": {\n            code: \"ASTRO_TELEMETRY_DISABLED=\\\"1\\\"\",\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {\n                    astro: \"^1.6.12\",\n                    \"esbuild-wasm\": \"^0.15.16\",\n                },\n                scripts: {\n                    dev: \"astro dev\",\n                    start: \"astro dev\",\n                    build: \"astro build\",\n                    preview: \"astro preview\",\n                    astro: \"astro\",\n                },\n            }),\n        },\n    },\n    main: \"/src/pages/index.astro\",\n    environment: \"node\",\n};\n\nvar NEXTJS_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/pages/_app.js\": {\n            code: \"import '../styles.css'\\n\\nexport default function MyApp({ Component, pageProps }) {\\n  return <Component {...pageProps} />\\n}\",\n        }, \"/pages/index.js\": {\n            code: \"export default function Home({ data }) {\\n  return (\\n    <div>\\n      <h1>Hello {data}</h1>\\n    </div>\\n  );\\n}\\n  \\nexport function getServerSideProps() {\\n  return {\\n    props: { data: \\\"world\\\" },\\n  }\\n}\\n\",\n        }, \"/next.config.js\": {\n            code: \"/** @type {import('next').NextConfig} */\\nconst nextConfig = {\\n  reactStrictMode: true,\\n  swcMinify: true,\\n}\\n\\nmodule.exports = nextConfig\\n\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                name: \"my-app\",\n                version: \"0.1.0\",\n                private: true,\n                scripts: {\n                    dev: \"NEXT_TELEMETRY_DISABLED=1 next dev\",\n                    build: \"next build\",\n                    start: \"next start\",\n                    lint: \"next lint\",\n                },\n                dependencies: {\n                    next: \"12.1.6\",\n                    react: \"18.2.0\",\n                    \"react-dom\": \"18.2.0\",\n                    \"@next/swc-wasm-nodejs\": \"12.1.6\",\n                },\n            }),\n        } }),\n    main: \"/pages/index.js\",\n    environment: \"node\",\n};\n\nvar NODE_TEMPLATE = {\n    files: {\n        \"/index.js\": {\n            code: \"const http = require('http');\\n\\nconst hostname = '127.0.0.1';\\nconst port = 3000;\\n\\nconst server = http.createServer((req, res) => {\\n  res.statusCode = 200;\\n  res.setHeader('Content-Type', 'text/html');\\n  res.end('Hello world');\\n});\\n\\nserver.listen(port, hostname, () => {\\n  console.log(`Server running at http://${hostname}:${port}/`);\\n});\",\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {},\n                scripts: { start: \"node index.js\" },\n                main: \"index.js\",\n            }),\n        },\n    },\n    main: \"/index.js\",\n    environment: \"node\",\n};\n\nvar VITE_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/index.js\": {\n            code: \"import \\\"./styles.css\\\";\\n\\ndocument.getElementById(\\\"app\\\").innerHTML = `\\n<h1>Hello world</h1>\\n`;\\n\",\n        }, \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"app\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/index.js\\\"></script>\\n  </body>\\n</html>\\n\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                scripts: {\n                    dev: \"vite\",\n                    build: \"vite build\",\n                    preview: \"vite preview\",\n                },\n                devDependencies: {\n                    vite: \"4.1.4\",\n                    \"esbuild-wasm\": \"0.17.12\",\n                },\n            }),\n        } }),\n    main: \"/index.js\",\n    environment: \"node\",\n};\n\nvar VITE_PREACT_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/App.jsx\": {\n            code: \"export default function App() {\\n  const data = \\\"world\\\"\\n\\n  return <h1>Hello {data}</h1>\\n}\\n\",\n        }, \"/index.jsx\": {\n            code: \"import { render } from \\\"preact\\\";\\nimport \\\"./styles.css\\\";\\n\\nimport App from \\\"./App\\\";\\n\\nconst root = document.getElementById(\\\"root\\\");\\nrender(<App />, root);\\n\",\n        }, \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"root\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/index.jsx\\\"></script>\\n  </body>\\n</html>\\n\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                scripts: {\n                    dev: \"vite\",\n                    build: \"vite build\",\n                    preview: \"vite preview\",\n                },\n                dependencies: {\n                    preact: \"^10.16.0\",\n                },\n                devDependencies: {\n                    \"@preact/preset-vite\": \"^2.5.0\",\n                    vite: \"4.1.4\",\n                    \"esbuild-wasm\": \"0.17.12\",\n                },\n            }),\n        }, \"/vite.config.js\": {\n            code: \"import { defineConfig } from \\\"vite\\\";\\nimport preact from '@preact/preset-vite'\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [preact()],\\n});\\n\",\n        } }),\n    main: \"/App.jsx\",\n    environment: \"node\",\n};\n\nvar VITE_PREACT_TS_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/App.tsx\": {\n            code: \"export default function App() {\\n  const data: string = \\\"world\\\"\\n\\n  return <h1>Hello {data}</h1>\\n}\\n\",\n        }, \"/index.tsx\": {\n            code: \"import { render } from \\\"preact\\\";\\nimport \\\"./styles.css\\\";\\n\\nimport App from \\\"./App\\\";\\n\\nconst root = document.getElementById(\\\"root\\\") as HTMLElement;\\nrender(<App />, root);\\n\",\n        }, \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"root\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/index.tsx\\\"></script>\\n  </body>\\n</html>\\n\",\n        }, \"/tsconfig.json\": {\n            code: JSON.stringify({\n                compilerOptions: {\n                    target: \"ESNext\",\n                    useDefineForClassFields: true,\n                    lib: [\"DOM\", \"DOM.Iterable\", \"ESNext\"],\n                    allowJs: false,\n                    skipLibCheck: true,\n                    esModuleInterop: false,\n                    allowSyntheticDefaultImports: true,\n                    strict: true,\n                    forceConsistentCasingInFileNames: true,\n                    module: \"ESNext\",\n                    moduleResolution: \"Node\",\n                    resolveJsonModule: true,\n                    isolatedModules: true,\n                    noEmit: true,\n                    jsx: \"react-jsx\",\n                    jsxImportSource: \"preact\",\n                },\n                include: [\"src\"],\n                references: [{ path: \"./tsconfig.node.json\" }],\n            }, null, 2),\n        }, \"/tsconfig.node.json\": {\n            code: JSON.stringify({\n                compilerOptions: {\n                    composite: true,\n                    module: \"ESNext\",\n                    moduleResolution: \"Node\",\n                    allowSyntheticDefaultImports: true,\n                },\n                include: [\"vite.config.ts\"],\n            }, null, 2),\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                scripts: {\n                    dev: \"vite\",\n                    build: \"tsc && vite build\",\n                    preview: \"vite preview\",\n                },\n                dependencies: {\n                    preact: \"^10.16.0\",\n                },\n                devDependencies: {\n                    \"@preact/preset-vite\": \"^2.5.0\",\n                    typescript: \"^4.9.5\",\n                    vite: \"4.1.4\",\n                    \"esbuild-wasm\": \"^0.17.12\",\n                },\n            }, null, 2),\n        }, \"/vite-env.d.ts\": {\n            code: '/// <reference types=\"vite/client\" />',\n        }, \"/vite.config.ts\": {\n            code: \"import { defineConfig } from 'vite'\\nimport preact from '@preact/preset-vite'\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [preact()],\\n})\\n\",\n        } }),\n    main: \"/App.tsx\",\n    environment: \"node\",\n};\n\nvar VITE_REACT_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/App.jsx\": {\n            code: \"export default function App() {\\n  const data = \\\"world\\\"\\n\\n  return <h1>Hello {data}</h1>\\n}\\n\",\n        }, \"/index.jsx\": {\n            code: \"import { StrictMode } from \\\"react\\\";\\nimport { createRoot } from \\\"react-dom/client\\\";\\nimport \\\"./styles.css\\\";\\n\\nimport App from \\\"./App\\\";\\n\\nconst root = createRoot(document.getElementById(\\\"root\\\"));\\nroot.render(\\n  <StrictMode>\\n    <App />\\n  </StrictMode>\\n);\",\n        }, \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"root\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/index.jsx\\\"></script>\\n  </body>\\n</html>\\n\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                scripts: {\n                    dev: \"vite\",\n                    build: \"vite build\",\n                    preview: \"vite preview\",\n                },\n                dependencies: {\n                    react: \"^18.2.0\",\n                    \"react-dom\": \"^18.2.0\",\n                },\n                devDependencies: {\n                    \"@vitejs/plugin-react\": \"3.1.0\",\n                    vite: \"4.1.4\",\n                    \"esbuild-wasm\": \"0.17.12\",\n                },\n            }),\n        }, \"/vite.config.js\": {\n            code: \"import { defineConfig } from \\\"vite\\\";\\nimport react from \\\"@vitejs/plugin-react\\\";\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [react()],\\n});\\n\",\n        } }),\n    main: \"/App.jsx\",\n    environment: \"node\",\n};\n\nvar VITE_REACT_TS_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/App.tsx\": {\n            code: \"export default function App() {\\n  const data: string = \\\"world\\\"\\n\\n  return <h1>Hello {data}</h1>\\n}\\n\",\n        }, \"/index.tsx\": {\n            code: \"import { StrictMode } from \\\"react\\\";\\nimport { createRoot } from \\\"react-dom/client\\\";\\nimport \\\"./styles.css\\\";\\n\\nimport App from \\\"./App\\\";\\nimport React from \\\"react\\\";\\n\\nconst root = createRoot(document.getElementById(\\\"root\\\") as HTMLElement);\\nroot.render(\\n  <StrictMode>\\n    <App />\\n  </StrictMode>\\n);\\n\",\n        }, \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"root\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/index.tsx\\\"></script>\\n  </body>\\n</html>\\n\",\n        }, \"/tsconfig.json\": {\n            code: JSON.stringify({\n                compilerOptions: {\n                    target: \"ESNext\",\n                    useDefineForClassFields: true,\n                    lib: [\"DOM\", \"DOM.Iterable\", \"ESNext\"],\n                    allowJs: false,\n                    skipLibCheck: true,\n                    esModuleInterop: false,\n                    allowSyntheticDefaultImports: true,\n                    strict: true,\n                    forceConsistentCasingInFileNames: true,\n                    module: \"ESNext\",\n                    moduleResolution: \"Node\",\n                    resolveJsonModule: true,\n                    isolatedModules: true,\n                    noEmit: true,\n                    jsx: \"react-jsx\",\n                },\n                include: [\"src\"],\n                references: [{ path: \"./tsconfig.node.json\" }],\n            }, null, 2),\n        }, \"/tsconfig.node.json\": {\n            code: JSON.stringify({\n                compilerOptions: {\n                    composite: true,\n                    module: \"ESNext\",\n                    moduleResolution: \"Node\",\n                    allowSyntheticDefaultImports: true,\n                },\n                include: [\"vite.config.ts\"],\n            }, null, 2),\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                scripts: {\n                    dev: \"vite\",\n                    build: \"tsc && vite build\",\n                    preview: \"vite preview\",\n                },\n                dependencies: {\n                    react: \"^18.2.0\",\n                    \"react-dom\": \"^18.2.0\",\n                },\n                devDependencies: {\n                    \"@types/react\": \"^18.0.28\",\n                    \"@types/react-dom\": \"^18.0.11\",\n                    \"@vitejs/plugin-react\": \"^3.1.0\",\n                    typescript: \"^4.9.5\",\n                    vite: \"4.1.4\",\n                    \"esbuild-wasm\": \"^0.17.12\",\n                },\n            }, null, 2),\n        }, \"/vite-env.d.ts\": {\n            code: '/// <reference types=\"vite/client\" />',\n        }, \"/vite.config.ts\": {\n            code: \"import { defineConfig } from 'vite'\\nimport react from '@vitejs/plugin-react'\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [react()],\\n})\\n\",\n        } }),\n    main: \"/App.tsx\",\n    environment: \"node\",\n};\n\nvar VITE_SVELTE_TEMPLATE = {\n    files: {\n        \"/src/styles.css\": commonFiles[\"/styles.css\"],\n        \"/src/App.svelte\": {\n            code: \"<script>\\nconst data = \\\"world\\\";\\n</script>\\n\\n<h1>Hello {data}</h1>\\n\\n<style>\\nh1 {\\n  font-size: 1.5rem;\\n}\\n</style>\",\n        },\n        \"/src/main.js\": {\n            code: \"import App from './App.svelte'\\nimport \\\"./styles.css\\\"\\n\\nconst app = new App({\\n  target: document.getElementById('app'),\\n})\\n\\nexport default app\",\n        },\n        \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"app\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/src/main.js\\\"></script>\\n  </body>\\n</html>\\n\",\n        },\n        \"/vite.config.js\": {\n            code: \"import { defineConfig } from 'vite'\\nimport { svelte } from '@sveltejs/vite-plugin-svelte'\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [svelte()],\\n})\",\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                type: \"module\",\n                scripts: {\n                    dev: \"vite\",\n                },\n                devDependencies: {\n                    \"@sveltejs/vite-plugin-svelte\": \"^2.0.2\",\n                    svelte: \"^3.55.1\",\n                    vite: \"4.0.4\",\n                    \"esbuild-wasm\": \"^0.17.12\",\n                },\n            }),\n        },\n    },\n    main: \"/src/App.svelte\",\n    environment: \"node\",\n};\n\nvar VITE_SVELTE_TS_TEMPLATE = {\n    files: {\n        \"/src/styles.css\": commonFiles[\"/styles.css\"],\n        \"/src/App.svelte\": {\n            code: \"<script lang=\\\"ts\\\">\\nconst data: string = \\\"world\\\";\\n</script>\\n\\n<h1>Hello {data}</h1>\\n\\n<style>\\nh1 {\\n  font-size: 1.5rem;\\n}\\n</style>\",\n        },\n        \"/src/main.ts\": {\n            code: \"import App from './App.svelte'\\nimport \\\"./styles.css\\\"\\n\\nconst app = new App({\\n  target: document.getElementById('app'),\\n})\\n\\nexport default app\",\n        },\n        \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"app\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/src/main.ts\\\"></script>\\n  </body>\\n</html>\\n\",\n        },\n        \"/vite-env.d.ts\": {\n            code: \"/// <reference types=\\\"svelte\\\" />\\n/// <reference types=\\\"vite/client\\\" />\",\n        },\n        \"svelte.config.js\": {\n            code: \"import { vitePreprocess } from '@sveltejs/vite-plugin-svelte'\\n\\nexport default {\\n  // Consult https://svelte.dev/docs#compile-time-svelte-preprocess\\n  // for more information about preprocessors\\n  preprocess: vitePreprocess(),\\n}\\n\",\n        },\n        \"/vite.config.ts\": {\n            code: \"import { defineConfig } from 'vite'\\nimport { svelte } from '@sveltejs/vite-plugin-svelte'\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [svelte()],\\n})\",\n        },\n        \"tsconfig.json\": {\n            code: JSON.stringify({\n                extends: \"@tsconfig/svelte/tsconfig.json\",\n                compilerOptions: {\n                    target: \"ESNext\",\n                    useDefineForClassFields: true,\n                    module: \"ESNext\",\n                    resolveJsonModule: true,\n                    allowJs: true,\n                    checkJs: true,\n                    isolatedModules: true,\n                },\n                include: [\n                    \"src/**/*.d.ts\",\n                    \"src/**/*.ts\",\n                    \"src/**/*.js\",\n                    \"src/**/*.svelte\",\n                ],\n                references: [{ path: \"./tsconfig.node.json\" }],\n            }, null, 2),\n        },\n        \"tsconfig.node.json\": {\n            code: JSON.stringify({\n                compilerOptions: {\n                    composite: true,\n                    module: \"ESNext\",\n                    moduleResolution: \"Node\",\n                },\n                include: [\"vite.config.ts\"],\n            }, null, 2),\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                type: \"module\",\n                scripts: {\n                    dev: \"vite\",\n                },\n                devDependencies: {\n                    \"@sveltejs/vite-plugin-svelte\": \"^2.0.2\",\n                    \"@tsconfig/svelte\": \"^3.0.0\",\n                    svelte: \"^3.55.1\",\n                    \"svelte-check\": \"^2.10.3\",\n                    tslib: \"^2.5.0\",\n                    vite: \"4.1.4\",\n                    \"esbuild-wasm\": \"^0.17.12\",\n                },\n            }, null, 2),\n        },\n    },\n    main: \"/src/App.svelte\",\n    environment: \"node\",\n};\n\nvar VITE_VUE_TEMPLATE = {\n    files: {\n        \"/src/styles.css\": commonFiles[\"/styles.css\"],\n        \"/src/App.vue\": {\n            code: \"<script setup>\\nimport { ref } from \\\"vue\\\";\\n\\nconst data = ref(\\\"world\\\");\\n</script>\\n\\n<template>\\n  <h1>Hello {{ data }}</h1>\\n</template>\\n\\n<style>\\nh1 {\\n  font-size: 1.5rem;\\n}\\n</style>\",\n        },\n        \"/src/main.js\": {\n            code: \"import { createApp } from 'vue'\\nimport App from './App.vue'\\nimport \\\"./styles.css\\\"\\n            \\ncreateApp(App).mount('#app')            \\n\",\n        },\n        \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"app\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/src/main.js\\\"></script>\\n  </body>\\n</html>\\n\",\n        },\n        \"/vite.config.js\": {\n            code: \"import { defineConfig } from 'vite'\\nimport vue from '@vitejs/plugin-vue'\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [vue()]\\n})\\n\",\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                scripts: {\n                    dev: \"vite\",\n                    build: \"vite build\",\n                    preview: \"vite preview\",\n                },\n                dependencies: {\n                    vue: \"^3.2.45\",\n                },\n                devDependencies: {\n                    \"@vitejs/plugin-vue\": \"3.2.0\",\n                    vite: \"4.1.4\",\n                    \"esbuild-wasm\": \"0.17.12\",\n                },\n            }),\n        },\n    },\n    main: \"/src/App.vue\",\n    environment: \"node\",\n};\n\nvar VITE_VUE_TS_TEMPLATE = {\n    files: {\n        \"/src/styles.css\": commonFiles[\"/styles.css\"],\n        \"/src/App.vue\": {\n            code: \"<script setup lang=\\\"ts\\\">\\nimport { ref } from \\\"vue\\\";\\n\\nconst data = ref<string>(\\\"world\\\");\\n</script>\\n\\n<template>\\n  <h1>Hello {{ data }}</h1>\\n</template>\\n\\n<style>\\nh1 {\\n  font-size: 1.5rem;\\n}\\n</style>\",\n        },\n        \"/src/main.ts\": {\n            code: \"import { createApp } from 'vue'\\nimport App from './App.vue'\\nimport \\\"./styles.css\\\"\\n\\ncreateApp(App).mount('#app')\\n\",\n        },\n        \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Vite App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"app\\\"></div>\\n    <script type=\\\"module\\\" src=\\\"/src/main.ts\\\"></script>\\n  </body>\\n</html>\\n\",\n        },\n        \"/vite-env.d.ts\": {\n            code: '/// <reference types=\"vite/client\" />',\n        },\n        \"/vite.config.ts\": {\n            code: \"import { defineConfig } from 'vite'\\nimport vue from '@vitejs/plugin-vue'\\n\\n// https://vitejs.dev/config/\\nexport default defineConfig({\\n  plugins: [vue()]\\n})\\n\",\n        },\n        \"tsconfig.json\": {\n            code: JSON.stringify({\n                compilerOptions: {\n                    target: \"ESNext\",\n                    useDefineForClassFields: true,\n                    module: \"ESNext\",\n                    moduleResolution: \"Node\",\n                    strict: true,\n                    jsx: \"preserve\",\n                    resolveJsonModule: true,\n                    isolatedModules: true,\n                    esModuleInterop: true,\n                    lib: [\"ESNext\", \"DOM\"],\n                    skipLibCheck: true,\n                    noEmit: true,\n                },\n                include: [\n                    \"src/**/*.ts\",\n                    \"src/**/*.d.ts\",\n                    \"src/**/*.tsx\",\n                    \"src/**/*.vue\",\n                ],\n                references: [{ path: \"./tsconfig.node.json\" }],\n            }, null, 2),\n        },\n        \"tsconfig.node.json\": {\n            code: JSON.stringify({\n                compilerOptions: {\n                    composite: true,\n                    module: \"ESNext\",\n                    moduleResolution: \"Node\",\n                    allowSyntheticDefaultImports: true,\n                },\n                include: [\"vite.config.ts\"],\n            }, null, 2),\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                scripts: {\n                    dev: \"vite\",\n                    build: \"tsc && vite build\",\n                    preview: \"vite preview\",\n                },\n                dependencies: {\n                    vue: \"^3.2.47\",\n                },\n                devDependencies: {\n                    \"@vitejs/plugin-vue\": \"^4.0.0\",\n                    vite: \"4.1.4\",\n                    \"vue-tsc\": \"^1.2.0\",\n                    typescript: \"^4.9.5\",\n                    \"esbuild-wasm\": \"^0.17.12\",\n                },\n            }, null, 2),\n        },\n    },\n    main: \"/src/App.vue\",\n    environment: \"node\",\n};\n\nvar ANGULAR_TEMPLATE = {\n    files: {\n        \"/src/app/app.component.css\": commonFiles[\"/styles.css\"],\n        \"/src/app/app.component.html\": {\n            code: \"<div>\\n<h1>{{ helloWorld }}</h1>\\n</div>     \\n\",\n        },\n        \"/src/app/app.component.ts\": {\n            code: \"import { Component } from \\\"@angular/core\\\";\\n\\n@Component({\\n  selector: \\\"app-root\\\",\\n  templateUrl: \\\"./app.component.html\\\",\\n  styleUrls: [\\\"./app.component.css\\\"]\\n})\\nexport class AppComponent {\\n  helloWorld = \\\"Hello world\\\";\\n}           \\n\",\n        },\n        \"/src/app/app.module.ts\": {\n            code: \"import { BrowserModule } from \\\"@angular/platform-browser\\\";\\nimport { NgModule } from \\\"@angular/core\\\";\\n      \\nimport { AppComponent } from \\\"./app.component\\\";\\n      \\n@NgModule({\\n  declarations: [AppComponent],\\n  imports: [BrowserModule],\\n  providers: [],\\n  bootstrap: [AppComponent]\\n})\\nexport class AppModule {}       \\n\",\n        },\n        \"/src/index.html\": {\n            code: \"<!doctype html>\\n<html lang=\\\"en\\\">\\n      \\n<head>\\n  <meta charset=\\\"utf-8\\\">\\n  <title>Angular</title>\\n  <base href=\\\"/\\\">\\n      \\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\">\\n  <link rel=\\\"icon\\\" type=\\\"image/x-icon\\\" href=\\\"favicon.ico\\\">\\n</head>\\n      \\n<body>\\n   <app-root></app-root>\\n</body>\\n      \\n</html>\\n\",\n        },\n        \"/src/main.ts\": {\n            code: \"import { enableProdMode } from \\\"@angular/core\\\";\\nimport { platformBrowserDynamic } from \\\"@angular/platform-browser-dynamic\\\";\\n      \\nimport { AppModule } from \\\"./app/app.module\\\";      \\n\\nplatformBrowserDynamic()\\n  .bootstrapModule(AppModule)\\n  .catch(err => console.log(err));\\n      \\n\",\n        },\n        \"/src/polyfills.ts\": {\n            code: \"import \\\"core-js/proposals/reflect-metadata\\\";   \\n      import \\\"zone.js/dist/zone\\\";\\n\",\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {\n                    \"@angular/core\": \"^11.2.0\",\n                    \"@angular/platform-browser\": \"^11.2.0\",\n                    \"@angular/platform-browser-dynamic\": \"^11.2.0\",\n                    \"@angular/common\": \"^11.2.0\",\n                    \"@angular/compiler\": \"^11.2.0\",\n                    \"zone.js\": \"0.11.3\",\n                    \"core-js\": \"3.8.3\",\n                    rxjs: \"6.6.3\",\n                },\n                main: \"/src/main.ts\",\n            }),\n        },\n    },\n    main: \"/src/app/app.component.ts\",\n    environment: \"angular-cli\",\n};\n\nvar REACT_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/App.js\": {\n            code: \"export default function App() {\\n  return <h1>Hello world</h1>\\n}\\n\",\n        }, \"/index.js\": {\n            code: \"import React, { StrictMode } from \\\"react\\\";\\nimport { createRoot } from \\\"react-dom/client\\\";\\nimport \\\"./styles.css\\\";\\n\\nimport App from \\\"./App\\\";\\n\\nconst root = createRoot(document.getElementById(\\\"root\\\"));\\nroot.render(\\n  <StrictMode>\\n    <App />\\n  </StrictMode>\\n);\",\n        }, \"/public/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <title>Document</title>\\n  </head>\\n  <body>\\n    <div id=\\\"root\\\"></div>\\n  </body>\\n</html>\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {\n                    react: \"^18.0.0\",\n                    \"react-dom\": \"^18.0.0\",\n                    \"react-scripts\": \"^5.0.0\",\n                },\n                main: \"/index.js\",\n            }),\n        } }),\n    main: \"/App.js\",\n    environment: \"create-react-app\",\n};\n\nvar REACT_TYPESCRIPT_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"tsconfig.json\": {\n            code: \"{\\n  \\\"include\\\": [\\n    \\\"./**/*\\\"\\n  ],\\n  \\\"compilerOptions\\\": {\\n    \\\"strict\\\": true,\\n    \\\"esModuleInterop\\\": true,\\n    \\\"lib\\\": [ \\\"dom\\\", \\\"es2015\\\" ],\\n    \\\"jsx\\\": \\\"react-jsx\\\"\\n  }\\n}\",\n        }, \"/App.tsx\": {\n            code: \"export default function App(): JSX.Element {\\n  return <h1>Hello world</h1>\\n}\\n\",\n        }, \"/index.tsx\": {\n            code: \"import React, { StrictMode } from \\\"react\\\";\\nimport { createRoot } from \\\"react-dom/client\\\";\\nimport \\\"./styles.css\\\";\\n\\nimport App from \\\"./App\\\";\\n\\nconst root = createRoot(document.getElementById(\\\"root\\\"));\\nroot.render(\\n  <StrictMode>\\n    <App />\\n  </StrictMode>\\n);\",\n        }, \"/public/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <title>Document</title>\\n  </head>\\n  <body>\\n    <div id=\\\"root\\\"></div>\\n  </body>\\n</html>\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {\n                    react: \"^18.0.0\",\n                    \"react-dom\": \"^18.0.0\",\n                    \"react-scripts\": \"^4.0.0\",\n                },\n                devDependencies: {\n                    \"@types/react\": \"^18.0.0\",\n                    \"@types/react-dom\": \"^18.0.0\",\n                    typescript: \"^4.0.0\",\n                },\n                main: \"/index.tsx\",\n            }),\n        } }),\n    main: \"/App.tsx\",\n    environment: \"create-react-app\",\n};\n\nvar SOLID_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/App.tsx\": {\n            code: \"import { Component } from \\\"solid-js\\\";\\n\\nconst App: Component = () => {\\n  return <h1>Hello world</h1>\\n};\\n\\nexport default App;\",\n        }, \"/index.tsx\": {\n            code: \"import { render } from \\\"solid-js/web\\\";\\nimport App from \\\"./App\\\";\\n\\nimport \\\"./styles.css\\\";\\n\\nrender(() => <App />, document.getElementById(\\\"app\\\"));\",\n        }, \"/index.html\": {\n            code: \"<html>\\n<head>\\n  <title>Parcel Sandbox</title>\\n  <meta charset=\\\"UTF-8\\\" />\\n</head>\\n<body>\\n  <div id=\\\"app\\\"></div>\\n  <script src=\\\"src/index.tsx\\\"></script>\\n</body>\\n</html>\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {\n                    \"solid-js\": \"1.3.15\",\n                },\n                main: \"/index.tsx\",\n            }),\n        } }),\n    main: \"/App.tsx\",\n    environment: \"solid\",\n};\n\nvar SVELTE_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/App.svelte\": {\n            code: \"<style>\\n  h1 {\\n    font-size: 1.5rem;\\n  }\\n</style>\\n\\n<script>\\n  let name = 'world';\\n</script>\\n\\n<main>\\n  <h1>Hello {name}</h1>\\n</main>\",\n        }, \"/index.js\": {\n            code: \"import App from \\\"./App.svelte\\\";\\nimport \\\"./styles.css\\\";\\n\\nconst app = new App({\\n  target: document.body\\n});\\n\\nexport default app;\\n      \",\n        }, \"/public/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html>\\n  <head>\\n    <meta charset=\\\"utf8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width\\\" />\\n\\n    <title>Svelte app</title>\\n\\n    <link rel=\\\"stylesheet\\\" href=\\\"public/bundle.css\\\" />\\n  </head>\\n\\n  <body>\\n    <script src=\\\"bundle.js\\\"></script>\\n  </body>\\n</html>\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {\n                    svelte: \"^3.0.0\",\n                },\n                main: \"/index.js\",\n            }),\n        } }),\n    main: \"/App.svelte\",\n    environment: \"svelte\",\n};\n\nvar TEST_TYPESCRIPT_TEMPLATE = {\n    files: {\n        \"tsconfig.json\": {\n            code: \"{\\n  \\\"include\\\": [\\n    \\\"./**/*\\\"\\n  ],\\n  \\\"compilerOptions\\\": {\\n    \\\"strict\\\": true,\\n    \\\"esModuleInterop\\\": true,\\n    \\\"lib\\\": [ \\\"dom\\\", \\\"es2015\\\" ],\\n    \\\"jsx\\\": \\\"react-jsx\\\"\\n  }\\n}\",\n        },\n        \"/add.ts\": {\n            code: \"export const add = (a: number, b: number): number => a + b;\",\n        },\n        \"/add.test.ts\": {\n            code: \"import { add } from './add';\\n\\ndescribe('add', () => {\\n  test('Commutative Law of Addition', () => {\\n    expect(add(1, 2)).toBe(add(2, 1));\\n  });\\n});\",\n        },\n        \"package.json\": {\n            code: JSON.stringify({\n                dependencies: {},\n                devDependencies: { typescript: \"^4.0.0\" },\n                main: \"/add.ts\",\n            }),\n        },\n    },\n    main: \"/add.test.ts\",\n    environment: \"parcel\",\n    mode: \"tests\",\n};\n\nvar VANILLA_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/index.js\": {\n            code: \"import \\\"./styles.css\\\";\\n\\ndocument.getElementById(\\\"app\\\").innerHTML = `\\n<h1>Hello world</h1>\\n`;\\n\",\n        }, \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html>\\n\\n<head>\\n  <title>Parcel Sandbox</title>\\n  <meta charset=\\\"UTF-8\\\" />\\n</head>\\n\\n<body>\\n  <div id=\\\"app\\\"></div>\\n\\n  <script src=\\\"index.js\\\">\\n  </script>\\n</body>\\n\\n</html>\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {},\n                main: \"/index.js\",\n            }),\n        } }),\n    main: \"/index.js\",\n    environment: \"parcel\",\n};\n\nvar VANILLA_TYPESCRIPT_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"tsconfig.json\": {\n            code: \"{\\n  \\\"compilerOptions\\\": {\\n    \\\"strict\\\": true,\\n    \\\"module\\\": \\\"commonjs\\\",\\n    \\\"jsx\\\": \\\"preserve\\\",\\n    \\\"esModuleInterop\\\": true,\\n    \\\"sourceMap\\\": true,\\n    \\\"allowJs\\\": true,\\n    \\\"lib\\\": [\\n      \\\"es6\\\",\\n      \\\"dom\\\"\\n    ],\\n    \\\"rootDir\\\": \\\"src\\\",\\n    \\\"moduleResolution\\\": \\\"node\\\"\\n  }\\n}\",\n        }, \"/index.ts\": {\n            code: \"import \\\"./styles.css\\\";\\n\\ndocument.getElementById(\\\"app\\\").innerHTML = `\\n<h1>Hello world</h1>\\n`;\\n\",\n        }, \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html>\\n\\n<head>\\n  <title>Parcel Sandbox</title>\\n  <meta charset=\\\"UTF-8\\\" />\\n</head>\\n\\n<body>\\n  <div id=\\\"app\\\"></div>\\n\\n  <script src=\\\"index.ts\\\">\\n  </script>\\n</body>\\n\\n</html>\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {},\n                devDependencies: {\n                    typescript: \"^4.0.0\",\n                },\n                main: \"/index.ts\",\n            }),\n        } }),\n    main: \"/index.ts\",\n    environment: \"parcel\",\n};\n\nvar VUE_TEMPLATE = {\n    files: {\n        \"/src/styles.css\": commonFiles[\"/styles.css\"],\n        \"/src/App.vue\": {\n            code: \"<template>\\n  <h1>Hello {{ msg }}</h1>\\n</template>\\n\\n<script setup>\\nimport { ref } from 'vue';\\nconst msg = ref('world');\\n</script>\",\n        },\n        \"/src/main.js\": {\n            code: \"import { createApp } from 'vue'\\nimport App from './App.vue'\\nimport \\\"./styles.css\\\";\\n\\ncreateApp(App).mount('#app')\\n\",\n        },\n        \"/public/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"utf-8\\\" />\\n    <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"IE=edge\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1.0\\\" />\\n    <title>codesandbox</title>\\n  </head>\\n  <body>\\n    <noscript>\\n      <strong\\n        >We're sorry but codesandbox doesn't work properly without JavaScript\\n        enabled. Please enable it to continue.</strong\\n      >\\n    </noscript>\\n    <div id=\\\"app\\\"></div>\\n    <!-- built files will be auto injected -->\\n  </body>\\n</html>\\n\",\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                name: \"vue3\",\n                version: \"0.1.0\",\n                private: true,\n                main: \"/src/main.js\",\n                scripts: {\n                    serve: \"vue-cli-service serve\",\n                    build: \"vue-cli-service build\",\n                },\n                dependencies: {\n                    \"core-js\": \"^3.26.1\",\n                    vue: \"^3.2.45\",\n                },\n                devDependencies: {\n                    \"@vue/cli-plugin-babel\": \"^5.0.8\",\n                    \"@vue/cli-service\": \"^5.0.8\",\n                },\n            }),\n        },\n    },\n    main: \"/src/App.vue\",\n    environment: \"vue-cli\",\n};\n\nvar VUE_TS_TEMPLATE = {\n    files: {\n        \"/src/styles.css\": commonFiles[\"/styles.css\"],\n        \"/src/App.vue\": {\n            code: \"<template>\\n  <h1>Hello {{ msg }}</h1>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nconst msg = ref<string>('world');\\n</script>\",\n        },\n        \"/src/main.ts\": {\n            code: \"import { createApp } from 'vue'\\nimport App from './App.vue'\\nimport \\\"./styles.css\\\";\\n\\ncreateApp(App).mount('#app')\\n\",\n        },\n        \"/src/shims-vue.d.ts\": \"/* eslint-disable */\\ndeclare module \\\"*.vue\\\" {\\n  import type { DefineComponent } from \\\"vue\\\";\\n  const component: DefineComponent<{}, {}, any>;\\n  export default component;\\n}\",\n        \"/public/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"utf-8\\\" />\\n    <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"IE=edge\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1.0\\\" />\\n    <title>codesandbox</title>\\n  </head>\\n  <body>\\n    <noscript>\\n      <strong\\n        >We're sorry but codesandbox doesn't work properly without JavaScript\\n        enabled. Please enable it to continue.</strong\\n      >\\n    </noscript>\\n    <div id=\\\"app\\\"></div>\\n    <!-- built files will be auto injected -->\\n  </body>\\n</html>\\n\",\n        },\n        \"/package.json\": {\n            code: JSON.stringify({\n                name: \"vue3-ts\",\n                version: \"0.1.0\",\n                private: true,\n                main: \"/src/main.ts\",\n                scripts: {\n                    serve: \"vue-cli-service serve\",\n                    build: \"vue-cli-service build\",\n                },\n                dependencies: {\n                    \"core-js\": \"^3.26.1\",\n                    vue: \"^3.2.45\",\n                },\n                devDependencies: {\n                    \"@vue/cli-plugin-babel\": \"^5.0.8\",\n                    \"@vue/cli-plugin-typescript\": \"^5.0.8\",\n                    \"@vue/cli-service\": \"^5.0.8\",\n                    typescript: \"^4.9.3\",\n                },\n            }),\n        },\n        \"/tsconfig.json\": {\n            code: JSON.stringify({\n                compilerOptions: {\n                    target: \"esnext\",\n                    module: \"esnext\",\n                    strict: true,\n                    jsx: \"preserve\",\n                    moduleResolution: \"node\",\n                    experimentalDecorators: true,\n                    skipLibCheck: true,\n                    esModuleInterop: true,\n                    allowSyntheticDefaultImports: true,\n                    forceConsistentCasingInFileNames: true,\n                    useDefineForClassFields: true,\n                    sourceMap: false,\n                    baseUrl: \".\",\n                    types: [\"webpack-env\"],\n                    paths: {\n                        \"@/*\": [\"src/*\"],\n                    },\n                    lib: [\"esnext\", \"dom\", \"dom.iterable\", \"scripthost\"],\n                },\n                include: [\n                    \"src/**/*.ts\",\n                    \"src/**/*.tsx\",\n                    \"src/**/*.vue\",\n                    \"tests/**/*.ts\",\n                    \"tests/**/*.tsx\",\n                ],\n                exclude: [\"node_modules\"],\n            }),\n        },\n    },\n    main: \"/src/App.vue\",\n    environment: \"vue-cli\",\n};\n\nvar STATIC_TEMPLATE = {\n    files: __assign(__assign({}, commonFiles), { \"/index.html\": {\n            code: \"<!DOCTYPE html>\\n<html>\\n\\n<head>\\n  <title>Parcel Sandbox</title>\\n  <meta charset=\\\"UTF-8\\\" />\\n  <link rel=\\\"stylesheet\\\" href=\\\"/styles.css\\\" />\\n</head>\\n\\n<body>\\n  <h1>Hello world</h1>\\n</body>\\n\\n</html>\",\n        }, \"/package.json\": {\n            code: JSON.stringify({\n                dependencies: {},\n                main: \"/index.html\",\n            }),\n        } }),\n    main: \"/index.html\",\n    environment: \"static\",\n};\n\nvar SANDBOX_TEMPLATES = {\n    static: STATIC_TEMPLATE,\n    angular: ANGULAR_TEMPLATE,\n    react: REACT_TEMPLATE,\n    \"react-ts\": REACT_TYPESCRIPT_TEMPLATE,\n    solid: SOLID_TEMPLATE,\n    svelte: SVELTE_TEMPLATE,\n    \"test-ts\": TEST_TYPESCRIPT_TEMPLATE,\n    \"vanilla-ts\": VANILLA_TYPESCRIPT_TEMPLATE,\n    vanilla: VANILLA_TEMPLATE,\n    vue: VUE_TEMPLATE,\n    \"vue-ts\": VUE_TS_TEMPLATE,\n    node: NODE_TEMPLATE,\n    nextjs: NEXTJS_TEMPLATE,\n    vite: VITE_TEMPLATE,\n    \"vite-react\": VITE_REACT_TEMPLATE,\n    \"vite-react-ts\": VITE_REACT_TS_TEMPLATE,\n    \"vite-preact\": VITE_PREACT_TEMPLATE,\n    \"vite-preact-ts\": VITE_PREACT_TS_TEMPLATE,\n    \"vite-vue\": VITE_VUE_TEMPLATE,\n    \"vite-vue-ts\": VITE_VUE_TS_TEMPLATE,\n    \"vite-svelte\": VITE_SVELTE_TEMPLATE,\n    \"vite-svelte-ts\": VITE_SVELTE_TS_TEMPLATE,\n    astro: ASTRO_TEMPLATE,\n};\n\n/**\n * Creates a standard sandpack state given the setup,\n * options, and files props. Using this function is\n * the reliable way to ensure a consistent and predictable\n * sandpack-content throughout application\n */\nvar getSandpackStateFromProps = function (props) {\n    var _a, _b, _c, _d, _e, _f;\n    var normalizedFilesPath = (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__.f)(props.files);\n    // Merge predefined template with custom setup\n    var projectSetup = combineTemplateFilesToSetup({\n        template: props.template,\n        customSetup: props.customSetup,\n        files: normalizedFilesPath,\n    });\n    // visibleFiles and activeFile override the setup flags\n    var visibleFiles = (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__.f)((_b = (_a = props.options) === null || _a === void 0 ? void 0 : _a.visibleFiles) !== null && _b !== void 0 ? _b : []);\n    var activeFile = ((_c = props.options) === null || _c === void 0 ? void 0 : _c.activeFile)\n        ? resolveFile((_d = props.options) === null || _d === void 0 ? void 0 : _d.activeFile, projectSetup.files)\n        : undefined;\n    if (visibleFiles.length === 0 && normalizedFilesPath) {\n        // extract open and active files from the custom input files\n        Object.keys(normalizedFilesPath).forEach(function (filePath) {\n            var file = normalizedFilesPath[filePath];\n            if (typeof file === \"string\") {\n                visibleFiles.push(filePath);\n                return;\n            }\n            if (!activeFile && file.active) {\n                activeFile = filePath;\n                if (file.hidden === true) {\n                    // active file needs to be available even if someone sets it as hidden by accident\n                    visibleFiles.push(filePath);\n                }\n            }\n            if (!file.hidden) {\n                visibleFiles.push(filePath);\n            }\n        });\n    }\n    if (visibleFiles.length === 0) {\n        // If no files are received, use the project setup / template\n        visibleFiles = [projectSetup.main];\n    }\n    // Make sure it resolves the entry file\n    if (projectSetup.entry && !projectSetup.files[projectSetup.entry]) {\n        /* eslint-disable */\n        // @ts-ignore\n        projectSetup.entry = resolveFile(projectSetup.entry, projectSetup.files);\n        /* eslint-enable */\n    }\n    if (!activeFile && projectSetup.main) {\n        activeFile = projectSetup.main;\n    }\n    // If no activeFile is specified, use the first open file\n    if (!activeFile || !projectSetup.files[activeFile]) {\n        activeFile = visibleFiles[0];\n    }\n    // If for whatever reason the active path was not set as open, set it\n    if (!visibleFiles.includes(activeFile)) {\n        visibleFiles.push(activeFile);\n    }\n    var files = (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__.d)(projectSetup.files, (_e = projectSetup.dependencies) !== null && _e !== void 0 ? _e : {}, (_f = projectSetup.devDependencies) !== null && _f !== void 0 ? _f : {}, projectSetup.entry);\n    var existOpenPath = visibleFiles.filter(function (path) { return files[path]; });\n    return {\n        visibleFiles: existOpenPath,\n        /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */\n        activeFile: activeFile,\n        files: files,\n        environment: projectSetup.environment,\n        shouldUpdatePreview: true,\n    };\n};\n/**\n * Given a file tree and a file, it uses a couple of rules\n * to tweak the filename to match with one of the inside of file tree\n *\n * - Adds the leading slash;\n * - Tries to find the same filename with different extensions (js only);\n * - Returns `null` if it doesn't satisfy any rule\n */\nvar resolveFile = function (path, files) {\n    var normalizedFilesPath = (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__.f)(files);\n    var normalizedPath = (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__.f)(path);\n    if (normalizedPath in normalizedFilesPath) {\n        return normalizedPath;\n    }\n    if (!path) {\n        return null;\n    }\n    var resolvedPath = null;\n    var index = 0;\n    var strategies = [\".js\", \".jsx\", \".ts\", \".tsx\"];\n    while (!resolvedPath && index < strategies.length) {\n        var removeExtension = normalizedPath.split(\".\")[0];\n        var attemptPath = \"\".concat(removeExtension).concat(strategies[index]);\n        if (normalizedFilesPath[attemptPath] !== undefined) {\n            resolvedPath = attemptPath;\n        }\n        index++;\n    }\n    return resolvedPath;\n};\n/**\n * The template is predefined (eg: react, vue, vanilla)\n * The setup can overwrite anything from the template\n * (eg: files, dependencies, environment, etc.)\n */\nvar combineTemplateFilesToSetup = function (_a) {\n    var files = _a.files, template = _a.template, customSetup = _a.customSetup;\n    if (!template) {\n        // If not input, default to vanilla\n        if (!customSetup) {\n            var defaultTemplate = SANDBOX_TEMPLATES.vanilla;\n            return __assign(__assign({}, defaultTemplate), { files: __assign(__assign({}, defaultTemplate.files), convertedFilesToBundlerFiles(files)) });\n        }\n        if (!files || Object.keys(files).length === 0) {\n            throw new Error(\"[sandpack-react]: without a template, you must pass at least one file\");\n        }\n        // If not template specified, use the setup entirely\n        return __assign(__assign({}, customSetup), { files: convertedFilesToBundlerFiles(files) });\n    }\n    var baseTemplate = SANDBOX_TEMPLATES[template];\n    if (!baseTemplate) {\n        throw new Error(\"[sandpack-react]: invalid template \\\"\".concat(template, \"\\\" provided\"));\n    }\n    // If no setup and not files, the template is used entirely\n    if (!customSetup && !files) {\n        return baseTemplate;\n    }\n    // Merge the setup on top of the template\n    return {\n        /**\n         * The input setup might have files in the simple form Record<string, string>\n         * so we convert them to the sandbox template format\n         */\n        files: convertedFilesToBundlerFiles(__assign(__assign({}, baseTemplate.files), files)),\n        /**\n         * Merge template dependencies and user custom dependencies.\n         * As a rule, the custom dependencies must overwrite the template ones.\n         */\n        dependencies: __assign(__assign({}, baseTemplate.dependencies), customSetup === null || customSetup === void 0 ? void 0 : customSetup.dependencies),\n        devDependencies: __assign(__assign({}, baseTemplate.devDependencies), customSetup === null || customSetup === void 0 ? void 0 : customSetup.devDependencies),\n        entry: (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__.f)(customSetup === null || customSetup === void 0 ? void 0 : customSetup.entry),\n        main: baseTemplate.main,\n        environment: (customSetup === null || customSetup === void 0 ? void 0 : customSetup.environment) || baseTemplate.environment,\n    };\n};\n/**\n * Transform an regular object, which contain files to\n * an object that sandpack-client can understand\n *\n * From: Record<string, string>\n * To: Record<string, { code: string }>\n */\nvar convertedFilesToBundlerFiles = function (files) {\n    if (!files)\n        return {};\n    return Object.keys(files).reduce(function (acc, key) {\n        if (typeof files[key] === \"string\") {\n            acc[key] = { code: files[key] };\n        }\n        else {\n            acc[key] = files[key];\n        }\n        return acc;\n    }, {});\n};\n\nvar useAppState = function (props, files) {\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        editorState: \"pristine\",\n        teamId: props.teamId,\n    }), state = _a[0], setState = _a[1];\n    var originalStateFromProps = getSandpackStateFromProps(props);\n    var editorState = (0,dequal__WEBPACK_IMPORTED_MODULE_2__.dequal)(originalStateFromProps.files, files)\n        ? \"pristine\"\n        : \"dirty\";\n    if (editorState !== state.editorState) {\n        setState(function (prev) { return (__assign(__assign({}, prev), { editorState: editorState })); });\n    }\n    return state;\n};\n\nvar BUNDLER_TIMEOUT = 40000;\nvar useClient = function (_a, filesState) {\n    var _b, _c, _d;\n    var options = _a.options, customSetup = _a.customSetup, teamId = _a.teamId, sandboxId = _a.sandboxId;\n    options !== null && options !== void 0 ? options : (options = {});\n    customSetup !== null && customSetup !== void 0 ? customSetup : (customSetup = {});\n    var initModeFromProps = (options === null || options === void 0 ? void 0 : options.initMode) || \"lazy\";\n    var _e = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        startRoute: options === null || options === void 0 ? void 0 : options.startRoute,\n        bundlerState: undefined,\n        error: null,\n        initMode: initModeFromProps,\n        reactDevTools: undefined,\n        status: ((_b = options === null || options === void 0 ? void 0 : options.autorun) !== null && _b !== void 0 ? _b : true) ? \"initial\" : \"idle\",\n    }), state = _e[0], setState = _e[1];\n    /**\n     * Refs\n     */\n    var intersectionObserver = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    var lazyAnchorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    var registeredIframes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({});\n    var clients = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({});\n    var timeoutHook = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    var unsubscribeClientListeners = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({});\n    var unsubscribe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n    var queuedListeners = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({ global: {} });\n    var debounceHook = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n    var prevEnvironment = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(filesState.environment);\n    /**\n     * Callbacks\n     */\n    var createClient = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (iframe, clientId, clientPropsOverride) { return __awaiter(void 0, void 0, void 0, function () {\n        var timeOut, shouldSetTimeout, client, globalListeners;\n        var _a, _b, _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    // Clean up any existing clients that\n                    // have been created with the given id\n                    if (clients.current[clientId]) {\n                        clients.current[clientId].destroy();\n                    }\n                    options !== null && options !== void 0 ? options : (options = {});\n                    customSetup !== null && customSetup !== void 0 ? customSetup : (customSetup = {});\n                    timeOut = (_a = options === null || options === void 0 ? void 0 : options.bundlerTimeOut) !== null && _a !== void 0 ? _a : BUNDLER_TIMEOUT;\n                    if (timeoutHook.current) {\n                        clearTimeout(timeoutHook.current);\n                    }\n                    shouldSetTimeout = typeof unsubscribe.current !== \"function\";\n                    if (shouldSetTimeout) {\n                        timeoutHook.current = setTimeout(function () {\n                            unregisterAllClients();\n                            setState(function (prev) { return (__assign(__assign({}, prev), { status: \"timeout\" })); });\n                        }, timeOut);\n                    }\n                    return [4 /*yield*/, (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_10__.loadSandpackClient)(iframe, {\n                            files: filesState.files,\n                            template: filesState.environment,\n                        }, {\n                            externalResources: options.externalResources,\n                            bundlerURL: options.bundlerURL,\n                            startRoute: (_b = clientPropsOverride === null || clientPropsOverride === void 0 ? void 0 : clientPropsOverride.startRoute) !== null && _b !== void 0 ? _b : options.startRoute,\n                            fileResolver: options.fileResolver,\n                            skipEval: (_c = options.skipEval) !== null && _c !== void 0 ? _c : false,\n                            logLevel: options.logLevel,\n                            showOpenInCodeSandbox: false,\n                            showErrorScreen: true,\n                            showLoadingScreen: false,\n                            reactDevTools: state.reactDevTools,\n                            customNpmRegistries: customSetup === null || customSetup === void 0 ? void 0 : customSetup.npmRegistries,\n                            teamId: teamId,\n                            sandboxId: sandboxId,\n                        })];\n                case 1:\n                    client = _d.sent();\n                    if (typeof unsubscribe.current !== \"function\") {\n                        unsubscribe.current = client.listen(handleMessage);\n                    }\n                    unsubscribeClientListeners.current[clientId] =\n                        unsubscribeClientListeners.current[clientId] || {};\n                    /**\n                     * Register any potential listeners that subscribed before sandpack ran\n                     */\n                    if (queuedListeners.current[clientId]) {\n                        Object.keys(queuedListeners.current[clientId]).forEach(function (listenerId) {\n                            var listener = queuedListeners.current[clientId][listenerId];\n                            var unsubscribe = client.listen(listener);\n                            unsubscribeClientListeners.current[clientId][listenerId] =\n                                unsubscribe;\n                        });\n                        // Clear the queued listeners after they were registered\n                        queuedListeners.current[clientId] = {};\n                    }\n                    globalListeners = Object.entries(queuedListeners.current.global);\n                    globalListeners.forEach(function (_a) {\n                        var listenerId = _a[0], listener = _a[1];\n                        var unsubscribe = client.listen(listener);\n                        unsubscribeClientListeners.current[clientId][listenerId] = unsubscribe;\n                        /**\n                         * Important: Do not clean the global queue\n                         * Instead of cleaning the queue, keep it there for the\n                         * following clients that might be created\n                         */\n                    });\n                    clients.current[clientId] = client;\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [filesState.environment, filesState.files, state.reactDevTools]);\n    var unregisterAllClients = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () {\n        Object.keys(clients.current).map(unregisterBundler);\n        if (typeof unsubscribe.current === \"function\") {\n            unsubscribe.current();\n            unsubscribe.current = undefined;\n        }\n    }, []);\n    var runSandpack = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, Promise.all(Object.entries(registeredIframes.current).map(function (_a) {\n                        var clientId = _a[0], _b = _a[1], iframe = _b.iframe, _c = _b.clientPropsOverride, clientPropsOverride = _c === void 0 ? {} : _c;\n                        return __awaiter(void 0, void 0, void 0, function () {\n                            return __generator(this, function (_d) {\n                                switch (_d.label) {\n                                    case 0: return [4 /*yield*/, createClient(iframe, clientId, clientPropsOverride)];\n                                    case 1:\n                                        _d.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        });\n                    }))];\n                case 1:\n                    _a.sent();\n                    setState(function (prev) { return (__assign(__assign({}, prev), { error: null, status: \"running\" })); });\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [createClient]);\n    var initializeSandpackIframe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () {\n        var _a, _b, _c;\n        var autorun = (_a = options === null || options === void 0 ? void 0 : options.autorun) !== null && _a !== void 0 ? _a : true;\n        if (!autorun) {\n            return;\n        }\n        var observerOptions = (_b = options === null || options === void 0 ? void 0 : options.initModeObserverOptions) !== null && _b !== void 0 ? _b : {\n            rootMargin: \"1000px 0px\",\n        };\n        if (intersectionObserver.current && lazyAnchorRef.current) {\n            (_c = intersectionObserver.current) === null || _c === void 0 ? void 0 : _c.unobserve(lazyAnchorRef.current);\n        }\n        if (lazyAnchorRef.current && state.initMode === \"lazy\") {\n            // If any component registered a lazy anchor ref component, use that for the intersection observer\n            intersectionObserver.current = new IntersectionObserver(function (entries) {\n                var _a;\n                if (entries.some(function (entry) { return entry.isIntersecting; })) {\n                    runSandpack();\n                    if (lazyAnchorRef.current) {\n                        (_a = intersectionObserver.current) === null || _a === void 0 ? void 0 : _a.unobserve(lazyAnchorRef.current);\n                    }\n                }\n            }, observerOptions);\n            intersectionObserver.current.observe(lazyAnchorRef.current);\n        }\n        else if (lazyAnchorRef.current && state.initMode === \"user-visible\") {\n            intersectionObserver.current = new IntersectionObserver(function (entries) {\n                if (entries.some(function (entry) { return entry.isIntersecting; })) {\n                    runSandpack();\n                }\n                else {\n                    Object.keys(clients.current).map(unregisterBundler);\n                    unregisterAllClients();\n                }\n            }, observerOptions);\n            intersectionObserver.current.observe(lazyAnchorRef.current);\n        }\n        else {\n            runSandpack();\n        }\n    }, [\n        options === null || options === void 0 ? void 0 : options.autorun,\n        options === null || options === void 0 ? void 0 : options.initModeObserverOptions,\n        runSandpack,\n        state.initMode,\n        unregisterAllClients,\n    ]);\n    var registerBundler = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (iframe, clientId, clientPropsOverride) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    // Store the iframe info so it can be\n                    // used later to manually run sandpack\n                    registeredIframes.current[clientId] = {\n                        iframe: iframe,\n                        clientPropsOverride: clientPropsOverride,\n                    };\n                    if (!(state.status === \"running\")) return [3 /*break*/, 2];\n                    return [4 /*yield*/, createClient(iframe, clientId, clientPropsOverride)];\n                case 1:\n                    _a.sent();\n                    _a.label = 2;\n                case 2: return [2 /*return*/];\n            }\n        });\n    }); }, [createClient, state.status]);\n    var unregisterBundler = function (clientId) {\n        var _a, _b;\n        var client = clients.current[clientId];\n        if (client) {\n            client.destroy();\n            (_a = client.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.location.replace(\"about:blank\");\n            client.iframe.removeAttribute(\"src\");\n            delete clients.current[clientId];\n        }\n        delete registeredIframes.current[clientId];\n        if (timeoutHook.current) {\n            clearTimeout(timeoutHook.current);\n        }\n        var unsubscribeQueuedClients = Object.values((_b = unsubscribeClientListeners.current[clientId]) !== null && _b !== void 0 ? _b : {});\n        // Unsubscribing all listener registered\n        unsubscribeQueuedClients.forEach(function (listenerOfClient) {\n            var listenerFunctions = Object.values(listenerOfClient);\n            listenerFunctions.forEach(function (unsubscribe) { return unsubscribe(); });\n        });\n        // Keep running if it still have clients\n        var status = Object.keys(clients.current).length > 0 ? \"running\" : \"idle\";\n        setState(function (prev) { return (__assign(__assign({}, prev), { status: status })); });\n    };\n    var handleMessage = function (msg) {\n        if (msg.type === \"start\") {\n            setState(function (prev) { return (__assign(__assign({}, prev), { error: null })); });\n        }\n        else if (msg.type === \"state\") {\n            setState(function (prev) { return (__assign(__assign({}, prev), { bundlerState: msg.state })); });\n        }\n        else if ((msg.type === \"done\" && !msg.compilatonError) ||\n            msg.type === \"connected\") {\n            if (timeoutHook.current) {\n                clearTimeout(timeoutHook.current);\n            }\n            setState(function (prev) { return (__assign(__assign({}, prev), { error: null })); });\n        }\n        else if (msg.type === \"action\" && msg.action === \"show-error\") {\n            setState(function (prev) { return (__assign(__assign({}, prev), { error: (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__.e)(msg) })); });\n        }\n        else if (msg.type === \"action\" &&\n            msg.action === \"notification\" &&\n            msg.notificationType === \"error\") {\n            setState(function (prev) { return (__assign(__assign({}, prev), { error: { message: msg.title } })); });\n        }\n    };\n    var registerReactDevTools = function (value) {\n        setState(function (prev) { return (__assign(__assign({}, prev), { reactDevTools: value })); });\n    };\n    var recompileMode = (_c = options === null || options === void 0 ? void 0 : options.recompileMode) !== null && _c !== void 0 ? _c : \"delayed\";\n    var recompileDelay = (_d = options === null || options === void 0 ? void 0 : options.recompileDelay) !== null && _d !== void 0 ? _d : 500;\n    var dispatchMessage = function (message, clientId) {\n        if (state.status !== \"running\") {\n            console.warn(\"[sandpack-react]: dispatch cannot be called while in idle mode\");\n            return;\n        }\n        if (clientId) {\n            clients.current[clientId].dispatch(message);\n        }\n        else {\n            Object.values(clients.current).forEach(function (client) {\n                client.dispatch(message);\n            });\n        }\n    };\n    var addListener = function (listener, clientId) {\n        if (clientId) {\n            if (clients.current[clientId]) {\n                var unsubscribeListener = clients.current[clientId].listen(listener);\n                return unsubscribeListener;\n            }\n            else {\n                /**\n                 * When listeners are added before the client is instantiated, they are stored with an unique id\n                 * When the client is eventually instantiated, the listeners are registered on the spot\n                 * Their unsubscribe functions are stored in unsubscribeClientListeners for future cleanup\n                 */\n                var listenerId_1 = generateRandomId();\n                queuedListeners.current[clientId] =\n                    queuedListeners.current[clientId] || {};\n                unsubscribeClientListeners.current[clientId] =\n                    unsubscribeClientListeners.current[clientId] || {};\n                queuedListeners.current[clientId][listenerId_1] = listener;\n                var unsubscribeListener = function () {\n                    if (queuedListeners.current[clientId][listenerId_1]) {\n                        /**\n                         * Unsubscribe was called before the client was instantiated\n                         * common example - a component with autorun=false that unmounted\n                         */\n                        delete queuedListeners.current[clientId][listenerId_1];\n                    }\n                    else if (unsubscribeClientListeners.current[clientId][listenerId_1]) {\n                        /**\n                         * unsubscribe was called for a listener that got added before the client was instantiated\n                         * call the unsubscribe function and remove it from memory\n                         */\n                        unsubscribeClientListeners.current[clientId][listenerId_1]();\n                        delete unsubscribeClientListeners.current[clientId][listenerId_1];\n                    }\n                };\n                return unsubscribeListener;\n            }\n        }\n        else {\n            // Push to the **global** queue\n            var listenerId_2 = generateRandomId();\n            queuedListeners.current.global[listenerId_2] = listener;\n            // Add to the current clients\n            var clientsList = Object.values(clients.current);\n            var currentClientUnsubscribeListeners_1 = clientsList.map(function (client) {\n                return client.listen(listener);\n            });\n            var unsubscribeListener = function () {\n                // Unsubscribing from the clients already created\n                currentClientUnsubscribeListeners_1.forEach(function (unsubscribe) {\n                    return unsubscribe();\n                });\n                delete queuedListeners.current.global[listenerId_2];\n                // Unsubscribe in case it was added later from `global`\n                Object.values(unsubscribeClientListeners.current).forEach(function (client) {\n                    var _a;\n                    (_a = client === null || client === void 0 ? void 0 : client[listenerId_2]) === null || _a === void 0 ? void 0 : _a.call(client);\n                });\n            };\n            return unsubscribeListener;\n        }\n    };\n    /**\n     * Effects\n     */\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function watchFileChanges() {\n        if (state.status !== \"running\" || !filesState.shouldUpdatePreview) {\n            return;\n        }\n        /**\n         * When the environment changes, Sandpack needs to make sure\n         * to create a new client and the proper bundler\n         */\n        if (prevEnvironment.current !== filesState.environment) {\n            prevEnvironment.current = filesState.environment;\n            Object.entries(clients.current).forEach(function (_a) {\n                var key = _a[0], client = _a[1];\n                registerBundler(client.iframe, key);\n            });\n        }\n        if (recompileMode === \"immediate\") {\n            Object.values(clients.current).forEach(function (client) {\n                /**\n                 * Avoid concurrency\n                 */\n                if (client.status === \"done\") {\n                    client.updateSandbox({\n                        files: filesState.files,\n                        template: filesState.environment,\n                    });\n                }\n            });\n        }\n        if (recompileMode === \"delayed\") {\n            if (typeof window === \"undefined\")\n                return;\n            window.clearTimeout(debounceHook.current);\n            debounceHook.current = window.setTimeout(function () {\n                Object.values(clients.current).forEach(function (client) {\n                    /**\n                     * Avoid concurrency\n                     */\n                    if (client.status === \"done\") {\n                        client.updateSandbox({\n                            files: filesState.files,\n                            template: filesState.environment,\n                        });\n                    }\n                });\n            }, recompileDelay);\n        }\n        return function () {\n            window.clearTimeout(debounceHook.current);\n        };\n    }, [\n        filesState.files,\n        filesState.environment,\n        filesState.shouldUpdatePreview,\n        recompileDelay,\n        recompileMode,\n        registerBundler,\n        state.status,\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function watchInitMode() {\n        if (initModeFromProps !== state.initMode) {\n            setState(function (prev) { return (__assign(__assign({}, prev), { initMode: initModeFromProps })); });\n            initializeSandpackIframe();\n        }\n    }, [initModeFromProps, initializeSandpackIframe, state.initMode]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n        return function unmountClient() {\n            if (typeof unsubscribe.current === \"function\") {\n                unsubscribe.current();\n            }\n            if (timeoutHook.current) {\n                clearTimeout(timeoutHook.current);\n            }\n            if (debounceHook.current) {\n                clearTimeout(debounceHook.current);\n            }\n            if (intersectionObserver.current) {\n                intersectionObserver.current.disconnect();\n            }\n        };\n    }, []);\n    return [\n        state,\n        {\n            clients: clients.current,\n            initializeSandpackIframe: initializeSandpackIframe,\n            runSandpack: runSandpack,\n            registerBundler: registerBundler,\n            unregisterBundler: unregisterBundler,\n            registerReactDevTools: registerReactDevTools,\n            addListener: addListener,\n            dispatchMessage: dispatchMessage,\n            lazyAnchorRef: lazyAnchorRef,\n            unsubscribeClientListenersRef: unsubscribeClientListeners,\n            queuedListenersRef: queuedListeners,\n        },\n    ];\n};\n\nvar useFiles = function (props) {\n    var originalStateFromProps = getSandpackStateFromProps(props);\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(originalStateFromProps), state = _a[0], setState = _a[1];\n    var isMountedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n        if (isMountedRef.current) {\n            setState(getSandpackStateFromProps(props));\n        }\n        else {\n            isMountedRef.current = true;\n        }\n    }, [props.files, props.customSetup, props.template]);\n    var updateFile = function (pathOrFiles, code, shouldUpdatePreview) {\n        if (shouldUpdatePreview === void 0) { shouldUpdatePreview = true; }\n        setState(function (prev) {\n            var _a;\n            var files = prev.files;\n            if (typeof pathOrFiles === \"string\" && typeof code === \"string\") {\n                files = __assign(__assign({}, files), (_a = {}, _a[pathOrFiles] = { code: code }, _a));\n            }\n            else if (typeof pathOrFiles === \"object\") {\n                files = __assign(__assign({}, files), convertedFilesToBundlerFiles(pathOrFiles));\n            }\n            return __assign(__assign({}, prev), { files: (0,_codesandbox_sandpack_client__WEBPACK_IMPORTED_MODULE_9__.f)(files), shouldUpdatePreview: shouldUpdatePreview });\n        });\n    };\n    var operations = {\n        openFile: function (path) {\n            setState(function (_a) {\n                var visibleFiles = _a.visibleFiles, rest = __rest(_a, [\"visibleFiles\"]);\n                var newPaths = visibleFiles.includes(path)\n                    ? visibleFiles\n                    : __spreadArray(__spreadArray([], visibleFiles, true), [path], false);\n                return __assign(__assign({}, rest), { activeFile: path, visibleFiles: newPaths });\n            });\n        },\n        resetFile: function (path) {\n            setState(function (prevState) {\n                var _a;\n                return (__assign(__assign({}, prevState), { files: __assign(__assign({}, prevState.files), (_a = {}, _a[path] = originalStateFromProps.files[path], _a)) }));\n            });\n        },\n        resetAllFiles: function () {\n            setState(function (prev) { return (__assign(__assign({}, prev), { files: originalStateFromProps.files })); });\n        },\n        setActiveFile: function (activeFile) {\n            if (state.files[activeFile]) {\n                setState(function (prev) { return (__assign(__assign({}, prev), { activeFile: activeFile })); });\n            }\n        },\n        updateCurrentFile: function (code, shouldUpdatePreview) {\n            if (shouldUpdatePreview === void 0) { shouldUpdatePreview = true; }\n            updateFile(state.activeFile, code, shouldUpdatePreview);\n        },\n        updateFile: updateFile,\n        addFile: updateFile,\n        closeFile: function (path) {\n            if (state.visibleFiles.length === 1) {\n                return;\n            }\n            setState(function (_a) {\n                var visibleFiles = _a.visibleFiles, activeFile = _a.activeFile, prev = __rest(_a, [\"visibleFiles\", \"activeFile\"]);\n                var indexOfRemovedPath = visibleFiles.indexOf(path);\n                var newPaths = visibleFiles.filter(function (openPath) { return openPath !== path; });\n                return __assign(__assign({}, prev), { activeFile: path === activeFile\n                        ? indexOfRemovedPath === 0\n                            ? visibleFiles[1]\n                            : visibleFiles[indexOfRemovedPath - 1]\n                        : activeFile, visibleFiles: newPaths });\n            });\n        },\n        deleteFile: function (path, shouldUpdatePreview) {\n            if (shouldUpdatePreview === void 0) { shouldUpdatePreview = true; }\n            setState(function (_a) {\n                var visibleFiles = _a.visibleFiles, files = _a.files, activeFile = _a.activeFile, rest = __rest(_a, [\"visibleFiles\", \"files\", \"activeFile\"]);\n                var newFiles = __assign({}, files);\n                delete newFiles[path];\n                var remainingVisibleFiles = visibleFiles.filter(function (openPath) { return openPath !== path; });\n                var deletedLastVisibleFile = remainingVisibleFiles.length === 0;\n                if (deletedLastVisibleFile) {\n                    var nextFile = Object.keys(files)[Object.keys(files).length - 1];\n                    return __assign(__assign({}, rest), { visibleFiles: [nextFile], activeFile: nextFile, files: newFiles, shouldUpdatePreview: shouldUpdatePreview });\n                }\n                return __assign(__assign({}, rest), { visibleFiles: remainingVisibleFiles, activeFile: path === activeFile\n                        ? remainingVisibleFiles[remainingVisibleFiles.length - 1]\n                        : activeFile, files: newFiles, shouldUpdatePreview: shouldUpdatePreview });\n            });\n        },\n    };\n    return [\n        __assign(__assign({}, state), { visibleFilesFromProps: originalStateFromProps.visibleFiles }),\n        operations,\n    ];\n};\n\nvar Sandpack$1 = react__WEBPACK_IMPORTED_MODULE_1__.createContext(null);\nvar SandpackProvider = function (props) {\n    var _a, _b;\n    var children = props.children, options = props.options, style = props.style, className = props.className, theme = props.theme;\n    var _c = useFiles(props), fileState = _c[0], fileOperations = _c[1];\n    var _d = useClient(props, fileState), clientState = _d[0], _e = _d[1], dispatchMessage = _e.dispatchMessage, addListener = _e.addListener, clientOperations = __rest(_e, [\"dispatchMessage\", \"addListener\"]);\n    var appState = useAppState(props, fileState.files);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        clientOperations.initializeSandpackIframe();\n    }, []);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Sandpack$1.Provider, { value: __assign(__assign(__assign(__assign(__assign(__assign({}, fileState), clientState), appState), fileOperations), clientOperations), { autoReload: (_b = (_a = props.options) === null || _a === void 0 ? void 0 : _a.autoReload) !== null && _b !== void 0 ? _b : true, listen: addListener, dispatch: dispatchMessage }), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ClassNamesProvider, { classes: options === null || options === void 0 ? void 0 : options.classes, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackThemeProvider, { className: className, style: style, theme: theme, children: children }) }) }));\n};\n/**\n * @category Provider\n */\nvar SandpackConsumer = Sandpack$1.Consumer;\n\n/**\n * @category Hooks\n */\nfunction useSandpack() {\n    var sandpack = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Sandpack$1);\n    if (sandpack === null) {\n        throw new Error(\"[sandpack-react]: \\\"useSandpack\\\" must be wrapped by a \\\"SandpackProvider\\\"\");\n    }\n    var dispatch = sandpack.dispatch, listen = sandpack.listen, rest = __rest(sandpack, [\"dispatch\", \"listen\"]);\n    return {\n        sandpack: __assign({}, rest),\n        dispatch: dispatch,\n        listen: listen,\n    };\n}\n\n/**\n * This returns the current state of the active file\n * and a method to update its content.\n *\n * @category Hooks\n */\nvar useActiveCode = function () {\n    var _a, _b, _c;\n    var sandpack = useSandpack().sandpack;\n    return {\n        code: (_a = sandpack.files[sandpack.activeFile]) === null || _a === void 0 ? void 0 : _a.code,\n        readOnly: (_c = (_b = sandpack.files[sandpack.activeFile]) === null || _b === void 0 ? void 0 : _b.readOnly) !== null && _c !== void 0 ? _c : false,\n        updateCode: sandpack.updateCurrentFile,\n    };\n};\n\nvar _a$8, _b$2, _c;\nvar iconStandaloneClassName = css({\n    svg: { margin: \"auto\" },\n});\nvar buttonClassName = css((_a$8 = {\n        appearance: \"none\",\n        outline: \"none\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontSize: \"inherit\",\n        fontFamily: \"inherit\",\n        backgroundColor: \"transparent\",\n        transition: \"color $default, background $default\",\n        cursor: \"pointer\",\n        color: \"$colors$clickable\",\n        border: 0,\n        textDecoration: \"none\",\n        \"&:disabled\": { color: \"$colors$disabled\" },\n        \"&:hover:not(:disabled,[data-active='true'])\": { color: \"$colors$hover\" },\n        '&[data-active=\"true\"]': { color: \"$colors$accent\" },\n        svg: {\n            minWidth: \"$space$4\",\n            width: \"$space$4\",\n            height: \"$space$4\",\n        }\n    },\n    _a$8[\"&.\".concat(iconStandaloneClassName)] = {\n        padding: \"$space$1\",\n        height: \"$space$7\",\n        display: \"flex\",\n    },\n    // If there's a children besides the icon\n    _a$8[\"&.\".concat(iconStandaloneClassName, \"&:not(:has(span))\")] = {\n        width: \"$space$7\",\n    },\n    _a$8[\"&.\".concat(iconStandaloneClassName, \"&:has(svg + span)\")] = {\n        paddingRight: \"$space$3\",\n        paddingLeft: \"$space$2\",\n        gap: \"$space$1\",\n    },\n    _a$8));\nvar roundedButtonClassName = css({\n    backgroundColor: \"$colors$surface2\",\n    borderRadius: \"99999px\",\n    border: \"1px solid $colors$surface3\",\n    '&[data-active=\"true\"]': {\n        color: \"$colors$surface1\",\n        background: \"$colors$accent\",\n    },\n    \"&:hover:not(:disabled,[data-active='true'])\": {\n        backgroundColor: \"$colors$surface3\",\n    },\n});\nvar iconClassName = css({ padding: 0 });\nvar fadeIn = keyframes({\n    \"0%\": {\n        opacity: 0,\n    },\n    \"100%\": {\n        opacity: 1,\n    },\n});\nvar absoluteClassName = css({\n    position: \"absolute\",\n    bottom: \"0\",\n    left: \"0\",\n    right: \"0\",\n    top: \"0\",\n    margin: \"0\",\n    overflow: \"auto\",\n    height: \"100%\",\n    zIndex: \"$top\",\n});\nvar errorClassName = css((_b$2 = {\n        whiteSpace: \"pre-wrap\",\n        padding: \"$space$10\",\n        backgroundColor: \"$colors$surface1\",\n        display: \"flex\",\n        gap: \"$space$2\",\n        flexDirection: \"column\"\n    },\n    _b$2[\".\".concat(buttonClassName)] = {\n        width: \"auto\",\n        gap: \"$space$2\",\n        padding: \"0 $space$3 0 $space$2\",\n        marginTop: \"$space$1\",\n    },\n    _b$2.variants = {\n        solidBg: {\n            true: {\n                backgroundColor: \"$colors$errorSurface\",\n            },\n        },\n    },\n    _b$2));\nvar errorBundlerClassName = css((_c = {\n        padding: \"$space$10\",\n        backgroundColor: \"$colors$surface1\"\n    },\n    _c[\".\".concat(buttonClassName)] = {\n        marginTop: \"$space$6\",\n        width: \"auto\",\n        gap: \"$space$2\",\n        padding: \"0 $space$3 0 $space$2\",\n    },\n    _c));\nvar errorMessageClassName = css({\n    animation: \"\".concat(fadeIn, \" 150ms ease\"),\n    color: \"$colors$error\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"$space$3\",\n    variants: {\n        errorCode: { true: { fontFamily: \"$font$mono\" } },\n    },\n    a: {\n        color: \"inherit\",\n    },\n    p: {\n        margin: 0,\n    },\n});\n\nvar _a$7;\nvar tabsClassName = css({\n    borderBottom: \"1px solid $colors$surface2\",\n    background: \"$colors$surface1\",\n});\nvar tabsScrollableClassName = css({\n    padding: \"0 $space$2\",\n    overflow: \"auto\",\n    display: \"flex\",\n    flexWrap: \"nowrap\",\n    alignItems: \"stretch\",\n    minHeight: \"40px\",\n    marginBottom: \"-1px\",\n});\nvar closeButtonClassName = css({\n    padding: \"0 $space$1 0 $space$1\",\n    borderRadius: \"$border$radius\",\n    marginLeft: \"$space$1\",\n    width: \"$space$5\",\n    visibility: \"hidden\",\n    svg: {\n        width: \"$space$3\",\n        height: \"$space$3\",\n        display: \"block\",\n        position: \"relative\",\n        top: 1,\n    },\n});\nvar tabButton = css((_a$7 = {\n        padding: \"0 $space$2\",\n        height: \"$layout$headerHeight\",\n        whiteSpace: \"nowrap\",\n        \"&:focus\": { outline: \"none\" }\n    },\n    _a$7[\"&:hover > .\".concat(closeButtonClassName)] = { visibility: \"unset\" },\n    _a$7));\n/**\n * FileTabs is a list of all open files, the active file, and its state.\n */\nvar FileTabs = function (_a) {\n    var closableTabs = _a.closableTabs, className = _a.className, props = __rest(_a, [\"closableTabs\", \"className\"]);\n    var sandpack = useSandpack().sandpack;\n    var classNames = useClassNames();\n    var activeFile = sandpack.activeFile, visibleFiles = sandpack.visibleFiles, setActiveFile = sandpack.setActiveFile;\n    var handleCloseFile = function (ev) {\n        ev.stopPropagation();\n        var tabElm = ev.target.closest(\"[data-active]\");\n        var pathToClose = tabElm === null || tabElm === void 0 ? void 0 : tabElm.getAttribute(\"title\");\n        if (!pathToClose) {\n            return;\n        }\n        sandpack.closeFile(pathToClose);\n    };\n    var getTriggerText = function (currentPath) {\n        var documentFileName = getFileName(currentPath);\n        var pathsWithDuplicateFileNames = visibleFiles.reduce(function (prev, curr) {\n            if (curr === currentPath) {\n                return prev;\n            }\n            var fileName = getFileName(curr);\n            if (fileName === documentFileName) {\n                prev.push(curr);\n                return prev;\n            }\n            return prev;\n        }, []);\n        if (pathsWithDuplicateFileNames.length === 0) {\n            return documentFileName;\n        }\n        else {\n            return calculateNearestUniquePath(currentPath, pathsWithDuplicateFileNames);\n        }\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", __assign({ className: classNames(\"tabs\", [tabsClassName, className]), translate: \"no\" }, props, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { \"aria-label\": \"Select active file\", className: classNames(\"tabs-scrollable-container\", [\n                tabsScrollableClassName,\n            ]), role: \"tablist\", children: visibleFiles.map(function (filePath) { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { \"aria-selected\": filePath === activeFile, className: classNames(\"tab-button\", [buttonClassName, tabButton]), \"data-active\": filePath === activeFile, onClick: function () { return setActiveFile(filePath); }, role: \"tab\", title: filePath, type: \"button\", children: [getTriggerText(filePath), closableTabs && visibleFiles.length > 1 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"close-button\", [closeButtonClassName]), onClick: handleCloseFile, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CloseIcon, {}) }))] }, filePath)); }) }) })));\n};\n\nvar RoundedButton = function (_a) {\n    var onClick = _a.onClick, className = _a.className, children = _a.children;\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: classNames(\"button\", [\n            classNames(\"icon-standalone\"),\n            buttonClassName,\n            iconStandaloneClassName,\n            roundedButtonClassName,\n            className,\n        ]), onClick: onClick, type: \"button\", children: children }));\n};\n\nvar runButtonClassName = css({\n    position: \"absolute\",\n    bottom: \"$space$2\",\n    right: \"$space$2\",\n    paddingRight: \"$space$3\",\n});\nvar RunButton$1 = function (_a) {\n    _a.className; var onClick = _a.onClick, props = __rest(_a, [\"className\", \"onClick\"]);\n    var sandpack = useSandpack().sandpack;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(RoundedButton, __assign({ className: runButtonClassName.toString(), onClick: function (event) {\n            sandpack.runSandpack();\n            onClick === null || onClick === void 0 ? void 0 : onClick(event);\n        } }, props, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RunIcon, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { children: \"Run\" })] })));\n};\n\nvar _a$6;\nvar stackClassName = css((_a$6 = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"100%\",\n        position: \"relative\",\n        backgroundColor: \"$colors$surface1\",\n        gap: 1\n    },\n    _a$6[\"&:has(.\".concat(THEME_PREFIX, \"-stack)\")] = {\n        backgroundColor: \"$colors$surface2\",\n    },\n    _a$6));\nvar SandpackStack = function (_a) {\n    var className = _a.className, props = __rest(_a, [\"className\"]);\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", __assign({ className: classNames(\"stack\", [stackClassName, className]) }, props)));\n};\n\n/**\n * @category Hooks\n */\nvar useSandpackTheme = function () {\n    var _a = react__WEBPACK_IMPORTED_MODULE_1__.useContext(SandpackThemeContext), theme = _a.theme, id = _a.id, mode = _a.mode;\n    return { theme: theme, themeId: id, themeMode: mode };\n};\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar shallowEqual = function (a, b) {\n    if (a.length !== b.length)\n        return false;\n    var result = true;\n    for (var index = 0; index < a.length; index++) {\n        if (a[index] !== b[index]) {\n            result = false;\n            break;\n        }\n    }\n    return result;\n};\n\nvar getCodeMirrorPosition = function (doc, _a) {\n    var line = _a.line, column = _a.column;\n    return doc.line(line).from + (column !== null && column !== void 0 ? column : 0) - 1;\n};\nvar getEditorTheme = function () {\n    return _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.EditorView.theme({\n        \"&\": {\n            backgroundColor: \"var(--\".concat(THEME_PREFIX, \"-colors-surface1)\"),\n            color: \"var(--\".concat(THEME_PREFIX, \"-syntax-color-plain)\"),\n            height: \"100%\",\n        },\n        \".cm-matchingBracket, .cm-nonmatchingBracket, &.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket\": {\n            color: \"inherit\",\n            backgroundColor: \"rgba(128,128,128,.25)\",\n            backgroundBlendMode: \"difference\",\n        },\n        \"&.cm-editor.cm-focused\": {\n            outline: \"none\",\n        },\n        \".cm-activeLine\": {\n            backgroundColor: \"var(--\".concat(THEME_PREFIX, \"-colors-surface3)\"),\n            borderRadius: \"var(--\".concat(THEME_PREFIX, \"-border-radius)\"),\n        },\n        \".cm-errorLine\": {\n            backgroundColor: \"var(--\".concat(THEME_PREFIX, \"-colors-errorSurface)\"),\n            borderRadius: \"var(--\".concat(THEME_PREFIX, \"-border-radius)\"),\n        },\n        \".cm-content\": {\n            caretColor: \"var(--\".concat(THEME_PREFIX, \"-colors-accent)\"),\n            padding: \"0 var(--\".concat(THEME_PREFIX, \"-space-4)\"),\n        },\n        \".cm-scroller\": {\n            fontFamily: \"var(--\".concat(THEME_PREFIX, \"-font-mono)\"),\n            lineHeight: \"var(--\".concat(THEME_PREFIX, \"-font-lineHeight)\"),\n        },\n        \".cm-gutters\": {\n            backgroundColor: \"var(--\".concat(THEME_PREFIX, \"-colors-surface1)\"),\n            color: \"var(--\".concat(THEME_PREFIX, \"-colors-disabled)\"),\n            border: \"none\",\n            paddingLeft: \"var(--\".concat(THEME_PREFIX, \"-space-1)\"),\n        },\n        \".cm-gutter.cm-lineNumbers\": {\n            fontSize: \".6em\",\n        },\n        \".cm-lineNumbers .cm-gutterElement\": {\n            lineHeight: \"var(--\".concat(THEME_PREFIX, \"-font-lineHeight)\"),\n            minWidth: \"var(--\".concat(THEME_PREFIX, \"-space-5)\"),\n        },\n        \".cm-content .cm-line\": { paddingLeft: \"var(--\".concat(THEME_PREFIX, \"-space-1)\") },\n        \".cm-content.cm-readonly .cm-line\": { paddingLeft: 0 },\n    });\n};\nvar classNameToken = function (name) {\n    return \"\".concat(THEME_PREFIX, \"-syntax-\").concat(name);\n};\nvar styleTokens = function () {\n    var syntaxHighLightTokens = [\n        \"string\",\n        \"plain\",\n        \"comment\",\n        \"keyword\",\n        \"definition\",\n        \"punctuation\",\n        \"property\",\n        \"tag\",\n        \"static\",\n    ];\n    return syntaxHighLightTokens.reduce(function (acc, token) {\n        var _a;\n        return __assign(__assign({}, acc), (_a = {}, _a[\".\".concat(classNameToken(token))] = {\n            color: \"$syntax$color$\".concat(token),\n            fontStyle: \"$syntax$fontStyle$\".concat(token),\n        }, _a));\n    }, {});\n};\nvar getSyntaxHighlight = function (theme) {\n    return _codemirror_language__WEBPACK_IMPORTED_MODULE_12__.HighlightStyle.define([\n        { tag: _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.link, textDecoration: \"underline\" },\n        { tag: _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.emphasis, fontStyle: \"italic\" },\n        { tag: _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.strong, fontWeight: \"bold\" },\n        {\n            tag: _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.keyword,\n            class: classNameToken(\"keyword\"),\n        },\n        {\n            tag: [_lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.atom, _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.number, _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.bool],\n            class: classNameToken(\"static\"),\n        },\n        {\n            tag: _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.variableName,\n            class: classNameToken(\"plain\"),\n        },\n        {\n            // Standard tags, e.g <h1 />\n            tag: _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.standard(_lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.tagName),\n            class: classNameToken(\"tag\"),\n        },\n        {\n            tag: [\n                // Highlight function call\n                _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.function(_lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.variableName),\n                // Highlight function definition differently (eg: functional component def in React)\n                _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.definition(_lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.function(_lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.variableName)),\n                // \"Custom tags\", meaning React component\n                _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.tagName,\n            ],\n            class: classNameToken(\"definition\"),\n        },\n        {\n            tag: _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.propertyName,\n            class: classNameToken(\"property\"),\n        },\n        {\n            tag: [_lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.literal, _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.inserted],\n            class: classNameToken(theme.syntax.string ? \"string\" : \"static\"),\n        },\n        {\n            tag: _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.punctuation,\n            class: classNameToken(\"punctuation\"),\n        },\n        {\n            tag: [_lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.comment, _lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.tags.quote],\n            class: classNameToken(\"comment\"),\n        },\n    ]);\n};\nvar getLanguageFromFile = function (filePath, fileType, additionalLanguages) {\n    if (!filePath && !fileType)\n        return \"javascript\";\n    var extension = fileType;\n    if (!extension && filePath) {\n        var extensionDotIndex = filePath.lastIndexOf(\".\");\n        extension = filePath.slice(extensionDotIndex + 1);\n    }\n    for (var _i = 0, additionalLanguages_1 = additionalLanguages; _i < additionalLanguages_1.length; _i++) {\n        var additionalLanguage = additionalLanguages_1[_i];\n        if (extension === additionalLanguage.name ||\n            additionalLanguage.extensions.includes(extension || \"\")) {\n            return additionalLanguage.name;\n        }\n    }\n    switch (extension) {\n        case \"ts\":\n        case \"tsx\":\n            return \"typescript\";\n        case \"html\":\n        case \"svelte\":\n        case \"vue\":\n        case \"astro\":\n            return \"html\";\n        case \"css\":\n        case \"less\":\n        case \"scss\":\n            return \"css\";\n        case \"js\":\n        case \"jsx\":\n        case \"json\":\n        default:\n            return \"javascript\";\n    }\n};\nvar getCodeMirrorLanguage = function (extension, additionalLanguages) {\n    var options = {\n        javascript: (0,_codemirror_lang_javascript__WEBPACK_IMPORTED_MODULE_13__.javascript)({ jsx: true, typescript: false }),\n        typescript: (0,_codemirror_lang_javascript__WEBPACK_IMPORTED_MODULE_13__.javascript)({ jsx: true, typescript: true }),\n        html: (0,_codemirror_lang_html__WEBPACK_IMPORTED_MODULE_14__.html)(),\n        css: (0,_codemirror_lang_css__WEBPACK_IMPORTED_MODULE_15__.css)(),\n    };\n    for (var _i = 0, additionalLanguages_2 = additionalLanguages; _i < additionalLanguages_2.length; _i++) {\n        var additionalLanguage = additionalLanguages_2[_i];\n        if (extension === additionalLanguage.name) {\n            return additionalLanguage.language;\n        }\n    }\n    return options[extension];\n};\nvar useCombinedRefs = function () {\n    var refs = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        refs[_i] = arguments[_i];\n    }\n    return react__WEBPACK_IMPORTED_MODULE_1__.useCallback(function (element) {\n        return refs.forEach(function (ref) {\n            if (!ref) {\n                return;\n            }\n            // Ref can have two types - a function or an object. We treat each case.\n            if (typeof ref === \"function\") {\n                return ref(element);\n            }\n            // As per https://github.com/facebook/react/issues/13029\n            // it should be fine to set current this way.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            ref.current = element;\n        });\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    refs);\n};\n\nfunction highlightDecorators(positions) {\n    return _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.ViewPlugin.fromClass(/** @class */ (function () {\n        function class_1(view) {\n            this.decorations = this.getDecoration(view);\n        }\n        class_1.prototype.update = function (update) {\n            return;\n        };\n        class_1.prototype.getDecoration = function (view) {\n            if (!positions)\n                return _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.Decoration.none;\n            var rangesDecorators = positions.map(function (item) {\n                var _a, _b, _c;\n                var lineDeco = _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.Decoration.line({\n                    attributes: { class: (_a = item.className) !== null && _a !== void 0 ? _a : \"\" },\n                });\n                var markDeco = _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.Decoration.mark({\n                    class: (_b = item.className) !== null && _b !== void 0 ? _b : \"\",\n                    attributes: (_c = item.elementAttributes) !== null && _c !== void 0 ? _c : undefined,\n                });\n                var positionLineStart = getCodeMirrorPosition(view.state.doc, {\n                    line: item.line,\n                    column: item.startColumn,\n                }) + 1;\n                if (item.startColumn && item.endColumn) {\n                    var positionLineEnd = getCodeMirrorPosition(view.state.doc, {\n                        line: item.line,\n                        column: item.endColumn,\n                    }) + 1;\n                    return markDeco.range(positionLineStart, positionLineEnd);\n                }\n                return lineDeco.range(positionLineStart);\n            });\n            return _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.Decoration.set(rangesDecorators);\n        };\n        return class_1;\n    }()), {\n        decorations: function (v) { return v.decorations; },\n    });\n}\n\nfunction highlightInlineError() {\n    return activeLineHighlighter;\n}\nvar lineDeco = _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.Decoration.line({ attributes: { class: \"cm-errorLine\" } });\nvar activeLineHighlighter = _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.ViewPlugin.fromClass(/** @class */ (function () {\n    function class_1() {\n        this.decorations = _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.Decoration.none;\n    }\n    class_1.prototype.update = function (update) {\n        var _this = this;\n        update.transactions.forEach(function (trans) {\n            // @ts-ignore\n            var errorValue = trans.annotation(\"show-error\");\n            if (errorValue !== undefined) {\n                var position = getCodeMirrorPosition(update.view.state.doc, {\n                    line: errorValue,\n                }) + 1;\n                _this.decorations = _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.Decoration.set([lineDeco.range(position)]);\n                // @ts-ignore\n            }\n            else if (trans.annotation(\"remove-errors\")) {\n                _this.decorations = _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.Decoration.none;\n            }\n        });\n    };\n    return class_1;\n}()), {\n    decorations: function (v) { return v.decorations; },\n});\n\nvar _a$5, _b$1;\nvar placeholderClassName = css({\n    margin: \"0\",\n    display: \"block\",\n    fontFamily: \"$font$mono\",\n    fontSize: \"$font$size\",\n    color: \"$syntax$color$plain\",\n    lineHeight: \"$font$lineHeight\",\n});\nvar tokensClassName = css(styleTokens());\nvar editorClassName = css((_a$5 = {\n        flex: 1,\n        position: \"relative\",\n        overflow: \"auto\",\n        background: \"$colors$surface1\",\n        \".cm-scroller\": {\n            padding: \"$space$4 0\",\n        }\n    },\n    _a$5[\".\".concat(placeholderClassName)] = {\n        padding: \"$space$4 0\",\n    },\n    /**\n     * For iOS: prevent browser zoom when clicking on sandbox.\n     * Does NOT apply to code blocks.\n     */\n    _a$5[\"@media screen and (max-width: 768px)\"] = {\n        \"@supports (-webkit-overflow-scrolling: touch)\": {\n            \".cm-content\": { fontSize: \"16px\" },\n        },\n    },\n    _a$5));\nvar cmClassName = css({\n    margin: \"0\",\n    outline: \"none\",\n    height: \"100%\",\n});\nvar readOnlyClassName = css((_b$1 = {\n        fontFamily: \"$font$mono\",\n        fontSize: \"0.8em\",\n        position: \"absolute\",\n        right: \"$space$2\",\n        bottom: \"$space$2\",\n        zIndex: \"$top\",\n        color: \"$colors$clickable\",\n        backgroundColor: \"$colors$surface2\",\n        borderRadius: \"99999px\",\n        padding: \"calc($space$1 / 2) $space$2\"\n    },\n    _b$1[\"& + .\".concat(buttonClassName)] = {\n        right: \"calc($space$11 * 2)\",\n    },\n    _b$1));\n\nvar useSyntaxHighlight = function (_a) {\n    var langSupport = _a.langSupport, highlightTheme = _a.highlightTheme, _b = _a.code, code = _b === void 0 ? \"\" : _b;\n    var tree = langSupport.language.parser.parse(code);\n    var offSet = 0;\n    var codeElementsRender = [];\n    var addElement = function (to, className) {\n        if (to > offSet) {\n            var children = code.slice(offSet, to);\n            codeElementsRender.push(className\n                ? (0,react__WEBPACK_IMPORTED_MODULE_1__.createElement)(\"span\", {\n                    children: children,\n                    className: className,\n                    key: \"\".concat(to).concat(offSet),\n                })\n                : children);\n            offSet = to;\n        }\n    };\n    (0,_lezer_highlight__WEBPACK_IMPORTED_MODULE_3__.highlightTree)(tree, highlightTheme, function (from, to, className) {\n        addElement(from, \"\");\n        addElement(to, className);\n    });\n    /**\n     * The language parse doesn't look consistent.\n     * The final syntax highlight used by CodeMirror\n     * includes an end empty line, and the parse here doesn't,\n     * so let's add it manually.\n     */\n    if (offSet < code.length && (code === null || code === void 0 ? void 0 : code.includes(\"\\n\"))) {\n        codeElementsRender.push(\"\\n\\n\");\n    }\n    return codeElementsRender;\n};\n\nvar CodeMirror = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function (_a, ref) {\n    var _b = _a.code, code = _b === void 0 ? \"\" : _b, filePath = _a.filePath, fileType = _a.fileType, onCodeUpdate = _a.onCodeUpdate, _c = _a.showLineNumbers, showLineNumbers = _c === void 0 ? false : _c, _d = _a.showInlineErrors, showInlineErrors = _d === void 0 ? false : _d, _e = _a.wrapContent, wrapContent = _e === void 0 ? false : _e, _f = _a.editorState, editorState = _f === void 0 ? \"pristine\" : _f, _g = _a.readOnly, readOnly = _g === void 0 ? false : _g, _h = _a.showReadOnly, showReadOnly = _h === void 0 ? true : _h, decorators = _a.decorators, _j = _a.initMode, initMode = _j === void 0 ? \"lazy\" : _j, _k = _a.extensions, extensions = _k === void 0 ? [] : _k, _l = _a.extensionsKeymap, extensionsKeymap = _l === void 0 ? [] : _l, _m = _a.additionalLanguages, additionalLanguages = _m === void 0 ? [] : _m;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var wrapper = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    var combinedRef = useCombinedRefs(wrapper, ref);\n    var cmView = react__WEBPACK_IMPORTED_MODULE_1__.useRef();\n    var _o = useSandpackTheme(), theme = _o.theme, themeId = _o.themeId;\n    var _p = react__WEBPACK_IMPORTED_MODULE_1__.useState(code), internalCode = _p[0], setInternalCode = _p[1];\n    var _q = react__WEBPACK_IMPORTED_MODULE_1__.useState(initMode === \"immediate\"), shouldInitEditor = _q[0], setShouldInitEditor = _q[1];\n    var classNames = useClassNames();\n    var _r = useSandpack(), listen = _r.listen, autoReload = _r.sandpack.autoReload;\n    var prevExtension = react__WEBPACK_IMPORTED_MODULE_1__.useRef([]);\n    var prevExtensionKeymap = react__WEBPACK_IMPORTED_MODULE_1__.useRef([]);\n    var isIntersecting = (0,_react_hook_intersection_observer__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(wrapper, {\n        rootMargin: \"600px 0px\",\n        threshold: 0.2,\n    }).isIntersecting;\n    react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(ref, function () { return ({\n        getCodemirror: function () { return cmView.current; },\n    }); });\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var mode = initMode === \"lazy\" || initMode === \"user-visible\";\n        if (mode && isIntersecting) {\n            setShouldInitEditor(true);\n        }\n    }, [initMode, isIntersecting]);\n    var languageExtension = getLanguageFromFile(filePath, fileType, additionalLanguages);\n    var langSupport = getCodeMirrorLanguage(languageExtension, additionalLanguages);\n    var highlightTheme = getSyntaxHighlight(theme);\n    var syntaxHighlightRender = useSyntaxHighlight({\n        langSupport: langSupport,\n        highlightTheme: highlightTheme,\n        code: code,\n    });\n    // decorators need to be sorted by `line`, otherwise it will throw error\n    // see https://github.com/codesandbox/sandpack/issues/383\n    var sortedDecorators = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(function () {\n        return decorators\n            ? decorators.sort(function (d1, d2) { return d1.line - d2.line; })\n            : decorators;\n    }, [decorators]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        if (!wrapper.current || !shouldInitEditor)\n            return;\n        var customCommandsKeymap = [\n            {\n                key: \"Tab\",\n                run: function (view) {\n                    var _a, _b;\n                    (0,_codemirror_commands__WEBPACK_IMPORTED_MODULE_17__.indentMore)(view);\n                    var customKey = extensionsKeymap.find(function (_a) {\n                        var key = _a.key;\n                        return key === \"Tab\";\n                    });\n                    return (_b = (_a = customKey === null || customKey === void 0 ? void 0 : customKey.run) === null || _a === void 0 ? void 0 : _a.call(customKey, view)) !== null && _b !== void 0 ? _b : true;\n                },\n            },\n            {\n                key: \"Shift-Tab\",\n                run: function (_a) {\n                    var _b, _c;\n                    var state = _a.state, dispatch = _a.dispatch;\n                    (0,_codemirror_commands__WEBPACK_IMPORTED_MODULE_17__.indentLess)({ state: state, dispatch: dispatch });\n                    var customKey = extensionsKeymap.find(function (_a) {\n                        var key = _a.key;\n                        return key === \"Shift-Tab\";\n                    });\n                    return (_c = (_b = customKey === null || customKey === void 0 ? void 0 : customKey.run) === null || _b === void 0 ? void 0 : _b.call(customKey, view)) !== null && _c !== void 0 ? _c : true;\n                },\n            },\n            {\n                key: \"Escape\",\n                run: function () {\n                    if (readOnly)\n                        return true;\n                    if (wrapper.current) {\n                        wrapper.current.focus();\n                    }\n                    return true;\n                },\n            },\n            {\n                key: \"mod-Backspace\",\n                run: _codemirror_commands__WEBPACK_IMPORTED_MODULE_17__.deleteGroupBackward,\n            },\n        ];\n        var extensionList = __spreadArray(__spreadArray([\n            (0,_codemirror_view__WEBPACK_IMPORTED_MODULE_11__.highlightSpecialChars)(),\n            (0,_codemirror_commands__WEBPACK_IMPORTED_MODULE_17__.history)(),\n            (0,_codemirror_autocomplete__WEBPACK_IMPORTED_MODULE_18__.closeBrackets)()\n        ], extensions, true), [\n            _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.keymap.of(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], _codemirror_autocomplete__WEBPACK_IMPORTED_MODULE_18__.closeBracketsKeymap, true), _codemirror_commands__WEBPACK_IMPORTED_MODULE_17__.defaultKeymap, true), _codemirror_commands__WEBPACK_IMPORTED_MODULE_17__.historyKeymap, true), customCommandsKeymap, true), extensionsKeymap, true)),\n            langSupport,\n            getEditorTheme(),\n            (0,_codemirror_language__WEBPACK_IMPORTED_MODULE_12__.syntaxHighlighting)(highlightTheme),\n        ], false);\n        if (readOnly) {\n            extensionList.push(_codemirror_state__WEBPACK_IMPORTED_MODULE_19__.EditorState.readOnly.of(true));\n            extensionList.push(_codemirror_view__WEBPACK_IMPORTED_MODULE_11__.EditorView.editable.of(false));\n        }\n        else {\n            extensionList.push((0,_codemirror_language__WEBPACK_IMPORTED_MODULE_12__.bracketMatching)());\n            extensionList.push((0,_codemirror_view__WEBPACK_IMPORTED_MODULE_11__.highlightActiveLine)());\n        }\n        if (sortedDecorators) {\n            extensionList.push(highlightDecorators(sortedDecorators));\n        }\n        if (wrapContent) {\n            extensionList.push(_codemirror_view__WEBPACK_IMPORTED_MODULE_11__.EditorView.lineWrapping);\n        }\n        if (showLineNumbers) {\n            extensionList.push((0,_codemirror_view__WEBPACK_IMPORTED_MODULE_11__.lineNumbers)());\n        }\n        if (showInlineErrors) {\n            extensionList.push(highlightInlineError());\n        }\n        var parentDiv = wrapper.current;\n        var existingPlaceholder = parentDiv.querySelector(\".sp-pre-placeholder\");\n        if (existingPlaceholder) {\n            parentDiv.removeChild(existingPlaceholder);\n        }\n        var view = new _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.EditorView({\n            doc: code,\n            extensions: extensionList,\n            parent: parentDiv,\n            dispatch: function (tr) {\n                view.update([tr]);\n                if (tr.docChanged) {\n                    var newCode = tr.newDoc.sliceString(0, tr.newDoc.length);\n                    setInternalCode(newCode);\n                    onCodeUpdate === null || onCodeUpdate === void 0 ? void 0 : onCodeUpdate(newCode);\n                }\n            },\n        });\n        view.contentDOM.setAttribute(\"data-gramm\", \"false\");\n        view.contentDOM.setAttribute(\"data-lt-active\", \"false\");\n        view.contentDOM.setAttribute(\"aria-label\", filePath ? \"Code Editor for \".concat(getFileName(filePath)) : \"Code Editor\");\n        if (readOnly) {\n            view.contentDOM.classList.add(\"cm-readonly\");\n        }\n        else {\n            view.contentDOM.setAttribute(\"tabIndex\", \"-1\");\n        }\n        cmView.current = view;\n        return function () {\n            var _a;\n            (_a = cmView.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        shouldInitEditor,\n        showLineNumbers,\n        wrapContent,\n        themeId,\n        sortedDecorators,\n        readOnly,\n        autoReload,\n    ]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function applyExtensions() {\n        var view = cmView.current;\n        var dependenciesAreDiff = !shallowEqual(extensions, prevExtension.current) ||\n            !shallowEqual(extensionsKeymap, prevExtensionKeymap.current);\n        if (view && dependenciesAreDiff) {\n            view.dispatch({\n                effects: _codemirror_state__WEBPACK_IMPORTED_MODULE_19__.StateEffect.appendConfig.of(extensions),\n            });\n            view.dispatch({\n                effects: _codemirror_state__WEBPACK_IMPORTED_MODULE_19__.StateEffect.appendConfig.of(_codemirror_view__WEBPACK_IMPORTED_MODULE_11__.keymap.of(__spreadArray([], extensionsKeymap, true))),\n            });\n            prevExtension.current = extensions;\n            prevExtensionKeymap.current = extensionsKeymap;\n        }\n    }, [extensions, extensionsKeymap]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        // When the user clicks on a tab button on a larger screen\n        // Avoid autofocus on mobile as it leads to a bad experience and an unexpected layout shift\n        if (cmView.current &&\n            editorState === \"dirty\" &&\n            window.matchMedia(\"(min-width: 768px)\").matches) {\n            cmView.current.contentDOM.focus();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    // Update editor when code passed as prop from outside sandpack changes\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        if (cmView.current && typeof code === \"string\" && code !== internalCode) {\n            var view = cmView.current;\n            var selection = view.state.selection.ranges.some(function (_a) {\n                var to = _a.to, from = _a.from;\n                return to > code.length || from > code.length;\n            })\n                ? _codemirror_state__WEBPACK_IMPORTED_MODULE_19__.EditorSelection.cursor(code.length)\n                : view.state.selection;\n            var changes = { from: 0, to: view.state.doc.length, insert: code };\n            view.dispatch({ changes: changes, selection: selection });\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [code]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function messageToInlineError() {\n        if (!showInlineErrors)\n            return;\n        var unsubscribe = listen(function (message) {\n            var view = cmView.current;\n            if (message.type === \"success\") {\n                view === null || view === void 0 ? void 0 : view.dispatch({\n                    // @ts-ignore\n                    annotations: [new _codemirror_state__WEBPACK_IMPORTED_MODULE_19__.Annotation(\"remove-errors\", true)],\n                });\n            }\n            else if (message.type === \"action\" &&\n                message.action === \"show-error\" &&\n                message.path === filePath &&\n                message.line) {\n                view === null || view === void 0 ? void 0 : view.dispatch({\n                    // @ts-ignore\n                    annotations: [new _codemirror_state__WEBPACK_IMPORTED_MODULE_19__.Annotation(\"show-error\", message.line)],\n                });\n            }\n        });\n        return function () { return unsubscribe(); };\n    }, [listen, showInlineErrors]);\n    var handleContainerKeyDown = function (evt) {\n        if (evt.key === \"Enter\" && cmView.current) {\n            evt.preventDefault();\n            cmView.current.contentDOM.focus();\n        }\n    };\n    var gutterLineOffset = function () {\n        // padding-left\n        var offset = 4;\n        if (showLineNumbers) {\n            // line-number-gutter-width + gutter-padding\n            offset += 6;\n        }\n        // line-padding\n        if (!readOnly) {\n            offset += 1;\n        }\n        return \"var(--\".concat(THEME_PREFIX, \"-space-\").concat(offset, \")\");\n    };\n    if (readOnly) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"pre\", { ref: combinedRef, className: classNames(\"cm\", [\n                        classNames(editorState),\n                        classNames(languageExtension),\n                        cmClassName,\n                        tokensClassName,\n                    ]), translate: \"no\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", { className: classNames(\"pre-placeholder\", [placeholderClassName]), style: { marginLeft: gutterLineOffset() }, children: syntaxHighlightRender }) }), readOnly && showReadOnly && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", __assign({ className: classNames(\"read-only\", [readOnlyClassName]) }, ({}), { children: \"Read-only\" })))] }));\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { ref: combinedRef, \"aria-autocomplete\": \"list\", \"aria-label\": filePath ? \"Code Editor for \".concat(getFileName(filePath)) : \"Code Editor\", \"aria-multiline\": \"true\", className: classNames(\"cm\", [\n            classNames(editorState),\n            classNames(languageExtension),\n            cmClassName,\n            tokensClassName,\n        ]), onKeyDown: handleContainerKeyDown, role: \"textbox\", tabIndex: 0, translate: \"no\", suppressHydrationWarning: true, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"pre\", { className: classNames(\"pre-placeholder\", [placeholderClassName]), style: { marginLeft: gutterLineOffset() }, children: syntaxHighlightRender }) }));\n});\n\nvar SandpackCodeEditor = (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function (_a, ref) {\n    var showTabs = _a.showTabs, _b = _a.showLineNumbers, showLineNumbers = _b === void 0 ? false : _b, _c = _a.showInlineErrors, showInlineErrors = _c === void 0 ? false : _c, _d = _a.showRunButton, showRunButton = _d === void 0 ? true : _d, _e = _a.wrapContent, wrapContent = _e === void 0 ? false : _e, _f = _a.closableTabs, closableTabs = _f === void 0 ? false : _f, initMode = _a.initMode, extensions = _a.extensions, extensionsKeymap = _a.extensionsKeymap, readOnly = _a.readOnly, showReadOnly = _a.showReadOnly, additionalLanguages = _a.additionalLanguages, className = _a.className, props = __rest(_a, [\"showTabs\", \"showLineNumbers\", \"showInlineErrors\", \"showRunButton\", \"wrapContent\", \"closableTabs\", \"initMode\", \"extensions\", \"extensionsKeymap\", \"readOnly\", \"showReadOnly\", \"additionalLanguages\", \"className\"]);\n    var sandpack = useSandpack().sandpack;\n    var _g = useActiveCode(), code = _g.code, updateCode = _g.updateCode, readOnlyFile = _g.readOnly;\n    var activeFile = sandpack.activeFile, status = sandpack.status, editorState = sandpack.editorState;\n    var shouldShowTabs = showTabs !== null && showTabs !== void 0 ? showTabs : sandpack.visibleFiles.length > 1;\n    var classNames = useClassNames();\n    var handleCodeUpdate = function (newCode, shouldUpdatePreview) {\n        if (shouldUpdatePreview === void 0) { shouldUpdatePreview = true; }\n        updateCode(newCode, shouldUpdatePreview);\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SandpackStack, __assign({ className: classNames(\"editor\", [className]) }, props, { children: [shouldShowTabs && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FileTabs, { closableTabs: closableTabs }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"code-editor\", [editorClassName]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CodeMirror, { ref: ref, additionalLanguages: additionalLanguages, code: code, editorState: editorState, extensions: extensions, extensionsKeymap: extensionsKeymap, filePath: activeFile, initMode: initMode || sandpack.initMode, onCodeUpdate: function (newCode) { var _a; return handleCodeUpdate(newCode, (_a = sandpack.autoReload) !== null && _a !== void 0 ? _a : true); }, readOnly: readOnly || readOnlyFile, showInlineErrors: showInlineErrors, showLineNumbers: showLineNumbers, showReadOnly: showReadOnly, wrapContent: wrapContent }, activeFile), showRunButton && (!sandpack.autoReload || status === \"idle\") ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RunButton$1, {})) : null] })] })));\n});\n\nvar SandpackCodeViewer = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function (_a, ref) {\n    var showTabs = _a.showTabs, showLineNumbers = _a.showLineNumbers, decorators = _a.decorators, propCode = _a.code, initMode = _a.initMode, wrapContent = _a.wrapContent, additionalLanguages = _a.additionalLanguages, props = __rest(_a, [\"showTabs\", \"showLineNumbers\", \"decorators\", \"code\", \"initMode\", \"wrapContent\", \"additionalLanguages\"]);\n    var sandpack = useSandpack().sandpack;\n    var code = useActiveCode().code;\n    var classNames = useClassNames();\n    var shouldShowTabs = showTabs !== null && showTabs !== void 0 ? showTabs : sandpack.visibleFiles.length > 1;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SandpackStack, __assign({ className: classNames(\"editor-viewer\") }, props, { children: [shouldShowTabs ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FileTabs, {}) : null, (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"code-editor\", [editorClassName]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CodeMirror, { ref: ref, additionalLanguages: additionalLanguages, code: propCode !== null && propCode !== void 0 ? propCode : code, decorators: decorators, filePath: sandpack.activeFile, initMode: initMode || sandpack.initMode, showLineNumbers: showLineNumbers, showReadOnly: false, wrapContent: wrapContent, readOnly: true }) }), sandpack.status === \"idle\" ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RunButton$1, {}) : null] })));\n});\n\nvar _a$4, _b;\nvar layoutClassName = css((_a$4 = {\n        border: \"1px solid $colors$surface2\",\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"stretch\",\n        borderRadius: \"$border$radius\",\n        overflow: \"hidden\",\n        position: \"relative\",\n        backgroundColor: \"$colors$surface2\",\n        gap: 1\n    },\n    _a$4[\"> .\".concat(stackClassName)] = {\n        flexGrow: 1,\n        flexShrink: 1,\n        flexBasis: \"0\",\n        height: \"$layout$height\",\n        overflow: \"hidden\",\n        \"@media print\": {\n            height: \"auto\",\n            display: \"block\",\n        },\n        \"@media screen and (max-width: 768px)\": (_b = {},\n            _b[\"&:not(.\".concat(THEME_PREFIX, \"-preview, .\").concat(THEME_PREFIX, \"-editor, .\").concat(THEME_PREFIX, \"-preset-column)\")] = {\n                height: \"calc($layout$height / 2)\",\n            },\n            /* triggers the layout break at the 768px breakpoint, not when the component is less then 700px */\n            _b.minWidth = \"100%;\",\n            _b),\n    },\n    _a$4[\"> .\".concat(THEME_PREFIX, \"-file-explorer\")] = {\n        flex: 0.2,\n        minWidth: 200,\n        \"@media screen and (max-width: 768px)\": {\n            flex: 1,\n        },\n    },\n    _a$4));\nvar SandpackLayout = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function (_a, ref) {\n    var children = _a.children, className = _a.className, props = __rest(_a, [\"children\", \"className\"]);\n    var sandpack = useSandpack().sandpack;\n    var classNames = useClassNames();\n    var combinedRef = useCombinedRefs(sandpack.lazyAnchorRef, ref);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", __assign({ ref: combinedRef, className: classNames(\"layout\", [layoutClassName, className]) }, props, { children: children })));\n});\n\n/**\n * @category Hooks\n */\nvar useErrorMessage = function () {\n    var _a;\n    var sandpack = useSandpack().sandpack;\n    var error = sandpack.error;\n    return (_a = error === null || error === void 0 ? void 0 : error.message) !== null && _a !== void 0 ? _a : null;\n};\n\nvar FADE_ANIMATION_DURATION = 200;\n/**\n * @category Hooks\n */\nvar useLoadingOverlayState = function (clientId, externalLoading) {\n    var _a = useSandpack(), sandpack = _a.sandpack, listen = _a.listen;\n    var _b = react__WEBPACK_IMPORTED_MODULE_1__.useState(\"LOADING\"), state = _b[0], setState = _b[1];\n    /**\n     * Sandpack listener\n     */\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var unsubscribe = listen(function (message) {\n            if (message.type === \"start\" && message.firstLoad === true) {\n                setState(\"LOADING\");\n            }\n            if (message.type === \"done\") {\n                setState(function (prev) {\n                    return prev === \"LOADING\" ? \"PRE_FADING\" : \"HIDDEN\";\n                });\n            }\n        }, clientId);\n        return function () {\n            unsubscribe();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [clientId, sandpack.status === \"idle\"]);\n    /**\n     * Fading transient state\n     */\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var fadeTimeout;\n        if (state === \"PRE_FADING\" && !externalLoading) {\n            setState(\"FADING\");\n        }\n        else if (state === \"FADING\") {\n            fadeTimeout = setTimeout(function () { return setState(\"HIDDEN\"); }, FADE_ANIMATION_DURATION);\n        }\n        return function () {\n            clearTimeout(fadeTimeout);\n        };\n    }, [state, externalLoading]);\n    if (sandpack.status === \"timeout\") {\n        return \"TIMEOUT\";\n    }\n    if (sandpack.status !== \"running\") {\n        return \"HIDDEN\";\n    }\n    return state;\n};\n\n/**\n * @category Hooks\n */\nvar useSandpackNavigation = function (clientId) {\n    var dispatch = useSandpack().dispatch;\n    return {\n        refresh: function () { return dispatch({ type: \"refresh\" }, clientId); },\n        back: function () { return dispatch({ type: \"urlback\" }, clientId); },\n        forward: function () { return dispatch({ type: \"urlforward\" }, clientId); },\n    };\n};\n\nfunction getTranspiledCode(sandpack) {\n    var _a, _b;\n    var activeFile = sandpack.activeFile, bundlerState = sandpack.bundlerState;\n    if (bundlerState == null) {\n        return null;\n    }\n    var tModule = bundlerState.transpiledModules[activeFile + \":\"];\n    return (_b = (_a = tModule === null || tModule === void 0 ? void 0 : tModule.source) === null || _a === void 0 ? void 0 : _a.compiledCode) !== null && _b !== void 0 ? _b : null;\n}\n/**\n * @category Hooks\n */\nvar useTranspiledCode = function () {\n    var sandpack = useSandpack().sandpack;\n    if (sandpack.status !== \"running\") {\n        return null;\n    }\n    return getTranspiledCode(sandpack);\n};\n\n/**\n * It registers a new sandpack client and returns its instance,\n * listeners, and dispatch function. Using it when creating a custom\n * component to interact directly with the client is recommended.\n * For other cases, use `useSandpack` instead.\n *\n * @category Hooks\n */\nvar useSandpackClient = function (clientPropsOverride) {\n    var _a = useSandpack(), sandpack = _a.sandpack, listen = _a.listen, dispatch = _a.dispatch;\n    var iframeRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    var clientId = react__WEBPACK_IMPORTED_MODULE_1__.useRef(generateRandomId());\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var iframeElement = iframeRef.current;\n        var clientIdValue = clientId.current;\n        if (iframeElement !== null) {\n            sandpack.registerBundler(iframeElement, clientIdValue, clientPropsOverride);\n        }\n        return function () { return sandpack.unregisterBundler(clientIdValue); };\n    }, []);\n    var getClient = function () {\n        return sandpack.clients[clientId.current] || null;\n    };\n    return {\n        sandpack: sandpack,\n        getClient: getClient,\n        clientId: clientId.current,\n        iframe: iframeRef,\n        listen: function (listener) {\n            return listen(listener, clientId.current);\n        },\n        dispatch: function (message) { return dispatch(message, clientId.current); },\n    };\n};\n\n/**\n * @category Hooks\n */\nvar useSandpackShell = function (clientId) {\n    var dispatch = useSandpack().dispatch;\n    return {\n        restart: function () { return dispatch({ type: \"shell/restart\" }, clientId); },\n        openPreview: function () { return dispatch({ type: \"shell/openPreview\" }, clientId); },\n    };\n};\n\nvar mapProgressMessage = function (originalMessage, firstTotalPending) {\n    var _a;\n    switch (originalMessage.state) {\n        case \"downloading_manifest\":\n            return \"[1/3] Downloading manifest\";\n        case \"downloaded_module\":\n            return \"[2/3] Downloaded \".concat(originalMessage.name, \" (\").concat(firstTotalPending - originalMessage.totalPending, \"/\").concat(firstTotalPending, \")\");\n        case \"starting_command\":\n            return \"[3/3] Starting command\";\n        case \"command_running\":\n            return \"[3/3] Running \\\"\".concat((_a = originalMessage.command) === null || _a === void 0 ? void 0 : _a.trim(), \"\\\"\");\n    }\n};\nvar useSandpackPreviewProgress = function (props) {\n    var _a = react__WEBPACK_IMPORTED_MODULE_1__.useState(false), isReady = _a[0], setIsReady = _a[1];\n    var _b = react__WEBPACK_IMPORTED_MODULE_1__.useState(), totalDependencies = _b[0], setTotalDependencies = _b[1];\n    var _c = react__WEBPACK_IMPORTED_MODULE_1__.useState(null), loadingMessage = _c[0], setLoadingMessage = _c[1];\n    var timeout = props === null || props === void 0 ? void 0 : props.timeout;\n    var clientId = props === null || props === void 0 ? void 0 : props.clientId;\n    var listen = useSandpack().listen;\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var timer;\n        var unsubscribe = listen(function (message) {\n            if (message.type === \"start\" && message.firstLoad) {\n                setIsReady(false);\n            }\n            if (timeout) {\n                timer = setTimeout(function () {\n                    setLoadingMessage(null);\n                }, timeout);\n            }\n            if (message.type === \"shell/progress\" && !isReady) {\n                if (!totalDependencies && message.data.state === \"downloaded_module\") {\n                    setTotalDependencies(message.data.totalPending);\n                }\n                if (totalDependencies !== undefined) {\n                    setLoadingMessage(mapProgressMessage(message.data, totalDependencies));\n                }\n            }\n            if (message.type === \"done\" && message.compilatonError === false) {\n                setLoadingMessage(null);\n                setIsReady(true);\n                clearTimeout(timer);\n            }\n        }, clientId);\n        return function () {\n            if (timer) {\n                clearTimeout(timer);\n            }\n            unsubscribe();\n        };\n    }, [clientId, isReady, totalDependencies, timeout]);\n    return loadingMessage;\n};\n\nvar MAX_MESSAGE_COUNT$1 = 400 * 2;\nvar useSandpackShellStdout = function (_a) {\n    var clientId = _a.clientId, _b = _a.maxMessageCount, maxMessageCount = _b === void 0 ? MAX_MESSAGE_COUNT$1 : _b; _a.resetOnPreviewRestart;\n    var _d = react__WEBPACK_IMPORTED_MODULE_1__.useState([]), logs = _d[0], setLogs = _d[1];\n    var listen = useSandpack().listen;\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var unsubscribe = listen(function (message) {\n            if (message.type === \"start\") {\n                setLogs([]);\n            }\n            else if (message.type === \"stdout\" &&\n                message.payload.data &&\n                Boolean(message.payload.data.trim())) {\n                setLogs(function (prev) {\n                    var messages = __spreadArray(__spreadArray([], prev, true), [\n                        { data: message.payload.data, id: generateRandomId() },\n                    ], false);\n                    while (messages.length > maxMessageCount) {\n                        messages.shift();\n                    }\n                    return messages;\n                });\n            }\n        }, clientId);\n        return unsubscribe;\n    }, [maxMessageCount, clientId]);\n    return { logs: logs, reset: function () { return setLogs([]); } };\n};\n\nvar mapBundlerErrors = function (originalMessage) {\n    var errorMessage = originalMessage.replace(\"[sandpack-client]: \", \"\");\n    if (/process.exit/.test(errorMessage)) {\n        var exitCode = errorMessage.match(/process.exit\\((\\d+)\\)/);\n        if (!exitCode)\n            return errorMessage;\n        // Crash\n        if (Number(exitCode[1]) === 0) {\n            return \"Server is not running, would you like to start it again?\";\n        }\n        return \"Server has crashed with status code \".concat(exitCode[1], \", would you like to restart the server?\");\n    }\n    return errorMessage;\n};\nvar ErrorOverlay = function (props) {\n    var children = props.children, className = props.className, otherProps = __rest(props, [\"children\", \"className\"]);\n    var errorMessage = useErrorMessage();\n    var restart = useSandpackShell().restart;\n    var classNames = useClassNames();\n    var _a = useSandpack().sandpack, runSandpack = _a.runSandpack, teamId = _a.teamId;\n    var dispatch = useSandpack().dispatch;\n    if (!errorMessage && !children) {\n        return null;\n    }\n    var isSandpackBundlerError = errorMessage === null || errorMessage === void 0 ? void 0 : errorMessage.startsWith(\"[sandpack-client]\");\n    var privateDependencyError = errorMessage === null || errorMessage === void 0 ? void 0 : errorMessage.includes(\"NPM_REGISTRY_UNAUTHENTICATED_REQUEST\");\n    var onSignIn = function () {\n        if (teamId) {\n            dispatch({ type: \"sign-in\", teamId: teamId });\n        }\n    };\n    if (privateDependencyError) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", __assign({ className: classNames(\"overlay\", [\n                classNames(\"error\"),\n                absoluteClassName,\n                errorBundlerClassName,\n                className,\n            ]) }, props, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { className: classNames(\"error-message\", [errorMessageClassName]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"strong\", { children: \"Unable to fetch required dependency.\" }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"error-message\", [errorMessageClassName]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", { children: [\"Authentication required. Please sign in to your account (make sure to allow pop-ups to this page) and try again. If the issue persists, contact\", \" \", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: \"mailto:hello@codesandbox.io?subject=Sandpack Timeout Error\", children: \"support\" }), \" \", \"for further assistance.\"] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { className: classNames(\"button\", [\n                            buttonClassName,\n                            iconStandaloneClassName,\n                            roundedButtonClassName,\n                        ]), onClick: onSignIn, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SignInIcon, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { children: \"Sign in\" })] }) })] })));\n    }\n    if (isSandpackBundlerError && errorMessage) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", __assign({ className: classNames(\"overlay\", [\n                classNames(\"error\"),\n                absoluteClassName,\n                errorBundlerClassName,\n                className,\n            ]) }, otherProps, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"error-message\", [errorMessageClassName]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { className: classNames(\"error-title\", [css({ fontWeight: \"bold\" })]), children: \"Couldn't connect to server\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: mapBundlerErrors(errorMessage) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { className: classNames(\"button\", [\n                                classNames(\"icon-standalone\"),\n                                buttonClassName,\n                                iconStandaloneClassName,\n                                roundedButtonClassName,\n                            ]), onClick: function () {\n                                restart();\n                                runSandpack();\n                            }, title: \"Restart script\", type: \"button\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RestartIcon, {}), \" \", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { children: \"Restart\" })] }) })] }) })));\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", __assign({ className: classNames(\"overlay\", [\n            classNames(\"error\"),\n            absoluteClassName,\n            errorClassName({ solidBg: true }),\n            className,\n        ]), translate: \"no\" }, otherProps, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { className: classNames(\"error-message\", [errorMessageClassName]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"strong\", { children: \"Something went wrong\" }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { className: classNames(\"error-message\", [\n                    errorMessageClassName({ errorCode: true }),\n                ]), children: errorMessage || children })] })));\n};\n\n/**\n * Stole from https://github.com/nteract/ansi-to-react/blob/master/src/index.ts\n */\n/**\n * Converts ANSI strings into JSON output.\n * @name ansiToJSON\n * @function\n * @param {String} input The input string.\n * @param {boolean} use_classes If `true`, HTML classes will be appended\n *                              to the HTML output.\n * @return {Array} The parsed input.\n */\nfunction ansiToJSON(input, use_classes) {\n    if (use_classes === void 0) { use_classes = false; }\n    input = (0,escape_carriage__WEBPACK_IMPORTED_MODULE_5__.escapeCarriageReturn)(fixBackspace(input));\n    return anser__WEBPACK_IMPORTED_MODULE_4__.ansiToJson(input, {\n        json: true,\n        remove_empty: true,\n        use_classes: use_classes,\n    });\n}\n/**\n * Create a class string.\n * @name createClass\n * @function\n * @param {AnserJsonEntry} bundle\n * @return {String} class name(s)\n */\nfunction createClass(bundle) {\n    var classNames = \"\";\n    if (bundle.bg) {\n        classNames += \"\".concat(bundle.bg, \"-bg \");\n    }\n    if (bundle.fg) {\n        classNames += \"\".concat(bundle.fg, \"-fg \");\n    }\n    if (bundle.decoration) {\n        classNames += \"ansi-\".concat(bundle.decoration, \" \");\n    }\n    if (classNames === \"\") {\n        return null;\n    }\n    classNames = classNames.substring(0, classNames.length - 1);\n    return classNames;\n}\n/**\n * Create the style attribute.\n * @name createStyle\n * @function\n * @param {AnserJsonEntry} bundle\n * @return {Object} returns the style object\n */\nfunction createStyle(bundle) {\n    var style = {};\n    if (bundle.bg) {\n        style.backgroundColor = \"rgb(\".concat(bundle.bg, \")\");\n    }\n    if (bundle.fg) {\n        style.color = \"rgb(\".concat(bundle.fg, \")\");\n    }\n    switch (bundle.decoration) {\n        case \"bold\":\n            style.fontWeight = \"bold\";\n            break;\n        case \"dim\":\n            style.opacity = \"0.5\";\n            break;\n        case \"italic\":\n            style.fontStyle = \"italic\";\n            break;\n        case \"hidden\":\n            style.visibility = \"hidden\";\n            break;\n        case \"strikethrough\":\n            style.textDecoration = \"line-through\";\n            break;\n        case \"underline\":\n            style.textDecoration = \"underline\";\n            break;\n        case \"blink\":\n            style.textDecoration = \"blink\";\n            break;\n    }\n    return style;\n}\n/**\n * Converts an Anser bundle into a React Node.\n * @param linkify whether links should be converting into clickable anchor tags.\n * @param useClasses should render the span with a class instead of style.\n * @param bundle Anser output.\n * @param key\n */\nfunction convertBundleIntoReact(linkify, useClasses, bundle, key) {\n    var style = useClasses ? null : createStyle(bundle);\n    var className = useClasses ? createClass(bundle) : null;\n    if (!linkify) {\n        return react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"span\", { style: style, key: key, className: className }, bundle.content);\n    }\n    var content = [];\n    var linkRegex = /(\\s|^)(https?:\\/\\/(?:www\\.|(?!www))[^\\s.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/g;\n    var index = 0;\n    var match;\n    while ((match = linkRegex.exec(bundle.content)) !== null) {\n        var pre = match[1], url = match[2];\n        var startIndex = match.index + pre.length;\n        if (startIndex > index) {\n            content.push(bundle.content.substring(index, startIndex));\n        }\n        // Make sure the href we generate from the link is fully qualified. We assume http\n        // if it starts with a www because many sites don't support https\n        var href = url.startsWith(\"www.\") ? \"http://\".concat(url) : url;\n        content.push(react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"a\", {\n            key: index,\n            href: href,\n            target: \"_blank\",\n        }, \"\".concat(url)));\n        index = linkRegex.lastIndex;\n    }\n    if (index < bundle.content.length) {\n        content.push(bundle.content.substring(index));\n    }\n    return react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"span\", { style: style, key: key, className: className }, content);\n}\nfunction Ansi(props) {\n    var className = props.className, useClasses = props.useClasses, children = props.children, linkify = props.linkify;\n    return react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"code\", { className: className }, ansiToJSON(children !== null && children !== void 0 ? children : \"\", useClasses !== null && useClasses !== void 0 ? useClasses : false).map(convertBundleIntoReact.bind(null, linkify !== null && linkify !== void 0 ? linkify : false, useClasses !== null && useClasses !== void 0 ? useClasses : false)));\n}\n// This is copied from the Jupyter Classic source code\n// notebook/static/base/js/utils.js to handle \\b in a way\n// that is **compatible with Jupyter classic**.   One can\n// argue that this behavior is questionable:\n//   https://stackoverflow.com/questions/55440152/multiple-b-doesnt-work-as-expected-in-jupyter#\nfunction fixBackspace(txt) {\n    var tmp = txt;\n    do {\n        txt = tmp;\n        // Cancel out anything-but-newline followed by backspace\n        // eslint-disable-next-line no-control-regex\n        tmp = txt.replace(/[^\\n]\\x08/gm, \"\");\n    } while (tmp.length < txt.length);\n    return txt;\n}\n\nvar StdoutList = function (_a) {\n    var data = _a.data;\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: data.map(function (_a) {\n            var data = _a.data, id = _a.id;\n            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"console-item\", [consoleItemClassName$1]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Ansi, { children: data }) }, id));\n        }) }));\n};\nvar consoleItemClassName$1 = css({\n    width: \"100%\",\n    padding: \"$space$3 $space$2\",\n    fontSize: \".85em\",\n    position: \"relative\",\n    whiteSpace: \"pre\",\n    \"&:not(:first-child):after\": {\n        content: \"\",\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        right: 0,\n        height: 1,\n        background: \"$colors$surface3\",\n    },\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar getParameters = function (parameters) {\n    return lz_string__WEBPACK_IMPORTED_MODULE_6__.compressToBase64(JSON.stringify(parameters))\n        .replace(/\\+/g, \"-\") // Convert '+' to '-'\n        .replace(/\\//g, \"_\") // Convert '/' to '_'\n        .replace(/=+$/, \"\");\n}; /* Remove ending '='*/\nvar CSB_URL = \"https://codesandbox.io/api/v1/sandboxes/define\";\nvar getFileParameters = function (files, environment) {\n    var normalizedFiles = Object.keys(files).reduce(function (prev, next) {\n        var _a;\n        var fileName = next.replace(\"/\", \"\");\n        var value = {\n            content: files[next].code,\n            isBinary: false,\n        };\n        return __assign(__assign({}, prev), (_a = {}, _a[fileName] = value, _a));\n    }, {});\n    return getParameters(__assign({ files: normalizedFiles }, (environment ? { template: environment } : null)));\n};\nvar UnstyledOpenInCodeSandboxButton = function (_a) {\n    var _b, _c, _d;\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    var sandpack = useSandpack().sandpack;\n    var formRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    var _e = react__WEBPACK_IMPORTED_MODULE_1__.useState(), paramsValues = _e[0], setParamsValues = _e[1];\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function debounce() {\n        var timer = setTimeout(function () {\n            var params = getFileParameters(sandpack.files, sandpack.environment);\n            var searchParams = new URLSearchParams({\n                parameters: params,\n                query: new URLSearchParams({\n                    file: sandpack.activeFile,\n                    utm_medium: \"sandpack\",\n                }).toString(),\n            });\n            setParamsValues(searchParams);\n        }, 600);\n        return function () {\n            clearTimeout(timer);\n        };\n    }, [sandpack.activeFile, sandpack.environment, sandpack.files]);\n    /**\n     * This is a safe limit to avoid too long requests (401),\n     * as all parameters are attached in the URL\n     */\n    if (((_d = (_c = (_b = paramsValues === null || paramsValues === void 0 ? void 0 : paramsValues.get) === null || _b === void 0 ? void 0 : _b.call(paramsValues, \"parameters\")) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0) > 1500) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", __assign({ onClick: function () { var _a; return (_a = formRef.current) === null || _a === void 0 ? void 0 : _a.submit(); }, title: \"Open in CodeSandbox\", type: \"button\" }, props, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { ref: formRef, action: CSB_URL, method: \"POST\", style: { visibility: \"hidden\" }, target: \"_blank\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { name: \"environment\", type: \"hidden\", value: sandpack.environment === \"node\" ? \"server\" : sandpack.environment }), Array.from(paramsValues, function (_a) {\n                            var key = _a[0], value = _a[1];\n                            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { name: key, type: \"hidden\", value: value }, key));\n                        })] }), children] })));\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", __assign({ href: \"\".concat(CSB_URL, \"?\").concat(paramsValues === null || paramsValues === void 0 ? void 0 : paramsValues.toString(), \"&environment=\").concat(sandpack.environment === \"node\" ? \"server\" : sandpack.environment), rel: \"noreferrer noopener\", target: \"_blank\", title: \"Open in CodeSandbox\" }, props, { children: children })));\n};\n\nvar OpenInCodeSandboxButton = function () {\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(UnstyledOpenInCodeSandboxButton, { className: classNames(\"button\", [\n            classNames(\"icon-standalone\"),\n            buttonClassName,\n            iconStandaloneClassName,\n            roundedButtonClassName,\n        ]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ExportIcon, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { children: \"Open Sandbox\" })] }));\n};\n\nvar _a$3;\nvar cubeClassName = css({\n    transform: \"translate(-4px, 9px) scale(0.13, 0.13)\",\n    \"*\": { position: \"absolute\", width: \"96px\", height: \"96px\" },\n});\nvar wrapperClassName$2 = css((_a$3 = {\n        position: \"absolute\",\n        right: \"$space$2\",\n        bottom: \"$space$2\",\n        zIndex: \"$top\",\n        width: \"32px\",\n        height: \"32px\",\n        borderRadius: \"$border$radius\"\n    },\n    _a$3[\".\".concat(cubeClassName)] = { display: \"flex\" },\n    _a$3[\".sp-button.\".concat(buttonClassName)] = { display: \"none\" },\n    _a$3[\"&:hover .sp-button.\".concat(buttonClassName)] = { display: \"flex\" },\n    _a$3[\"&:hover .sp-button.\".concat(buttonClassName, \" > span\")] = { display: \"none\" },\n    _a$3[\"&:hover .\".concat(cubeClassName)] = { display: \"none\" },\n    _a$3));\nvar cubeRotate = keyframes({\n    \"0%\": {\n        transform: \"rotateX(-25.5deg) rotateY(45deg)\",\n    },\n    \"100%\": {\n        transform: \"rotateX(-25.5deg) rotateY(405deg)\",\n    },\n});\nvar sidesClassNames = css({\n    animation: \"\".concat(cubeRotate, \" 1s linear infinite\"),\n    animationFillMode: \"forwards\",\n    transformStyle: \"preserve-3d\",\n    transform: \"rotateX(-25.5deg) rotateY(45deg)\",\n    \"*\": {\n        border: \"10px solid $colors$clickable\",\n        borderRadius: \"8px\",\n        background: \"$colors$surface1\",\n    },\n    \".top\": {\n        transform: \"rotateX(90deg) translateZ(44px)\",\n        transformOrigin: \"50% 50%\",\n    },\n    \".bottom\": {\n        transform: \"rotateX(-90deg) translateZ(44px)\",\n        transformOrigin: \"50% 50%\",\n    },\n    \".front\": {\n        transform: \"rotateY(0deg) translateZ(44px)\",\n        transformOrigin: \"50% 50%\",\n    },\n    \".back\": {\n        transform: \"rotateY(-180deg) translateZ(44px)\",\n        transformOrigin: \"50% 50%\",\n    },\n    \".left\": {\n        transform: \"rotateY(-90deg) translateZ(44px)\",\n        transformOrigin: \"50% 50%\",\n    },\n    \".right\": {\n        transform: \"rotateY(90deg) translateZ(44px)\",\n        transformOrigin: \"50% 50%\",\n    },\n});\nvar Loading = function (_a) {\n    var className = _a.className, showOpenInCodeSandbox = _a.showOpenInCodeSandbox, props = __rest(_a, [\"className\", \"showOpenInCodeSandbox\"]);\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", __assign({ className: classNames(\"cube-wrapper\", [wrapperClassName$2, className]), title: \"Open in CodeSandbox\" }, props, { children: [showOpenInCodeSandbox && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OpenInCodeSandboxButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"cube\", [cubeClassName]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"sides\", [sidesClassNames]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"top\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"right\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"bottom\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"left\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"front\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"back\" })] }) })] })));\n};\n\nvar loadingClassName = css({\n    backgroundColor: \"$colors$surface1\",\n});\nvar LoadingOverlay = function (_a) {\n    var clientId = _a.clientId, loading = _a.loading, className = _a.className, style = _a.style, showOpenInCodeSandbox = _a.showOpenInCodeSandbox, props = __rest(_a, [\"clientId\", \"loading\", \"className\", \"style\", \"showOpenInCodeSandbox\"]);\n    var classNames = useClassNames();\n    var _b = useSandpack().sandpack, runSandpack = _b.runSandpack, environment = _b.environment;\n    var _c = react__WEBPACK_IMPORTED_MODULE_1__.useState(false), shouldShowStdout = _c[0], setShouldShowStdout = _c[1];\n    var loadingOverlayState = useLoadingOverlayState(clientId, loading);\n    var progressMessage = useSandpackPreviewProgress({ clientId: clientId });\n    var stdoutData = useSandpackShellStdout({ clientId: clientId }).logs;\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var timer;\n        if (progressMessage === null || progressMessage === void 0 ? void 0 : progressMessage.includes(\"Running\")) {\n            timer = setTimeout(function () {\n                setShouldShowStdout(true);\n            }, 3000);\n        }\n        return function () {\n            if (timer) {\n                clearTimeout(timer);\n            }\n        };\n    }, [progressMessage]);\n    if (loadingOverlayState === \"HIDDEN\") {\n        return null;\n    }\n    if (loadingOverlayState === \"TIMEOUT\") {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", __assign({ className: classNames(\"overlay\", [\n                classNames(\"error\"),\n                absoluteClassName,\n                errorClassName,\n                errorBundlerClassName,\n                className,\n            ]) }, props, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"error-message\", [errorMessageClassName]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { className: classNames(\"error-title\", [css({ fontWeight: \"bold\" })]), children: \"Couldn't connect to server\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"error-message\", [errorMessageClassName]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", { children: [\"This means sandpack cannot connect to the runtime or your network is having some issues. Please check the network tab in your browser and try again. If the problem persists, report it via\", \" \", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: \"mailto:hello@codesandbox.io?subject=Sandpack Timeout Error\", children: \"email\" }), \" \", \"or submit an issue on\", \" \", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: \"https://github.com/codesandbox/sandpack/issues\", rel: \"noreferrer noopener\", target: \"_blank\", children: \"GitHub.\" })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", { className: classNames(\"error-message\", [\n                            errorMessageClassName({ errorCode: true }),\n                        ]), children: [\"ENV: \", environment, (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"br\", {}), \"ERROR: TIME_OUT\"] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { className: classNames(\"button\", [\n                                classNames(\"icon-standalone\"),\n                                buttonClassName,\n                                iconStandaloneClassName,\n                                roundedButtonClassName,\n                            ]), onClick: runSandpack, title: \"Restart script\", type: \"button\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RestartIcon, {}), \" \", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { children: \"Try again\" })] }) })] }) })));\n    }\n    var stillLoading = loadingOverlayState === \"LOADING\" || loadingOverlayState === \"PRE_FADING\";\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", __assign({ className: classNames(\"overlay\", [\n                    classNames(\"loading\"),\n                    absoluteClassName,\n                    loadingClassName,\n                    className,\n                ]), style: __assign(__assign({}, style), { opacity: stillLoading ? 1 : 0, transition: \"opacity \".concat(FADE_ANIMATION_DURATION, \"ms ease-out\") }) }, props, { children: [shouldShowStdout && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: stdoutPreview.toString(), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StdoutList, { data: stdoutData }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Loading, { showOpenInCodeSandbox: showOpenInCodeSandbox })] })), progressMessage && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: progressClassName$1.toString(), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: progressMessage }) }))] }));\n};\nvar stdoutPreview = css({\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    bottom: \"$space$8\",\n    overflow: \"auto\",\n    opacity: 0.5,\n    overflowX: \"hidden\",\n});\nvar progressClassName$1 = css({\n    position: \"absolute\",\n    left: \"$space$5\",\n    bottom: \"$space$4\",\n    zIndex: \"$top\",\n    color: \"$colors$clickable\",\n    animation: \"\".concat(fadeIn, \" 150ms ease\"),\n    fontFamily: \"$font$mono\",\n    fontSize: \".8em\",\n    width: \"75%\",\n    p: {\n        whiteSpace: \"nowrap\",\n        margin: 0,\n        textOverflow: \"ellipsis\",\n        overflow: \"hidden\",\n    },\n});\n\nvar DependenciesProgress = function (_a) {\n    var clientId = _a.clientId;\n    var progressMessage = useSandpackPreviewProgress({\n        timeout: 3000,\n        clientId: clientId,\n    });\n    if (!progressMessage) {\n        return null;\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: progressClassName.toString(), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: progressMessage }) }));\n};\nvar progressClassName = css({\n    position: \"absolute\",\n    left: \"$space$5\",\n    bottom: \"$space$4\",\n    zIndex: \"$top\",\n    color: \"$colors$clickable\",\n    animation: \"\".concat(fadeIn, \" 150ms ease\"),\n    fontFamily: \"$font$mono\",\n    fontSize: \".8em\",\n    width: \"75%\",\n    p: {\n        whiteSpace: \"nowrap\",\n        margin: 0,\n        textOverflow: \"ellipsis\",\n        overflow: \"hidden\",\n    },\n});\n\nvar explorerClassName = css({\n    borderRadius: \"0\",\n    width: \"100%\",\n    padding: 0,\n    marginBottom: \"$space$2\",\n    span: {\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n    },\n    svg: {\n        marginRight: \"$space$1\",\n    },\n});\nvar File = function (_a) {\n    var selectFile = _a.selectFile, path = _a.path, active = _a.active, onClick = _a.onClick, depth = _a.depth, isDirOpen = _a.isDirOpen;\n    var classNames = useClassNames();\n    var onClickButton = function (event) {\n        if (selectFile) {\n            selectFile(path);\n        }\n        onClick === null || onClick === void 0 ? void 0 : onClick(event);\n    };\n    var fileName = path.split(\"/\").filter(Boolean).pop();\n    var getIcon = function () {\n        if (selectFile)\n            return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FileIcon, {});\n        return isDirOpen ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DirectoryIconOpen, {}) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DirectoryIconClosed, {});\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { className: classNames(\"button\", [\n            classNames(\"explorer\"),\n            buttonClassName,\n            explorerClassName,\n        ]), \"data-active\": active, onClick: onClickButton, style: { paddingLeft: 18 * depth + \"px\" }, title: fileName, type: \"button\", children: [getIcon(), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { children: fileName })] }));\n};\n\nvar Directory = function (_a) {\n    var prefixedPath = _a.prefixedPath, files = _a.files, selectFile = _a.selectFile, activeFile = _a.activeFile, depth = _a.depth, autoHiddenFiles = _a.autoHiddenFiles, visibleFiles = _a.visibleFiles, initialCollapsedFolder = _a.initialCollapsedFolder;\n    var _b = react__WEBPACK_IMPORTED_MODULE_1__.useState(!(initialCollapsedFolder === null || initialCollapsedFolder === void 0 ? void 0 : initialCollapsedFolder.includes(prefixedPath))), open = _b[0], setOpen = _b[1];\n    var toggle = function () { return setOpen(function (prev) { return !prev; }); };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(File, { depth: depth, isDirOpen: open, onClick: toggle, path: prefixedPath + \"/\" }), open && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ModuleList, { activeFile: activeFile, autoHiddenFiles: autoHiddenFiles, depth: depth + 1, files: files, initialCollapsedFolder: initialCollapsedFolder, prefixedPath: prefixedPath, selectFile: selectFile, visibleFiles: visibleFiles }))] }, prefixedPath));\n};\n\nvar fromPropsToModules = function (_a) {\n    var autoHiddenFiles = _a.autoHiddenFiles, visibleFiles = _a.visibleFiles, files = _a.files, prefixedPath = _a.prefixedPath;\n    var hasVisibleFilesOption = visibleFiles.length > 0;\n    /**\n     * When visibleFiles or activeFile are set, the hidden and active flags on the files prop are ignored.\n     */\n    var filterByHiddenProperty = autoHiddenFiles && !hasVisibleFilesOption;\n    var filterByVisibleFilesOption = autoHiddenFiles && !!hasVisibleFilesOption;\n    var fileListWithoutPrefix = Object.keys(files)\n        .filter(function (filePath) {\n        var _a;\n        var isValidatedPath = filePath.startsWith(prefixedPath);\n        if (filterByVisibleFilesOption) {\n            return isValidatedPath && visibleFiles.includes(filePath);\n        }\n        if (filterByHiddenProperty) {\n            return isValidatedPath && !((_a = files[filePath]) === null || _a === void 0 ? void 0 : _a.hidden);\n        }\n        return isValidatedPath;\n    })\n        .map(function (file) { return file.substring(prefixedPath.length); });\n    var directories = new Set(fileListWithoutPrefix\n        .filter(function (file) { return file.includes(\"/\"); })\n        .map(function (file) { return \"\".concat(prefixedPath).concat(file.split(\"/\")[0], \"/\"); }));\n    var modules = fileListWithoutPrefix\n        .filter(function (file) { return !file.includes(\"/\"); })\n        .map(function (file) { return \"\".concat(prefixedPath).concat(file); });\n    return { directories: Array.from(directories), modules: modules };\n};\n\nvar ModuleList = function (_a) {\n    var _b = _a.depth, depth = _b === void 0 ? 0 : _b, activeFile = _a.activeFile, selectFile = _a.selectFile, prefixedPath = _a.prefixedPath, files = _a.files, autoHiddenFiles = _a.autoHiddenFiles, visibleFiles = _a.visibleFiles, initialCollapsedFolder = _a.initialCollapsedFolder;\n    var _c = fromPropsToModules({\n        visibleFiles: visibleFiles,\n        autoHiddenFiles: autoHiddenFiles,\n        prefixedPath: prefixedPath,\n        files: files,\n    }), directories = _c.directories, modules = _c.modules;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [directories.map(function (dir) { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Directory, { activeFile: activeFile, autoHiddenFiles: autoHiddenFiles, depth: depth, files: files, initialCollapsedFolder: initialCollapsedFolder, prefixedPath: dir, selectFile: selectFile, visibleFiles: visibleFiles }, dir)); }), modules.map(function (file) { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(File, { active: activeFile === file, depth: depth, path: file, selectFile: selectFile }, file)); })] }));\n};\n\nvar fileExplorerClassName = css({\n    padding: \"$space$3\",\n    overflow: \"auto\",\n    height: \"100%\",\n});\nvar SandpackFileExplorer = function (_a) {\n    var className = _a.className, _b = _a.autoHiddenFiles, autoHiddenFiles = _b === void 0 ? false : _b, _c = _a.initialCollapsedFolder, initialCollapsedFolder = _c === void 0 ? [] : _c, props = __rest(_a, [\"className\", \"autoHiddenFiles\", \"initialCollapsedFolder\"]);\n    var _d = useSandpack(), _e = _d.sandpack, status = _e.status, updateFile = _e.updateFile, deleteFile = _e.deleteFile, activeFile = _e.activeFile, files = _e.files, openFile = _e.openFile, visibleFilesFromProps = _e.visibleFilesFromProps, listen = _d.listen;\n    var classNames = useClassNames();\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function watchFSFilesChanges() {\n        if (status !== \"running\")\n            return;\n        var unsubscribe = listen(function (message) {\n            if (message.type === \"fs/change\") {\n                updateFile(message.path, message.content, false);\n            }\n            if (message.type === \"fs/remove\") {\n                deleteFile(message.path, false);\n            }\n        });\n        return unsubscribe;\n    }, [status]);\n    var orderedFiles = Object.keys(files)\n        .sort()\n        .reduce(function (obj, key) {\n        obj[key] = files[key];\n        return obj;\n    }, {});\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", __assign({ className: classNames(\"file-explorer\", [stackClassName, className]) }, props, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"file-explorer-list\", [fileExplorerClassName]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ModuleList, { activeFile: activeFile, autoHiddenFiles: autoHiddenFiles, files: orderedFiles, initialCollapsedFolder: initialCollapsedFolder, prefixedPath: \"/\", selectFile: openFile, visibleFiles: visibleFilesFromProps }) }) })));\n};\n\nvar splitUrl = function (url) {\n    var match = url.match(/(https?:\\/\\/.*?)\\//);\n    if (match && match[1]) {\n        return [match[1], url.replace(match[1], \"\")];\n    }\n    return [url, \"/\"];\n};\n\nvar navigatorClassName = css({\n    display: \"flex\",\n    alignItems: \"center\",\n    height: \"$layout$headerHeight\",\n    borderBottom: \"1px solid $colors$surface2\",\n    padding: \"$space$3 $space$2\",\n    background: \"$colors$surface1\",\n});\nvar inputClassName = css({\n    backgroundColor: \"$colors$surface2\",\n    color: \"$colors$clickable\",\n    padding: \"$space$1 $space$3\",\n    borderRadius: \"99999px\",\n    border: \"1px solid $colors$surface2\",\n    height: \"24px\",\n    lineHeight: \"24px\",\n    fontSize: \"inherit\",\n    outline: \"none\",\n    flex: 1,\n    marginLeft: \"$space$4\",\n    width: \"0\",\n    transition: \"background $transitions$default\",\n    \"&:hover\": {\n        backgroundColor: \"$colors$surface3\",\n    },\n    \"&:focus\": {\n        backgroundColor: \"$surface1\",\n        border: \"1px solid $colors$accent\",\n        color: \"$colors$base\",\n    },\n});\nvar Navigator = function (_a) {\n    var _b;\n    var clientId = _a.clientId, onURLChange = _a.onURLChange, className = _a.className, startRoute = _a.startRoute, props = __rest(_a, [\"clientId\", \"onURLChange\", \"className\", \"startRoute\"]);\n    var _c = react__WEBPACK_IMPORTED_MODULE_1__.useState(\"\"), baseUrl = _c[0], setBaseUrl = _c[1];\n    var _d = useSandpack(), sandpack = _d.sandpack, dispatch = _d.dispatch, listen = _d.listen;\n    var _e = react__WEBPACK_IMPORTED_MODULE_1__.useState((_b = startRoute !== null && startRoute !== void 0 ? startRoute : sandpack.startRoute) !== null && _b !== void 0 ? _b : \"/\"), relativeUrl = _e[0], setRelativeUrl = _e[1];\n    var _f = react__WEBPACK_IMPORTED_MODULE_1__.useState(false), backEnabled = _f[0], setBackEnabled = _f[1];\n    var _g = react__WEBPACK_IMPORTED_MODULE_1__.useState(false), forwardEnabled = _g[0], setForwardEnabled = _g[1];\n    var classNames = useClassNames();\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var unsub = listen(function (message) {\n            if (message.type === \"urlchange\") {\n                var url = message.url, back = message.back, forward = message.forward;\n                var _a = splitUrl(url), newBaseUrl = _a[0], newRelativeUrl = _a[1];\n                setBaseUrl(newBaseUrl);\n                setRelativeUrl(newRelativeUrl);\n                setBackEnabled(back);\n                setForwardEnabled(forward);\n            }\n        }, clientId);\n        return function () { return unsub(); };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    var handleInputChange = function (e) {\n        var path = e.target.value.startsWith(\"/\")\n            ? e.target.value\n            : \"/\".concat(e.target.value);\n        setRelativeUrl(path);\n    };\n    var handleKeyDown = function (e) {\n        if (e.code === \"Enter\") {\n            //  Enter\n            e.preventDefault();\n            e.stopPropagation();\n            if (typeof onURLChange === \"function\") {\n                onURLChange(baseUrl + e.currentTarget.value);\n            }\n        }\n    };\n    var handleRefresh = function () {\n        dispatch({ type: \"refresh\" });\n    };\n    var handleBack = function () {\n        dispatch({ type: \"urlback\" });\n    };\n    var handleForward = function () {\n        dispatch({ type: \"urlforward\" });\n    };\n    var buttonsClassNames = classNames(\"button\", [\n        classNames(\"icon\"),\n        buttonClassName,\n        iconClassName,\n        css({\n            minWidth: \"$space$6\",\n            justifyContent: \"center\",\n        }),\n    ]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", __assign({ className: classNames(\"navigator\", [navigatorClassName, className]) }, props, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { \"aria-label\": \"Go back one page\", className: buttonsClassNames, disabled: !backEnabled, onClick: handleBack, type: \"button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(BackwardIcon, {}) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { \"aria-label\": \"Go forward one page\", className: buttonsClassNames, disabled: !forwardEnabled, onClick: handleForward, type: \"button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ForwardIcon, {}) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { \"aria-label\": \"Refresh page\", className: buttonsClassNames, onClick: handleRefresh, type: \"button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RefreshIcon, {}) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { \"aria-label\": \"Current Sandpack URL\", className: classNames(\"input\", [inputClassName]), name: \"Current Sandpack URL\", onChange: handleInputChange, onKeyDown: handleKeyDown, type: \"text\", value: relativeUrl })] })));\n};\n\nvar _a$2;\nvar previewClassName = css((_a$2 = {\n        flex: 1,\n        display: \"flex\",\n        flexDirection: \"column\",\n        background: \"white\",\n        overflow: \"auto\",\n        position: \"relative\"\n    },\n    _a$2[\".\".concat(THEME_PREFIX, \"-bridge-frame\")] = {\n        border: 0,\n        position: \"absolute\",\n        left: \"$space$2\",\n        bottom: \"$space$2\",\n        zIndex: \"$top\",\n        height: 12,\n        width: \"30%\",\n        mixBlendMode: \"multiply\",\n        pointerEvents: \"none\",\n    },\n    _a$2));\nvar previewIframe = css({\n    border: \"0\",\n    outline: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    minHeight: \"160px\",\n    maxHeight: \"2000px\",\n    flex: 1,\n});\nvar previewActionsClassName$1 = css({\n    display: \"flex\",\n    position: \"absolute\",\n    bottom: \"$space$2\",\n    right: \"$space$2\",\n    zIndex: \"$overlay\",\n    gap: \"$space$2\",\n});\nvar SandpackPreview = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function (_a, ref) {\n    var _b = _a.showNavigator, showNavigator = _b === void 0 ? false : _b, _c = _a.showRefreshButton, showRefreshButton = _c === void 0 ? true : _c, _d = _a.showOpenInCodeSandbox, showOpenInCodeSandbox = _d === void 0 ? true : _d, _e = _a.showSandpackErrorOverlay, showSandpackErrorOverlay = _e === void 0 ? true : _e; _a.showOpenNewtab; var _g = _a.showRestartButton, showRestartButton = _g === void 0 ? true : _g, _h = _a.actionsChildren, actionsChildren = _h === void 0 ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {}) : _h, children = _a.children, className = _a.className, _j = _a.startRoute, startRoute = _j === void 0 ? \"/\" : _j, props = __rest(_a, [\"showNavigator\", \"showRefreshButton\", \"showOpenInCodeSandbox\", \"showSandpackErrorOverlay\", \"showOpenNewtab\", \"showRestartButton\", \"actionsChildren\", \"children\", \"className\", \"startRoute\"]);\n    var _k = useSandpackClient({ startRoute: startRoute }), sandpack = _k.sandpack, listen = _k.listen, iframe = _k.iframe, getClient = _k.getClient, clientId = _k.clientId, dispatch = _k.dispatch;\n    var _l = react__WEBPACK_IMPORTED_MODULE_1__.useState(null), iframeComputedHeight = _l[0], setComputedAutoHeight = _l[1];\n    var status = sandpack.status;\n    var refresh = useSandpackNavigation(clientId).refresh;\n    var restart = useSandpackShell(clientId).restart;\n    var classNames = useClassNames();\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var unsubscribe = listen(function (message) {\n            if (message.type === \"resize\") {\n                setComputedAutoHeight(message.height);\n            }\n        });\n        return unsubscribe;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(ref, function () { return ({\n        clientId: clientId,\n        getClient: getClient,\n    }); }, [getClient, clientId]);\n    var handleNewURL = function (newUrl) {\n        if (!iframe.current) {\n            return;\n        }\n        iframe.current.src = newUrl;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SandpackStack, __assign({ className: classNames(\"preview\", [className]) }, props, { children: [showNavigator && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Navigator, { clientId: clientId, onURLChange: handleNewURL, startRoute: startRoute })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"preview-container\", [previewClassName]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"iframe\", { ref: iframe, className: classNames(\"preview-iframe\", [previewIframe]), style: {\n                            // set height based on the content only in auto mode\n                            // and when the computed height was returned by the bundler\n                            height: iframeComputedHeight ? iframeComputedHeight : undefined,\n                        }, title: \"Sandpack Preview\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"preview-actions\", [previewActionsClassName$1]), children: [actionsChildren, showRestartButton && sandpack.environment === \"node\" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RoundedButton, { onClick: restart, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RestartIcon, {}) })), !showNavigator && showRefreshButton && status === \"running\" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RoundedButton, { onClick: refresh, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RefreshIcon, {}) })), sandpack.teamId && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: classNames(\"button\", [\n                                    classNames(\"icon-standalone\"),\n                                    buttonClassName,\n                                    iconStandaloneClassName,\n                                    roundedButtonClassName,\n                                ]), onClick: function () { return dispatch({ type: \"sign-out\" }); }, title: \"Sign out\", type: \"button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SignOutIcon, {}) })), showOpenInCodeSandbox && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OpenInCodeSandboxButton, {})] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingOverlay, { clientId: clientId, showOpenInCodeSandbox: showOpenInCodeSandbox }), showSandpackErrorOverlay && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorOverlay, {}), children] })] })));\n});\n\nvar _a$1;\nvar transpiledCodeClassName = css((_a$1 = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"100%\",\n        position: \"relative\",\n        overflow: \"auto\",\n        minHeight: \"160px\",\n        flex: 1\n    },\n    _a$1[\".\".concat(THEME_PREFIX, \"-stack\")] = {\n        height: \"100%\",\n    },\n    _a$1));\nvar SandpackTranspiledCode = function (_a) {\n    var className = _a.className, props = __rest(_a, [\"className\"]);\n    var sandpack = useSandpack().sandpack;\n    var transpiledCode = useTranspiledCode();\n    var classNames = useClassNames();\n    var hiddenIframeRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var hiddenIframe = hiddenIframeRef.current;\n        if (hiddenIframe) {\n            sandpack.registerBundler(hiddenIframe, \"hidden\");\n        }\n        return function () {\n            sandpack.unregisterBundler(\"hidden\");\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", __assign({ className: classNames(\"transpiled-code\", [\n            stackClassName,\n            transpiledCodeClassName,\n            className,\n        ]) }, props, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackCodeViewer, __assign({ code: transpiledCode !== null && transpiledCode !== void 0 ? transpiledCode : \"\", initMode: sandpack.initMode }, props)), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"iframe\", { ref: hiddenIframeRef, style: { display: \"none\" }, title: \"transpiled sandpack code\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorOverlay, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingOverlay, { clientId: \"hidden\", showOpenInCodeSandbox: false })] })));\n};\n\nvar wrapperClassName$1 = css({\n    justifyContent: \"space-between\",\n    borderBottom: \"1px solid $colors$surface2\",\n    padding: \"0 $space$2\",\n    fontFamily: \"$font$mono\",\n    height: \"$layout$headerHeight\",\n    minHeight: \"$layout$headerHeight\",\n    overflowX: \"auto\",\n    whiteSpace: \"nowrap\",\n});\nvar flexClassName$1 = css({\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: \"$space$2\",\n});\nvar Header$1 = function (_a) {\n    var status = _a.status, suiteOnly = _a.suiteOnly, setSuiteOnly = _a.setSuiteOnly, setVerbose = _a.setVerbose, verbose = _a.verbose, watchMode = _a.watchMode, setWatchMode = _a.setWatchMode, showSuitesOnly = _a.showSuitesOnly, showWatchButton = _a.showWatchButton, showVerboseButton = _a.showVerboseButton, hideTestsAndSupressLogs = _a.hideTestsAndSupressLogs;\n    var classNames = useClassNames();\n    var buttonsClassName = classNames(\"test-header-button\", [\n        buttonClassName,\n        roundedButtonClassName,\n        css({ padding: \"$space$1 $space$3\" }),\n    ]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-header\", [wrapperClassName$1, flexClassName$1]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"test-header-wrapper\", [flexClassName$1]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", { className: classNames(\"test-header-title\", [\n                        css({\n                            lineHeight: 1,\n                            margin: 0,\n                            color: \"$colors$base\",\n                            fontSize: \"$font$size\",\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            gap: \"$space$2\",\n                        }),\n                    ]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConsoleIcon, {}), \"Tests\"] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-header-actions\", [flexClassName$1]), children: [showSuitesOnly && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: buttonsClassName, \"data-active\": suiteOnly, disabled: status === \"initialising\", onClick: setSuiteOnly, type: \"button\", children: \"Suite only\" })), showVerboseButton && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: buttonsClassName, \"data-active\": verbose, disabled: status === \"initialising\" || hideTestsAndSupressLogs, onClick: setVerbose, type: \"button\", children: \"Verbose\" })), showWatchButton && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: buttonsClassName, \"data-active\": watchMode, disabled: status === \"initialising\", onClick: setWatchMode, type: \"button\", children: \"Watch\" }))] })] }));\n};\n\nvar RunButton = function (_a) {\n    var onClick = _a.onClick;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RoundedButton, { onClick: onClick, title: \"Run tests\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RunIcon, {}) }));\n};\n\nvar setTestTheme = function (isDark) { return ({\n    \"--test-pass\": isDark ? \"#18df16\" : \"#15c213\",\n    \"--test-fail\": isDark ? \"#df162b\" : \"#c21325\",\n    \"--test-skip\": isDark ? \"#eace2b\" : \"#c2a813\",\n    \"--test-run\": isDark ? \"#eace2b\" : \"#c2a813\",\n    \"--test-title\": isDark ? \"#3fbabe\" : \"#256c6f\",\n}); };\nvar color = css({\n    variants: {\n        status: {\n            pass: { color: \"var(--test-pass)\" },\n            fail: { color: \"var(--test-fail)\" },\n            skip: { color: \"var(--test-skip)\" },\n            title: { color: \"var(--test-title)\" },\n        },\n    },\n});\nvar passTextClassName = color({ status: \"pass\" });\nvar failTextClassName = color({ status: \"fail\" });\nvar skipTextClassName = color({ status: \"skip\" });\nvar titleTextClassName = color({ status: \"title\" });\nvar background = css({\n    variants: {\n        status: {\n            pass: { background: \"var(--test-pass)\", color: \"$colors$surface1\" },\n            fail: { background: \"var(--test-fail)\", color: \"$colors$surface1\" },\n            run: { background: \"var(--test-run)\", color: \"$colors$surface1\" },\n        },\n    },\n});\nvar runBackgroundClassName = background({ status: \"run\" });\nvar passBackgroundClassName = background({ status: \"pass\" });\nvar failBackgroundClassName = background({ status: \"fail\" });\n\nvar testContainerClassName = css({\n    marginLeft: \"$space$4\",\n});\nvar containerClassName$4 = css({\n    marginBottom: \"$space$2\",\n    color: \"$colors$clickable\",\n});\nvar testClassName = css({\n    marginBottom: \"$space$2\",\n    color: \"$colors$hover\",\n});\nvar durationClassName = css({\n    marginLeft: \"$space$2\",\n});\nvar gapRightClassName = css({\n    marginRight: \"$space$2\",\n});\nvar Tests = function (_a) {\n    var tests = _a.tests; _a.style;\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"test\", [testContainerClassName]), children: tests.map(function (test) { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-result\", [containerClassName$4]), children: [test.status === \"pass\" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-pass-text\", [\n                        passTextClassName,\n                        gapRightClassName,\n                    ]), children: \"\\u2713\" })), test.status === \"fail\" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-fail-text\", [\n                        failTextClassName,\n                        gapRightClassName,\n                    ]), children: \"\\u2715\" })), test.status === \"idle\" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-idle-text\", [\n                        skipTextClassName,\n                        gapRightClassName,\n                    ]), children: \"\\u25CB\" })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-name-text\", [testClassName]), children: test.name }), test.duration !== undefined && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { className: classNames(\"test-duration-text\", [durationClassName]), children: [\"(\", test.duration, \" ms)\"] }))] }, test.name)); }) }));\n};\n\nvar getTests = function (block) {\n    var _a;\n    var _b, _c;\n    return (_a = Object.values((_b = block.tests) !== null && _b !== void 0 ? _b : {})).concat.apply(_a, Object.values((_c = block.describes) !== null && _c !== void 0 ? _c : {}).map(getTests));\n};\nvar getFailingTests = function (block) {\n    return getTests(block).filter(function (t) { return t.status === \"fail\"; });\n};\nvar getAllTestResults = function (specs) {\n    return specs.map(getSpecTestResults).reduce(function (acc, stats) {\n        return {\n            pass: acc.pass + stats.pass,\n            fail: acc.fail + stats.fail,\n            skip: acc.skip + stats.skip,\n            total: acc.total + stats.total,\n        };\n    }, { pass: 0, skip: 0, fail: 0, total: 0 });\n};\nvar getSpecTestResults = function (spec) {\n    return getTests(spec).reduce(function (acc, test) {\n        return {\n            pass: test.status === \"pass\" ? acc.pass + 1 : acc.pass,\n            fail: test.status === \"fail\" ? acc.fail + 1 : acc.fail,\n            skip: test.status === \"idle\" || test.status === \"running\"\n                ? acc.skip + 1\n                : acc.skip,\n            total: acc.total + 1,\n        };\n    }, { pass: 0, fail: 0, skip: 0, total: 0 });\n};\nvar getAllSuiteResults = function (specs) {\n    return specs\n        .filter(function (spec) {\n        var _a, _b;\n        return Object.values((_a = spec.describes) !== null && _a !== void 0 ? _a : {}).length > 0 ||\n            Object.values((_b = spec.tests) !== null && _b !== void 0 ? _b : {}).length > 0;\n    })\n        .map(getSpecTestResults)\n        .reduce(function (acc, stats) {\n        return {\n            pass: acc.pass + (stats.fail === 0 ? 1 : 0),\n            fail: acc.fail + (stats.fail > 0 ? 1 : 0),\n            total: acc.total + 1,\n        };\n    }, { pass: 0, fail: 0, total: 0 });\n};\nvar getDuration = function (specs) {\n    return flatMap(specs, getTests).reduce(function (acc, test) { return acc + (test.duration || 0); }, 0);\n};\nvar isEmpty = function (block) {\n    var _a, _b;\n    return Object.values((_a = block.describes) !== null && _a !== void 0 ? _a : {}).length === 0 &&\n        Object.values((_b = block.tests) !== null && _b !== void 0 ? _b : {}).length === 0;\n};\nvar splitTail = function (as) {\n    var lastIndex = as.length - 1;\n    var head = as.slice(0, lastIndex);\n    var tail = as[lastIndex];\n    return [head, tail];\n};\nvar flatMap = function (as, f) {\n    return as.map(f).reduce(function (acc, next) { return acc.concat(next); }, []);\n};\nvar set = function (path, value) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function (object) {\n        return (0,clean_set__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(object, path, value);\n    };\n};\n\nvar nameClassName = css({\n    color: \"$colors$hover\",\n    marginBottom: \"$space$2\",\n});\nvar containerClassName$3 = css({\n    marginLeft: \"$space$4\",\n});\nvar Describes = function (_a) {\n    var describes = _a.describes;\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: describes.map(function (describe) {\n            var _a, _b;\n            if (isEmpty(describe)) {\n                return null;\n            }\n            var tests = Object.values((_a = describe.tests) !== null && _a !== void 0 ? _a : {});\n            var describes = Object.values((_b = describe.describes) !== null && _b !== void 0 ? _b : {});\n            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-describe\", [containerClassName$3]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"test-name\", [nameClassName]), children: describe.name }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Tests, { tests: tests }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Describes, { describes: describes })] }, describe.name));\n        }) }));\n};\n\nvar containerClassName$2 = css({\n    color: \"$colors$hover\",\n    fontSize: \"$font$size\",\n    padding: \"$space$2\",\n    whiteSpace: \"pre-wrap\",\n});\nvar FormattedError = function (_a) {\n    var error = _a.error, path = _a.path;\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"test-error\", [containerClassName$2]), dangerouslySetInnerHTML: { __html: formatDiffMessage(error, path) } }));\n};\nvar escapeHtml = function (unsafe) {\n    return unsafe\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n};\nvar formatDiffMessage = function (error, path) {\n    var finalMessage = \"\";\n    if (error.matcherResult) {\n        finalMessage = \"<span>\".concat(escapeHtml(error.message)\n            .replace(/(expected)/m, \"<span class=\\\"\".concat(passTextClassName, \"\\\">$1</span>\"))\n            .replace(/(received)/m, \"<span class=\\\"\".concat(failTextClassName, \"\\\">$1</span>\"))\n            .replace(/(Difference:)/m, \"<span>$1</span>\")\n            .replace(/(Expected:)(.*)/m, \"<span>$1</span><span class=\\\"\".concat(passTextClassName, \"\\\">$2</span>\"))\n            .replace(/(Received:)(.*)/m, \"<span>$1</span><span class=\\\"\".concat(failTextClassName, \"\\\">$2</span>\"))\n            .replace(/^(-.*)/gm, \"<span class=\\\"\".concat(failTextClassName, \"\\\">$1</span>\"))\n            .replace(/^(\\+.*)/gm, \"<span class=\\\"\".concat(passTextClassName, \"\\\">$1</span>\")), \"</span>\");\n    }\n    else {\n        finalMessage = escapeHtml(error.message);\n    }\n    if (error.mappedErrors &&\n        error.mappedErrors[0] &&\n        error.mappedErrors[0].fileName.endsWith(path) &&\n        error.mappedErrors[0]._originalScriptCode) {\n        var mappedError = error.mappedErrors[0];\n        var _originalScriptCode = mappedError._originalScriptCode || [];\n        var widestNumber_1 = Math.max.apply(Math, _originalScriptCode.map(function (code) { return (code.lineNumber + \"\").length; })) + 2;\n        var margin_1 = Array.from({ length: widestNumber_1 }).map(function () { return \" \"; });\n        finalMessage += \"<br />\";\n        finalMessage += \"<br />\";\n        finalMessage += \"<div>\";\n        _originalScriptCode\n            .filter(function (s) { return s.content.trim(); })\n            .forEach(function (code) {\n            var currentLineMargin = (code.lineNumber + \"\").length;\n            var newMargin = __spreadArray([], margin_1, true);\n            newMargin.length -= currentLineMargin;\n            if (code.highlight) {\n                newMargin.length -= 2;\n            }\n            var toBeIndex = code.content.indexOf(\".to\");\n            var toBeMargin = Array.from({ length: margin_1.length + toBeIndex - (widestNumber_1 - 1) }, function () { return \" \"; });\n            var content = escapeHtml(code.content)\n                .replace(/(describe|test|it)(\\()(&#039;|&quot;|`)(.*)(&#039;|&quot;|`)/m, \"<span>$1$2$3</span><span class=\\\"\".concat(titleTextClassName, \"\\\">$4</span><span>$5</span>\"))\n                .replace(/(expect\\()(.*)(\\)\\..*)(to[\\w\\d]*)(\\()(.*)(\\))/m, \"<span>$1</span><span class=\\\"\".concat(failTextClassName, \"\\\">$2</span><span>$3</span><span style=\\\"text-decoration: underline; font-weight: 900\\\">$4</span><span>$5</span><span class=\\\"\").concat(passTextClassName, \"\\\">$6</span><span>$7</span>\"));\n            finalMessage +=\n                \"<div \".concat(code.highlight ? \"style=\\\"font-weight:200;\\\"\" : \"\", \">\") +\n                    (code.highlight\n                        ? \"<span class=\\\"\".concat(failTextClassName, \"\\\">></span> \")\n                        : \"\") +\n                    newMargin.join(\"\") +\n                    escapeHtml(\"\" + code.lineNumber) +\n                    \" | \" +\n                    content +\n                    \"</div>\" +\n                    (code.highlight\n                        ? \"<div>\" +\n                            margin_1.join(\"\") +\n                            \" | \" +\n                            toBeMargin.join(\"\") +\n                            \"<span class=\\\"\".concat(failTextClassName, \"\\\">^</span>\") +\n                            \"</div>\"\n                        : \"\");\n        });\n        finalMessage += \"</div>\";\n    }\n    return finalMessage.replace(/(?:\\r\\n|\\r|\\n)/g, \"<br />\");\n};\n\nvar fileContainer = css({\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginBottom: \"$space$2\",\n});\nvar gapBottomClassName$1 = css({\n    marginBottom: \"$space$2\",\n});\nvar failTestClassName = css({\n    fontWeight: \"bold\",\n});\nvar labelClassName$1 = css({\n    borderRadius: \"calc($border$radius / 2)\",\n});\nvar specLabelClassName = css({\n    padding: \"$space$1 $space$2\",\n    fontFamily: \"$font$mono\",\n    textTransform: \"uppercase\",\n    marginRight: \"$space$2\",\n});\nvar filePathButtonClassName = css({\n    fontFamily: \"$font$mono\",\n    cursor: \"pointer\",\n    display: \"inline-block\",\n});\nvar filePathClassName = css({\n    color: \"$colors$clickable\",\n    textDecorationStyle: \"dotted\",\n    textDecorationLine: \"underline\",\n});\nvar fileNameClassName = css({\n    color: \"$colors$hover\",\n    fontWeight: \"bold\",\n    textDecorationStyle: \"dotted\",\n    textDecorationLine: \"underline\",\n});\nvar Specs = function (_a) {\n    var specs = _a.specs, openSpec = _a.openSpec, status = _a.status, verbose = _a.verbose, hideTestsAndSupressLogs = _a.hideTestsAndSupressLogs;\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: specs.map(function (spec) {\n            if (spec.error) {\n                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-spec\", [gapBottomClassName$1]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SpecLabel, { className: classNames(\"test-spec-error\", [\n                                labelClassName$1,\n                                failBackgroundClassName,\n                            ]), children: \"Error\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FilePath, { onClick: function () { return openSpec(spec.name); }, path: spec.name }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FormattedError, { error: spec.error, path: spec.name })] }, spec.name));\n            }\n            if (isEmpty(spec)) {\n                return null;\n            }\n            var tests = Object.values(spec.tests);\n            var describes = Object.values(spec.describes);\n            var stats = getSpecTestResults(spec);\n            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-spec-name\", [gapBottomClassName$1]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-spec-name-container\", [\n                            fileContainer,\n                        ]), children: [status === \"complete\" ? (stats.fail > 0 ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SpecLabel, { className: classNames(\"test-spec-complete\", [\n                                    labelClassName$1,\n                                    failBackgroundClassName,\n                                ]), children: \"Fail\" })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SpecLabel, { className: classNames(\"test-spec-pass\", [\n                                    labelClassName$1,\n                                    passBackgroundClassName,\n                                ]), children: \"Pass\" }))) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SpecLabel, { className: classNames(\"test-spec-run\", [\n                                    labelClassName$1,\n                                    runBackgroundClassName,\n                                ]), children: \"Run\" })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FilePath, { onClick: function () {\n                                    if (!hideTestsAndSupressLogs) {\n                                        openSpec(spec.name);\n                                    }\n                                }, path: spec.name })] }), verbose && !hideTestsAndSupressLogs && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Tests, { tests: tests }), verbose && !hideTestsAndSupressLogs && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Describes, { describes: describes })), !hideTestsAndSupressLogs &&\n                        getFailingTests(spec).map(function (test) {\n                            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-spec-error\", [\n                                    gapBottomClassName$1,\n                                ]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-spec-error-text\", [\n                                            failTestClassName,\n                                            failTextClassName,\n                                        ]), children: [\"\\u25CF \", test.blocks.join(\"  \"), \" \\u203A \", test.name] }), test.errors.map(function (e) { return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FormattedError, { error: e, path: test.path }, \"failing-\".concat(test.name, \"-error\"))); })] }, \"failing-\".concat(test.name)));\n                        })] }, spec.name));\n        }) }));\n};\nvar SpecLabel = function (_a) {\n    var children = _a.children, className = _a.className;\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-spec-label\", [specLabelClassName, className]), children: children }));\n};\nvar FilePath = function (_a) {\n    var onClick = _a.onClick, path = _a.path;\n    var parts = path.split(\"/\");\n    var basePath = parts.slice(0, parts.length - 1).join(\"/\") + \"/\";\n    var fileName = parts[parts.length - 1];\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { className: classNames(\"test-filename\", [\n            buttonClassName,\n            filePathButtonClassName,\n        ]), onClick: onClick, type: \"button\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-filename-base\", [filePathClassName]), children: basePath }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-filename-file\", [fileNameClassName]), children: fileName })] }));\n};\n\nvar gapBottomClassName = css({\n    marginBottom: \"$space$2\",\n});\nvar labelClassName = css({\n    fontWeight: \"bold\",\n    color: \"$colors$hover\",\n    whiteSpace: \"pre-wrap\",\n});\nvar containerClassName$1 = css({\n    fontWeight: \"bold\",\n    color: \"$colors$clickable\",\n});\nvar Summary = function (_a) {\n    var suites = _a.suites, tests = _a.tests, duration = _a.duration;\n    var widestLabel = \"Test suites: \";\n    var withMargin = function (label) {\n        var difference = widestLabel.length - label.length;\n        var margin = Array.from({ length: difference }, function () { return \" \"; }).join(\"\");\n        return label + margin;\n    };\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-summary\", [containerClassName$1]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-summary\", [gapBottomClassName]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-summary-suites-label\", [labelClassName]), children: widestLabel }), suites.fail > 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { className: classNames(\"test-summary-suites-fail\", [\n                            failTextClassName,\n                        ]), children: [suites.fail, \" failed,\", \" \"] })), suites.pass > 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { className: classNames(\"test-summary-suites-pass\", [\n                            passTextClassName,\n                        ]), children: [suites.pass, \" passed,\", \" \"] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { children: [suites.total, \" total\"] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-summary\", [gapBottomClassName]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: classNames(\"test-summary-label\", [labelClassName]), children: withMargin(\"Tests:\") }), tests.fail > 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { className: classNames(\"test-summary-fail\", [failTextClassName]), children: [tests.fail, \" failed,\", \" \"] })), tests.skip > 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { className: classNames(\"test-summary-skip\", [skipTextClassName]), children: [tests.skip, \" skipped,\", \" \"] })), tests.pass > 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { className: classNames(\"test-summary-pass\", [passTextClassName]), children: [tests.pass, \" passed,\", \" \"] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"span\", { children: [tests.total, \" total\"] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"test-summary-curation\", [labelClassName]), children: [withMargin(\"Time:\"), duration / 1000, \"s\"] })] }));\n};\n\nvar previewActionsClassName = css({\n    display: \"flex\",\n    position: \"absolute\",\n    bottom: \"$space$2\",\n    right: \"$space$2\",\n    zIndex: \"$overlay\",\n    \"> *\": { marginLeft: \"$space$2\" },\n});\nvar INITIAL_STATE = {\n    specs: {},\n    status: \"initialising\",\n    verbose: false,\n    watchMode: true,\n    suiteOnly: false,\n    specsCount: 0,\n};\nvar SandpackTests = function (_a) {\n    var _b = _a.verbose, verbose = _b === void 0 ? false : _b, _c = _a.watchMode, watchMode = _c === void 0 ? true : _c, style = _a.style, className = _a.className, onComplete = _a.onComplete, actionsChildren = _a.actionsChildren, _d = _a.showVerboseButton, showVerboseButton = _d === void 0 ? true : _d, _e = _a.showWatchButton, showWatchButton = _e === void 0 ? true : _e, _f = _a.hideTestsAndSupressLogs, hideTestsAndSupressLogs = _f === void 0 ? false : _f, props = __rest(_a, [\"verbose\", \"watchMode\", \"style\", \"className\", \"onComplete\", \"actionsChildren\", \"showVerboseButton\", \"showWatchButton\", \"hideTestsAndSupressLogs\"]);\n    var theme = useSandpackTheme();\n    var _g = useSandpackClient(), getClient = _g.getClient, iframe = _g.iframe, listen = _g.listen, sandpack = _g.sandpack;\n    var _h = react__WEBPACK_IMPORTED_MODULE_1__.useState(__assign(__assign({}, INITIAL_STATE), { verbose: verbose, watchMode: watchMode })), state = _h[0], setState = _h[1];\n    var runAllTests = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(function () {\n        setState(function (oldState) { return (__assign(__assign({}, oldState), { status: \"running\", specs: {} })); });\n        var client = getClient();\n        if (client) {\n            client.dispatch({ type: \"run-all-tests\" });\n        }\n    }, [getClient]);\n    var runSpec = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(function () {\n        setState(function (oldState) { return (__assign(__assign({}, oldState), { status: \"running\", specs: {} })); });\n        var client = getClient();\n        if (client) {\n            client.dispatch({ type: \"run-tests\", path: sandpack.activeFile });\n        }\n    }, [getClient, sandpack.activeFile]);\n    var testFileRegex = /.*\\.(test|spec)\\.[tj]sx?$/;\n    var isSpecOpen = sandpack.activeFile.match(testFileRegex) !== null;\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var currentDescribeBlocks = [];\n        var currentSpec = \"\";\n        var unsubscribe = listen(function (data) {\n            // Note: short-circuit if message isn't for the currently active spec when `suiteOnly` is true\n            if (state.suiteOnly &&\n                ((\"path\" in data && data.path !== sandpack.activeFile) ||\n                    (\"test\" in data &&\n                        \"path\" in data.test &&\n                        data.test.path !== sandpack.activeFile))) {\n                return;\n            }\n            if (data.type === \"action\" &&\n                data.action === \"clear-errors\" &&\n                data.source === \"jest\") {\n                currentSpec = data.path;\n                return;\n            }\n            if (data.type === \"test\") {\n                if (data.event === \"initialize_tests\") {\n                    currentDescribeBlocks = [];\n                    currentSpec = \"\";\n                    if (state.watchMode) {\n                        return runAllTests();\n                    }\n                    else {\n                        return setState(function (oldState) { return (__assign(__assign({}, oldState), { status: \"idle\", specs: {} })); });\n                    }\n                }\n                if (data.event === \"test_count\") {\n                    return setState(function (oldState) { return (__assign(__assign({}, oldState), { specsCount: data.count })); });\n                }\n                if (data.event === \"total_test_start\") {\n                    currentDescribeBlocks = [];\n                    return setState(function (oldState) { return (__assign(__assign({}, oldState), { status: \"running\" })); });\n                }\n                if (data.event === \"total_test_end\") {\n                    return setState(function (oldState) {\n                        if (onComplete !== undefined) {\n                            onComplete(oldState.specs);\n                        }\n                        return __assign(__assign({}, oldState), { status: \"complete\" });\n                    });\n                }\n                if (data.event === \"add_file\") {\n                    return setState(set([\"specs\", data.path], {\n                        describes: {},\n                        tests: {},\n                        name: data.path,\n                    }));\n                }\n                if (data.event === \"remove_file\") {\n                    return setState(function (oldState) {\n                        var specs = Object.entries(oldState.specs).reduce(function (acc, _a) {\n                            var _b;\n                            var key = _a[0], value = _a[1];\n                            if (key === data.path) {\n                                return acc;\n                            }\n                            else {\n                                return __assign(__assign({}, acc), (_b = {}, _b[key] = value, _b));\n                            }\n                        }, {});\n                        return __assign(__assign({}, oldState), { specs: specs });\n                    });\n                }\n                if (data.event === \"file_error\") {\n                    return setState(set([\"specs\", data.path, \"error\"], data.error));\n                }\n                if (data.event === \"describe_start\") {\n                    currentDescribeBlocks.push(data.blockName);\n                    var _a = splitTail(currentDescribeBlocks), describePath = _a[0], currentDescribe = _a[1];\n                    var spec = currentSpec;\n                    if (currentDescribe === undefined) {\n                        return;\n                    }\n                    return setState(set(__spreadArray(__spreadArray([\n                        \"specs\",\n                        spec,\n                        \"describes\"\n                    ], flatMap(describePath, function (name) { return [name, \"describes\"]; }), true), [\n                        currentDescribe,\n                    ], false), {\n                        name: data.blockName,\n                        tests: {},\n                        describes: {},\n                    }));\n                }\n                if (data.event === \"describe_end\") {\n                    currentDescribeBlocks.pop();\n                    return;\n                }\n                if (data.event === \"add_test\") {\n                    var _b = splitTail(currentDescribeBlocks), describePath = _b[0], currentDescribe = _b[1];\n                    var test_1 = {\n                        status: \"idle\",\n                        errors: [],\n                        name: data.testName,\n                        blocks: __spreadArray([], currentDescribeBlocks, true),\n                        path: data.path,\n                    };\n                    if (currentDescribe === undefined) {\n                        return setState(set([\"specs\", data.path, \"tests\", data.testName], test_1));\n                    }\n                    else {\n                        return setState(set(__spreadArray(__spreadArray([\n                            \"specs\",\n                            data.path,\n                            \"describes\"\n                        ], flatMap(describePath, function (name) { return [name, \"describes\"]; }), true), [\n                            currentDescribe,\n                            \"tests\",\n                            data.testName,\n                        ], false), test_1));\n                    }\n                }\n                if (data.event === \"test_start\") {\n                    var test_2 = data.test;\n                    var _c = splitTail(test_2.blocks), describePath = _c[0], currentDescribe = _c[1];\n                    var startedTest = {\n                        status: \"running\",\n                        name: test_2.name,\n                        blocks: test_2.blocks,\n                        path: test_2.path,\n                        errors: [],\n                    };\n                    if (currentDescribe === undefined) {\n                        return setState(set([\"specs\", test_2.path, \"tests\", test_2.name], startedTest));\n                    }\n                    else {\n                        return setState(set(__spreadArray(__spreadArray([\n                            \"specs\",\n                            test_2.path,\n                            \"describes\"\n                        ], flatMap(describePath, function (name) { return [name, \"describes\"]; }), true), [\n                            currentDescribe,\n                            \"tests\",\n                            test_2.name,\n                        ], false), startedTest));\n                    }\n                }\n                if (data.event === \"test_end\") {\n                    var test_3 = data.test;\n                    var _d = splitTail(test_3.blocks), describePath = _d[0], currentDescribe = _d[1];\n                    var endedTest = {\n                        status: test_3.status,\n                        errors: test_3.errors,\n                        duration: test_3.duration,\n                        name: test_3.name,\n                        blocks: test_3.blocks,\n                        path: test_3.path,\n                    };\n                    if (currentDescribe === undefined) {\n                        return setState(set([\"specs\", test_3.path, \"tests\", test_3.name], endedTest));\n                    }\n                    else {\n                        return setState(set(__spreadArray(__spreadArray([\n                            \"specs\",\n                            test_3.path,\n                            \"describes\"\n                        ], flatMap(describePath, function (name) { return [name, \"describes\"]; }), true), [\n                            currentDescribe,\n                            \"tests\",\n                            test_3.name,\n                        ], false), endedTest));\n                    }\n                }\n            }\n        });\n        return unsubscribe;\n    }, [state.suiteOnly, state.watchMode, sandpack.activeFile]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function watchMode() {\n        var unsunscribe = listen(function (_a) {\n            var type = _a.type;\n            if (type === \"done\" && state.watchMode) {\n                if (isSpecOpen) {\n                    runSpec();\n                }\n                else {\n                    runAllTests();\n                }\n            }\n        });\n        return unsunscribe;\n    }, [runSpec, runAllTests, state.watchMode, isSpecOpen]);\n    var openSpec = function (file) {\n        sandpack.setActiveFile(file);\n    };\n    var specs = Object.values(state.specs);\n    var duration = getDuration(specs);\n    var testResults = getAllTestResults(specs);\n    var suiteResults = getAllSuiteResults(specs);\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SandpackStack, __assign({ className: classNames(\"tests\", [className]), style: __assign(__assign({}, setTestTheme(theme.themeMode === \"dark\")), style) }, props, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"iframe\", { ref: iframe, style: { display: \"none\" }, title: \"Sandpack Tests\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Header$1, { hideTestsAndSupressLogs: hideTestsAndSupressLogs, setSuiteOnly: function () {\n                    return setState(function (s) { return (__assign(__assign({}, s), { suiteOnly: !s.suiteOnly })); });\n                }, setVerbose: function () {\n                    return setState(function (s) { return (__assign(__assign({}, s), { verbose: !s.verbose })); });\n                }, setWatchMode: function () {\n                    setState(function (s) { return (__assign(__assign({}, s), { watchMode: !s.watchMode })); });\n                }, showSuitesOnly: state.specsCount > 1, showVerboseButton: showVerboseButton, showWatchButton: showWatchButton, status: state.status, suiteOnly: state.suiteOnly, verbose: state.verbose, watchMode: state.watchMode }), state.status === \"running\" || state.status === \"initialising\" ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Loading, { showOpenInCodeSandbox: false })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: previewActionsClassName.toString(), children: [actionsChildren, (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RunButton, { onClick: state.suiteOnly ? runSpec : runAllTests })] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: containerClassName.toString(), children: specs.length === 0 && state.status === \"complete\" ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: fileErrorContainerClassName.toString(), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"No test files found.\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", { children: [\"Test match:\", \" \", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: failTextClassName.toString(), children: testFileRegex.toString() })] })] })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Specs, { hideTestsAndSupressLogs: hideTestsAndSupressLogs, openSpec: openSpec, specs: specs, status: state.status, verbose: state.verbose }), state.status === \"complete\" && testResults.total > 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Summary, { duration: duration, suites: suiteResults, tests: testResults }))] })) })] })));\n};\nvar containerClassName = css({\n    padding: \"$space$4\",\n    height: \"100%\",\n    overflow: \"auto\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    position: \"relative\",\n    fontFamily: \"$font$mono\",\n});\nvar fileErrorContainerClassName = css({\n    fontWeight: \"bold\",\n    color: \"$colors$base\",\n});\n\nvar SYNTAX_ERROR_PATTERN = [\"SyntaxError: \", \"Error in sandbox:\"];\nvar CLEAR_LOG = {\n    id: \"random\",\n    method: \"clear\",\n    data: [\"Console was cleared\"],\n};\nvar TRANSFORMED_TYPE_KEY = \"@t\";\nvar TRANSFORMED_TYPE_KEY_ALTERNATE = \"#@t\";\nvar CIRCULAR_REF_KEY = \"@r\";\nvar MAX_LENGTH_STRING = 10000;\nvar MAX_NEST_LEVEL = 2;\nvar MAX_KEYS = 400;\nvar MAX_MESSAGE_COUNT = MAX_KEYS * 2;\n\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable @typescript-eslint/no-empty-function */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n// Const\nvar GLOBAL = (function getGlobal() {\n    // NOTE: see http://www.ecma-international.org/ecma-262/6.0/index.html#sec-performeval step 10\n    var savedEval = eval;\n    return savedEval(\"this\");\n})();\nvar ARRAY_BUFFER_SUPPORTED = typeof ArrayBuffer === \"function\";\nvar MAP_SUPPORTED = typeof Map === \"function\";\nvar SET_SUPPORTED = typeof Set === \"function\";\nvar Arithmetic;\n(function (Arithmetic) {\n    Arithmetic[Arithmetic[\"infinity\"] = 0] = \"infinity\";\n    Arithmetic[Arithmetic[\"minusInfinity\"] = 1] = \"minusInfinity\";\n    Arithmetic[Arithmetic[\"minusZero\"] = 2] = \"minusZero\";\n})(Arithmetic || (Arithmetic = {}));\nvar transformers = {\n    Arithmetic: function (data) {\n        if (data === Arithmetic.infinity)\n            return Infinity;\n        if (data === Arithmetic.minusInfinity)\n            return -Infinity;\n        if (data === Arithmetic.minusZero)\n            return -0;\n        return data;\n    },\n    HTMLElement: function (data) {\n        var sandbox = document.implementation.createHTMLDocument(\"sandbox\");\n        try {\n            var element = sandbox.createElement(data.tagName);\n            element.innerHTML = data.innerHTML;\n            for (var _i = 0, _a = Object.keys(data.attributes); _i < _a.length; _i++) {\n                var attribute = _a[_i];\n                try {\n                    element.setAttribute(attribute, data.attributes[attribute]);\n                }\n                catch (_b) {\n                    //\n                }\n            }\n            return element;\n        }\n        catch (e) {\n            return data;\n        }\n    },\n    Function: function (data) {\n        var tempFun = function () { };\n        Object.defineProperty(tempFun, \"toString\", {\n            value: function () { return \"function \".concat(data.name, \"() {\").concat(data.body, \"}\"); },\n        });\n        return tempFun;\n    },\n    \"[[NaN]]\": function () {\n        return NaN;\n    },\n    \"[[undefined]]\": function () {\n        return void 0;\n    },\n    \"[[Date]]\": function (val) {\n        var date = new Date();\n        date.setTime(val);\n        return date;\n    },\n    \"[[RegExp]]\": function (val) {\n        return new RegExp(val.src, val.flags);\n    },\n    \"[[Error]]\": function (val) {\n        var Ctor = GLOBAL[val.name] || Error;\n        var err = new Ctor(val.message);\n        err.stack = val.stack;\n        return err;\n    },\n    \"[[ArrayBuffer]]\": function (val) {\n        if (ARRAY_BUFFER_SUPPORTED) {\n            var buffer = new ArrayBuffer(val.length);\n            var view = new Int8Array(buffer);\n            view.set(val);\n            return buffer;\n        }\n        return val;\n    },\n    \"[[TypedArray]]\": function (val) {\n        return typeof GLOBAL[val.ctorName] === \"function\"\n            ? new GLOBAL[val.ctorName](val.arr)\n            : val.arr;\n    },\n    \"[[Map]]\": function (val) {\n        if (MAP_SUPPORTED) {\n            // NOTE: new Map(iterable) is not supported by all browsers\n            var map = new Map();\n            for (var i = 0; i < val.length; i += 2)\n                map.set(val[i], val[i + 1]);\n            return map;\n        }\n        var kvArr = [];\n        // @ts-ignore\n        for (var j = 0; j < val.length; j += 2)\n            kvArr.push([val[i], val[i + 1]]);\n        return kvArr;\n    },\n    \"[[Set]]\": function (val) {\n        if (SET_SUPPORTED) {\n            // NOTE: new Set(iterable) is not supported by all browsers\n            var set = new Set();\n            for (var i = 0; i < val.length; i++)\n                set.add(val[i]);\n            return set;\n        }\n        return val;\n    },\n};\n\n/* eslint-disable @typescript-eslint/array-type */\nvar formatSymbols = function (message) {\n    var _a;\n    if (typeof message === \"string\" ||\n        typeof message === \"number\" ||\n        message === null) {\n        return message;\n    }\n    else if (Array.isArray(message)) {\n        return message.map(formatSymbols);\n    }\n    else if (typeof message == \"object\" && TRANSFORMED_TYPE_KEY in message) {\n        var type = message[TRANSFORMED_TYPE_KEY];\n        var transform = transformers[type];\n        return transform(message.data);\n    }\n    else if (typeof message == \"object\" &&\n        TRANSFORMED_TYPE_KEY_ALTERNATE in message) {\n        var type = message[TRANSFORMED_TYPE_KEY_ALTERNATE];\n        var transform = transformers[type];\n        return transform(message.data);\n    }\n    else if (typeof message == \"object\" &&\n        ((_a = message.constructor) === null || _a === void 0 ? void 0 : _a.name) === \"NodeList\") {\n        var NodeList_1 = {};\n        Object.entries(message).forEach(function (_a) {\n            var key = _a[0], value = _a[1];\n            // @ts-ignore\n            NodeList_1[key] = formatSymbols(value);\n        });\n        return NodeList_1;\n    }\n    return message;\n};\nvar arrayToString = function (output, references, level) {\n    var mergeArray = output.reduce(function (acc, curr, index) {\n        return \"\".concat(acc).concat(index ? \", \" : \"\").concat(fromConsoleToString(curr, references, level));\n    }, \"\");\n    return \"[\".concat(mergeArray, \"]\");\n};\nvar objectToString = function (output, references, level) {\n    var constructorName = output.constructor.name !== \"Object\" ? \"\".concat(output.constructor.name, \" \") : \"\";\n    if (level > MAX_NEST_LEVEL) {\n        return constructorName;\n    }\n    var entries = Object.entries(output);\n    var formattedObject = Object.entries(output).reduce(function (acc, _a, index) {\n        var key = _a[0], value = _a[1];\n        var comma = index === 0 ? \"\" : \", \";\n        var breakLine = entries.length > 10 ? \"\\n  \" : \"\";\n        var formatted = fromConsoleToString(value, references, level);\n        if (index === MAX_KEYS) {\n            return acc + breakLine + \"...\";\n        }\n        else if (index > MAX_KEYS) {\n            return acc;\n        }\n        return acc + \"\".concat(comma).concat(breakLine).concat(key, \": \") + formatted;\n    }, \"\");\n    return \"\".concat(constructorName, \"{ \").concat(formattedObject).concat(entries.length > 10 ? \"\\n\" : \" \", \"}\");\n};\nvar fromConsoleToString = function (message, references, level) {\n    var _a;\n    if (level === void 0) { level = 0; }\n    try {\n        var output_1 = formatSymbols(message);\n        if (Array.isArray(output_1)) {\n            return arrayToString(output_1, references, level + 1);\n        }\n        switch (typeof output_1) {\n            case \"string\":\n                return \"\\\"\".concat(output_1, \"\\\"\").slice(0, MAX_LENGTH_STRING);\n            case \"number\":\n            case \"function\":\n            case \"symbol\":\n                return output_1.toString();\n            case \"boolean\":\n                return String(output_1);\n            case \"undefined\":\n                return \"undefined\";\n            case \"object\":\n            default:\n                if (output_1 instanceof RegExp ||\n                    output_1 instanceof Error ||\n                    output_1 instanceof Date) {\n                    return output_1.toString();\n                }\n                if (output_1 === null) {\n                    return String(null);\n                }\n                if (output_1 instanceof HTMLElement) {\n                    return output_1.outerHTML.slice(0, MAX_LENGTH_STRING);\n                }\n                if (Object.entries(output_1).length === 0) {\n                    return \"{}\";\n                }\n                if (CIRCULAR_REF_KEY in output_1) {\n                    if (level > MAX_NEST_LEVEL) {\n                        return \"Unable to print information\";\n                    }\n                    var newMessage = references[output_1[CIRCULAR_REF_KEY]];\n                    return fromConsoleToString(newMessage, references, level + 1);\n                }\n                if (((_a = output_1.constructor) === null || _a === void 0 ? void 0 : _a.name) === \"NodeList\") {\n                    var length_1 = output_1.length;\n                    var nodes = new Array(length_1).fill(null).map(function (_, index) {\n                        return fromConsoleToString(output_1[index], references);\n                    });\n                    return \"NodeList(\".concat(output_1.length, \")[\").concat(nodes, \"]\");\n                }\n                return objectToString(output_1, references, level + 1);\n        }\n    }\n    catch (_b) {\n        return \"Unable to print information\";\n    }\n};\n\nvar getType = function (message) {\n    switch (message) {\n        case \"warn\":\n            return \"warning\";\n        case \"clear\":\n            return \"clear\";\n        case \"error\":\n            return \"error\";\n        case \"log\":\n        case \"info\":\n        default:\n            return \"info\";\n    }\n};\n\nvar _a;\nvar ConsoleList = function (_a) {\n    var data = _a.data;\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: data.map(function (_a, logIndex, references) {\n            var data = _a.data, id = _a.id, method = _a.method;\n            if (!data)\n                return null;\n            if (Array.isArray(data)) {\n                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: data.map(function (msg, msgIndex) {\n                        var fixReferences = references.slice(logIndex, references.length);\n                        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"console-item\", [\n                                consoleItemClassName({ variant: getType(method) }),\n                            ]), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CodeMirror, { code: method === \"clear\"\n                                    ? msg\n                                    : fromConsoleToString(msg, fixReferences), fileType: \"js\", initMode: \"user-visible\", showReadOnly: false, readOnly: true, wrapContent: true }) }, \"\".concat(id, \"-\").concat(msgIndex)));\n                    }) }, id));\n            }\n            return null;\n        }) }));\n};\nvar consoleItemClassName = css((_a = {\n        width: \"100%\",\n        padding: \"$space$3 $space$2\",\n        fontSize: \".8em\",\n        position: \"relative\",\n        \"&:not(:first-child):after\": {\n            content: \"\",\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            right: 0,\n            height: 1,\n            background: \"$colors$surface3\",\n        },\n        /**\n         * Editor reset\n         */\n        \".sp-cm\": {\n            padding: 0,\n        },\n        \".cm-editor\": {\n            background: \"none\",\n        },\n        \".cm-content\": {\n            padding: 0,\n        }\n    },\n    _a[\".\".concat(THEME_PREFIX, \"-pre-placeholder\")] = {\n        margin: \"0 !important\",\n        fontSize: \"1em\",\n    },\n    _a.variants = {\n        variant: {\n            error: {\n                color: \"$colors$error\",\n                background: \"$colors$errorSurface\",\n                \"&:not(:first-child):after\": {\n                    background: \"$colors$error\",\n                    opacity: 0.07,\n                },\n            },\n            warning: {\n                color: \"$colors$warning\",\n                background: \"$colors$warningSurface\",\n                \"&:not(:first-child):after\": {\n                    background: \"$colors$warning\",\n                    opacity: 0.07,\n                },\n            },\n            clear: {\n                fontStyle: \"italic\",\n            },\n            info: {},\n        },\n    },\n    _a));\n\nvar wrapperClassName = css({\n    justifyContent: \"space-between\",\n    borderBottom: \"1px solid $colors$surface2\",\n    padding: \"0 $space$2\",\n    fontFamily: \"$font$mono\",\n    height: \"$layout$headerHeight\",\n    minHeight: \"$layout$headerHeight\",\n    overflowX: \"auto\",\n    whiteSpace: \"nowrap\",\n});\nvar flexClassName = css({\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: \"$space$2\",\n});\nvar Header = function (_a) {\n    var currentTab = _a.currentTab, setCurrentTab = _a.setCurrentTab, node = _a.node;\n    var classNames = useClassNames();\n    var buttonsClassName = classNames(\"console-header-button\", [\n        buttonClassName,\n        roundedButtonClassName,\n        css({ padding: \"$space$1 $space$3\" }),\n    ]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"console-header\", [\n            wrapperClassName,\n            flexClassName,\n        ]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", { className: classNames(\"console-header-title\", [\n                    css({\n                        lineHeight: 1,\n                        margin: 0,\n                        color: \"$colors$base\",\n                        fontSize: \"$font$size\",\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        gap: \"$space$2\",\n                    }),\n                ]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConsoleIcon, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { children: \"Terminal\" })] }), node && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"console-header-actions\", [flexClassName]), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: buttonsClassName, \"data-active\": currentTab === \"server\", onClick: function () { return setCurrentTab(\"server\"); }, type: \"button\", children: \"Server\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: buttonsClassName, \"data-active\": currentTab === \"client\", onClick: function () { return setCurrentTab(\"client\"); }, type: \"button\", children: \"Client\" })] }))] }));\n};\n\n/**\n * It provides an interface to consume the logs from a sandpack client.\n *\n * @category Hooks\n */\nvar useSandpackConsole = function (_a) {\n    var clientId = _a.clientId, _b = _a.maxMessageCount, maxMessageCount = _b === void 0 ? MAX_MESSAGE_COUNT : _b, _c = _a.showSyntaxError, showSyntaxError = _c === void 0 ? false : _c, _d = _a.resetOnPreviewRestart, resetOnPreviewRestart = _d === void 0 ? false : _d;\n    var _e = react__WEBPACK_IMPORTED_MODULE_1__.useState([]), logs = _e[0], setLogs = _e[1];\n    var listen = useSandpack().listen;\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var unsubscribe = listen(function (message) {\n            if (resetOnPreviewRestart && message.type === \"start\") {\n                setLogs([]);\n            }\n            else if (message.type === \"console\" && message.codesandbox) {\n                var payloadLog = Array.isArray(message.log)\n                    ? message.log\n                    : [message.log];\n                if (payloadLog.find(function (_a) {\n                    var method = _a.method;\n                    return method === \"clear\";\n                })) {\n                    return setLogs([CLEAR_LOG]);\n                }\n                var logsMessages_1 = showSyntaxError\n                    ? payloadLog\n                    : payloadLog.filter(function (messageItem) {\n                        var _a, _b, _c;\n                        var messagesWithoutSyntaxErrors = (_c = (_b = (_a = messageItem === null || messageItem === void 0 ? void 0 : messageItem.data) === null || _a === void 0 ? void 0 : _a.filter) === null || _b === void 0 ? void 0 : _b.call(_a, function (dataItem) {\n                            if (typeof dataItem !== \"string\")\n                                return true;\n                            var matches = SYNTAX_ERROR_PATTERN.filter(function (lookFor) {\n                                return dataItem.startsWith(lookFor);\n                            });\n                            return matches.length === 0;\n                        })) !== null && _c !== void 0 ? _c : [];\n                        return messagesWithoutSyntaxErrors.length > 0;\n                    });\n                if (!logsMessages_1)\n                    return;\n                setLogs(function (prev) {\n                    var messages = __spreadArray(__spreadArray([], prev, true), logsMessages_1, true).filter(function (value, index, self) {\n                        return index === self.findIndex(function (s) { return s.id === value.id; });\n                    });\n                    while (messages.length > maxMessageCount) {\n                        messages.shift();\n                    }\n                    return messages;\n                });\n            }\n        }, clientId);\n        return unsubscribe;\n    }, [showSyntaxError, maxMessageCount, clientId, resetOnPreviewRestart]);\n    return { logs: logs, reset: function () { return setLogs([]); } };\n};\n\n/**\n * `SandpackConsole` is a Sandpack devtool that allows printing\n * the console logs from a Sandpack client. It is designed to be\n * a light version of a browser console, which means that it's\n * limited to a set of common use cases you may encounter when coding.\n */\nvar SandpackConsole = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function (_a, ref) {\n    var _b;\n    var _c = _a.showHeader, showHeader = _c === void 0 ? true : _c, _d = _a.showSyntaxError, showSyntaxError = _d === void 0 ? false : _d, maxMessageCount = _a.maxMessageCount, onLogsChange = _a.onLogsChange, className = _a.className; _a.showSetupProgress; var _f = _a.showResetConsoleButton, showResetConsoleButton = _f === void 0 ? true : _f, _g = _a.showRestartButton, showRestartButton = _g === void 0 ? true : _g, _h = _a.resetOnPreviewRestart, resetOnPreviewRestart = _h === void 0 ? false : _h, _j = _a.actionsChildren, actionsChildren = _j === void 0 ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {}) : _j, _k = _a.standalone, standalone = _k === void 0 ? false : _k, props = __rest(_a, [\"showHeader\", \"showSyntaxError\", \"maxMessageCount\", \"onLogsChange\", \"className\", \"showSetupProgress\", \"showResetConsoleButton\", \"showRestartButton\", \"resetOnPreviewRestart\", \"actionsChildren\", \"standalone\"]);\n    var environment = useSandpack().sandpack.environment;\n    var _l = useSandpackClient(), iframe = _l.iframe, internalClientId = _l.clientId;\n    var restart = useSandpackShell().restart;\n    var _m = react__WEBPACK_IMPORTED_MODULE_1__.useState(environment === \"node\" ? \"server\" : \"client\"), currentTab = _m[0], setCurrentTab = _m[1];\n    var clientId = standalone ? internalClientId : undefined;\n    var _o = useSandpackConsole({\n        maxMessageCount: maxMessageCount,\n        showSyntaxError: showSyntaxError,\n        resetOnPreviewRestart: resetOnPreviewRestart,\n        clientId: clientId,\n    }), consoleData = _o.logs, resetConsole = _o.reset;\n    var _p = useSandpackShellStdout({\n        maxMessageCount: maxMessageCount,\n        resetOnPreviewRestart: resetOnPreviewRestart,\n        clientId: clientId,\n    }), stdoutData = _p.logs, resetStdout = _p.reset;\n    var wrapperRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        onLogsChange === null || onLogsChange === void 0 ? void 0 : onLogsChange(consoleData);\n        if (wrapperRef.current) {\n            wrapperRef.current.scrollTop = wrapperRef.current.scrollHeight;\n        }\n    }, [onLogsChange, consoleData, stdoutData, currentTab]);\n    var isServerTab = currentTab === \"server\";\n    var isNodeEnvironment = environment === \"node\";\n    react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(ref, function () { return ({\n        reset: function () {\n            resetConsole();\n            resetStdout();\n        },\n    }); });\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SandpackStack, __assign({ className: classNames(\"console\", [\n            css((_b = {\n                    height: \"100%\",\n                    background: \"$surface1\",\n                    iframe: { display: \"none\" }\n                },\n                _b[\".\".concat(THEME_PREFIX, \"-bridge-frame\")] = {\n                    display: \"block\",\n                    border: 0,\n                    position: \"absolute\",\n                    left: \"$space$2\",\n                    bottom: \"$space$2\",\n                    zIndex: \"$top\",\n                    height: 12,\n                    width: \"30%\",\n                    mixBlendMode: \"multiply\",\n                    pointerEvents: \"none\",\n                },\n                _b)),\n            className,\n        ]) }, props, { children: [showHeader && isNodeEnvironment && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Header, { currentTab: currentTab, node: isNodeEnvironment, setCurrentTab: setCurrentTab })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { ref: wrapperRef, className: classNames(\"console-list\", [\n                    css({ overflow: \"auto\", scrollBehavior: \"smooth\" }),\n                ]), children: isServerTab ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StdoutList, { data: stdoutData })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConsoleList, { data: consoleData })) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: classNames(\"console-actions\", [\n                    css({\n                        position: \"absolute\",\n                        bottom: \"$space$2\",\n                        right: \"$space$2\",\n                        display: \"flex\",\n                        gap: \"$space$2\",\n                    }),\n                ]), children: [actionsChildren, showRestartButton && isServerTab && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RoundedButton, { onClick: function () {\n                            restart();\n                            resetConsole();\n                            resetStdout();\n                        }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RestartIcon, {}) })), showResetConsoleButton && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RoundedButton, { onClick: function () {\n                            if (currentTab === \"client\") {\n                                resetConsole();\n                            }\n                            else {\n                                resetStdout();\n                            }\n                        }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CleanIcon, {}) }))] }), standalone && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DependenciesProgress, { clientId: clientId }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"iframe\", { ref: iframe })] }))] })));\n});\n\nvar Sandpack = function (_a) {\n    var _b, _c, _d, _e, _f, _g, _h, _j;\n    var options = _a.options, template = _a.template, customSetup = _a.customSetup, files = _a.files, theme = _a.theme, props = __rest(_a, [\"options\", \"template\", \"customSetup\", \"files\", \"theme\"]);\n    options !== null && options !== void 0 ? options : (options = {});\n    (_b = options.resizablePanels) !== null && _b !== void 0 ? _b : (options.resizablePanels = true);\n    (_c = options.editorWidthPercentage) !== null && _c !== void 0 ? _c : (options.editorWidthPercentage = 50);\n    (_d = options.showConsole) !== null && _d !== void 0 ? _d : (options.showConsole = false);\n    var rtlLayout = (_e = options === null || options === void 0 ? void 0 : options.rtl) !== null && _e !== void 0 ? _e : false;\n    var codeEditorOptions = {\n        showTabs: options.showTabs,\n        showLineNumbers: options.showLineNumbers,\n        showInlineErrors: options.showInlineErrors,\n        wrapContent: options.wrapContent,\n        closableTabs: options.closableTabs,\n        initMode: options.initMode,\n        extensions: (_f = options.codeEditor) === null || _f === void 0 ? void 0 : _f.extensions,\n        extensionsKeymap: (_g = options.codeEditor) === null || _g === void 0 ? void 0 : _g.extensionsKeymap,\n        readOnly: options.readOnly,\n        showReadOnly: options.showReadOnly,\n        additionalLanguages: (_h = options.codeEditor) === null || _h === void 0 ? void 0 : _h.additionalLanguages,\n    };\n    var providerOptions = {\n        /**\n         * TS-why: Type 'string | number | symbol' is not assignable to type 'string'\n         */\n        activeFile: options.activeFile,\n        visibleFiles: options.visibleFiles,\n        recompileMode: options.recompileMode,\n        recompileDelay: options.recompileDelay,\n        autorun: options.autorun,\n        autoReload: options.autoReload,\n        bundlerURL: options.bundlerURL,\n        startRoute: options.startRoute,\n        skipEval: options.skipEval,\n        fileResolver: options.fileResolver,\n        initMode: options.initMode,\n        initModeObserverOptions: options.initModeObserverOptions,\n        externalResources: options.externalResources,\n        logLevel: options.logLevel,\n        classes: options.classes,\n    };\n    /**\n     * Console\n     */\n    var _k = react__WEBPACK_IMPORTED_MODULE_1__.useState(options.showConsole), consoleVisibility = _k[0], setConsoleVisibility = _k[1];\n    var _l = react__WEBPACK_IMPORTED_MODULE_1__.useState(0), counter = _l[0], setCounter = _l[1];\n    var hasRightColumn = options.showConsole || options.showConsoleButton;\n    /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */\n    var templateFiles = (_j = SANDBOX_TEMPLATES[template]) !== null && _j !== void 0 ? _j : {};\n    var mode = ((options === null || options === void 0 ? void 0 : options.layout)\n        ? options === null || options === void 0 ? void 0 : options.layout\n        : \"mode\" in templateFiles\n            ? templateFiles.mode\n            : \"preview\");\n    var actionsChildren = options.showConsoleButton ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConsoleCounterButton, { counter: counter, onClick: function () { return setConsoleVisibility(function (prev) { return !prev; }); } })) : undefined;\n    /**\n     * Resizable\n     */\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    var dragEventTargetRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    var _m = react__WEBPACK_IMPORTED_MODULE_1__.useState(options.editorWidthPercentage), horizontalSize = _m[0], setHorizontalSize = _m[1];\n    var _o = react__WEBPACK_IMPORTED_MODULE_1__.useState(70), verticalSize = _o[0], setVerticalSize = _o[1];\n    var RightColumn = hasRightColumn ? SandpackStack : react__WEBPACK_IMPORTED_MODULE_1__.Fragment;\n    var rightColumnStyle = {\n        flexGrow: 100 - horizontalSize,\n        flexShrink: 100 - horizontalSize,\n        flexBasis: 0,\n        width: 100 - horizontalSize + \"%\",\n        gap: consoleVisibility ? 1 : 0,\n        height: options.editorHeight, // use the original editor height\n    };\n    var topRowStyle = hasRightColumn\n        ? {\n            flexGrow: verticalSize,\n            flexShrink: verticalSize,\n            flexBasis: 0,\n            overflow: \"hidden\",\n        }\n        : rightColumnStyle;\n    var onDragMove = function (event) {\n        if (!dragEventTargetRef.current)\n            return;\n        var container = dragEventTargetRef.current.parentElement;\n        if (!container)\n            return;\n        var direction = dragEventTargetRef.current.dataset.direction;\n        var isHorizontal = direction === \"horizontal\";\n        var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top, height = _a.height, width = _a.width;\n        var offset = isHorizontal\n            ? ((event.clientX - left) / width) * 100\n            : ((event.clientY - top) / height) * 100;\n        var boundaries = Math.min(Math.max(offset, 25), 75);\n        if (isHorizontal) {\n            setHorizontalSize(rtlLayout ? 100 - boundaries : boundaries);\n        }\n        else {\n            setVerticalSize(boundaries);\n        }\n        container.querySelectorAll(\".\".concat(THEME_PREFIX, \"-stack\")).forEach(function (item) {\n            item.style.pointerEvents = \"none\";\n        });\n    };\n    var stopDragging = function () {\n        var _a;\n        var container = (_a = dragEventTargetRef.current) === null || _a === void 0 ? void 0 : _a.parentElement;\n        if (!container)\n            return;\n        container.querySelectorAll(\".\".concat(THEME_PREFIX, \"-stack\")).forEach(function (item) {\n            item.style.pointerEvents = \"\";\n        });\n        dragEventTargetRef.current = null;\n    };\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        if (!(options === null || options === void 0 ? void 0 : options.resizablePanels))\n            return;\n        document.body.addEventListener(\"mousemove\", onDragMove);\n        document.body.addEventListener(\"mouseup\", stopDragging);\n        return function () {\n            document.body.removeEventListener(\"mousemove\", onDragMove);\n            document.body.removeEventListener(\"mouseup\", stopDragging);\n        };\n    }, [options]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {\n        var _a;\n        setConsoleVisibility((_a = options === null || options === void 0 ? void 0 : options.showConsole) !== null && _a !== void 0 ? _a : false);\n    }, [options.showConsole]);\n    var rightColumnProps = hasRightColumn\n        ? { className: THEME_PREFIX + \"-preset-column\", style: rightColumnStyle }\n        : {};\n    var classNames = useClassNames();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackProvider, __assign({ customSetup: customSetup, files: files, options: providerOptions, template: template, theme: theme }, props, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(SandpackLayout, { className: rtlLayout ? classNames(\"rtl-layout\", [rtlLayoutClassName]) : \"\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackCodeEditor, __assign({}, codeEditorOptions, { style: {\n                        height: options.editorHeight,\n                        flexGrow: horizontalSize,\n                        flexShrink: horizontalSize,\n                        flexBasis: 0,\n                        overflow: \"hidden\",\n                    } })), options.resizablePanels && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"resize-handler\", [\n                        dragHandler({ direction: \"horizontal\" }),\n                    ]), \"data-direction\": \"horizontal\", onMouseDown: function (event) {\n                        dragEventTargetRef.current = event.target;\n                    }, style: {\n                        left: \"calc(\".concat(rtlLayout ? 100 - horizontalSize : horizontalSize, \"% - 5px)\"),\n                    } })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(RightColumn, __assign({}, rightColumnProps, { children: [mode === \"preview\" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackPreview, { actionsChildren: actionsChildren, showNavigator: options.showNavigator, showRefreshButton: options.showRefreshButton, style: topRowStyle })), mode === \"tests\" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackTests, { actionsChildren: actionsChildren, style: topRowStyle })), mode === \"console\" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackConsole, { actionsChildren: actionsChildren, style: topRowStyle, standalone: true })), (options.showConsoleButton || consoleVisibility) && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [options.resizablePanels && consoleVisibility && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"resize-handler\", [\n                                        dragHandler({ direction: \"vertical\" }),\n                                    ]), \"data-direction\": \"vertical\", onMouseDown: function (event) {\n                                        dragEventTargetRef.current = event.target;\n                                    }, style: { top: \"calc(\".concat(verticalSize, \"% - 5px)\") } })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: classNames(\"console-wrapper\", [consoleWrapper]), style: {\n                                        flexGrow: consoleVisibility ? 100 - verticalSize : 0,\n                                        flexShrink: consoleVisibility ? 100 - verticalSize : 0,\n                                        flexBasis: 0,\n                                    }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SandpackConsole, { onLogsChange: function (logs) { return setCounter(logs.length); }, showHeader: false }) })] }))] }))] }) }), template));\n};\nvar dragHandler = css({\n    position: \"absolute\",\n    zIndex: \"$top\",\n    variants: {\n        direction: {\n            vertical: {\n                right: 0,\n                left: 0,\n                height: 10,\n                cursor: \"ns-resize\",\n            },\n            horizontal: {\n                top: 0,\n                bottom: 0,\n                width: 10,\n                cursor: \"ew-resize\",\n            },\n        },\n    },\n    \"@media screen and (max-width: 768px)\": {\n        display: \"none\",\n    },\n});\nvar ConsoleCounterButton = function (_a) {\n    var onClick = _a.onClick, counter = _a.counter;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(RoundedButton, { className: buttonCounter.toString(), onClick: onClick, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConsoleIcon, {}), counter > 0 && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"strong\", { children: counter })] }));\n};\nvar buttonCounter = css({\n    position: \"relative\",\n    strong: {\n        background: \"$colors$clickable\",\n        color: \"$colors$surface1\",\n        minWidth: 12,\n        height: 12,\n        padding: \"0 2px\",\n        borderRadius: 12,\n        fontSize: 8,\n        lineHeight: \"12px\",\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        fontWeight: \"normal\",\n    },\n});\nvar consoleWrapper = css({\n    width: \"100%\",\n    overflow: \"hidden\",\n});\nvar rtlLayoutClassName = css({\n    flexDirection: \"row-reverse\",\n    \"@media screen and (max-width: 768px)\": {\n        flexFlow: \"wrap-reverse !important\",\n        flexDirection: \"initial\",\n    },\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvZGVzYW5kYm94L3NhbmRwYWNrLXJlYWN0L2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ3pCO0FBQ3dGO0FBQ3ZFO0FBQ2hCO0FBQzhGO0FBQ2hEO0FBQzRDO0FBQy9CO0FBQ0Q7QUFDNkM7QUFDL0Q7QUFDcEI7QUFDUDtBQUNZO0FBQ0Y7QUFDN0I7QUFDNkI7QUFDdEI7QUFDQTs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGNBQWM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsaUJBQWlCLG9EQUFvRCxxRUFBcUUsY0FBYztBQUN4Six1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxtQ0FBbUMsU0FBUztBQUM1QyxtQ0FBbUMsV0FBVyxVQUFVO0FBQ3hELDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0EsOEdBQThHLE9BQU87QUFDckgsaUZBQWlGLGlCQUFpQjtBQUNsRyx5REFBeUQsZ0JBQWdCLFFBQVE7QUFDakYsK0NBQStDLGdCQUFnQixnQkFBZ0I7QUFDL0U7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLFVBQVUsWUFBWSxhQUFhLFNBQVMsVUFBVTtBQUN0RCxvQ0FBb0MsU0FBUztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSxPQUFPO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZCQUE2QixRQUFRLHNEQUFHLG1CQUFtQiw0R0FBNEc7QUFDdkssK0JBQStCLFFBQVEsdURBQUksUUFBUSxpQ0FBaUMsc0RBQUcsWUFBWSxxQkFBcUIsR0FBRyxzREFBRyxXQUFXLDBKQUEwSixJQUFJO0FBQ3ZTLGdDQUFnQyxRQUFRLHVEQUFJLFFBQVEsaUNBQWlDLHNEQUFHLFlBQVksc0JBQXNCLEdBQUcsc0RBQUcsV0FBVywwSkFBMEosSUFBSTtBQUN6UyxnQ0FBZ0MsUUFBUSx1REFBSSxRQUFRLGlEQUFpRCxzREFBRyxZQUFZLDRCQUE0QixHQUFHLHNEQUFHLFdBQVcsaUdBQWlHLEdBQUcsc0RBQUcsV0FBVyw2RkFBNkYsR0FBRyxzREFBRyxXQUFXLHlHQUF5RyxHQUFHLHNEQUFHLFdBQVcsK0hBQStILEdBQUcsc0RBQUcsV0FBVywwRUFBMEUsR0FBRyxzREFBRyxXQUFXLDRFQUE0RSxJQUFJO0FBQ3R6Qiw0QkFBNEIsUUFBUSx1REFBSSxRQUFRLFdBQVcsc0RBQUcsWUFBWSx5QkFBeUIsR0FBRyxzREFBRyxXQUFXLCtNQUErTSxJQUFJO0FBQ3ZVLGlDQUFpQyxRQUFRLHVEQUFJLFFBQVEsV0FBVyxzREFBRyxZQUFZLDhCQUE4QixHQUFHLHNEQUFHLFdBQVcsNm1CQUE2bUIsSUFBSTtBQUMvdUIsZ0NBQWdDLFFBQVEsdURBQUksUUFBUSxXQUFXLHNEQUFHLFlBQVksaUNBQWlDLEdBQUcsc0RBQUcsV0FBVyw2bUJBQTZtQixJQUFJO0FBQ2p2QixnQ0FBZ0MsUUFBUSx1REFBSSxRQUFRLFdBQVcsc0RBQUcsWUFBWSw2QkFBNkIsR0FBRyxzREFBRyxXQUFXLDYxQkFBNjFCLElBQUk7QUFDNzlCLDhCQUE4QixRQUFRLHVEQUFJLFFBQVEsaURBQWlELHNEQUFHLFlBQVksbUJBQW1CLEdBQUcsc0RBQUcsYUFBYSxvRUFBb0UsR0FBRyxzREFBRyxXQUFXLHVDQUF1QyxJQUFJO0FBQ3hSLCtCQUErQixRQUFRLHVEQUFJLFFBQVEsaURBQWlELHNEQUFHLFlBQVksaUNBQWlDLEdBQUcsc0RBQUcsV0FBVyw2TkFBNk4sR0FBRyxzREFBRyxXQUFXLDBHQUEwRyxHQUFHLHNEQUFHLFdBQVcsK0RBQStELElBQUk7QUFDamxCLHNDQUFzQyxRQUFRLHVEQUFJLFFBQVEsV0FBVyxzREFBRyxZQUFZLHVCQUF1QixHQUFHLHNEQUFHLFdBQVcsMFJBQTBSLEdBQUcsc0RBQUcsV0FBVyxpaUJBQWlpQixJQUFJO0FBQzU4Qix3Q0FBd0MsUUFBUSx1REFBSSxRQUFRLFdBQVcsc0RBQUcsWUFBWSx1QkFBdUIsR0FBRyxzREFBRyxXQUFXLDJaQUEyWixJQUFJO0FBQzdoQiw2QkFBNkIsUUFBUSx1REFBSSxRQUFRLGlDQUFpQyxzREFBRyxZQUFZLGtCQUFrQixHQUFHLHNEQUFHLFdBQVcsK3dCQUErd0IsSUFBSTtBQUN2NUIsOEJBQThCLFFBQVEsdURBQUksUUFBUSxtQ0FBbUMsc0RBQUcsWUFBWSx3QkFBd0IsR0FBRyxzREFBRyxXQUFXLHlDQUF5QyxHQUFHLHNEQUFHLFdBQVcseUNBQXlDLElBQUk7QUFDcFAsZ0NBQWdDLFFBQVEsdURBQUksUUFBUSxXQUFXLHNEQUFHLFlBQVksa0NBQWtDLEdBQUcsc0RBQUcsV0FBVyxvbEJBQW9sQixHQUFHLHNEQUFHLFdBQVcseU5BQXlOLElBQUk7O0FBRW44QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1CQUFtQixvQ0FBb0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1CQUFtQix1Q0FBdUM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywrQkFBK0I7QUFDL0Q7QUFDQTtBQUNBLHVDQUF1Qyx5Q0FBeUM7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkI7QUFDN0Isd0RBQXdELG9CQUFvQjtBQUM1RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQWM7QUFDeEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGdCQUFnQjtBQUNuRCxLQUFLLElBQUk7QUFDVCxjQUFjLGVBQWU7QUFDN0IsY0FBYyx1Q0FBdUM7QUFDckQsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMscUJBQXFCO0FBQ2hFLGFBQWEsSUFBSTtBQUNqQjtBQUNBLG1DQUFtQztBQUNuQyxLQUFLLElBQUk7QUFDVCwrQkFBK0IsdUJBQXVCLHdEQUF3RDtBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQywwSUFBMEk7QUFDckwsMkNBQTJDLDBJQUEwSTtBQUNyTCx5Q0FBeUMsc0lBQXNJO0FBQy9LO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvREFBYSxHQUFHO0FBQ3hDO0FBQ0E7QUFDQSxZQUFZLHNEQUFHLCtCQUErQixvQkFBb0Isc0JBQXNCO0FBQ3hGO0FBQ0E7QUFDQSw0QkFBNEIsaURBQVU7QUFDdEM7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QyxxQkFBcUIsc0JBQXNCO0FBQzNDLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFdBQVcseUJBQXlCO0FBQ3BDLDJCQUEyQixjQUFjO0FBQ3pDLENBQUM7QUFDRCwyQkFBMkIsZ0RBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwyQ0FBYztBQUMzQjtBQUNBO0FBQ0EseUJBQXlCLDBDQUFhO0FBQ3RDO0FBQ0EsS0FBSztBQUNMLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZLHNEQUFHLGtDQUFrQyxTQUFTLGtDQUFrQyxZQUFZLHNEQUFHLG1CQUFtQjtBQUM5SDtBQUNBLHFDQUFxQyxlQUFlO0FBQ3BEO0FBQ0EsZ0JBQWdCLFdBQVcsb0JBQW9CLElBQUk7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLDRCQUE0QixpQ0FBaUMsOEJBQThCLHVDQUF1Qyx5QkFBeUIsdUNBQXVDLHdCQUF3Qiw2Q0FBNkMsZ0NBQWdDLEdBQUcsUUFBUSxzQkFBc0IsR0FBRztBQUNoVyxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQseUJBQXlCLG9CQUFvQixLQUFLLHdCQUF3Qix3QkFBd0IsS0FBSztBQUN4SixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pELDZFQUE2RSxzQkFBc0IsR0FBRyx1QkFBdUIsY0FBYyxLQUFLO0FBQ2hKLFNBQVM7QUFDVCxrREFBa0QsTUFBTSxHQUFHLDBDQUEwQyxLQUFLLHVCQUF1QixHQUFHLDRDQUE0QyxZQUFZLGVBQWUsaUJBQWlCLE1BQU0sR0FBRztBQUNyTyxTQUFTO0FBQ1QsOEJBQThCLDJCQUEyQix3QkFBd0IsaURBQWlEO0FBQ2xJLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsaUNBQWlDLG9CQUFvQixvREFBb0QseUJBQXlCLCtDQUErQywyQkFBMkIsR0FBRyxFQUFFLHlDQUF5Qyw0Q0FBNEMsU0FBUyxHQUFHLEtBQUssSUFBSSxHQUFHLEVBQUU7QUFDaFgsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEMsMkJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCQUErQixrQkFBa0I7QUFDakQsMkNBQTJDLDRFQUE0RTtBQUN2SCxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pELGtEQUFrRCxrREFBa0QsS0FBSyxRQUFRO0FBQ2pILFNBQVM7QUFDVCw0QkFBNEIsU0FBUyxnQkFBZ0IsMEJBQTBCLDhCQUE4QixtREFBbUQsd0JBQXdCO0FBQ3hMLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVCw0QkFBNEIsZUFBZSxjQUFjLDBHQUEwRywyQkFBMkIsRUFBRTtBQUNoTSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLGtCQUFrQjtBQUNqRCxrREFBa0QsMERBQTBELEtBQUssUUFBUTtBQUN6SCxTQUFTO0FBQ1QsNEJBQTRCLFNBQVMsZ0JBQWdCLDBCQUEwQiw4QkFBOEIsa0VBQWtFLHdCQUF3QjtBQUN2TSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsK0JBQStCLDhCQUE4QjtBQUM3RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVCw0QkFBNEIsZUFBZSxxSEFBcUgsMkJBQTJCO0FBQzNMLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pELGtEQUFrRCxrREFBa0QsS0FBSyxRQUFRO0FBQ2pILFNBQVM7QUFDVCw0QkFBNEIsYUFBYSxlQUFlLFdBQVcsYUFBYSwwQkFBMEIsMEJBQTBCLDhCQUE4QiwrREFBK0QsZ0VBQWdFO0FBQ2pTLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULDRCQUE0QixlQUFlLGNBQWMsNkNBQTZDLGdFQUFnRSwwQkFBMEIsRUFBRTtBQUNsTSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLGtCQUFrQjtBQUNqRCxrREFBa0QsMERBQTBELEtBQUssUUFBUTtBQUN6SCxTQUFTO0FBQ1QsNEJBQTRCLGFBQWEsZUFBZSxXQUFXLGFBQWEsMEJBQTBCLDBCQUEwQiw4QkFBOEIsOEJBQThCLDhFQUE4RSxnRUFBZ0U7QUFDOVUsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSwrQkFBK0IsOEJBQThCO0FBQzdELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNULDRCQUE0QixlQUFlLHFIQUFxSCwwQkFBMEI7QUFDMUwsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCwwQkFBMEIsS0FBSyxzQkFBc0Isc0JBQXNCLEdBQUc7QUFDbEksU0FBUztBQUNUO0FBQ0EsbUdBQW1HLDhDQUE4QztBQUNqSixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLDRCQUE0QixlQUFlLHNCQUFzQixTQUFTLG1HQUFtRywyQkFBMkI7QUFDeE0sU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsMEJBQTBCLEtBQUssc0JBQXNCLHNCQUFzQixHQUFHO0FBQ3RKLFNBQVM7QUFDVDtBQUNBLG1HQUFtRyw4Q0FBOEM7QUFDakosU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLDRCQUE0QixpQkFBaUIsdURBQXVELHdKQUF3SjtBQUM1UCxTQUFTO0FBQ1Q7QUFDQSw0QkFBNEIsZUFBZSxzQkFBc0IsU0FBUyxtR0FBbUcsMkJBQTJCO0FBQ3hNLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4QkFBOEI7QUFDN0QsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsTUFBTSxhQUFhLGdDQUFnQywwQ0FBMEMsT0FBTyxtQ0FBbUMsc0JBQXNCLEdBQUc7QUFDNU0sU0FBUztBQUNUO0FBQ0EsNEJBQTRCLFlBQVk7QUFDeEMsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw0QkFBNEIsZUFBZSxpSEFBaUgsdUJBQXVCO0FBQ25MLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsTUFBTSxhQUFhLHdDQUF3QywwQ0FBMEMsT0FBTyxtQ0FBbUMsc0JBQXNCLEdBQUc7QUFDaE8sU0FBUztBQUNUO0FBQ0EsNEJBQTRCLFlBQVk7QUFDeEMsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLDRCQUE0QixlQUFlLGlIQUFpSCx1QkFBdUI7QUFDbkwsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOEJBQThCO0FBQzdELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsYUFBYTtBQUM5QyxTQUFTO0FBQ1Q7QUFDQSw0QkFBNEIsWUFBWSx1QkFBdUIsZ0JBQWdCLGdIQUFnSCw4QkFBOEIsaUNBQWlDLGNBQWM7QUFDNVEsU0FBUztBQUNUO0FBQ0EsNEJBQTRCLGdCQUFnQixtQ0FBbUMsV0FBVyxXQUFXLHVCQUF1QixtQkFBbUIsZUFBZSx5QkFBeUIscUJBQXFCLGdIQUFnSCxtQ0FBbUM7QUFDL1YsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw0QkFBNEIsaUJBQWlCLHVCQUF1QixXQUFXLHlCQUF5QiwyQ0FBMkMsbUJBQW1CLFlBQVksZ0NBQWdDLCtGQUErRjtBQUNqVCxTQUFTO0FBQ1Q7QUFDQSxvRUFBb0UscUNBQXFDO0FBQ3pHLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLGtCQUFrQjtBQUNqRCxrREFBa0Qsa0NBQWtDO0FBQ3BGLFNBQVM7QUFDVCxtQ0FBbUMsYUFBYSxlQUFlLFdBQVcsYUFBYSwwQkFBMEIsMEJBQTBCLDhCQUE4QiwrREFBK0QsZ0VBQWdFO0FBQ3hTLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pELG9CQUFvQixrRUFBa0UsK0hBQStILEdBQUc7QUFDeE4sU0FBUztBQUNULCtEQUErRCxrQ0FBa0M7QUFDakcsU0FBUztBQUNULG1DQUFtQyxhQUFhLGVBQWUsV0FBVyxhQUFhLDBCQUEwQiwwQkFBMEIsOEJBQThCLCtEQUErRCxnRUFBZ0U7QUFDeFMsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCQUErQixrQkFBa0I7QUFDakQsNEJBQTRCLFlBQVksa0JBQWtCLGtDQUFrQyxtQ0FBbUMsdUJBQXVCO0FBQ3RKLFNBQVM7QUFDVCw0QkFBNEIsU0FBUyxzQkFBc0IsNEJBQTRCLDRCQUE0Qiw0REFBNEQ7QUFDL0ssU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLGtCQUFrQjtBQUNqRCxrQ0FBa0Msd0JBQXdCLEtBQUssNkNBQTZDLG9DQUFvQyxLQUFLO0FBQ3JKLFNBQVM7QUFDVCxvREFBb0QsMEJBQTBCLHlCQUF5Qiw0QkFBNEIsRUFBRSx1QkFBdUI7QUFDNUosU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrRUFBa0UsK0hBQStILEdBQUc7QUFDeE4sU0FBUztBQUNUO0FBQ0EsOEVBQThFO0FBQzlFLFNBQVM7QUFDVDtBQUNBLDRCQUE0QixNQUFNLGFBQWEsMkJBQTJCLCtDQUErQyx3Q0FBd0MsS0FBSyxFQUFFLEdBQUcsRUFBRTtBQUM3SyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdDQUFnQztBQUNoQyxtQ0FBbUMsc0JBQXNCO0FBQ3pEO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pELDJDQUEyQyw0RUFBNEU7QUFDdkgsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pELG9CQUFvQiwwQkFBMEIsK1JBQStSLEdBQUc7QUFDaFYsU0FBUztBQUNULDJDQUEyQyw0RUFBNEU7QUFDdkgsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxNQUFNLCtDQUErQyxNQUFNLFdBQVcsMkJBQTJCO0FBQy9JLFNBQVM7QUFDVDtBQUNBLDRCQUE0QixZQUFZLGlFQUFpRTtBQUN6RyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsTUFBTSwyREFBMkQsTUFBTSxXQUFXLG1DQUFtQztBQUNuSyxTQUFTO0FBQ1Q7QUFDQSw0QkFBNEIsWUFBWSxpRUFBaUU7QUFDekcsU0FBUztBQUNULGdGQUFnRixrQkFBa0Isa0JBQWtCLGFBQWEsdUNBQXVDLElBQUksT0FBTyw2QkFBNkIsR0FBRztBQUNuTjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pEO0FBQ0EsU0FBUztBQUNUO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrREFBYTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdUJBQXVCLCtEQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtEQUFzQix5RkFBeUYseUVBQXlFO0FBQ3hNLDhEQUE4RCxxQkFBcUI7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtEQUFhO0FBQzNDLHlCQUF5QiwrREFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsc0JBQXNCLDJCQUEyQixnRUFBZ0U7QUFDeEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxrQkFBa0IsNENBQTRDO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQyw2Q0FBNkM7QUFDN0MsZUFBZSwrREFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUOztBQUVBO0FBQ0EsYUFBYSwrQ0FBUTtBQUNyQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0JBQXNCLDhDQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0QkFBNEIsV0FBVywwQkFBMEIsS0FBSztBQUN6RztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0U7QUFDcEUsb0ZBQW9GO0FBQ3BGO0FBQ0EsYUFBYSwrQ0FBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDZDQUFNO0FBQ3JDLHdCQUF3Qiw2Q0FBTTtBQUM5Qiw0QkFBNEIsNkNBQU0sR0FBRztBQUNyQyxrQkFBa0IsNkNBQU0sR0FBRztBQUMzQixzQkFBc0IsNkNBQU07QUFDNUIscUNBQXFDLDZDQUFNLEdBQUc7QUFDOUMsc0JBQXNCLDZDQUFNO0FBQzVCLDBCQUEwQiw2Q0FBTSxHQUFHLFlBQVk7QUFDL0MsdUJBQXVCLDZDQUFNO0FBQzdCLDBCQUEwQiw2Q0FBTTtBQUNoQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVcsb0RBQW9EO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GO0FBQ3BGLG9HQUFvRztBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELDRCQUE0QixXQUFXLG1CQUFtQixLQUFLO0FBQ3RILHlCQUF5QjtBQUN6QjtBQUNBLHlDQUF5QyxpRkFBa0I7QUFDM0Q7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSyxJQUFJO0FBQ1QsK0JBQStCLGtEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsc0JBQXNCLGtEQUFXLGVBQWU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0Esb0pBQW9KO0FBQ3BKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsK0NBQStDLDRCQUE0QixXQUFXLGdDQUFnQyxLQUFLO0FBQzNIO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSyxJQUFJO0FBQ1QsbUNBQW1DLGtEQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCw4QkFBOEI7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCw4QkFBOEI7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFXLG9EQUFvRDtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRJQUE0STtBQUM1STtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsdUJBQXVCO0FBQ3RGLFNBQVM7QUFDVDtBQUNBO0FBQ0EsbUNBQW1DLDRCQUE0QixXQUFXLGdCQUFnQixLQUFLO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyw0QkFBNEIsV0FBVyxhQUFhLEtBQUs7QUFDaEc7QUFDQTtBQUNBLHVDQUF1Qyw0QkFBNEIsV0FBVyx5QkFBeUIsS0FBSztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsNEJBQTRCLFdBQVcsYUFBYSxLQUFLO0FBQ2hHO0FBQ0E7QUFDQSx1Q0FBdUMsNEJBQTRCLFdBQVcsT0FBTywrREFBbUIsT0FBTyxLQUFLO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDRCQUE0QixXQUFXLFNBQVMsc0JBQXNCLEtBQUs7QUFDbEg7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDRCQUE0QixXQUFXLHNCQUFzQixLQUFLO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQSx1Q0FBdUMsNEJBQTRCLFdBQVcsNkJBQTZCLEtBQUs7QUFDaEg7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsK0NBQVE7QUFDckIsdUJBQXVCLDZDQUFNO0FBQzdCLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsa0JBQWtCLHNCQUFzQixZQUFZO0FBQ2hHO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQSx1Q0FBdUMsV0FBVyxPQUFPLCtEQUFhLG1EQUFtRDtBQUN6SCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxXQUFXLDBDQUEwQztBQUNoRyxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxnQkFBZ0IsMkJBQTJCLDRCQUE0Qix1REFBdUQ7QUFDMUssYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLHVDQUF1Qyw0QkFBNEIsV0FBVyxxQ0FBcUMsS0FBSztBQUN4SCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDJDQUEyQyw0QkFBNEIsV0FBVyx3QkFBd0IsS0FBSztBQUMvRztBQUNBLFNBQVM7QUFDVDtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsMkJBQTJCO0FBQ3BHLDJDQUEyQyxXQUFXO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQSxzRkFBc0YsMkJBQTJCO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxXQUFXLDJHQUEyRztBQUNySztBQUNBLDJDQUEyQyxXQUFXO0FBQ3REO0FBQ0EsaUdBQWlHO0FBQ2pHLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLDRCQUE0QixZQUFZLDREQUE0RDtBQUNwRztBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGdEQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRDQUFlO0FBQ25CO0FBQ0EsS0FBSztBQUNMLFlBQVksc0RBQUcsd0JBQXdCLCtEQUErRCw2RUFBNkUsa0xBQWtMLGFBQWEsc0RBQUcsdUJBQXVCLHNGQUFzRixzREFBRywwQkFBMEIsc0VBQXNFLEdBQUcsR0FBRztBQUMza0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2Q0FBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyQkFBMkI7QUFDbkQseURBQXlELHdCQUF3QjtBQUNqRixtQ0FBbUMseUJBQXlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ0QsMEJBQTBCLFlBQVk7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsUUFBUSw0QkFBNEI7QUFDekQsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixLQUFLO0FBQ0wseURBQXlELHFCQUFxQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFHLG1CQUFtQiw0RUFBNEUsV0FBVyxVQUFVLHNEQUFHLFVBQVU7QUFDaEo7QUFDQSxrRkFBa0YsUUFBUSx1REFBSSxhQUFhLDRLQUE0SyxpQ0FBaUMsaUlBQWlJLHNEQUFHLFdBQVcsbUdBQW1HLHNEQUFHLGNBQWMsR0FBRyxLQUFLLGVBQWUsR0FBRyxHQUFHO0FBQ3hsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFHLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRTtBQUNsRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EsWUFBWSx1REFBSSwyQkFBMkI7QUFDM0M7QUFDQTtBQUNBLFdBQVcsV0FBVyxXQUFXLHNEQUFHLFlBQVksR0FBRyxzREFBRyxXQUFXLGlCQUFpQixJQUFJO0FBQ3RGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQUcsbUJBQW1CLDZEQUE2RDtBQUMvRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNkNBQWdCO0FBQzdCLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5REFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGtDQUFrQyx5REFBeUQ7QUFDM0YsOENBQThDLGdCQUFnQjtBQUM5RCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGdCQUFnQjtBQUNuRDtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQSxXQUFXLGlFQUFjO0FBQ3pCLFVBQVUsS0FBSyxrREFBSSxvQ0FBb0M7QUFDdkQsVUFBVSxLQUFLLGtEQUFJLGdDQUFnQztBQUNuRCxVQUFVLEtBQUssa0RBQUksNkJBQTZCO0FBQ2hEO0FBQ0EsaUJBQWlCLGtEQUFJO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0Esa0JBQWtCLGtEQUFJLE9BQU8sa0RBQUksU0FBUyxrREFBSTtBQUM5QztBQUNBLFNBQVM7QUFDVDtBQUNBLGlCQUFpQixrREFBSTtBQUNyQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsaUJBQWlCLGtEQUFJLFVBQVUsa0RBQUk7QUFDbkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtEQUFJLFVBQVUsa0RBQUk7QUFDbEM7QUFDQSxnQkFBZ0Isa0RBQUksWUFBWSxrREFBSSxVQUFVLGtEQUFJO0FBQ2xEO0FBQ0EsZ0JBQWdCLGtEQUFJO0FBQ3BCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxpQkFBaUIsa0RBQUk7QUFDckI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrQkFBa0Isa0RBQUksVUFBVSxrREFBSTtBQUNwQztBQUNBLFNBQVM7QUFDVDtBQUNBLGlCQUFpQixrREFBSTtBQUNyQjtBQUNBLFNBQVM7QUFDVDtBQUNBLGtCQUFrQixrREFBSSxVQUFVLGtEQUFJO0FBQ3BDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLG1DQUFtQztBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3RUFBVSxHQUFHLDhCQUE4QjtBQUMvRCxvQkFBb0Isd0VBQVUsR0FBRyw2QkFBNkI7QUFDOUQsY0FBYyw0REFBSTtBQUNsQixhQUFhLDBEQUFLO0FBQ2xCO0FBQ0Esa0VBQWtFLG1DQUFtQztBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsdUJBQXVCO0FBQzVDO0FBQ0E7QUFDQSxXQUFXLDhDQUFpQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcseURBQVU7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5REFBVTtBQUNqQztBQUNBO0FBQ0EsK0JBQStCLHlEQUFVO0FBQ3pDLGtDQUFrQyxrRUFBa0U7QUFDcEcsaUJBQWlCO0FBQ2pCLCtCQUErQix5REFBVTtBQUN6QztBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUJBQW1CLHlEQUFVO0FBQzdCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsb0NBQW9DLHVCQUF1QjtBQUMzRCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5REFBVSxRQUFRLGNBQWMseUJBQXlCO0FBQ3hFLDRCQUE0Qix5REFBVTtBQUN0QztBQUNBLDJCQUEyQix5REFBVTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsb0NBQW9DLHlEQUFVO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx5REFBVTtBQUM5QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsQ0FBQztBQUNELGdDQUFnQyx1QkFBdUI7QUFDdkQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrQkFBa0I7QUFDL0MsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrREFBYTtBQUNqQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLDZDQUFnQjtBQUNqQztBQUNBO0FBQ0Esa0JBQWtCLHlDQUFZO0FBQzlCO0FBQ0EsaUJBQWlCLHlDQUFZO0FBQzdCO0FBQ0EsYUFBYSwyQ0FBYztBQUMzQixhQUFhLDJDQUFjO0FBQzNCO0FBQ0E7QUFDQSx3QkFBd0IseUNBQVk7QUFDcEMsOEJBQThCLHlDQUFZO0FBQzFDLHlCQUF5Qiw4RUFBdUI7QUFDaEQ7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLHNEQUF5QixvQkFBb0I7QUFDakQscUNBQXFDLHdCQUF3QjtBQUM3RCxLQUFLLElBQUk7QUFDVCxJQUFJLDRDQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwyQkFBMkIsMENBQWE7QUFDeEM7QUFDQSxrREFBa0QsMkJBQTJCO0FBQzdFO0FBQ0EsS0FBSztBQUNMLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVLEdBQUcsa0NBQWtDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0EscUJBQXFCLHNFQUFtQjtBQUN4QyxhQUFhO0FBQ2I7QUFDQTtBQUNBLFlBQVksd0VBQXFCO0FBQ2pDLFlBQVksOERBQU87QUFDbkIsWUFBWSx3RUFBYTtBQUN6QjtBQUNBLFlBQVkscURBQU0sOEVBQThFLDBFQUFtQixTQUFTLGdFQUFhLFNBQVMsZ0VBQWE7QUFDL0o7QUFDQTtBQUNBLFlBQVkseUVBQWtCO0FBQzlCO0FBQ0E7QUFDQSwrQkFBK0IsMkRBQVc7QUFDMUMsK0JBQStCLHlEQUFVO0FBQ3pDO0FBQ0E7QUFDQSwrQkFBK0Isc0VBQWU7QUFDOUMsK0JBQStCLHNFQUFtQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHlEQUFVO0FBQ3pDO0FBQ0E7QUFDQSwrQkFBK0IsOERBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHlEQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBVztBQUNwQyxhQUFhO0FBQ2I7QUFDQSx5QkFBeUIsMkRBQVcsaUJBQWlCLHFEQUFNO0FBQzNELGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGtCQUFrQiwrREFBZTtBQUNqQztBQUNBLDRCQUE0QjtBQUM1Qiw0QkFBNEIsd0NBQXdDO0FBQ3BFO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywwREFBVTtBQUNoRCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsMERBQVU7QUFDaEQsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULDZCQUE2QjtBQUM3QixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1REFBSSxDQUFDLHVEQUFRLElBQUksV0FBVyxzREFBRyxVQUFVO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHNEQUFHLFdBQVcsMkVBQTJFLGdDQUFnQyxtQ0FBbUMsR0FBRyxnQ0FBZ0Msc0RBQUcsb0JBQW9CLHlEQUF5RCxLQUFLLEtBQUssdUJBQXVCLE1BQU07QUFDelc7QUFDQSxZQUFZLHNEQUFHLFVBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3SUFBd0ksc0RBQUcsVUFBVSwyRUFBMkUsZ0NBQWdDLG1DQUFtQyxHQUFHO0FBQ3RTLENBQUM7O0FBRUQseUJBQXlCLGlEQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQSxZQUFZLHVEQUFJLDJCQUEyQiw4Q0FBOEMsV0FBVyw2QkFBNkIsc0RBQUcsYUFBYSw0QkFBNEIsR0FBRyx1REFBSSxVQUFVLG9FQUFvRSxzREFBRyxlQUFlLHdQQUF3UCxRQUFRLHFHQUFxRyxrS0FBa0ssK0VBQStFLHNEQUFHLGdCQUFnQixZQUFZLElBQUk7QUFDNzRCLENBQUM7O0FBRUQseUJBQXlCLDZDQUFnQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1REFBSSwyQkFBMkIsd0NBQXdDLFdBQVcsNEJBQTRCLHNEQUFHLGFBQWEsVUFBVSxzREFBRyxVQUFVLG1FQUFtRSxzREFBRyxlQUFlLHVUQUF1VCxHQUFHLGdDQUFnQyxzREFBRyxnQkFBZ0IsV0FBVztBQUM5bUIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLHFCQUFxQiw2Q0FBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFHLG1CQUFtQixpRkFBaUYsV0FBVyxvQkFBb0I7QUFDbEosQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwyQ0FBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRDQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCw0QkFBNEI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0JBQWtCLGlCQUFpQixjQUFjO0FBQ2hGLDRCQUE0QixrQkFBa0IsaUJBQWlCLGNBQWM7QUFDN0UsK0JBQStCLGtCQUFrQixvQkFBb0IsY0FBYztBQUNuRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlDQUFZO0FBQ2hDLG1CQUFtQix5Q0FBWTtBQUMvQixJQUFJLDRDQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVDQUF1Qyw2Q0FBNkM7QUFDcEY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0JBQWtCLHVCQUF1QixjQUFjO0FBQ3RGLG1DQUFtQyxrQkFBa0IsMkJBQTJCLGNBQWM7QUFDOUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwyQ0FBYztBQUMzQixhQUFhLDJDQUFjO0FBQzNCLGFBQWEsMkNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFIQUFxSDtBQUNySCxhQUFhLDJDQUFjO0FBQzNCO0FBQ0EsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQW9EO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0wsYUFBYSxpQ0FBaUM7QUFDOUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUNBQWlDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1REFBSSxtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVyxXQUFXLHNEQUFHLFFBQVEsMkVBQTJFLHNEQUFHLGFBQWEsa0RBQWtELEdBQUcsR0FBRyxzREFBRyxVQUFVLDJFQUEyRSx1REFBSSxRQUFRLG1LQUFtSyxzREFBRyxRQUFRLHlGQUF5RixvQ0FBb0MsR0FBRyxHQUFHLHNEQUFHLFVBQVUsVUFBVSx1REFBSSxhQUFhO0FBQ2pvQjtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsc0RBQUcsZUFBZSxHQUFHLHNEQUFHLFdBQVcscUJBQXFCLElBQUksR0FBRyxJQUFJO0FBQzdIO0FBQ0E7QUFDQSxnQkFBZ0Isc0RBQUcsbUJBQW1CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQixVQUFVLHVEQUFJLFVBQVUsNEVBQTRFLHNEQUFHLFFBQVEsNENBQTRDLG9CQUFvQiw2Q0FBNkMsR0FBRyxzREFBRyxRQUFRLDBDQUEwQyxHQUFHLHNEQUFHLFVBQVUsVUFBVSx1REFBSSxhQUFhO0FBQy9WO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNEQUFzRCxzREFBRyxnQkFBZ0IsUUFBUSxzREFBRyxXQUFXLHFCQUFxQixJQUFJLEdBQUcsSUFBSSxHQUFHO0FBQy9KO0FBQ0EsWUFBWSx1REFBSSxtQkFBbUI7QUFDbkM7QUFDQTtBQUNBLDZCQUE2QixlQUFlO0FBQzVDO0FBQ0EsNkJBQTZCLGdCQUFnQixXQUFXLHNEQUFHLFFBQVEsMkVBQTJFLHNEQUFHLGFBQWEsa0NBQWtDLEdBQUcsR0FBRyxzREFBRyxRQUFRO0FBQ2pOLDRDQUE0QyxpQkFBaUI7QUFDN0Qsd0RBQXdELElBQUk7QUFDNUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMsWUFBWSxxRUFBb0I7QUFDaEMsV0FBVyw2Q0FBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBbUIsV0FBVyw4Q0FBOEM7QUFDM0Y7QUFDQTtBQUNBLHVFQUF1RSxHQUFHLG9CQUFvQixHQUFHO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0RBQW1CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnREFBbUIsV0FBVyw4Q0FBOEM7QUFDdkY7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnREFBbUIsV0FBVyxzQkFBc0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFHLENBQUMsdURBQVEsSUFBSTtBQUM1QjtBQUNBLG9CQUFvQixzREFBRyxVQUFVLDJFQUEyRSxzREFBRyxTQUFTLGdCQUFnQixHQUFHO0FBQzNJLFNBQVMsR0FBRztBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDOztBQUVEO0FBQ0E7QUFDQSxXQUFXLHVEQUF5QjtBQUNwQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGlCQUFpQjtBQUNwRCxLQUFLLElBQUk7QUFDVCxvQ0FBb0Msd0JBQXdCLG1CQUFtQix3QkFBd0I7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5Q0FBWTtBQUM5QixhQUFhLDJDQUFjO0FBQzNCLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVEQUFJLHNCQUFzQix1QkFBdUIsUUFBUSxpRkFBaUYsZ0RBQWdELFdBQVcsV0FBVyx1REFBSSxXQUFXLHdEQUF3RCxzQkFBc0IsK0JBQStCLHNEQUFHLFlBQVksK0dBQStHO0FBQzFkO0FBQ0Esb0NBQW9DLHNEQUFHLFlBQVkseUNBQXlDO0FBQzVGLHlCQUF5QixJQUFJLGNBQWM7QUFDM0M7QUFDQSxZQUFZLHNEQUFHLGlCQUFpQixrU0FBa1MsV0FBVyxvQkFBb0I7QUFDalc7O0FBRUE7QUFDQTtBQUNBLFlBQVksdURBQUksb0NBQW9DO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFHLGVBQWUsR0FBRyxzREFBRyxXQUFXLDBCQUEwQixJQUFJO0FBQ3hGOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQXFEO0FBQ2hFLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHdDQUF3QyxpQkFBaUI7QUFDekQsb0RBQW9ELGlCQUFpQjtBQUNyRSw0REFBNEQsaUJBQWlCO0FBQzdFLHVFQUF1RSxpQkFBaUI7QUFDeEYsZ0RBQWdELGlCQUFpQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFlBQVksdURBQUksbUJBQW1CLHNHQUFzRyxXQUFXLG9DQUFvQyxzREFBRyw0QkFBNEIsR0FBRyxzREFBRyxVQUFVLDBEQUEwRCx1REFBSSxVQUFVLDhEQUE4RCxzREFBRyxVQUFVLGtCQUFrQixHQUFHLHNEQUFHLFVBQVUsb0JBQW9CLEdBQUcsc0RBQUcsVUFBVSxxQkFBcUIsR0FBRyxzREFBRyxVQUFVLG1CQUFtQixHQUFHLHNEQUFHLFVBQVUsb0JBQW9CLEdBQUcsc0RBQUcsVUFBVSxtQkFBbUIsSUFBSSxHQUFHLElBQUk7QUFDMWtCOztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDJDQUFjO0FBQzNCO0FBQ0EsdURBQXVELG9CQUFvQjtBQUMzRSw4Q0FBOEMsb0JBQW9CO0FBQ2xFLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNEQUFHLG1CQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVcsVUFBVSx1REFBSSxVQUFVLDRFQUE0RSxzREFBRyxRQUFRLDRDQUE0QyxvQkFBb0IsNkNBQTZDLEdBQUcsc0RBQUcsVUFBVSwyRUFBMkUsdURBQUksUUFBUSwrTUFBK00sc0RBQUcsUUFBUSx1RkFBdUYsc0NBQXNDLHNEQUFHLFFBQVEsMkhBQTJILElBQUksR0FBRyxHQUFHLHVEQUFJLFFBQVE7QUFDajFCLG9EQUFvRCxpQkFBaUI7QUFDckUsNkRBQTZELHNEQUFHLFNBQVMsdUJBQXVCLEdBQUcsc0RBQUcsVUFBVSxVQUFVLHVEQUFJLGFBQWE7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwR0FBMEcsc0RBQUcsZ0JBQWdCLFFBQVEsc0RBQUcsV0FBVyx1QkFBdUIsSUFBSSxHQUFHLElBQUksR0FBRztBQUN4TDtBQUNBO0FBQ0EsWUFBWSx1REFBSSxDQUFDLHVEQUFRLElBQUksV0FBVyx1REFBSSxtQkFBbUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsWUFBWSxzR0FBc0csR0FBRyxXQUFXLGdDQUFnQyxzREFBRyxVQUFVLCtDQUErQyxzREFBRyxlQUFlLGtCQUFrQixHQUFHLElBQUksc0RBQUcsWUFBWSw4Q0FBOEMsSUFBSSx3QkFBd0Isc0RBQUcsVUFBVSxxREFBcUQsc0RBQUcsUUFBUSwyQkFBMkIsR0FBRyxLQUFLO0FBQy9mO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQUcsVUFBVSxtREFBbUQsc0RBQUcsUUFBUSwyQkFBMkIsR0FBRztBQUNySDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0RBQUcsYUFBYTtBQUNuQywyQkFBMkIsc0RBQUcsc0JBQXNCLElBQUksc0RBQUcsd0JBQXdCO0FBQ25GO0FBQ0EsWUFBWSx1REFBSSxhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxnQ0FBZ0MseURBQXlELHNEQUFHLFdBQVcsb0JBQW9CLElBQUk7QUFDbk07O0FBRUE7QUFDQTtBQUNBLGFBQWEsMkNBQWM7QUFDM0IsK0JBQStCLGlDQUFpQyxlQUFlO0FBQy9FLFlBQVksdURBQUksVUFBVSxXQUFXLHNEQUFHLFNBQVMsMEVBQTBFLFlBQVksc0RBQUcsZUFBZSwwTkFBME4sS0FBSztBQUN4WDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCwrQkFBK0IsNkNBQTZDO0FBQzVFO0FBQ0Esa0NBQWtDLDRCQUE0QjtBQUM5RCwrQkFBK0IsaUVBQWlFO0FBQ2hHO0FBQ0Esa0NBQWtDLDZCQUE2QjtBQUMvRCwrQkFBK0IsOENBQThDO0FBQzdFLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZLHVEQUFJLFVBQVUsNENBQTRDLFFBQVEsc0RBQUcsY0FBYyw2TUFBNk0sVUFBVSxpQ0FBaUMsUUFBUSxzREFBRyxTQUFTLCtFQUErRSxXQUFXLElBQUk7QUFDemM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRDQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1QsWUFBWSxzREFBRyxtQkFBbUIscUVBQXFFLFdBQVcsVUFBVSxzREFBRyxVQUFVLGdGQUFnRixzREFBRyxlQUFlLDZNQUE2TSxHQUFHLEdBQUc7QUFDOWI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMkNBQWM7QUFDM0I7QUFDQSxhQUFhLDJDQUFjO0FBQzNCLGFBQWEsMkNBQWM7QUFDM0IsYUFBYSwyQ0FBYztBQUMzQjtBQUNBLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDZCQUE2QjtBQUM3QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGlCQUFpQjtBQUNwQztBQUNBO0FBQ0EsbUJBQW1CLGlCQUFpQjtBQUNwQztBQUNBO0FBQ0EsbUJBQW1CLG9CQUFvQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsWUFBWSx1REFBSSxtQkFBbUIscUVBQXFFLFdBQVcsV0FBVyxzREFBRyxhQUFhLHVJQUF1SSxzREFBRyxpQkFBaUIsR0FBRyxHQUFHLHNEQUFHLGFBQWEsZ0pBQWdKLHNEQUFHLGdCQUFnQixHQUFHLEdBQUcsc0RBQUcsYUFBYSw4R0FBOEcsc0RBQUcsZ0JBQWdCLEdBQUcsR0FBRyxzREFBRyxZQUFZLCtNQUErTSxJQUFJO0FBQ2oyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxzQkFBc0IsNkNBQWdCO0FBQ3RDLCtUQUErVCxtQkFBbUIseUlBQXlJLHNEQUFHLENBQUMsdURBQVEsSUFBSTtBQUMzZSxpQ0FBaUMsd0JBQXdCO0FBQ3pELGFBQWEsMkNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRDQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxzREFBeUIsb0JBQW9CO0FBQ2pEO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdURBQUksMkJBQTJCLCtDQUErQyxXQUFXLDZCQUE2QixzREFBRyxjQUFjLHVFQUF1RSxJQUFJLHVEQUFJLFVBQVUsMkVBQTJFLHNEQUFHLGFBQWE7QUFDdlU7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZCQUE2QixHQUFHLHVEQUFJLFVBQVUsNEpBQTRKLHNEQUFHLGtCQUFrQiw0QkFBNEIsc0RBQUcsZ0JBQWdCLEdBQUcsb0VBQW9FLHNEQUFHLGtCQUFrQiw0QkFBNEIsc0RBQUcsZ0JBQWdCLEdBQUcsd0JBQXdCLHNEQUFHLGFBQWE7QUFDN2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsa0JBQWtCLGtCQUFrQixJQUFJLCtDQUErQyxzREFBRyxnQkFBZ0IsR0FBRyw2QkFBNkIsc0RBQUcsNEJBQTRCLElBQUksR0FBRyxzREFBRyxtQkFBbUIsa0VBQWtFLCtCQUErQixzREFBRyxpQkFBaUIsY0FBYyxJQUFJO0FBQ3hZLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHlDQUFZO0FBQ3RDLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZLHVEQUFJLG1CQUFtQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVcsV0FBVyxzREFBRyxnQ0FBZ0MsK0dBQStHLFdBQVcsc0RBQUcsYUFBYSwrQkFBK0IsaUJBQWlCLHFDQUFxQyxHQUFHLHNEQUFHLGlCQUFpQixHQUFHLHNEQUFHLG1CQUFtQixrREFBa0QsSUFBSTtBQUMxWTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDhCQUE4QjtBQUM1QztBQUNBLFlBQVksdURBQUksVUFBVSx3RkFBd0Ysc0RBQUcsVUFBVSwyRUFBMkUsdURBQUksUUFBUTtBQUN0TjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLG1DQUFtQyxzREFBRyxnQkFBZ0IsYUFBYSxHQUFHLEdBQUcsdURBQUksVUFBVSwrRkFBK0Ysc0RBQUcsYUFBYSwySkFBMkosMEJBQTBCLHNEQUFHLGFBQWEsK0tBQStLLHdCQUF3QixzREFBRyxhQUFhLHNKQUFzSixLQUFLLElBQUk7QUFDandCOztBQUVBO0FBQ0E7QUFDQSxZQUFZLHNEQUFHLGtCQUFrQixnREFBZ0Qsc0RBQUcsWUFBWSxHQUFHO0FBQ25HOztBQUVBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwyQkFBMkI7QUFDL0Msb0JBQW9CLDJCQUEyQjtBQUMvQyxvQkFBb0IsMkJBQTJCO0FBQy9DLHFCQUFxQiw0QkFBNEI7QUFDakQsU0FBUztBQUNULEtBQUs7QUFDTCxDQUFDO0FBQ0QsZ0NBQWdDLGdCQUFnQjtBQUNoRCxnQ0FBZ0MsZ0JBQWdCO0FBQ2hELGdDQUFnQyxnQkFBZ0I7QUFDaEQsaUNBQWlDLGlCQUFpQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkRBQTJEO0FBQy9FLG9CQUFvQiwyREFBMkQ7QUFDL0UsbUJBQW1CLDBEQUEwRDtBQUM3RSxTQUFTO0FBQ1QsS0FBSztBQUNMLENBQUM7QUFDRCwwQ0FBMEMsZUFBZTtBQUN6RCwyQ0FBMkMsZ0JBQWdCO0FBQzNELDJDQUEyQyxnQkFBZ0I7O0FBRTNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQSxZQUFZLHNEQUFHLFVBQVUsK0ZBQStGLFFBQVEsdURBQUksVUFBVSxvR0FBb0csc0RBQUcsV0FBVztBQUNoUTtBQUNBO0FBQ0EsNENBQTRDLCtCQUErQixzREFBRyxXQUFXO0FBQ3pGO0FBQ0E7QUFDQSw0Q0FBNEMsK0JBQStCLHNEQUFHLFdBQVc7QUFDekY7QUFDQTtBQUNBLDRDQUE0QyxJQUFJLHNEQUFHLFdBQVcsK0VBQStFLG1DQUFtQyx1REFBSSxXQUFXLDBHQUEwRyxLQUFLLGdCQUFnQixHQUFHO0FBQ2pVOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRiw0RkFBNEY7QUFDakw7QUFDQTtBQUNBLGlEQUFpRCw2QkFBNkI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJLHFDQUFxQztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJLHFDQUFxQztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGO0FBQ3RGLCtFQUErRTtBQUMvRSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUksNEJBQTRCO0FBQ3JDO0FBQ0E7QUFDQSxrRUFBa0Usb0NBQW9DO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRiw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwwQkFBMEI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHFEQUFRO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzREFBRyxDQUFDLHVEQUFRLElBQUk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0Y7QUFDL0YsdUdBQXVHO0FBQ3ZHLG9CQUFvQix1REFBSSxVQUFVLDJFQUEyRSxzREFBRyxVQUFVLDhFQUE4RSxHQUFHLHNEQUFHLFVBQVUsY0FBYyxHQUFHLHNEQUFHLGNBQWMsc0JBQXNCLElBQUk7QUFDcFIsU0FBUyxHQUFHO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFHLFVBQVUsd0ZBQXdGLDBDQUEwQztBQUMzSjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsNEJBQTRCO0FBQzVCLDRCQUE0QjtBQUM1Qiw4QkFBOEI7QUFDOUIsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEZBQTRGLHVDQUF1QztBQUNuSSxvQ0FBb0Msd0JBQXdCLG9CQUFvQixhQUFhO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDBCQUEwQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLDREQUE0RCxnQkFBZ0IsYUFBYTtBQUNuSTtBQUNBLHVEQUF1RCxPQUFPLGNBQWMsT0FBTztBQUNuRiwyTUFBMk07QUFDM007QUFDQSx5RUFBeUU7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzREFBRyxDQUFDLHVEQUFRLElBQUk7QUFDNUI7QUFDQSx3QkFBd0IsdURBQUksVUFBVSx1RUFBdUUsc0RBQUcsY0FBYztBQUM5SDtBQUNBO0FBQ0EsbURBQW1ELEdBQUcsc0RBQUcsYUFBYSx1QkFBdUIsNkJBQTZCLG1CQUFtQixHQUFHLHNEQUFHLG1CQUFtQixvQ0FBb0MsSUFBSTtBQUM5TTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1REFBSSxVQUFVLDRFQUE0RSx1REFBSSxVQUFVO0FBQzVIO0FBQ0Esa0ZBQWtGLHNEQUFHLGNBQWM7QUFDbkc7QUFDQTtBQUNBLHNEQUFzRCxNQUFNLHNEQUFHLGNBQWM7QUFDN0U7QUFDQTtBQUNBLHNEQUFzRCxPQUFPLHNEQUFHLGNBQWM7QUFDOUU7QUFDQTtBQUNBLHFEQUFxRCxJQUFJLHNEQUFHLGFBQWE7QUFDekU7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG1CQUFtQixJQUFJLDBDQUEwQyxzREFBRyxVQUFVLGNBQWMsMkNBQTJDLHNEQUFHLGNBQWMsc0JBQXNCO0FBQy9NO0FBQ0Esb0NBQW9DLHVEQUFJLFVBQVU7QUFDbEQ7QUFDQSwrQ0FBK0MsdURBQUksVUFBVTtBQUM3RDtBQUNBO0FBQ0EsbUhBQW1ILGtDQUFrQyxRQUFRLHNEQUFHLG1CQUFtQiwyQkFBMkIsNkNBQTZDLElBQUk7QUFDL1AseUJBQXlCLElBQUk7QUFDN0IsU0FBUyxHQUFHO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFHLFdBQVcsK0ZBQStGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1REFBSSxhQUFhO0FBQzdCO0FBQ0E7QUFDQSx5REFBeUQsc0RBQUcsV0FBVyxzRkFBc0YsR0FBRyxzREFBRyxXQUFXLHNGQUFzRixJQUFJO0FBQ3hROztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msb0JBQW9CLGdCQUFnQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLFlBQVksdURBQUksVUFBVSwwRUFBMEUsdURBQUksVUFBVSx3RUFBd0Usc0RBQUcsV0FBVyw2RkFBNkYsdUJBQXVCLHVEQUFJLFdBQVc7QUFDM1U7QUFDQSxzRUFBc0Usd0JBQXdCLHVEQUFJLFdBQVc7QUFDN0c7QUFDQSxzRUFBc0UsSUFBSSx1REFBSSxXQUFXLG9DQUFvQyxJQUFJLEdBQUcsdURBQUksVUFBVSx3RUFBd0Usc0RBQUcsV0FBVywrRkFBK0Ysc0JBQXNCLHVEQUFJLFdBQVcsMEdBQTBHLHVCQUF1Qix1REFBSSxXQUFXLDJHQUEyRyx1QkFBdUIsdURBQUksV0FBVywwR0FBMEcsSUFBSSx1REFBSSxXQUFXLG1DQUFtQyxJQUFJLEdBQUcsdURBQUksVUFBVSx5SEFBeUgsSUFBSTtBQUMvN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx3QkFBd0I7QUFDckMsQ0FBQztBQUNEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwyQ0FBYyxxQkFBcUIsb0JBQW9CLHdDQUF3QztBQUM1RyxzQkFBc0IsOENBQWlCO0FBQ3ZDLHVDQUF1Qyw0QkFBNEIsZUFBZSw4QkFBOEIsS0FBSztBQUNySDtBQUNBO0FBQ0EsOEJBQThCLHVCQUF1QjtBQUNyRDtBQUNBLEtBQUs7QUFDTCxrQkFBa0IsOENBQWlCO0FBQ25DLHVDQUF1Qyw0QkFBNEIsZUFBZSw4QkFBOEIsS0FBSztBQUNySDtBQUNBO0FBQ0EsOEJBQThCLDhDQUE4QztBQUM1RTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCw0QkFBNEIsZUFBZSwyQkFBMkIsS0FBSztBQUN6STtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsNEJBQTRCLGVBQWUsd0JBQXdCLEtBQUs7QUFDbEk7QUFDQTtBQUNBO0FBQ0EsMERBQTBELDRCQUE0QixlQUFlLG1CQUFtQixLQUFLO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxlQUFlLG9CQUFvQjtBQUN0RixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLGlDQUFpQztBQUNqQztBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxnQkFBZ0I7QUFDM0U7QUFDQSx5QkFBeUIsSUFBSTtBQUM3QixtREFBbUQsZUFBZSxjQUFjO0FBQ2hGLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsNkJBQTZCO0FBQzVGO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyxxQ0FBcUM7QUFDckMscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLDZCQUE2QjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsNkJBQTZCO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLDZCQUE2QjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxJQUFJLDRDQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVEQUFJLDJCQUEyQix3RUFBd0UscURBQXFELFdBQVcsV0FBVyxzREFBRyxhQUFhLHNCQUFzQixpQkFBaUIsMkJBQTJCLEdBQUcsc0RBQUcsYUFBYTtBQUNuUyxtREFBbUQsNEJBQTRCLFFBQVEseUJBQXlCLEtBQUs7QUFDckgsaUJBQWlCO0FBQ2pCLG1EQUFtRCw0QkFBNEIsUUFBUSxxQkFBcUIsS0FBSztBQUNqSCxpQkFBaUI7QUFDakIsNENBQTRDLDRCQUE0QixRQUFRLHlCQUF5QixLQUFLO0FBQzlHLGlCQUFpQixzTkFBc04sb0VBQW9FLHNEQUFHLFlBQVksOEJBQThCLE1BQU0sdURBQUksVUFBVSwyRUFBMkUsc0RBQUcsY0FBYyxrREFBa0QsSUFBSSxJQUFJLHNEQUFHLFVBQVUseUdBQXlHLHVEQUFJLFVBQVUsOERBQThELHNEQUFHLFFBQVEsa0NBQWtDLEdBQUcsdURBQUksUUFBUSwrQkFBK0Isc0RBQUcsV0FBVyw2RUFBNkUsSUFBSSxJQUFJLE1BQU0sdURBQUksQ0FBQyx1REFBUSxJQUFJLFdBQVcsc0RBQUcsVUFBVSxrSUFBa0ksNERBQTRELHNEQUFHLFlBQVksOERBQThELEtBQUssSUFBSSxJQUFJO0FBQ3pzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0NBQWdDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLGdCQUFnQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMENBQTBDLHVCQUF1QixLQUFLO0FBQ3ZHLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0JBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0JBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx5Q0FBeUMsc0VBQXNFO0FBQy9HO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzREFBRyxDQUFDLHVEQUFRLElBQUk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQUcsQ0FBQywyQ0FBYyxJQUFJO0FBQzlDO0FBQ0EsZ0NBQWdDLHNEQUFHLFVBQVU7QUFDN0MsdURBQXVELDBCQUEwQjtBQUNqRiwwQ0FBMEMsc0RBQUcsZUFBZTtBQUM1RDtBQUNBLGlMQUFpTCxHQUFHO0FBQ3BMLHFCQUFxQixHQUFHO0FBQ3hCO0FBQ0E7QUFDQSxTQUFTLEdBQUc7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYixvQkFBb0I7QUFDcEIsU0FBUztBQUNULEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDhCQUE4QjtBQUM1QztBQUNBLFlBQVksdURBQUksVUFBVTtBQUMxQjtBQUNBO0FBQ0EsdUJBQXVCLHVEQUFJLFFBQVE7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQiwrQkFBK0Isc0RBQUcsZ0JBQWdCLEdBQUcsc0RBQUcsV0FBVyxzQkFBc0IsSUFBSSxZQUFZLHVEQUFJLFVBQVUsNkVBQTZFLHNEQUFHLGFBQWEsNEZBQTRGLGlDQUFpQyxzQ0FBc0MsR0FBRyxzREFBRyxhQUFhLDRGQUE0RixpQ0FBaUMsc0NBQXNDLElBQUksS0FBSztBQUN0akI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDJDQUFjO0FBQzNCO0FBQ0EsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsMkJBQTJCO0FBQ2xHLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxhQUFhLGlDQUFpQztBQUM5Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQWdCO0FBQ3RDO0FBQ0EsMk9BQTJPLHNCQUFzQixnVEFBZ1Qsc0RBQUcsQ0FBQyx1REFBUSxJQUFJO0FBQ2prQjtBQUNBO0FBQ0E7QUFDQSxhQUFhLDJDQUFjO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxxQkFBcUIseUNBQVk7QUFDakMsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSSxzREFBeUIsb0JBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLLElBQUk7QUFDVDtBQUNBLFlBQVksdURBQUksMkJBQTJCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsWUFBWSxXQUFXLCtDQUErQyxzREFBRyxXQUFXLCtFQUErRSxJQUFJLHNEQUFHLFVBQVU7QUFDcEwsMEJBQTBCLDRDQUE0QztBQUN0RSw2Q0FBNkMsc0RBQUcsZUFBZSxrQkFBa0IsTUFBTSxzREFBRyxnQkFBZ0IsbUJBQW1CLElBQUksR0FBRyx1REFBSSxVQUFVO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixxRkFBcUYsc0RBQUcsa0JBQWtCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixZQUFZLHNEQUFHLGdCQUFnQixHQUFHLCtCQUErQixzREFBRyxrQkFBa0I7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFlBQVksc0RBQUcsY0FBYyxHQUFHLEtBQUssa0JBQWtCLHVEQUFJLENBQUMsdURBQVEsSUFBSSxXQUFXLHNEQUFHLHlCQUF5QixvQkFBb0IsR0FBRyxzREFBRyxhQUFhLGFBQWEsSUFBSSxLQUFLO0FBQ3JNLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwyQ0FBYztBQUMzQixhQUFhLDJDQUFjO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsc0RBQUcseUJBQXlCLHlDQUF5Qyw4Q0FBOEMsZUFBZSxNQUFNO0FBQy9MO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlDQUFZO0FBQ3pDLGFBQWEsMkNBQWM7QUFDM0IsYUFBYSwyQ0FBYztBQUMzQix1REFBdUQsMkNBQWM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsWUFBWSxzREFBRyw4QkFBOEIsb0dBQW9HLFdBQVcsVUFBVSx1REFBSSxtQkFBbUIsdUZBQXVGLHNEQUFHLGdDQUFnQyx1QkFBdUI7QUFDOVU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnQ0FBZ0Msc0RBQUcsVUFBVTtBQUNwRSxzQ0FBc0MseUJBQXlCO0FBQy9EO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSx1QkFBdUIsSUFBSSx1REFBSSx5QkFBeUIsc0JBQXNCLGtDQUFrQyxzREFBRyxvQkFBb0IsMElBQTBJLHlCQUF5QixzREFBRyxrQkFBa0Isc0RBQXNELDJCQUEyQixzREFBRyxvQkFBb0Isd0VBQXdFLHlEQUF5RCx1REFBSSxDQUFDLHVEQUFRLElBQUksNERBQTRELHNEQUFHLFVBQVU7QUFDbG9CLHNEQUFzRCx1QkFBdUI7QUFDN0U7QUFDQTtBQUNBLHFDQUFxQyxXQUFXLGlEQUFpRCxJQUFJLHNEQUFHLFVBQVU7QUFDbEg7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFlBQVksc0RBQUcsb0JBQW9CLGdDQUFnQyxpQ0FBaUMscUJBQXFCLEdBQUcsSUFBSSxLQUFLLEtBQUssR0FBRztBQUNsTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSx1REFBSSxrQkFBa0Isa0VBQWtFLHNEQUFHLGdCQUFnQixrQkFBa0Isc0RBQUcsYUFBYSxtQkFBbUIsSUFBSTtBQUNoTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQzs7QUFFMnlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bjb2Rlc2FuZGJveC9zYW5kcGFjay1yZWFjdC9kaXN0L2luZGV4Lm1qcz83M2U3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeHMsIGpzeCwgRnJhZ21lbnQgfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCBjcmVhdGVFbGVtZW50LCBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY3JlYXRlU3RpdGNoZXMgfSBmcm9tICdAc3RpdGNoZXMvY29yZSc7XG5pbXBvcnQgeyBkZXF1YWwgfSBmcm9tICdkZXF1YWwnO1xuaW1wb3J0IHsgbm9ybWFsaXplUGF0aCwgYWRkUGFja2FnZUpTT05JZk5lZWRlZCwgbG9hZFNhbmRwYWNrQ2xpZW50LCBleHRyYWN0RXJyb3JEZXRhaWxzIH0gZnJvbSAnQGNvZGVzYW5kYm94L3NhbmRwYWNrLWNsaWVudCc7XG5pbXBvcnQgeyBjbG9zZUJyYWNrZXRzS2V5bWFwLCBjbG9zZUJyYWNrZXRzIH0gZnJvbSAnQGNvZGVtaXJyb3IvYXV0b2NvbXBsZXRlJztcbmltcG9ydCB7IGRlZmF1bHRLZXltYXAsIGhpc3RvcnlLZXltYXAsIGhpc3RvcnksIGluZGVudE1vcmUsIGluZGVudExlc3MsIGRlbGV0ZUdyb3VwQmFja3dhcmQgfSBmcm9tICdAY29kZW1pcnJvci9jb21tYW5kcyc7XG5pbXBvcnQgeyBIaWdobGlnaHRTdHlsZSwgc3ludGF4SGlnaGxpZ2h0aW5nLCBicmFja2V0TWF0Y2hpbmcgfSBmcm9tICdAY29kZW1pcnJvci9sYW5ndWFnZSc7XG5pbXBvcnQgeyBFZGl0b3JTdGF0ZSwgU3RhdGVFZmZlY3QsIEVkaXRvclNlbGVjdGlvbiwgQW5ub3RhdGlvbiB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IEVkaXRvclZpZXcsIFZpZXdQbHVnaW4sIERlY29yYXRpb24sIGtleW1hcCwgaGlnaGxpZ2h0U3BlY2lhbENoYXJzLCBoaWdobGlnaHRBY3RpdmVMaW5lLCBsaW5lTnVtYmVycyB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHVzZUludGVyc2VjdGlvbk9ic2VydmVyIGZyb20gJ0ByZWFjdC1ob29rL2ludGVyc2VjdGlvbi1vYnNlcnZlcic7XG5pbXBvcnQgeyBjc3MgYXMgY3NzJDEgfSBmcm9tICdAY29kZW1pcnJvci9sYW5nLWNzcyc7XG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZy1odG1sJztcbmltcG9ydCB7IGphdmFzY3JpcHQgfSBmcm9tICdAY29kZW1pcnJvci9sYW5nLWphdmFzY3JpcHQnO1xuaW1wb3J0IHsgdGFncywgaGlnaGxpZ2h0VHJlZSB9IGZyb20gJ0BsZXplci9oaWdobGlnaHQnO1xuaW1wb3J0IEFuc2VyIGZyb20gJ2Fuc2VyJztcbmltcG9ydCB7IGVzY2FwZUNhcnJpYWdlUmV0dXJuIH0gZnJvbSAnZXNjYXBlLWNhcnJpYWdlJztcbmltcG9ydCBMWlN0cmluZyBmcm9tICdsei1zdHJpbmcnO1xuaW1wb3J0IGNsZWFuU2V0IGZyb20gJ2NsZWFuLXNldCc7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxudmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cblxudmFyIFNWRyA9IGZ1bmN0aW9uIChwcm9wcykgeyByZXR1cm4gKGpzeChcInN2Z1wiLCBfX2Fzc2lnbih7IGZpbGw6IFwiY3VycmVudENvbG9yXCIsIGhlaWdodDogXCIxNlwiLCB2aWV3Qm94OiBcIjAgMCAxNiAxNlwiLCB3aWR0aDogXCIxNlwiLCB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIH0sIHByb3BzKSkpOyB9O1xudmFyIFNpZ25Jbkljb24gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoanN4cyhTVkcsIHsgdmlld0JveDogXCIwIDAgNDggNDhcIiwgY2hpbGRyZW46IFtqc3goXCJ0aXRsZVwiLCB7IGNoaWxkcmVuOiBcIlNpZ24gaW5cIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTkgNDJxLTEuMiAwLTIuMS0uOVE2IDQwLjIgNiAzOVY5cTAtMS4yLjktMi4xUTcuOCA2IDkgNmgxNC41NXYzSDl2MzBoMTQuNTV2M1ptMjQuMy05LjI1LTIuMTUtMi4xNSA1LjEtNS4xaC0xNy41di0zaDE3LjRsLTUuMS01LjEgMi4xNS0yLjE1IDguOCA4LjhaXCIgfSldIH0pKTsgfTtcbnZhciBTaWduT3V0SWNvbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIChqc3hzKFNWRywgeyB2aWV3Qm94OiBcIjAgMCA0OCA0OFwiLCBjaGlsZHJlbjogW2pzeChcInRpdGxlXCIsIHsgY2hpbGRyZW46IFwiU2lnbiBvdXRcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTkgNDJxLTEuMiAwLTIuMS0uOVE2IDQwLjIgNiAzOVY5cTAtMS4yLjktMi4xUTcuOCA2IDkgNmgxNC41NXYzSDl2MzBoMTQuNTV2M1ptMjQuMy05LjI1LTIuMTUtMi4xNSA1LjEtNS4xaC0xNy41di0zaDE3LjRsLTUuMS01LjEgMi4xNS0yLjE1IDguOCA4LjhaXCIgfSldIH0pKTsgfTtcbnZhciBSZXN0YXJ0SWNvbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIChqc3hzKFNWRywgeyBmaWxsOiBcIm5vbmVcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBjaGlsZHJlbjogW2pzeChcInRpdGxlXCIsIHsgY2hpbGRyZW46IFwiUmVzdGFydCBzY3JpcHRcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTggMkM0LjY4NjI5IDIgMiA0LjY4NjI5IDIgOEMyIDEwLjA5NDYgMy4wNzMzMyAxMS45Mzg1IDQuNyAxMy4wMTE4XCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTE0LjAwMDUgNy45OTk4QzE0LjAwMDUgNS44MjA5NSAxMi44MzkxIDMuOTEzMzUgMTEuMTAxNiAyLjg2MjNcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiIH0pLCBqc3goXCJwYXRoXCIsIHsgZDogXCJNMTQuMDAwMyAyLjMzMzVIMTEuMTY3QzEwLjg5MDggMi4zMzM1IDEwLjY2NyAyLjU1NzM1IDEwLjY2NyAyLjgzMzVWNS42NjY4M1wiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk0xLjk5OTY3IDEzLjY2NjVMNC44MzMwMSAxMy42NjY1QzUuMTA5MTUgMTMuNjY2NSA1LjMzMzAxIDEzLjQ0MjYgNS4zMzMwMSAxMy4xNjY1TDUuMzMzMDEgMTAuMzMzMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk0xMCAxMEwxMiAxMkwxMCAxNFwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk0xNC42NjcgMTRMMTIuNjY3IDE0XCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiB9KV0gfSkpOyB9O1xudmFyIFJ1bkljb24gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoanN4cyhTVkcsIHsgY2hpbGRyZW46IFtqc3goXCJ0aXRsZVwiLCB7IGNoaWxkcmVuOiBcIlJ1biBzYW5kYm94XCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk0xMS4wNzkyIDguMTA3OEMxMS4yNzkzIDguMjUwMDcgMTEuMjcgOC41NTAxMiAxMS4wNjE2IDguNjc5ODFMNi4wMjUzNSAxMS44MTM1QzUuNzk2MzggMTEuOTU2IDUuNSAxMS43OTEzIDUuNSAxMS41MjE2TDUuNSA4LjQwNzAzTDUuNSA0LjgwNjYxQzUuNSA0LjUyNzM1IDUuODE1MzcgNC4zNjQ2MyA2LjA0Mjk2IDQuNTI2NDdMMTEuMDc5MiA4LjEwNzhaXCIgfSldIH0pKTsgfTtcbnZhciBCYWNrd2FyZEljb24gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoanN4cyhTVkcsIHsgY2hpbGRyZW46IFtqc3goXCJ0aXRsZVwiLCB7IGNoaWxkcmVuOiBcIkNsaWNrIHRvIGdvIGJhY2tcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTkuNjQ2NDUgMTIuMzUzNkM5Ljg0MTcxIDEyLjU0ODggMTAuMTU4MyAxMi41NDg4IDEwLjM1MzYgMTIuMzUzNkMxMC41NDg4IDEyLjE1ODMgMTAuNTQ4OCAxMS44NDE3IDEwLjM1MzYgMTEuNjQ2NEw5LjY0NjQ1IDEyLjM1MzZaTTEwLjM1MzYgNC4zNTM1NUMxMC41NDg4IDQuMTU4MjkgMTAuNTQ4OCAzLjg0MTcxIDEwLjM1MzYgMy42NDY0NEMxMC4xNTgzIDMuNDUxMTggOS44NDE3MSAzLjQ1MTE4IDkuNjQ2NDUgMy42NDY0NEwxMC4zNTM2IDQuMzUzNTVaTTYuMDcwNzIgNy45MjkyOUw1LjcxNzE2IDcuNTc1NzNMNi4wNzA3MiA3LjkyOTI5Wk0xMC4zNTM2IDExLjY0NjRMNi40MjQyNyA3LjcxNzE2TDUuNzE3MTYgOC40MjQyNkw5LjY0NjQ1IDEyLjM1MzZMMTAuMzUzNiAxMS42NDY0Wk02LjQyNDI3IDguMjgyODRMMTAuMzUzNiA0LjM1MzU1TDkuNjQ2NDUgMy42NDY0NEw1LjcxNzE2IDcuNTc1NzNMNi40MjQyNyA4LjI4Mjg0Wk02LjQyNDI3IDcuNzE3MTZDNi41ODA0OCA3Ljg3MzM3IDYuNTgwNDggOC4xMjY2MyA2LjQyNDI3IDguMjgyODRMNS43MTcxNiA3LjU3NTczQzUuNDgyODUgNy44MTAwNSA1LjQ4Mjg1IDguMTg5OTUgNS43MTcxNiA4LjQyNDI2TDYuNDI0MjcgNy43MTcxNlpcIiB9KV0gfSkpOyB9O1xudmFyIEZvcndhcmRJY29uID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKGpzeHMoU1ZHLCB7IGNoaWxkcmVuOiBbanN4KFwidGl0bGVcIiwgeyBjaGlsZHJlbjogXCJDbGljayB0byBnbyBmb3J3YXJkXCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk02LjM1MzU1IDMuNjQ2NDVDNi4xNTgyOSAzLjQ1MTE4IDUuODQxNzEgMy40NTExOCA1LjY0NjQ1IDMuNjQ2NDVDNS40NTExOCAzLjg0MTcxIDUuNDUxMTggNC4xNTgyOSA1LjY0NjQ1IDQuMzUzNTVMNi4zNTM1NSAzLjY0NjQ1Wk01LjY0NjQ1IDExLjY0NjRDNS40NTExOCAxMS44NDE3IDUuNDUxMTggMTIuMTU4MyA1LjY0NjQ1IDEyLjM1MzZDNS44NDE3MSAxMi41NDg4IDYuMTU4MjkgMTIuNTQ4OCA2LjM1MzU1IDEyLjM1MzZMNS42NDY0NSAxMS42NDY0Wk05LjkyOTI5IDguMDcwNzFMMTAuMjgyOCA4LjQyNDI2TDkuOTI5MjkgOC4wNzA3MVpNNS42NDY0NSA0LjM1MzU1TDkuNTc1NzQgOC4yODI4NEwxMC4yODI4IDcuNTc1NzRMNi4zNTM1NSAzLjY0NjQ1TDUuNjQ2NDUgNC4zNTM1NVpNOS41NzU3NCA3LjcxNzE2TDUuNjQ2NDUgMTEuNjQ2NEw2LjM1MzU1IDEyLjM1MzZMMTAuMjgyOCA4LjQyNDI2TDkuNTc1NzQgNy43MTcxNlpNOS41NzU3NCA4LjI4Mjg0QzkuNDE5NTIgOC4xMjY2MyA5LjQxOTUzIDcuODczMzcgOS41NzU3NCA3LjcxNzE2TDEwLjI4MjggOC40MjQyNkMxMC41MTcyIDguMTg5OTUgMTAuNTE3MiA3LjgxMDA1IDEwLjI4MjggNy41NzU3NEw5LjU3NTc0IDguMjgyODRaXCIgfSldIH0pKTsgfTtcbnZhciBSZWZyZXNoSWNvbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIChqc3hzKFNWRywgeyBjaGlsZHJlbjogW2pzeChcInRpdGxlXCIsIHsgY2hpbGRyZW46IFwiUmVmcmVzaCBwcmV2aWV3XCIgfSksIGpzeChcInBhdGhcIiwgeyBjbGlwUnVsZTogXCJldmVub2RkXCIsIGQ6IFwiTTMuODMzMjUgNy45OTk5MkMzLjgzMzI1IDUuNjk4NjcgNS42OTg1MyAzLjgzMzI1IDcuOTk5MzQgMy44MzMyNUM5LjgxMjQ2IDMuODMzMjUgMTEuMzU2MyA0Ljk5MTk1IDExLjkyODUgNi42MTA5N0MxMS45Mzk2IDYuNjQyNSAxMS45NTM2IDYuNjcyMjEgMTEuOTcgNi42OTk5Mkg4LjgwMDA1QzguNTIzOTEgNi42OTk5MiA4LjMwMDA1IDYuOTIzNzggOC4zMDAwNSA3LjE5OTkyQzguMzAwMDUgNy40NzYwNiA4LjUyMzkxIDcuNjk5OTIgOC44MDAwNSA3LjY5OTkySDEyLjU2NjdDMTIuODk4MSA3LjY5OTkyIDEzLjE2NjcgNy40MzEyOSAxMy4xNjY3IDcuMDk5OTJWMy4zMzMyNUMxMy4xNjY3IDMuMDU3MTEgMTIuOTQyOSAyLjgzMzI1IDEyLjY2NjcgMi44MzMyNUMxMi4zOTA2IDIuODMzMjUgMTIuMTY2NyAzLjA1NzExIDEyLjE2NjcgMy4zMzMyNVY0Ljk0NjA4QzExLjIyNjggMy42NjUyMiA5LjcxMDYgMi44MzMyNSA3Ljk5OTM0IDIuODMzMjVDNS4xNDYxMyAyLjgzMzI1IDIuODMzMjUgNS4xNDY1MSAyLjgzMzI1IDcuOTk5OTJDMi44MzMyNSAxMC44NTMzIDUuMTQ2MTMgMTMuMTY2NiA3Ljk5OTM0IDEzLjE2NjZDOS45MTIxOCAxMy4xNjY2IDExLjU4MTUgMTIuMTI2NiAxMi40NzQgMTAuNTgzNkMxMi42MTIzIDEwLjM0NDYgMTIuNTMwNiAxMC4wMzg3IDEyLjI5MTUgOS45MDA0NEMxMi4wNTI1IDkuNzYyMTggMTEuNzQ2NiA5Ljg0Mzg3IDExLjYwODQgMTAuMDgyOUMxMC44ODczIDExLjMyOTYgOS41NDA3MiAxMi4xNjY2IDcuOTk5MzQgMTIuMTY2NkM1LjY5ODUzIDEyLjE2NjYgMy44MzMyNSAxMC4zMDEyIDMuODMzMjUgNy45OTk5MlpcIiwgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiIH0pXSB9KSk7IH07XG52YXIgQ2xlYW5JY29uID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKGpzeHMoU1ZHLCB7IGZpbGw6IFwibm9uZVwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIGNoaWxkcmVuOiBbanN4KFwidGl0bGVcIiwgeyBjaGlsZHJlbjogXCJDbGVhblwiIH0pLCBqc3goXCJjaXJjbGVcIiwgeyBjeDogXCI3Ljk5OTk4XCIsIGN5OiBcIjguMDAwMDRcIiwgcjogXCI0LjY2NjY3XCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTQuNjY2NjkgNC42NjY2M0wxMS4zMzM0IDExLjMzMzNcIiB9KV0gfSkpOyB9O1xudmFyIEV4cG9ydEljb24gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoanN4cyhTVkcsIHsgZmlsbDogXCJub25lXCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgY2hpbGRyZW46IFtqc3goXCJ0aXRsZVwiLCB7IGNoaWxkcmVuOiBcIk9wZW4gb24gQ29kZVNhbmRib3hcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTYuNjY2NjUgMy4zMzMzN0g0LjMzMzMxQzMuNzgxMDMgMy4zMzMzNyAzLjMzMzMxIDMuNzgxMDkgMy4zMzMzMSA0LjMzMzM3VjExLjY2NjdDMy4zMzMzMSAxMi4yMTkgMy43ODEwMyAxMi42NjY3IDQuMzMzMzEgMTIuNjY2N0gxMS42NjY2QzEyLjIxODkgMTIuNjY2NyAxMi42NjY2IDEyLjIxOSAxMi42NjY2IDExLjY2NjdWOS4zMzMzN1wiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk0xMCAzLjMzMzM3SDEyLjU2NjdDMTIuNjIxOSAzLjMzMzM3IDEyLjY2NjcgMy4zNzgxNSAxMi42NjY3IDMuNDMzMzdWNi4wMDAwNFwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk03LjMzMzMxIDguNjY2NjhMMTIuNTMzMyAzLjQ2NjY3XCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiB9KV0gfSkpOyB9O1xudmFyIERpcmVjdG9yeUljb25PcGVuID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKGpzeHMoU1ZHLCB7IGNoaWxkcmVuOiBbanN4KFwidGl0bGVcIiwgeyBjaGlsZHJlbjogXCJEaXJlY3RvcnlcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTEyLjU1MjYgMTIuNjY2N0gzLjY2Njc1QzMuMjkyMiAxMi42NjY3IDIuOTY1NzUgMTIuNDYwOCAyLjc5NDQyIDEyLjE1NkwzLjgxMDcyIDguMDkwOEMzLjkyMjAxIDcuNjQ1NjMgNC4zMjE5OSA3LjMzMzMzIDQuNzgwODYgNy4zMzMzM0gxMy4zODZDMTQuMDM2NSA3LjMzMzMzIDE0LjUxMzkgNy45NDQ3MiAxNC4zNTYxIDguNTc1ODdMMTMuNTIyOCAxMS45MDkyQzEzLjQxMTUgMTIuMzU0NCAxMy4wMTE1IDEyLjY2NjcgMTIuNTUyNiAxMi42NjY3WlwiLCBmaWxsOiBcImN1cnJlbnRDb2xvclwiIH0pLCBqc3goXCJwYXRoXCIsIHsgZDogXCJNMTMuMzMzNCA2LjYzMzMzVjYuMzMzMzNDMTMuMzMzNCA1Ljc4MTA1IDEyLjg4NTcgNS4zMzMzMyAxMi4zMzM0IDUuMzMzMzNIOC4zMDI4NkM4LjEwNTQzIDUuMzMzMzMgNy45MTI0MiA1LjI3NDkgNy43NDgxNiA1LjE2NTM4TDYuMjUyMDEgNC4xNjc5NUM2LjA4Nzc0IDQuMDU4NDQgNS44OTQ3MyA0IDUuNjk3MzEgNEgzLjY2Njc1QzMuMTE0NDYgNCAyLjY2Njc1IDQuNDQ3NzIgMi42NjY3NSA1TDIuNjY2NzUgMTEuNjY2N0MyLjY2Njc1IDEyLjIxOSAzLjExNDQ2IDEyLjY2NjcgMy42NjY3NSAxMi42NjY3SDEyLjU1MjZDMTMuMDExNSAxMi42NjY3IDEzLjQxMTUgMTIuMzU0NCAxMy41MjI4IDExLjkwOTJMMTQuMzU2MSA4LjU3NTg3QzE0LjUxMzkgNy45NDQ3MiAxNC4wMzY1IDcuMzMzMzMgMTMuMzg2IDcuMzMzMzNINC43ODA4NkM0LjMyMTk5IDcuMzMzMzMgMy45MjIwMSA3LjY0NTYzIDMuODEwNzIgOC4wOTA4TDIuNzUwMDggMTIuMzMzM1wiLCBmaWxsOiBcIm5vbmVcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSldIH0pKTsgfTtcbnZhciBEaXJlY3RvcnlJY29uQ2xvc2VkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKGpzeHMoU1ZHLCB7IGNoaWxkcmVuOiBbanN4KFwidGl0bGVcIiwgeyBjaGlsZHJlbjogXCJEaXJlY3RvcnlcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTEyLjMzMzQgMTIuNjY2N0gzLjY2Njc1QzMuMTE0NDYgMTIuNjY2NyAyLjY2Njc1IDEyLjIxOSAyLjY2Njc1IDExLjY2NjdWNUMyLjY2Njc1IDQuNDQ3NzIgMy4xMTQ0NiA0IDMuNjY2NzUgNEg1LjY5NzMxQzUuODk0NzMgNCA2LjA4Nzc0IDQuMDU4NDQgNi4yNTIwMSA0LjE2Nzk1TDcuNzQ4MTYgNS4xNjUzOEM3LjkxMjQyIDUuMjc0OSA4LjEwNTQzIDUuMzMzMzMgOC4zMDI4NiA1LjMzMzMzSDEyLjMzMzRDMTIuODg1NyA1LjMzMzMzIDEzLjMzMzQgNS43ODEwNSAxMy4zMzM0IDYuMzMzMzNWMTEuNjY2N0MxMy4zMzM0IDEyLjIxOSAxMi44ODU3IDEyLjY2NjcgMTIuMzMzNCAxMi42NjY3WlwiLCBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiB9KV0gfSkpOyB9O1xudmFyIEZpbGVJY29uID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKGpzeHMoU1ZHLCB7IGZpbGw6IFwiY3VycmVudENvbG9yXCIsIGNoaWxkcmVuOiBbanN4KFwidGl0bGVcIiwgeyBjaGlsZHJlbjogXCJGaWxlXCIgfSksIGpzeChcInBhdGhcIiwgeyBjbGlwUnVsZTogXCJldmVub2RkXCIsIGQ6IFwiTTQuNSA0LjMzMzI1QzQuNSA0LjA1NzExIDQuNzIzODYgMy44MzMyNSA1IDMuODMzMjVIOC4xNjY3NVY2LjU2NjU5QzguMTY2NzUgNi44OTc5NSA4LjQzNTM4IDcuMTY2NTggOC43NjY3NSA3LjE2NjU4SDExLjVWMTIuMzMzM0MxMS41IDEyLjYwOTQgMTEuMjc2MSAxMi44MzMzIDExIDEyLjgzMzNINUM0LjcyMzg2IDEyLjgzMzMgNC41IDEyLjYwOTQgNC41IDEyLjMzMzNWNC4zMzMyNVpNMTIuNSA2LjY3NTY4QzEyLjUwMDEgNi42NzI2NSAxMi41MDAxIDYuNjY5NjIgMTIuNTAwMSA2LjY2NjU4QzEyLjUwMDEgNi42NjM1NSAxMi41MDAxIDYuNjYwNTIgMTIuNSA2LjY1NzQ5VjYuNDE0MTNDMTIuNSA2LjAxNjMxIDEyLjM0MiA1LjYzNDc4IDEyLjA2MDcgNS4zNTM0N0w5Ljk3OTc4IDMuMjcyNTlDOS42OTg0OCAyLjk5MTI5IDkuMzE2OTQgMi44MzMyNSA4LjkxOTEyIDIuODMzMjVIOC42NjY3NUg1QzQuMTcxNTcgMi44MzMyNSAzLjUgMy41MDQ4MyAzLjUgNC4zMzMyNVYxMi4zMzMzQzMuNSAxMy4xNjE3IDQuMTcxNTcgMTMuODMzMyA1IDEzLjgzMzNIMTFDMTEuODI4NCAxMy44MzMzIDEyLjUgMTMuMTYxNyAxMi41IDEyLjMzMzNWNi42NzU2OFpNOS4xNjY3NSAzLjg5ODg4QzkuMjA1MTggMy45MjA3OCA5LjI0MDg1IDMuOTQ3ODcgOS4yNzI2NyAzLjk3OTdMMTEuMzUzNiA2LjA2MDU4QzExLjM4NTQgNi4wOTI0MyAxMS40MTI1IDYuMTI4MTMgMTEuNDM0NCA2LjE2NjU4SDkuMTY2NzVWMy44OTg4OFpcIiwgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiIH0pXSB9KSk7IH07XG52YXIgQ2xvc2VJY29uID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKGpzeHMoU1ZHLCB7IHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgY2hpbGRyZW46IFtqc3goXCJ0aXRsZVwiLCB7IGNoaWxkcmVuOiBcIkNsb3NlIGZpbGVcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTEyIDRMNCAxMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk00IDRMMTIgMTJcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiIH0pXSB9KSk7IH07XG52YXIgQ29uc29sZUljb24gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoanN4cyhTVkcsIHsgY2hpbGRyZW46IFtqc3goXCJ0aXRsZVwiLCB7IGNoaWxkcmVuOiBcIk9wZW4gYnJvd3NlciBjb25zb2xlXCIgfSksIGpzeChcInBhdGhcIiwgeyBkOiBcIk01LjY1ODcxIDMuNjIwMzdDNS40NDkwNSAzLjQ0MDY2IDUuMTMzNCAzLjQ2NDk0IDQuOTUzNjggMy42NzQ2QzQuNzczOTcgMy44ODQyNyA0Ljc5ODI1IDQuMTk5OTIgNS4wMDc5MiA0LjM3OTYzTDUuNjU4NzEgMy42MjAzN1pNNS4wMDc5MiAxMS42MjA0QzQuNzk4MjUgMTEuODAwMSA0Ljc3Mzk3IDEyLjExNTcgNC45NTM2OCAxMi4zMjU0QzUuMTMzNCAxMi41MzUxIDUuNDQ5MDUgMTIuNTU5MyA1LjY1ODcxIDEyLjM3OTZMNS4wMDc5MiAxMS42MjA0Wk05LjkxMTQgNy45MjQwN0wxMC4yMzY4IDcuNTQ0NDVMOS45MTE0IDcuOTI0MDdaTTUuMDA3OTIgNC4zNzk2M0w5LjU4NiA4LjMwMzdMMTAuMjM2OCA3LjU0NDQ1TDUuNjU4NzEgMy42MjAzN0w1LjAwNzkyIDQuMzc5NjNaTTkuNTg2IDcuNjk2M0w1LjAwNzkyIDExLjYyMDRMNS42NTg3MSAxMi4zNzk2TDEwLjIzNjggOC40NTU1NUw5LjU4NiA3LjY5NjNaTTkuNTg2IDguMzAzN0M5LjM5OTc2IDguMTQ0MDcgOS4zOTk3NiA3Ljg1NTk0IDkuNTg2IDcuNjk2M0wxMC4yMzY4IDguNDU1NTVDMTAuNTE2MiA4LjIxNjEgMTAuNTE2MiA3Ljc4MzkgMTAuMjM2OCA3LjU0NDQ1TDkuNTg2IDguMzAzN1pcIiB9KSwganN4KFwicGF0aFwiLCB7IGQ6IFwiTTEwIDExLjVDOS43MjM4NiAxMS41IDkuNSAxMS43MjM5IDkuNSAxMkM5LjUgMTIuMjc2MSA5LjcyMzg2IDEyLjUgMTAgMTIuNVYxMS41Wk0xNC42NjY3IDEyLjVDMTQuOTQyOCAxMi41IDE1LjE2NjcgMTIuMjc2MSAxNS4xNjY3IDEyQzE1LjE2NjcgMTEuNzIzOSAxNC45NDI4IDExLjUgMTQuNjY2NyAxMS41VjEyLjVaTTEwIDEyLjVIMTQuNjY2N1YxMS41SDEwVjEyLjVaXCIgfSldIH0pKTsgfTtcblxudmFyIF9hJGE7XG4vKipcbiAqIEBjYXRlZ29yeSBUaGVtZVxuICovXG52YXIgZGVmYXVsdExpZ2h0ID0ge1xuICAgIGNvbG9yczoge1xuICAgICAgICBzdXJmYWNlMTogXCIjZmZmZmZmXCIsXG4gICAgICAgIHN1cmZhY2UyOiBcIiNFRkVGRUZcIixcbiAgICAgICAgc3VyZmFjZTM6IFwiI0YzRjNGM1wiLFxuICAgICAgICBkaXNhYmxlZDogXCIjQzVDNUM1XCIsXG4gICAgICAgIGJhc2U6IFwiIzMyMzIzMlwiLFxuICAgICAgICBjbGlja2FibGU6IFwiIzgwODA4MFwiLFxuICAgICAgICBob3ZlcjogXCIjNEQ0RDREXCIsXG4gICAgICAgIGFjY2VudDogXCIjMzk3M0UwXCIsXG4gICAgICAgIGVycm9yOiBcIiNFQTMzMjNcIixcbiAgICAgICAgZXJyb3JTdXJmYWNlOiBcIiNGQ0YxRjBcIixcbiAgICAgICAgd2FybmluZzogXCIjNkE0NTE2XCIsXG4gICAgICAgIHdhcm5pbmdTdXJmYWNlOiBcIiNGRUYyQzBcIixcbiAgICB9LFxuICAgIHN5bnRheDoge1xuICAgICAgICBwbGFpbjogXCIjMTUxNTE1XCIsXG4gICAgICAgIGNvbW1lbnQ6IHsgY29sb3I6IFwiIzk5OVwiLCBmb250U3R5bGU6IFwiaXRhbGljXCIgfSxcbiAgICAgICAga2V5d29yZDogXCIjN0M1QUUzXCIsXG4gICAgICAgIHRhZzogXCIjMDk3MUYxXCIsXG4gICAgICAgIHB1bmN0dWF0aW9uOiBcIiMzQjNCM0JcIixcbiAgICAgICAgZGVmaW5pdGlvbjogXCIjODVBNjAwXCIsXG4gICAgICAgIHByb3BlcnR5OiBcIiMzQjNCM0JcIixcbiAgICAgICAgc3RhdGljOiBcIiMzQjNCM0JcIixcbiAgICAgICAgc3RyaW5nOiBcIiMyRTZCRDBcIixcbiAgICB9LFxuICAgIGZvbnQ6IHtcbiAgICAgICAgYm9keTogJy1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJTZWdvZSBVSVwiLCBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYsIFwiQXBwbGUgQ29sb3IgRW1vamlcIiwgXCJTZWdvZSBVSSBFbW9qaVwiLCBcIlNlZ29lIFVJIFN5bWJvbFwiJyxcbiAgICAgICAgbW9ubzogJ1wiRmlyYSBNb25vXCIsIFwiRGVqYVZ1IFNhbnMgTW9ub1wiLCBNZW5sbywgQ29uc29sYXMsIFwiTGliZXJhdGlvbiBNb25vXCIsIE1vbmFjbywgXCJMdWNpZGEgQ29uc29sZVwiLCBtb25vc3BhY2UnLFxuICAgICAgICBzaXplOiBcIjEzcHhcIixcbiAgICAgICAgbGluZUhlaWdodDogXCIyMHB4XCIsXG4gICAgfSxcbn07XG4vKipcbiAqIEBjYXRlZ29yeSBUaGVtZVxuICovXG52YXIgZGVmYXVsdERhcmsgPSB7XG4gICAgY29sb3JzOiB7XG4gICAgICAgIHN1cmZhY2UxOiBcIiMxNTE1MTVcIixcbiAgICAgICAgc3VyZmFjZTI6IFwiIzI1MjUyNVwiLFxuICAgICAgICBzdXJmYWNlMzogXCIjMkYyRjJGXCIsXG4gICAgICAgIGRpc2FibGVkOiBcIiM0RDRENERcIixcbiAgICAgICAgYmFzZTogXCIjODA4MDgwXCIsXG4gICAgICAgIGNsaWNrYWJsZTogXCIjOTk5OTk5XCIsXG4gICAgICAgIGhvdmVyOiBcIiNDNUM1QzVcIixcbiAgICAgICAgYWNjZW50OiBcIiNFNUU1RTVcIixcbiAgICAgICAgZXJyb3I6IFwiI0ZGQjRBNlwiLFxuICAgICAgICBlcnJvclN1cmZhY2U6IFwiIzY5MDAwMFwiLFxuICAgICAgICB3YXJuaW5nOiBcIiNFN0M0MDBcIixcbiAgICAgICAgd2FybmluZ1N1cmZhY2U6IFwiIzNBMzAwMFwiLFxuICAgIH0sXG4gICAgc3ludGF4OiB7XG4gICAgICAgIHBsYWluOiBcIiNGRkZGRkZcIixcbiAgICAgICAgY29tbWVudDogeyBjb2xvcjogXCIjNzU3NTc1XCIsIGZvbnRTdHlsZTogXCJpdGFsaWNcIiB9LFxuICAgICAgICBrZXl3b3JkOiBcIiM3N0I3RDdcIixcbiAgICAgICAgdGFnOiBcIiNERkFCNUNcIixcbiAgICAgICAgcHVuY3R1YXRpb246IFwiI2ZmZmZmZlwiLFxuICAgICAgICBkZWZpbml0aW9uOiBcIiM4NkQ5Q0FcIixcbiAgICAgICAgcHJvcGVydHk6IFwiIzc3QjdEN1wiLFxuICAgICAgICBzdGF0aWM6IFwiI0M2NDY0MFwiLFxuICAgICAgICBzdHJpbmc6IFwiIzk3N0NEQ1wiLFxuICAgIH0sXG4gICAgZm9udDoge1xuICAgICAgICBib2R5OiAnLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCBcIlNlZ29lIFVJXCIsIFJvYm90bywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZiwgXCJBcHBsZSBDb2xvciBFbW9qaVwiLCBcIlNlZ29lIFVJIEVtb2ppXCIsIFwiU2Vnb2UgVUkgU3ltYm9sXCInLFxuICAgICAgICBtb25vOiAnXCJGaXJhIE1vbm9cIiwgXCJEZWphVnUgU2FucyBNb25vXCIsIE1lbmxvLCBDb25zb2xhcywgXCJMaWJlcmF0aW9uIE1vbm9cIiwgTW9uYWNvLCBcIkx1Y2lkYSBDb25zb2xlXCIsIG1vbm9zcGFjZScsXG4gICAgICAgIHNpemU6IFwiMTNweFwiLFxuICAgICAgICBsaW5lSGVpZ2h0OiBcIjIwcHhcIixcbiAgICB9LFxufTtcbi8qKlxuICogQGNhdGVnb3J5IFRoZW1lXG4gKi9cbnZhciBTQU5EUEFDS19USEVNRVMgPSB7XG4gICAgbGlnaHQ6IGRlZmF1bHRMaWdodCxcbiAgICBkYXJrOiBkZWZhdWx0RGFyayxcbiAgICBhdXRvOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgID8gKChfYSRhID0gd2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93Lm1hdGNoTWVkaWEpID09PSBudWxsIHx8IF9hJGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hJGEuY2FsbCh3aW5kb3csIFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKS5tYXRjaGVzKVxuICAgICAgICAgICAgPyBkZWZhdWx0RGFya1xuICAgICAgICAgICAgOiBkZWZhdWx0TGlnaHRcbiAgICAgICAgOiBkZWZhdWx0TGlnaHQsXG59O1xuXG52YXIgZ2V0RmlsZU5hbWUgPSBmdW5jdGlvbiAoZmlsZVBhdGgpIHtcbiAgICB2YXIgbGFzdEluZGV4T2ZTbGFzaCA9IGZpbGVQYXRoLmxhc3RJbmRleE9mKFwiL1wiKTtcbiAgICByZXR1cm4gZmlsZVBhdGguc2xpY2UobGFzdEluZGV4T2ZTbGFzaCArIDEpO1xufTtcbnZhciBjYWxjdWxhdGVOZWFyZXN0VW5pcXVlUGF0aCA9IGZ1bmN0aW9uIChjdXJyZW50UGF0aCwgb3RoZXJQYXRocykge1xuICAgIHZhciBjdXJyZW50UGF0aFBhcnRzID0gKGN1cnJlbnRQYXRoWzBdID09PSBcIi9cIiA/IGN1cnJlbnRQYXRoLnNsaWNlKDEpIDogY3VycmVudFBhdGgpLnNwbGl0KFwiL1wiKTtcbiAgICB2YXIgcmVzdWx0UGF0aFBhcnRzID0gW107XG4gICAgLy8gSWYgcGF0aCBpcyBvbiByb290LCB0aGVyZSBhcmUgbm8gcGFydHMgdG8gbG9vcCB0aHJvdWdoXG4gICAgaWYgKGN1cnJlbnRQYXRoUGFydHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJlc3VsdFBhdGhQYXJ0cy51bnNoaWZ0KGN1cnJlbnRQYXRoUGFydHNbMF0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gTG9vcCBvdmVyIGFsbCBvdGhlciBwYXRocyB0byBmaW5kIGEgdW5pcXVlIHBhdGhcbiAgICAgICAgZm9yICh2YXIgZmlsZUluZGV4ID0gMDsgZmlsZUluZGV4IDwgb3RoZXJQYXRocy5sZW5ndGg7IGZpbGVJbmRleCsrKSB7XG4gICAgICAgICAgICAvLyBXZSBnbyBvdmVyIGVhY2ggcGFydCBvZiB0aGUgcGF0aCBmcm9tIGVuZCB0byBzdGFydCB0byBmaW5kIHRoZSBjbG9zZXN0IHVuaXF1ZSBkaXJlY3RvcnlcbiAgICAgICAgICAgIHZhciBvdGhlclBhdGhQYXJ0cyA9IG90aGVyUGF0aHNbZmlsZUluZGV4XS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBmb3IgKHZhciBwYXJ0c0Zyb21FbmQgPSAxOyBwYXJ0c0Zyb21FbmQgPD0gY3VycmVudFBhdGhQYXJ0cy5sZW5ndGg7IHBhcnRzRnJvbUVuZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQYXRoUGFydCA9IGN1cnJlbnRQYXRoUGFydHNbY3VycmVudFBhdGhQYXJ0cy5sZW5ndGggLSBwYXJ0c0Zyb21FbmRdO1xuICAgICAgICAgICAgICAgIHZhciBvdGhlclBhdGhQYXJ0ID0gb3RoZXJQYXRoUGFydHNbb3RoZXJQYXRoUGFydHMubGVuZ3RoIC0gcGFydHNGcm9tRW5kXTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIHBhcnQgaGFzbid0IGJlZW4gYWRkZWQgdG8gdGhlIHJlc3VsdCBwYXRoLCB3ZSBhZGQgaXQgaGVyZVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRQYXRoUGFydHMubGVuZ3RoIDwgcGFydHNGcm9tRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFBhdGhQYXJ0cy51bnNoaWZ0KGN1cnJlbnRQYXRoUGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgcGFydCBpcyBkaWZmZXJlbnQgYmV0d2VlbiB0aGUgY3VycmVudCBwYXRoIGFuZCBvdGhlciBwYXRoIHdlIGJyZWFrXG4gICAgICAgICAgICAgICAgLy8gYXMgZnJvbSB0aGlzIG1vbWVudCB0aGUgY3VycmVudCBwYXRoIGlzIHVuaXF1ZSBjb21wYXJlZCB0byB0aGlzIG90aGVyIHBhdGhcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhdGhQYXJ0ICE9PSBvdGhlclBhdGhQYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBBZGQgYC4uYCBpZiB0aGlzIGlzIGEgcmVsYXRpdmUgcGF0aFxuICAgIGlmIChyZXN1bHRQYXRoUGFydHMubGVuZ3RoIDwgY3VycmVudFBhdGhQYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0UGF0aFBhcnRzLnVuc2hpZnQoXCIuLlwiKTtcbiAgICB9XG4gICAgLy8gSm9pbiB0aGUgcmVzdWx0IHBhdGggcGFydHMgaW50byBhIHBhdGggc3RyaW5nXG4gICAgcmV0dXJuIHJlc3VsdFBhdGhQYXJ0cy5qb2luKFwiL1wiKTtcbn07XG4vLyBDaGVja3MgYm90aCByZ2IgYW5kIGhleCBjb2xvcnMgZm9yIGNvbnRyYXN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGNvbG9yIGlzIGluIHRoZSBkYXJrIHNwZWN0cnVtXG52YXIgaXNEYXJrQ29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICB2YXIgciA9IDA7XG4gICAgdmFyIGcgPSAwO1xuICAgIHZhciBiID0gMDtcbiAgICBpZiAoY29sb3Iuc3RhcnRzV2l0aChcIiNcIikpIHtcbiAgICAgICAgaWYgKGNvbG9yLmxlbmd0aCA8IDcpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBwYXJzZUludChjb2xvci5zdWJzdHIoMSwgMiksIDE2KTtcbiAgICAgICAgZyA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cigzLCAyKSwgMTYpO1xuICAgICAgICBiID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyKDUsIDIpLCAxNik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgcmdiVmFsdWVzID0gY29sb3JcbiAgICAgICAgICAgIC5yZXBsYWNlKFwicmdiKFwiLCBcIlwiKVxuICAgICAgICAgICAgLnJlcGxhY2UoXCJyZ2JhKFwiLCBcIlwiKVxuICAgICAgICAgICAgLnJlcGxhY2UoXCIpXCIsIFwiXCIpXG4gICAgICAgICAgICAuc3BsaXQoXCIsXCIpO1xuICAgICAgICBpZiAocmdiVmFsdWVzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBwYXJzZUludChyZ2JWYWx1ZXNbMF0sIDEwKTtcbiAgICAgICAgZyA9IHBhcnNlSW50KHJnYlZhbHVlc1sxXSwgMTApO1xuICAgICAgICBiID0gcGFyc2VJbnQocmdiVmFsdWVzWzJdLCAxMCk7XG4gICAgfVxuICAgIHZhciB5aXEgPSAociAqIDI5OSArIGcgKiA1ODcgKyBiICogMTE0KSAvIDEwMDA7XG4gICAgcmV0dXJuIHlpcSA8IDEyODtcbn07XG4vLyBNaW5pbWFsIGN1aWQtbGlrZSBpZFxudmFyIGxhc3RDb3VudCA9IDA7XG52YXIgZ2VuZXJhdGVSYW5kb21JZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmFuZG9tID0gKyhEYXRlLm5vdygpLnRvU3RyaW5nKDEwKS5zdWJzdHIoMCwgNCkgKyBsYXN0Q291bnQrKyk7XG4gICAgcmV0dXJuIHJhbmRvbS50b1N0cmluZygxNik7XG59O1xuXG52YXIgdG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcIlwiOyB9O1xudmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoeyB0b1N0cmluZzogdG9TdHJpbmcgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0b1N0cmluZywgZGVmaW5lUHJvcGVydHkpO1xuXG52YXIgX2EkOTtcbi8qKlxuICogQGNhdGVnb3J5IFRoZW1lXG4gKi9cbnZhciBUSEVNRV9QUkVGSVggPSBcInNwXCI7XG4vKipcbiAqIEBjYXRlZ29yeSBUaGVtZVxuICovXG4vLyBwcmV0dGllci1pZ25vcmVcbnZhciBjcmVhdGVUaGVtZSA9IChfYSQ5ID0gY3JlYXRlU3RpdGNoZXMoe1xuICAgICAgICBwcmVmaXg6IFRIRU1FX1BSRUZJWCxcbiAgICB9KSwgX2EkOS5jcmVhdGVUaGVtZSksIGNzcyA9IF9hJDkuY3NzLCBnZXRDc3NUZXh0ID0gX2EkOS5nZXRDc3NUZXh0LCBrZXlmcmFtZXMgPSBfYSQ5LmtleWZyYW1lcztcbnZhciBkZWZhdWx0VmFyaWFibGVzID0ge1xuICAgIHNwYWNlOiBuZXcgQXJyYXkoMTEpLmZpbGwoXCIgXCIpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBfLCBpbmRleCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYWNjKSwgKF9hID0ge30sIF9hW2luZGV4ICsgMV0gPSBcIlwiLmNvbmNhdCgoaW5kZXggKyAxKSAqIDQsIFwicHhcIiksIF9hKSk7XG4gICAgfSwge30pLFxuICAgIGJvcmRlcjogeyByYWRpdXM6IFwiNHB4XCIgfSxcbiAgICBsYXlvdXQ6IHsgaGVpZ2h0OiBcIjMwMHB4XCIsIGhlYWRlckhlaWdodDogXCI0MHB4XCIgfSxcbiAgICB0cmFuc2l0aW9uczogeyBkZWZhdWx0OiBcIjE1MG1zIGVhc2VcIiB9LFxuICAgIHpJbmRpY2VzOiB7XG4gICAgICAgIGJhc2U6IFwiMVwiLFxuICAgICAgICBvdmVybGF5OiBcIjJcIixcbiAgICAgICAgdG9wOiBcIjNcIixcbiAgICB9LFxufTtcbi8qKlxuICogQGNhdGVnb3J5IFRoZW1lXG4gKi9cbnZhciBzdGFuZGFyZGl6ZVN0aXRjaGVzVGhlbWUgPSBmdW5jdGlvbiAodGhlbWUpIHtcbiAgICAvLyBGbGF0IHZhbHVlc1xuICAgIHZhciBzeW50YXhFbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhlbWUuc3ludGF4KTtcbiAgICB2YXIgc3ludGF4ID0gc3ludGF4RW50cmllcy5yZWR1Y2UoZnVuY3Rpb24gKHRva2VuQWNjLCBfYSkge1xuICAgICAgICB2YXIgX2I7XG4gICAgICAgIHZhciB0b2tlbk5hbWUgPSBfYVswXSwgdG9rZW5WYWx1ZSA9IF9hWzFdO1xuICAgICAgICAvLyBTaW5nbGUgcHJvcGVydHlcbiAgICAgICAgdmFyIG5ld1ZhbHVlcyA9IChfYiA9IHt9LCBfYltcImNvbG9yLVwiLmNvbmNhdCh0b2tlbk5hbWUpXSA9IHRva2VuVmFsdWUsIF9iKTtcbiAgICAgICAgLy8gTXVsdGlwbGVzIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKHR5cGVvZiB0b2tlblZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZXMgPSBPYmplY3QuZW50cmllcyh0b2tlblZhbHVlKS5yZWR1Y2UoZnVuY3Rpb24gKHZhbHVlQWNjLCBfYSkge1xuICAgICAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGVQcm9wID0gX2FbMF0sIHN0eWxlVmFsdWUgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHZhbHVlQWNjKSwgKF9iID0ge30sIF9iW1wiXCIuY29uY2F0KHN0eWxlUHJvcCwgXCItXCIpLmNvbmNhdCh0b2tlbk5hbWUpXSA9IHN0eWxlVmFsdWUsIF9iKSk7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCB0b2tlbkFjYyksIG5ld1ZhbHVlcyk7XG4gICAgfSwge30pO1xuICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGVmYXVsdFZhcmlhYmxlcyksIHsgY29sb3JzOiB0aGVtZS5jb2xvcnMsIGZvbnQ6IHRoZW1lLmZvbnQsIHN5bnRheDogc3ludGF4IH0pO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IFRoZW1lXG4gKi9cbnZhciBzdGFuZGFyZGl6ZVRoZW1lID0gZnVuY3Rpb24gKGlucHV0VGhlbWUpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgIGlmIChpbnB1dFRoZW1lID09PSB2b2lkIDApIHsgaW5wdXRUaGVtZSA9IFwibGlnaHRcIjsgfVxuICAgIHZhciBkZWZhdWx0TGlnaHRUaGVtZUtleSA9IFwiZGVmYXVsdFwiO1xuICAgIC8qKlxuICAgICAqIFNldCBhIGxvY2FsIHRoZW1lOiBkYXJrIG9yIGxpZ2h0XG4gICAgICovXG4gICAgaWYgKHR5cGVvZiBpbnB1dFRoZW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHZhciBwcmVkZWZpbmVkVGhlbWUgPSBTQU5EUEFDS19USEVNRVNbaW5wdXRUaGVtZV07XG4gICAgICAgIGlmICghcHJlZGVmaW5lZFRoZW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJbc2FuZHBhY2stcmVhY3RdOiBpbnZhbGlkIHRoZW1lICdcIi5jb25jYXQoaW5wdXRUaGVtZSwgXCInIHByb3ZpZGVkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRoZW1lOiBwcmVkZWZpbmVkVGhlbWUsXG4gICAgICAgICAgICBpZDogaW5wdXRUaGVtZSxcbiAgICAgICAgICAgIG1vZGU6IGlzRGFya0NvbG9yKHByZWRlZmluZWRUaGVtZS5jb2xvcnMuc3VyZmFjZTEpID8gXCJkYXJrXCIgOiBcImxpZ2h0XCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZ1bGxmaWxsIHRoZSBjb2xvcnMga2V5LCBpbiBjYXNlIGl0J3MgbWlzc2luZyBhbnkga2V5XG4gICAgICovXG4gICAgdmFyIG1vZGUgPSBpc0RhcmtDb2xvcigoX2IgPSAoX2EgPSBpbnB1dFRoZW1lID09PSBudWxsIHx8IGlucHV0VGhlbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0VGhlbWUuY29sb3JzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3VyZmFjZTEpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRlZmF1bHRMaWdodC5jb2xvcnMuc3VyZmFjZTEpXG4gICAgICAgID8gXCJkYXJrXCJcbiAgICAgICAgOiBcImxpZ2h0XCI7XG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCB3aGF0J3MgdGhlIHByb3Blcmx5IGRlZmF1bHQgY29sb3JzIGl0IHNob3VsZCBiZVxuICAgICAqIGVycm9yLCB3YXJuaW5nIGFuZCBzdWNjZXNzIGNvbG9ycyBoYXZlIGRpZmZlcmVudCB2YWx1ZXMgYmV0d2VlbiBkYXJrIGFuZCBsaWdodFxuICAgICAqL1xuICAgIHZhciBiYXNlVGhlbWUgPSBtb2RlID09PSBcImRhcmtcIiA/IGRlZmF1bHREYXJrIDogZGVmYXVsdExpZ2h0O1xuICAgIHZhciBjb2xvcnNCeU1vZGUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYmFzZVRoZW1lLmNvbG9ycyksICgoX2MgPSBpbnB1dFRoZW1lID09PSBudWxsIHx8IGlucHV0VGhlbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0VGhlbWUuY29sb3JzKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB7fSkpO1xuICAgIHZhciBzeW50YXhCeU1vZGUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYmFzZVRoZW1lLnN5bnRheCksICgoX2QgPSBpbnB1dFRoZW1lID09PSBudWxsIHx8IGlucHV0VGhlbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0VGhlbWUuc3ludGF4KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB7fSkpO1xuICAgIHZhciBmb250QnlNb2RlID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGJhc2VUaGVtZS5mb250KSwgKChfZSA9IGlucHV0VGhlbWUgPT09IG51bGwgfHwgaW5wdXRUaGVtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5wdXRUaGVtZS5mb250KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiB7fSkpO1xuICAgIHZhciB0aGVtZSA9IHtcbiAgICAgICAgY29sb3JzOiBjb2xvcnNCeU1vZGUsXG4gICAgICAgIHN5bnRheDogc3ludGF4QnlNb2RlLFxuICAgICAgICBmb250OiBmb250QnlNb2RlLFxuICAgIH07XG4gICAgdmFyIGlkID0gaW5wdXRUaGVtZVxuICAgICAgICA/IHNpbXBsZUhhc2hGdW5jdGlvbihKU09OLnN0cmluZ2lmeSh0aGVtZSkpXG4gICAgICAgIDogZGVmYXVsdExpZ2h0VGhlbWVLZXk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGhlbWU6IHRoZW1lLFxuICAgICAgICBpZDogXCJzcC1cIi5jb25jYXQoaWQpLFxuICAgICAgICBtb2RlOiBtb2RlLFxuICAgIH07XG59O1xudmFyIHNpbXBsZUhhc2hGdW5jdGlvbiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICB2YXIgaGFzaCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBoYXNoICY9IGhhc2gpIHtcbiAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHN0ci5jaGFyQ29kZUF0KGkrKyk7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLmFicyhoYXNoKTtcbn07XG4vKipcbiAqIFRoZSBmYWtlIGBjc3NgIGZ1bmN0aW9uIHVzZWQgdG8gbWF0Y2ggdGhlIHJlYWwgYGNzc2AgZnVuY3Rpb24gdXNhZ2VcbiAqIFdlIHVzZSB0aGlzIGZvciB0aGUgdW5zdHlsZWQgYnVuZGxlIHdoaWNoIGRvIG5vdCBuZWVkIHJlYWwgY2xhc3MgbmFtZXNcbiAqIGBjc3NgIGlzIGEgZmFjdG9yeSB3aGljaCByZXR1cm4gYSBjbGFzc05hbWUgZ2VuZXJhdG9yLCBidXQgYWxzbyBpdCBiZSB1c2VkIGluIHNjZW5hcmlvcyB3aGljaCBgdG9TdHJpbmdgIHdpbGwgYmUgaW52b2tlZFxuICogc28gd2UgYWxzbyBuZWVkIHRvIGFkZCB0aGUgYHRvU3RyaW5nYCBtZXRob2QgdG8gaXQuXG4gKi9cbnZhciBmYWtlQ3NzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJcIjsgfTtcbmZha2VDc3MudG9TdHJpbmcgPSBmYWtlQ3NzO1xuXG4vKipcbiAqIDxDbGFzc05hbWVzQ29udGV4dCBjbGFzc2VzPXt7XG4gKiAgICAgXCJzcC13cmFwcGVyXCI6IFwiY3VzdG9tLXdyYXBwZXJcIixcbiAqICAgICBcInNwLWxheW91dFwiOiBcImN1c3RvbS1sYXlvdXRcIixcbiAqICAgICBcInNwLXRhYi1idXR0b25cIjogXCJjdXN0b20tdGFiXCIsXG4gKiAgfX0+XG4gKiAgLi4uXG4gKiA8L0NsYXNzTmFtZXNDb250ZXh0PlxuICovXG52YXIgQ2xhc3NOYW1lc0NvbnRleHQgPSBjcmVhdGVDb250ZXh0KHt9KTtcbnZhciBDbGFzc05hbWVzUHJvdmlkZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBfYS5jaGlsZHJlbiwgY2xhc3NlcyA9IF9hLmNsYXNzZXM7XG4gICAgcmV0dXJuIChqc3goQ2xhc3NOYW1lc0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGNsYXNzZXMgfHwge30sIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xudmFyIHVzZUNsYXNzTmFtZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbnRleHRDbGFzc05hbWVzID0gdXNlQ29udGV4dChDbGFzc05hbWVzQ29udGV4dCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHNhbmRwYWNrQ2xhc3NOYW1lcyhjdXN0b21DbGFzc05hbWUsIFxuICAgIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbiAgICBhbGxDbGFzc05hbWVzKSB7XG4gICAgICAgIGlmIChhbGxDbGFzc05hbWVzID09PSB2b2lkIDApIHsgYWxsQ2xhc3NOYW1lcyA9IFtdOyB9XG4gICAgICAgIHZhciBjdXN0b20gPSBcIlwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLVwiKS5jb25jYXQoY3VzdG9tQ2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuIGpvaW5DbGFzc05hbWVzLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBhbGxDbGFzc05hbWVzLCBmYWxzZSksIFtjdXN0b20sIGNvbnRleHRDbGFzc05hbWVzW2N1c3RvbV1dLCBmYWxzZSkpO1xuICAgIH07XG59O1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnZhciBqb2luQ2xhc3NOYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3MuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xufTtcblxudmFyIHdyYXBwZXJDbGFzc05hbWUkMyA9IGNzcyh7XG4gICAgYWxsOiBcImluaXRpYWxcIixcbiAgICBmb250U2l6ZTogXCIkZm9udCRzaXplXCIsXG4gICAgZm9udEZhbWlseTogXCIkZm9udCRib2R5XCIsXG4gICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgdGV4dFJlbmRlcmluZzogXCJvcHRpbWl6ZUxlZ2liaWxpdHlcIixcbiAgICBXZWJraXRUYXBIaWdobGlnaHRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgIFdlYmtpdEZvbnRTbW9vdGhpbmc6IFwic3VicGl4ZWwtYW50aWFsaWFzZWRcIixcbiAgICB2YXJpYW50czoge1xuICAgICAgICB2YXJpYW50OiB7XG4gICAgICAgICAgICBkYXJrOiB7IGNvbG9yU2NoZW1lOiBcImRhcmtcIiB9LFxuICAgICAgICAgICAgbGlnaHQ6IHsgY29sb3JTY2hlbWU6IFwibGlnaHRcIiB9LFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgXCJAbWVkaWEgc2NyZWVuIGFuZCAobWluLXJlc29sdXRpb246IDJkcHB4KVwiOiB7XG4gICAgICAgIFdlYmtpdEZvbnRTbW9vdGhpbmc6IFwiYW50aWFsaWFzZWRcIixcbiAgICAgICAgTW96T3N4Rm9udFNtb290aGluZzogXCJncmF5c2NhbGVcIixcbiAgICB9LFxuICAgIFwiKlwiOiB7IGJveFNpemluZzogXCJib3JkZXItYm94XCIgfSxcbiAgICBcIi5zcC13cmFwcGVyOmZvY3VzXCI6IHsgb3V0bGluZTogXCIwXCIgfSxcbn0pO1xudmFyIFNhbmRwYWNrVGhlbWVDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7XG4gICAgdGhlbWU6IGRlZmF1bHRMaWdodCxcbiAgICBpZDogXCJsaWdodFwiLFxuICAgIG1vZGU6IFwibGlnaHRcIixcbn0pO1xuLyoqXG4gKiBAY2F0ZWdvcnkgVGhlbWVcbiAqL1xudmFyIFNhbmRwYWNrVGhlbWVQcm92aWRlciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciB0aGVtZUZyb21Qcm9wcyA9IF9hLnRoZW1lLCBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBjbGFzc05hbWUgPSBfYS5jbGFzc05hbWUsIHByb3BzID0gX19yZXN0KF9hLCBbXCJ0aGVtZVwiLCBcImNoaWxkcmVuXCIsIFwiY2xhc3NOYW1lXCJdKTtcbiAgICB2YXIgX2IgPSBSZWFjdC51c2VTdGF0ZSh0aGVtZUZyb21Qcm9wcyksIHByZWZmZXJlZFRoZW1lID0gX2JbMF0sIHNldFByZWZlcnJlZFRoZW1lID0gX2JbMV07XG4gICAgdmFyIF9jID0gc3RhbmRhcmRpemVUaGVtZShwcmVmZmVyZWRUaGVtZSksIHRoZW1lID0gX2MudGhlbWUsIGlkID0gX2MuaWQsIG1vZGUgPSBfYy5tb2RlO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHZhciB0aGVtZUNsYXNzTmFtZSA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlVGhlbWUoaWQsIHN0YW5kYXJkaXplU3RpdGNoZXNUaGVtZSh0aGVtZSkpO1xuICAgIH0sIFt0aGVtZSwgaWRdKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhlbWVGcm9tUHJvcHMgIT09IFwiYXV0b1wiKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgY29sb3JTY2hlbWVDaGFuZ2UgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gX2EubWF0Y2hlcztcbiAgICAgICAgICAgIHNldFByZWZlcnJlZFRoZW1lKG1hdGNoZXMgPyBcImRhcmtcIiA6IFwibGlnaHRcIik7XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvd1xuICAgICAgICAgICAgLm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjb2xvclNjaGVtZUNoYW5nZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3dcbiAgICAgICAgICAgICAgICAubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIilcbiAgICAgICAgICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjb2xvclNjaGVtZUNoYW5nZSk7XG4gICAgICAgIH07XG4gICAgfSwgW3RoZW1lRnJvbVByb3BzXSk7XG4gICAgcmV0dXJuIChqc3goU2FuZHBhY2tUaGVtZUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgdGhlbWU6IHRoZW1lLCBpZDogaWQsIG1vZGU6IG1vZGUgfSwgY2hpbGRyZW46IGpzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIndyYXBwZXJcIiwgW1xuICAgICAgICAgICAgICAgIHRoZW1lQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIHdyYXBwZXJDbGFzc05hbWUkMyh7IHZhcmlhbnQ6IG1vZGUgfSksXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgICAgXSkgfSwgcHJvcHMsIHsgY2hpbGRyZW46IGNoaWxkcmVuIH0pKSB9KSk7XG59O1xudmFyIFNhbmRwYWNrVGhlbWVDb25zdW1lciA9IFNhbmRwYWNrVGhlbWVDb250ZXh0LkNvbnN1bWVyO1xuXG52YXIgY29tbW9uRmlsZXMgPSB7XG4gICAgXCIvc3R5bGVzLmNzc1wiOiB7XG4gICAgICAgIGNvZGU6IFwiYm9keSB7XFxuICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcXG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGF1dG87XFxuICAtbW96LWZvbnQtc21vb3RoaW5nOiBhdXRvO1xcbiAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTtcXG4gIGZvbnQtc21vb3RoaW5nOiBhdXRvO1xcbiAgdGV4dC1yZW5kZXJpbmc6IG9wdGltaXplTGVnaWJpbGl0eTtcXG4gIGZvbnQtc21vb3RoOiBhbHdheXM7XFxuICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50O1xcbiAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lO1xcbn1cXG5cXG5oMSB7XFxuICBmb250LXNpemU6IDEuNXJlbTtcXG59XCIsXG4gICAgfSxcbn07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG52YXIgQVNUUk9fVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IHtcbiAgICAgICAgXCIvc3JjL3N0eWxlcy5jc3NcIjogY29tbW9uRmlsZXNbXCIvc3R5bGVzLmNzc1wiXSxcbiAgICAgICAgXCIvc3JjL3BhZ2VzL2luZGV4LmFzdHJvXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiLS0tXFxuaW1wb3J0IFxcXCIuLi9zdHlsZXMuY3NzXFxcIjtcXG5jb25zdCBkYXRhID0gXFxcIndvcmxkXFxcIjtcXG4tLS1cXG5cXG48aDE+SGVsbG8ge2RhdGF9PC9oMT5cXG5cXG48c3R5bGU+XFxuICBoMSB7XFxuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgfVxcbjwvc3R5bGU+XCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiLmVudlwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIkFTVFJPX1RFTEVNRVRSWV9ESVNBQkxFRD1cXFwiMVxcXCJcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvcGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgYXN0cm86IFwiXjEuNi4xMlwiLFxuICAgICAgICAgICAgICAgICAgICBcImVzYnVpbGQtd2FzbVwiOiBcIl4wLjE1LjE2XCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzY3JpcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldjogXCJhc3RybyBkZXZcIixcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFwiYXN0cm8gZGV2XCIsXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkOiBcImFzdHJvIGJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpZXc6IFwiYXN0cm8gcHJldmlld1wiLFxuICAgICAgICAgICAgICAgICAgICBhc3RybzogXCJhc3Ryb1wiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIG1haW46IFwiL3NyYy9wYWdlcy9pbmRleC5hc3Ryb1wiLFxuICAgIGVudmlyb25tZW50OiBcIm5vZGVcIixcbn07XG5cbnZhciBORVhUSlNfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb21tb25GaWxlcyksIHsgXCIvcGFnZXMvX2FwcC5qc1wiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCAnLi4vc3R5bGVzLmNzcydcXG5cXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNeUFwcCh7IENvbXBvbmVudCwgcGFnZVByb3BzIH0pIHtcXG4gIHJldHVybiA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XFxufVwiLFxuICAgICAgICB9LCBcIi9wYWdlcy9pbmRleC5qc1wiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEhvbWUoeyBkYXRhIH0pIHtcXG4gIHJldHVybiAoXFxuICAgIDxkaXY+XFxuICAgICAgPGgxPkhlbGxvIHtkYXRhfTwvaDE+XFxuICAgIDwvZGl2PlxcbiAgKTtcXG59XFxuICBcXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKCkge1xcbiAgcmV0dXJuIHtcXG4gICAgcHJvcHM6IHsgZGF0YTogXFxcIndvcmxkXFxcIiB9LFxcbiAgfVxcbn1cXG5cIixcbiAgICAgICAgfSwgXCIvbmV4dC5jb25maWcuanNcIjoge1xuICAgICAgICAgICAgY29kZTogXCIvKiogQHR5cGUge2ltcG9ydCgnbmV4dCcpLk5leHRDb25maWd9ICovXFxuY29uc3QgbmV4dENvbmZpZyA9IHtcXG4gIHJlYWN0U3RyaWN0TW9kZTogdHJ1ZSxcXG4gIHN3Y01pbmlmeTogdHJ1ZSxcXG59XFxuXFxubW9kdWxlLmV4cG9ydHMgPSBuZXh0Q29uZmlnXFxuXCIsXG4gICAgICAgIH0sIFwiL3BhY2thZ2UuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJteS1hcHBcIixcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBcIjAuMS4wXCIsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzY3JpcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldjogXCJORVhUX1RFTEVNRVRSWV9ESVNBQkxFRD0xIG5leHQgZGV2XCIsXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkOiBcIm5leHQgYnVpbGRcIixcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFwibmV4dCBzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICBsaW50OiBcIm5leHQgbGludFwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IFwiMTIuMS42XCIsXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0OiBcIjE4LjIuMFwiLFxuICAgICAgICAgICAgICAgICAgICBcInJlYWN0LWRvbVwiOiBcIjE4LjIuMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIkBuZXh0L3N3Yy13YXNtLW5vZGVqc1wiOiBcIjEyLjEuNlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSB9KSxcbiAgICBtYWluOiBcIi9wYWdlcy9pbmRleC5qc1wiLFxuICAgIGVudmlyb25tZW50OiBcIm5vZGVcIixcbn07XG5cbnZhciBOT0RFX1RFTVBMQVRFID0ge1xuICAgIGZpbGVzOiB7XG4gICAgICAgIFwiL2luZGV4LmpzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcXG5cXG5jb25zdCBob3N0bmFtZSA9ICcxMjcuMC4wLjEnO1xcbmNvbnN0IHBvcnQgPSAzMDAwO1xcblxcbmNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKChyZXEsIHJlcykgPT4ge1xcbiAgcmVzLnN0YXR1c0NvZGUgPSAyMDA7XFxuICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAndGV4dC9odG1sJyk7XFxuICByZXMuZW5kKCdIZWxsbyB3b3JsZCcpO1xcbn0pO1xcblxcbnNlcnZlci5saXN0ZW4ocG9ydCwgaG9zdG5hbWUsICgpID0+IHtcXG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgcnVubmluZyBhdCBodHRwOi8vJHtob3N0bmFtZX06JHtwb3J0fS9gKTtcXG59KTtcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvcGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHt9LFxuICAgICAgICAgICAgICAgIHNjcmlwdHM6IHsgc3RhcnQ6IFwibm9kZSBpbmRleC5qc1wiIH0sXG4gICAgICAgICAgICAgICAgbWFpbjogXCJpbmRleC5qc1wiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBtYWluOiBcIi9pbmRleC5qc1wiLFxuICAgIGVudmlyb25tZW50OiBcIm5vZGVcIixcbn07XG5cbnZhciBWSVRFX1RFTVBMQVRFID0ge1xuICAgIGZpbGVzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29tbW9uRmlsZXMpLCB7IFwiL2luZGV4LmpzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IFxcXCIuL3N0eWxlcy5jc3NcXFwiO1xcblxcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcXCJhcHBcXFwiKS5pbm5lckhUTUwgPSBgXFxuPGgxPkhlbGxvIHdvcmxkPC9oMT5cXG5gO1xcblwiLFxuICAgICAgICB9LCBcIi9pbmRleC5odG1sXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWwgbGFuZz1cXFwiZW5cXFwiPlxcbiAgPGhlYWQ+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XFxcIlVURi04XFxcIiAvPlxcbiAgICA8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFxcXCIgLz5cXG4gICAgPHRpdGxlPlZpdGUgQXBwPC90aXRsZT5cXG4gIDwvaGVhZD5cXG4gIDxib2R5PlxcbiAgICA8ZGl2IGlkPVxcXCJhcHBcXFwiPjwvZGl2PlxcbiAgICA8c2NyaXB0IHR5cGU9XFxcIm1vZHVsZVxcXCIgc3JjPVxcXCIvaW5kZXguanNcXFwiPjwvc2NyaXB0PlxcbiAgPC9ib2R5PlxcbjwvaHRtbD5cXG5cIixcbiAgICAgICAgfSwgXCIvcGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzY3JpcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldjogXCJ2aXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkOiBcInZpdGUgYnVpbGRcIixcbiAgICAgICAgICAgICAgICAgICAgcHJldmlldzogXCJ2aXRlIHByZXZpZXdcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRldkRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICB2aXRlOiBcIjQuMS40XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZXNidWlsZC13YXNtXCI6IFwiMC4xNy4xMlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSB9KSxcbiAgICBtYWluOiBcIi9pbmRleC5qc1wiLFxuICAgIGVudmlyb25tZW50OiBcIm5vZGVcIixcbn07XG5cbnZhciBWSVRFX1BSRUFDVF9URU1QTEFURSA9IHtcbiAgICBmaWxlczogX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbW1vbkZpbGVzKSwgeyBcIi9BcHAuanN4XCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKCkge1xcbiAgY29uc3QgZGF0YSA9IFxcXCJ3b3JsZFxcXCJcXG5cXG4gIHJldHVybiA8aDE+SGVsbG8ge2RhdGF9PC9oMT5cXG59XFxuXCIsXG4gICAgICAgIH0sIFwiL2luZGV4LmpzeFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCB7IHJlbmRlciB9IGZyb20gXFxcInByZWFjdFxcXCI7XFxuaW1wb3J0IFxcXCIuL3N0eWxlcy5jc3NcXFwiO1xcblxcbmltcG9ydCBBcHAgZnJvbSBcXFwiLi9BcHBcXFwiO1xcblxcbmNvbnN0IHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXFwicm9vdFxcXCIpO1xcbnJlbmRlcig8QXBwIC8+LCByb290KTtcXG5cIixcbiAgICAgICAgfSwgXCIvaW5kZXguaHRtbFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIjwhRE9DVFlQRSBodG1sPlxcbjxodG1sIGxhbmc9XFxcImVuXFxcIj5cXG4gIDxoZWFkPlxcbiAgICA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCIgLz5cXG4gICAgPG1ldGEgbmFtZT1cXFwidmlld3BvcnRcXFwiIGNvbnRlbnQ9XFxcIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcXFwiIC8+XFxuICAgIDx0aXRsZT5WaXRlIEFwcDwvdGl0bGU+XFxuICA8L2hlYWQ+XFxuICA8Ym9keT5cXG4gICAgPGRpdiBpZD1cXFwicm9vdFxcXCI+PC9kaXY+XFxuICAgIDxzY3JpcHQgdHlwZT1cXFwibW9kdWxlXFxcIiBzcmM9XFxcIi9pbmRleC5qc3hcXFwiPjwvc2NyaXB0PlxcbiAgPC9ib2R5PlxcbjwvaHRtbD5cXG5cIixcbiAgICAgICAgfSwgXCIvcGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzY3JpcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldjogXCJ2aXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkOiBcInZpdGUgYnVpbGRcIixcbiAgICAgICAgICAgICAgICAgICAgcHJldmlldzogXCJ2aXRlIHByZXZpZXdcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICBwcmVhY3Q6IFwiXjEwLjE2LjBcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRldkRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICBcIkBwcmVhY3QvcHJlc2V0LXZpdGVcIjogXCJeMi41LjBcIixcbiAgICAgICAgICAgICAgICAgICAgdml0ZTogXCI0LjEuNFwiLFxuICAgICAgICAgICAgICAgICAgICBcImVzYnVpbGQtd2FzbVwiOiBcIjAuMTcuMTJcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sIFwiL3ZpdGUuY29uZmlnLmpzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSBcXFwidml0ZVxcXCI7XFxuaW1wb3J0IHByZWFjdCBmcm9tICdAcHJlYWN0L3ByZXNldC12aXRlJ1xcblxcbi8vIGh0dHBzOi8vdml0ZWpzLmRldi9jb25maWcvXFxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHtcXG4gIHBsdWdpbnM6IFtwcmVhY3QoKV0sXFxufSk7XFxuXCIsXG4gICAgICAgIH0gfSksXG4gICAgbWFpbjogXCIvQXBwLmpzeFwiLFxuICAgIGVudmlyb25tZW50OiBcIm5vZGVcIixcbn07XG5cbnZhciBWSVRFX1BSRUFDVF9UU19URU1QTEFURSA9IHtcbiAgICBmaWxlczogX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbW1vbkZpbGVzKSwgeyBcIi9BcHAudHN4XCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKCkge1xcbiAgY29uc3QgZGF0YTogc3RyaW5nID0gXFxcIndvcmxkXFxcIlxcblxcbiAgcmV0dXJuIDxoMT5IZWxsbyB7ZGF0YX08L2gxPlxcbn1cXG5cIixcbiAgICAgICAgfSwgXCIvaW5kZXgudHN4XCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSBcXFwicHJlYWN0XFxcIjtcXG5pbXBvcnQgXFxcIi4vc3R5bGVzLmNzc1xcXCI7XFxuXFxuaW1wb3J0IEFwcCBmcm9tIFxcXCIuL0FwcFxcXCI7XFxuXFxuY29uc3Qgcm9vdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcXCJyb290XFxcIikgYXMgSFRNTEVsZW1lbnQ7XFxucmVuZGVyKDxBcHAgLz4sIHJvb3QpO1xcblwiLFxuICAgICAgICB9LCBcIi9pbmRleC5odG1sXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWwgbGFuZz1cXFwiZW5cXFwiPlxcbiAgPGhlYWQ+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XFxcIlVURi04XFxcIiAvPlxcbiAgICA8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFxcXCIgLz5cXG4gICAgPHRpdGxlPlZpdGUgQXBwPC90aXRsZT5cXG4gIDwvaGVhZD5cXG4gIDxib2R5PlxcbiAgICA8ZGl2IGlkPVxcXCJyb290XFxcIj48L2Rpdj5cXG4gICAgPHNjcmlwdCB0eXBlPVxcXCJtb2R1bGVcXFwiIHNyYz1cXFwiL2luZGV4LnRzeFxcXCI+PC9zY3JpcHQ+XFxuICA8L2JvZHk+XFxuPC9odG1sPlxcblwiLFxuICAgICAgICB9LCBcIi90c2NvbmZpZy5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb21waWxlck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIkVTTmV4dFwiLFxuICAgICAgICAgICAgICAgICAgICB1c2VEZWZpbmVGb3JDbGFzc0ZpZWxkczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbGliOiBbXCJET01cIiwgXCJET00uSXRlcmFibGVcIiwgXCJFU05leHRcIl0sXG4gICAgICAgICAgICAgICAgICAgIGFsbG93SnM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBza2lwTGliQ2hlY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVzTW9kdWxlSW50ZXJvcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGFsbG93U3ludGhldGljRGVmYXVsdEltcG9ydHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VDb25zaXN0ZW50Q2FzaW5nSW5GaWxlTmFtZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogXCJFU05leHRcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlUmVzb2x1dGlvbjogXCJOb2RlXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVKc29uTW9kdWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc29sYXRlZE1vZHVsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5vRW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAganN4OiBcInJlYWN0LWpzeFwiLFxuICAgICAgICAgICAgICAgICAgICBqc3hJbXBvcnRTb3VyY2U6IFwicHJlYWN0XCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbXCJzcmNcIl0sXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlczogW3sgcGF0aDogXCIuL3RzY29uZmlnLm5vZGUuanNvblwiIH1dLFxuICAgICAgICAgICAgfSwgbnVsbCwgMiksXG4gICAgICAgIH0sIFwiL3RzY29uZmlnLm5vZGUuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY29tcGlsZXJPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlOiBcIkVTTmV4dFwiLFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVSZXNvbHV0aW9uOiBcIk5vZGVcIixcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dTeW50aGV0aWNEZWZhdWx0SW1wb3J0czogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcInZpdGUuY29uZmlnLnRzXCJdLFxuICAgICAgICAgICAgfSwgbnVsbCwgMiksXG4gICAgICAgIH0sIFwiL3BhY2thZ2UuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc2NyaXB0czoge1xuICAgICAgICAgICAgICAgICAgICBkZXY6IFwidml0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBidWlsZDogXCJ0c2MgJiYgdml0ZSBidWlsZFwiLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3OiBcInZpdGUgcHJldmlld1wiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHByZWFjdDogXCJeMTAuMTYuMFwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQHByZWFjdC9wcmVzZXQtdml0ZVwiOiBcIl4yLjUuMFwiLFxuICAgICAgICAgICAgICAgICAgICB0eXBlc2NyaXB0OiBcIl40LjkuNVwiLFxuICAgICAgICAgICAgICAgICAgICB2aXRlOiBcIjQuMS40XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZXNidWlsZC13YXNtXCI6IFwiXjAuMTcuMTJcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSwgbnVsbCwgMiksXG4gICAgICAgIH0sIFwiL3ZpdGUtZW52LmQudHNcIjoge1xuICAgICAgICAgICAgY29kZTogJy8vLyA8cmVmZXJlbmNlIHR5cGVzPVwidml0ZS9jbGllbnRcIiAvPicsXG4gICAgICAgIH0sIFwiL3ZpdGUuY29uZmlnLnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSdcXG5pbXBvcnQgcHJlYWN0IGZyb20gJ0BwcmVhY3QvcHJlc2V0LXZpdGUnXFxuXFxuLy8gaHR0cHM6Ly92aXRlanMuZGV2L2NvbmZpZy9cXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoe1xcbiAgcGx1Z2luczogW3ByZWFjdCgpXSxcXG59KVxcblwiLFxuICAgICAgICB9IH0pLFxuICAgIG1haW46IFwiL0FwcC50c3hcIixcbiAgICBlbnZpcm9ubWVudDogXCJub2RlXCIsXG59O1xuXG52YXIgVklURV9SRUFDVF9URU1QTEFURSA9IHtcbiAgICBmaWxlczogX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbW1vbkZpbGVzKSwgeyBcIi9BcHAuanN4XCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKCkge1xcbiAgY29uc3QgZGF0YSA9IFxcXCJ3b3JsZFxcXCJcXG5cXG4gIHJldHVybiA8aDE+SGVsbG8ge2RhdGF9PC9oMT5cXG59XFxuXCIsXG4gICAgICAgIH0sIFwiL2luZGV4LmpzeFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCB7IFN0cmljdE1vZGUgfSBmcm9tIFxcXCJyZWFjdFxcXCI7XFxuaW1wb3J0IHsgY3JlYXRlUm9vdCB9IGZyb20gXFxcInJlYWN0LWRvbS9jbGllbnRcXFwiO1xcbmltcG9ydCBcXFwiLi9zdHlsZXMuY3NzXFxcIjtcXG5cXG5pbXBvcnQgQXBwIGZyb20gXFxcIi4vQXBwXFxcIjtcXG5cXG5jb25zdCByb290ID0gY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXFwicm9vdFxcXCIpKTtcXG5yb290LnJlbmRlcihcXG4gIDxTdHJpY3RNb2RlPlxcbiAgICA8QXBwIC8+XFxuICA8L1N0cmljdE1vZGU+XFxuKTtcIixcbiAgICAgICAgfSwgXCIvaW5kZXguaHRtbFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIjwhRE9DVFlQRSBodG1sPlxcbjxodG1sIGxhbmc9XFxcImVuXFxcIj5cXG4gIDxoZWFkPlxcbiAgICA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCIgLz5cXG4gICAgPG1ldGEgbmFtZT1cXFwidmlld3BvcnRcXFwiIGNvbnRlbnQ9XFxcIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcXFwiIC8+XFxuICAgIDx0aXRsZT5WaXRlIEFwcDwvdGl0bGU+XFxuICA8L2hlYWQ+XFxuICA8Ym9keT5cXG4gICAgPGRpdiBpZD1cXFwicm9vdFxcXCI+PC9kaXY+XFxuICAgIDxzY3JpcHQgdHlwZT1cXFwibW9kdWxlXFxcIiBzcmM9XFxcIi9pbmRleC5qc3hcXFwiPjwvc2NyaXB0PlxcbiAgPC9ib2R5PlxcbjwvaHRtbD5cXG5cIixcbiAgICAgICAgfSwgXCIvcGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzY3JpcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldjogXCJ2aXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkOiBcInZpdGUgYnVpbGRcIixcbiAgICAgICAgICAgICAgICAgICAgcHJldmlldzogXCJ2aXRlIHByZXZpZXdcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICByZWFjdDogXCJeMTguMi4wXCIsXG4gICAgICAgICAgICAgICAgICAgIFwicmVhY3QtZG9tXCI6IFwiXjE4LjIuMFwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQHZpdGVqcy9wbHVnaW4tcmVhY3RcIjogXCIzLjEuMFwiLFxuICAgICAgICAgICAgICAgICAgICB2aXRlOiBcIjQuMS40XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZXNidWlsZC13YXNtXCI6IFwiMC4xNy4xMlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSwgXCIvdml0ZS5jb25maWcuanNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgeyBkZWZpbmVDb25maWcgfSBmcm9tIFxcXCJ2aXRlXFxcIjtcXG5pbXBvcnQgcmVhY3QgZnJvbSBcXFwiQHZpdGVqcy9wbHVnaW4tcmVhY3RcXFwiO1xcblxcbi8vIGh0dHBzOi8vdml0ZWpzLmRldi9jb25maWcvXFxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHtcXG4gIHBsdWdpbnM6IFtyZWFjdCgpXSxcXG59KTtcXG5cIixcbiAgICAgICAgfSB9KSxcbiAgICBtYWluOiBcIi9BcHAuanN4XCIsXG4gICAgZW52aXJvbm1lbnQ6IFwibm9kZVwiLFxufTtcblxudmFyIFZJVEVfUkVBQ1RfVFNfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb21tb25GaWxlcyksIHsgXCIvQXBwLnRzeFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcCgpIHtcXG4gIGNvbnN0IGRhdGE6IHN0cmluZyA9IFxcXCJ3b3JsZFxcXCJcXG5cXG4gIHJldHVybiA8aDE+SGVsbG8ge2RhdGF9PC9oMT5cXG59XFxuXCIsXG4gICAgICAgIH0sIFwiL2luZGV4LnRzeFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCB7IFN0cmljdE1vZGUgfSBmcm9tIFxcXCJyZWFjdFxcXCI7XFxuaW1wb3J0IHsgY3JlYXRlUm9vdCB9IGZyb20gXFxcInJlYWN0LWRvbS9jbGllbnRcXFwiO1xcbmltcG9ydCBcXFwiLi9zdHlsZXMuY3NzXFxcIjtcXG5cXG5pbXBvcnQgQXBwIGZyb20gXFxcIi4vQXBwXFxcIjtcXG5pbXBvcnQgUmVhY3QgZnJvbSBcXFwicmVhY3RcXFwiO1xcblxcbmNvbnN0IHJvb3QgPSBjcmVhdGVSb290KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcXCJyb290XFxcIikgYXMgSFRNTEVsZW1lbnQpO1xcbnJvb3QucmVuZGVyKFxcbiAgPFN0cmljdE1vZGU+XFxuICAgIDxBcHAgLz5cXG4gIDwvU3RyaWN0TW9kZT5cXG4pO1xcblwiLFxuICAgICAgICB9LCBcIi9pbmRleC5odG1sXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWwgbGFuZz1cXFwiZW5cXFwiPlxcbiAgPGhlYWQ+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XFxcIlVURi04XFxcIiAvPlxcbiAgICA8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFxcXCIgLz5cXG4gICAgPHRpdGxlPlZpdGUgQXBwPC90aXRsZT5cXG4gIDwvaGVhZD5cXG4gIDxib2R5PlxcbiAgICA8ZGl2IGlkPVxcXCJyb290XFxcIj48L2Rpdj5cXG4gICAgPHNjcmlwdCB0eXBlPVxcXCJtb2R1bGVcXFwiIHNyYz1cXFwiL2luZGV4LnRzeFxcXCI+PC9zY3JpcHQ+XFxuICA8L2JvZHk+XFxuPC9odG1sPlxcblwiLFxuICAgICAgICB9LCBcIi90c2NvbmZpZy5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb21waWxlck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIkVTTmV4dFwiLFxuICAgICAgICAgICAgICAgICAgICB1c2VEZWZpbmVGb3JDbGFzc0ZpZWxkczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbGliOiBbXCJET01cIiwgXCJET00uSXRlcmFibGVcIiwgXCJFU05leHRcIl0sXG4gICAgICAgICAgICAgICAgICAgIGFsbG93SnM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBza2lwTGliQ2hlY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVzTW9kdWxlSW50ZXJvcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGFsbG93U3ludGhldGljRGVmYXVsdEltcG9ydHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VDb25zaXN0ZW50Q2FzaW5nSW5GaWxlTmFtZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogXCJFU05leHRcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlUmVzb2x1dGlvbjogXCJOb2RlXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVKc29uTW9kdWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc29sYXRlZE1vZHVsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5vRW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAganN4OiBcInJlYWN0LWpzeFwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogW1wic3JjXCJdLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZXM6IFt7IHBhdGg6IFwiLi90c2NvbmZpZy5ub2RlLmpzb25cIiB9XSxcbiAgICAgICAgICAgIH0sIG51bGwsIDIpLFxuICAgICAgICB9LCBcIi90c2NvbmZpZy5ub2RlLmpzb25cIjoge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGNvbXBpbGVyT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogXCJFU05leHRcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlUmVzb2x1dGlvbjogXCJOb2RlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFsbG93U3ludGhldGljRGVmYXVsdEltcG9ydHM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbXCJ2aXRlLmNvbmZpZy50c1wiXSxcbiAgICAgICAgICAgIH0sIG51bGwsIDIpLFxuICAgICAgICB9LCBcIi9wYWNrYWdlLmpzb25cIjoge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHNjcmlwdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV2OiBcInZpdGVcIixcbiAgICAgICAgICAgICAgICAgICAgYnVpbGQ6IFwidHNjICYmIHZpdGUgYnVpbGRcIixcbiAgICAgICAgICAgICAgICAgICAgcHJldmlldzogXCJ2aXRlIHByZXZpZXdcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICByZWFjdDogXCJeMTguMi4wXCIsXG4gICAgICAgICAgICAgICAgICAgIFwicmVhY3QtZG9tXCI6IFwiXjE4LjIuMFwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQHR5cGVzL3JlYWN0XCI6IFwiXjE4LjAuMjhcIixcbiAgICAgICAgICAgICAgICAgICAgXCJAdHlwZXMvcmVhY3QtZG9tXCI6IFwiXjE4LjAuMTFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJAdml0ZWpzL3BsdWdpbi1yZWFjdFwiOiBcIl4zLjEuMFwiLFxuICAgICAgICAgICAgICAgICAgICB0eXBlc2NyaXB0OiBcIl40LjkuNVwiLFxuICAgICAgICAgICAgICAgICAgICB2aXRlOiBcIjQuMS40XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZXNidWlsZC13YXNtXCI6IFwiXjAuMTcuMTJcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSwgbnVsbCwgMiksXG4gICAgICAgIH0sIFwiL3ZpdGUtZW52LmQudHNcIjoge1xuICAgICAgICAgICAgY29kZTogJy8vLyA8cmVmZXJlbmNlIHR5cGVzPVwidml0ZS9jbGllbnRcIiAvPicsXG4gICAgICAgIH0sIFwiL3ZpdGUuY29uZmlnLnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSdcXG5pbXBvcnQgcmVhY3QgZnJvbSAnQHZpdGVqcy9wbHVnaW4tcmVhY3QnXFxuXFxuLy8gaHR0cHM6Ly92aXRlanMuZGV2L2NvbmZpZy9cXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoe1xcbiAgcGx1Z2luczogW3JlYWN0KCldLFxcbn0pXFxuXCIsXG4gICAgICAgIH0gfSksXG4gICAgbWFpbjogXCIvQXBwLnRzeFwiLFxuICAgIGVudmlyb25tZW50OiBcIm5vZGVcIixcbn07XG5cbnZhciBWSVRFX1NWRUxURV9URU1QTEFURSA9IHtcbiAgICBmaWxlczoge1xuICAgICAgICBcIi9zcmMvc3R5bGVzLmNzc1wiOiBjb21tb25GaWxlc1tcIi9zdHlsZXMuY3NzXCJdLFxuICAgICAgICBcIi9zcmMvQXBwLnN2ZWx0ZVwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIjxzY3JpcHQ+XFxuY29uc3QgZGF0YSA9IFxcXCJ3b3JsZFxcXCI7XFxuPC9zY3JpcHQ+XFxuXFxuPGgxPkhlbGxvIHtkYXRhfTwvaDE+XFxuXFxuPHN0eWxlPlxcbmgxIHtcXG4gIGZvbnQtc2l6ZTogMS41cmVtO1xcbn1cXG48L3N0eWxlPlwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi9zcmMvbWFpbi5qc1wiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCBBcHAgZnJvbSAnLi9BcHAuc3ZlbHRlJ1xcbmltcG9ydCBcXFwiLi9zdHlsZXMuY3NzXFxcIlxcblxcbmNvbnN0IGFwcCA9IG5ldyBBcHAoe1xcbiAgdGFyZ2V0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJyksXFxufSlcXG5cXG5leHBvcnQgZGVmYXVsdCBhcHBcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvaW5kZXguaHRtbFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIjwhRE9DVFlQRSBodG1sPlxcbjxodG1sIGxhbmc9XFxcImVuXFxcIj5cXG4gIDxoZWFkPlxcbiAgICA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCIgLz5cXG4gICAgPG1ldGEgbmFtZT1cXFwidmlld3BvcnRcXFwiIGNvbnRlbnQ9XFxcIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcXFwiIC8+XFxuICAgIDx0aXRsZT5WaXRlIEFwcDwvdGl0bGU+XFxuICA8L2hlYWQ+XFxuICA8Ym9keT5cXG4gICAgPGRpdiBpZD1cXFwiYXBwXFxcIj48L2Rpdj5cXG4gICAgPHNjcmlwdCB0eXBlPVxcXCJtb2R1bGVcXFwiIHNyYz1cXFwiL3NyYy9tYWluLmpzXFxcIj48L3NjcmlwdD5cXG4gIDwvYm9keT5cXG48L2h0bWw+XFxuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3ZpdGUuY29uZmlnLmpzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSdcXG5pbXBvcnQgeyBzdmVsdGUgfSBmcm9tICdAc3ZlbHRlanMvdml0ZS1wbHVnaW4tc3ZlbHRlJ1xcblxcbi8vIGh0dHBzOi8vdml0ZWpzLmRldi9jb25maWcvXFxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHtcXG4gIHBsdWdpbnM6IFtzdmVsdGUoKV0sXFxufSlcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvcGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm1vZHVsZVwiLFxuICAgICAgICAgICAgICAgIHNjcmlwdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV2OiBcInZpdGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRldkRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICBcIkBzdmVsdGVqcy92aXRlLXBsdWdpbi1zdmVsdGVcIjogXCJeMi4wLjJcIixcbiAgICAgICAgICAgICAgICAgICAgc3ZlbHRlOiBcIl4zLjU1LjFcIixcbiAgICAgICAgICAgICAgICAgICAgdml0ZTogXCI0LjAuNFwiLFxuICAgICAgICAgICAgICAgICAgICBcImVzYnVpbGQtd2FzbVwiOiBcIl4wLjE3LjEyXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgbWFpbjogXCIvc3JjL0FwcC5zdmVsdGVcIixcbiAgICBlbnZpcm9ubWVudDogXCJub2RlXCIsXG59O1xuXG52YXIgVklURV9TVkVMVEVfVFNfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IHtcbiAgICAgICAgXCIvc3JjL3N0eWxlcy5jc3NcIjogY29tbW9uRmlsZXNbXCIvc3R5bGVzLmNzc1wiXSxcbiAgICAgICAgXCIvc3JjL0FwcC5zdmVsdGVcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8c2NyaXB0IGxhbmc9XFxcInRzXFxcIj5cXG5jb25zdCBkYXRhOiBzdHJpbmcgPSBcXFwid29ybGRcXFwiO1xcbjwvc2NyaXB0PlxcblxcbjxoMT5IZWxsbyB7ZGF0YX08L2gxPlxcblxcbjxzdHlsZT5cXG5oMSB7XFxuICBmb250LXNpemU6IDEuNXJlbTtcXG59XFxuPC9zdHlsZT5cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvc3JjL21haW4udHNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgQXBwIGZyb20gJy4vQXBwLnN2ZWx0ZSdcXG5pbXBvcnQgXFxcIi4vc3R5bGVzLmNzc1xcXCJcXG5cXG5jb25zdCBhcHAgPSBuZXcgQXBwKHtcXG4gIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpLFxcbn0pXFxuXFxuZXhwb3J0IGRlZmF1bHQgYXBwXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL2luZGV4Lmh0bWxcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8IURPQ1RZUEUgaHRtbD5cXG48aHRtbCBsYW5nPVxcXCJlblxcXCI+XFxuICA8aGVhZD5cXG4gICAgPG1ldGEgY2hhcnNldD1cXFwiVVRGLThcXFwiIC8+XFxuICAgIDxtZXRhIG5hbWU9XFxcInZpZXdwb3J0XFxcIiBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXFxcIiAvPlxcbiAgICA8dGl0bGU+Vml0ZSBBcHA8L3RpdGxlPlxcbiAgPC9oZWFkPlxcbiAgPGJvZHk+XFxuICAgIDxkaXYgaWQ9XFxcImFwcFxcXCI+PC9kaXY+XFxuICAgIDxzY3JpcHQgdHlwZT1cXFwibW9kdWxlXFxcIiBzcmM9XFxcIi9zcmMvbWFpbi50c1xcXCI+PC9zY3JpcHQ+XFxuICA8L2JvZHk+XFxuPC9odG1sPlxcblwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi92aXRlLWVudi5kLnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiLy8vIDxyZWZlcmVuY2UgdHlwZXM9XFxcInN2ZWx0ZVxcXCIgLz5cXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cXFwidml0ZS9jbGllbnRcXFwiIC8+XCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwic3ZlbHRlLmNvbmZpZy5qc1wiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCB7IHZpdGVQcmVwcm9jZXNzIH0gZnJvbSAnQHN2ZWx0ZWpzL3ZpdGUtcGx1Z2luLXN2ZWx0ZSdcXG5cXG5leHBvcnQgZGVmYXVsdCB7XFxuICAvLyBDb25zdWx0IGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzI2NvbXBpbGUtdGltZS1zdmVsdGUtcHJlcHJvY2Vzc1xcbiAgLy8gZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgcHJlcHJvY2Vzc29yc1xcbiAgcHJlcHJvY2Vzczogdml0ZVByZXByb2Nlc3MoKSxcXG59XFxuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3ZpdGUuY29uZmlnLnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSdcXG5pbXBvcnQgeyBzdmVsdGUgfSBmcm9tICdAc3ZlbHRlanMvdml0ZS1wbHVnaW4tc3ZlbHRlJ1xcblxcbi8vIGh0dHBzOi8vdml0ZWpzLmRldi9jb25maWcvXFxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHtcXG4gIHBsdWdpbnM6IFtzdmVsdGUoKV0sXFxufSlcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJ0c2NvbmZpZy5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBleHRlbmRzOiBcIkB0c2NvbmZpZy9zdmVsdGUvdHNjb25maWcuanNvblwiLFxuICAgICAgICAgICAgICAgIGNvbXBpbGVyT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiRVNOZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgIHVzZURlZmluZUZvckNsYXNzRmllbGRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGU6IFwiRVNOZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVKc29uTW9kdWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhbGxvd0pzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja0pzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc29sYXRlZE1vZHVsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgICAgIFwic3JjLyoqLyouZC50c1wiLFxuICAgICAgICAgICAgICAgICAgICBcInNyYy8qKi8qLnRzXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3JjLyoqLyouanNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzcmMvKiovKi5zdmVsdGVcIixcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZXM6IFt7IHBhdGg6IFwiLi90c2NvbmZpZy5ub2RlLmpzb25cIiB9XSxcbiAgICAgICAgICAgIH0sIG51bGwsIDIpLFxuICAgICAgICB9LFxuICAgICAgICBcInRzY29uZmlnLm5vZGUuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY29tcGlsZXJPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlOiBcIkVTTmV4dFwiLFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVSZXNvbHV0aW9uOiBcIk5vZGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcInZpdGUuY29uZmlnLnRzXCJdLFxuICAgICAgICAgICAgfSwgbnVsbCwgMiksXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3BhY2thZ2UuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJtb2R1bGVcIixcbiAgICAgICAgICAgICAgICBzY3JpcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldjogXCJ2aXRlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXZEZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJAc3ZlbHRlanMvdml0ZS1wbHVnaW4tc3ZlbHRlXCI6IFwiXjIuMC4yXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiQHRzY29uZmlnL3N2ZWx0ZVwiOiBcIl4zLjAuMFwiLFxuICAgICAgICAgICAgICAgICAgICBzdmVsdGU6IFwiXjMuNTUuMVwiLFxuICAgICAgICAgICAgICAgICAgICBcInN2ZWx0ZS1jaGVja1wiOiBcIl4yLjEwLjNcIixcbiAgICAgICAgICAgICAgICAgICAgdHNsaWI6IFwiXjIuNS4wXCIsXG4gICAgICAgICAgICAgICAgICAgIHZpdGU6IFwiNC4xLjRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlc2J1aWxkLXdhc21cIjogXCJeMC4xNy4xMlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LCBudWxsLCAyKSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIG1haW46IFwiL3NyYy9BcHAuc3ZlbHRlXCIsXG4gICAgZW52aXJvbm1lbnQ6IFwibm9kZVwiLFxufTtcblxudmFyIFZJVEVfVlVFX1RFTVBMQVRFID0ge1xuICAgIGZpbGVzOiB7XG4gICAgICAgIFwiL3NyYy9zdHlsZXMuY3NzXCI6IGNvbW1vbkZpbGVzW1wiL3N0eWxlcy5jc3NcIl0sXG4gICAgICAgIFwiL3NyYy9BcHAudnVlXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPHNjcmlwdCBzZXR1cD5cXG5pbXBvcnQgeyByZWYgfSBmcm9tIFxcXCJ2dWVcXFwiO1xcblxcbmNvbnN0IGRhdGEgPSByZWYoXFxcIndvcmxkXFxcIik7XFxuPC9zY3JpcHQ+XFxuXFxuPHRlbXBsYXRlPlxcbiAgPGgxPkhlbGxvIHt7IGRhdGEgfX08L2gxPlxcbjwvdGVtcGxhdGU+XFxuXFxuPHN0eWxlPlxcbmgxIHtcXG4gIGZvbnQtc2l6ZTogMS41cmVtO1xcbn1cXG48L3N0eWxlPlwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi9zcmMvbWFpbi5qc1wiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCB7IGNyZWF0ZUFwcCB9IGZyb20gJ3Z1ZSdcXG5pbXBvcnQgQXBwIGZyb20gJy4vQXBwLnZ1ZSdcXG5pbXBvcnQgXFxcIi4vc3R5bGVzLmNzc1xcXCJcXG4gICAgICAgICAgICBcXG5jcmVhdGVBcHAoQXBwKS5tb3VudCgnI2FwcCcpICAgICAgICAgICAgXFxuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL2luZGV4Lmh0bWxcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8IURPQ1RZUEUgaHRtbD5cXG48aHRtbCBsYW5nPVxcXCJlblxcXCI+XFxuICA8aGVhZD5cXG4gICAgPG1ldGEgY2hhcnNldD1cXFwiVVRGLThcXFwiIC8+XFxuICAgIDxtZXRhIG5hbWU9XFxcInZpZXdwb3J0XFxcIiBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXFxcIiAvPlxcbiAgICA8dGl0bGU+Vml0ZSBBcHA8L3RpdGxlPlxcbiAgPC9oZWFkPlxcbiAgPGJvZHk+XFxuICAgIDxkaXYgaWQ9XFxcImFwcFxcXCI+PC9kaXY+XFxuICAgIDxzY3JpcHQgdHlwZT1cXFwibW9kdWxlXFxcIiBzcmM9XFxcIi9zcmMvbWFpbi5qc1xcXCI+PC9zY3JpcHQ+XFxuICA8L2JvZHk+XFxuPC9odG1sPlxcblwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi92aXRlLmNvbmZpZy5qc1wiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCB7IGRlZmluZUNvbmZpZyB9IGZyb20gJ3ZpdGUnXFxuaW1wb3J0IHZ1ZSBmcm9tICdAdml0ZWpzL3BsdWdpbi12dWUnXFxuXFxuLy8gaHR0cHM6Ly92aXRlanMuZGV2L2NvbmZpZy9cXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoe1xcbiAgcGx1Z2luczogW3Z1ZSgpXVxcbn0pXFxuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3BhY2thZ2UuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc2NyaXB0czoge1xuICAgICAgICAgICAgICAgICAgICBkZXY6IFwidml0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBidWlsZDogXCJ2aXRlIGJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpZXc6IFwidml0ZSBwcmV2aWV3XCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdnVlOiBcIl4zLjIuNDVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRldkRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICBcIkB2aXRlanMvcGx1Z2luLXZ1ZVwiOiBcIjMuMi4wXCIsXG4gICAgICAgICAgICAgICAgICAgIHZpdGU6IFwiNC4xLjRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlc2J1aWxkLXdhc21cIjogXCIwLjE3LjEyXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgbWFpbjogXCIvc3JjL0FwcC52dWVcIixcbiAgICBlbnZpcm9ubWVudDogXCJub2RlXCIsXG59O1xuXG52YXIgVklURV9WVUVfVFNfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IHtcbiAgICAgICAgXCIvc3JjL3N0eWxlcy5jc3NcIjogY29tbW9uRmlsZXNbXCIvc3R5bGVzLmNzc1wiXSxcbiAgICAgICAgXCIvc3JjL0FwcC52dWVcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8c2NyaXB0IHNldHVwIGxhbmc9XFxcInRzXFxcIj5cXG5pbXBvcnQgeyByZWYgfSBmcm9tIFxcXCJ2dWVcXFwiO1xcblxcbmNvbnN0IGRhdGEgPSByZWY8c3RyaW5nPihcXFwid29ybGRcXFwiKTtcXG48L3NjcmlwdD5cXG5cXG48dGVtcGxhdGU+XFxuICA8aDE+SGVsbG8ge3sgZGF0YSB9fTwvaDE+XFxuPC90ZW1wbGF0ZT5cXG5cXG48c3R5bGU+XFxuaDEge1xcbiAgZm9udC1zaXplOiAxLjVyZW07XFxufVxcbjwvc3R5bGU+XCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3NyYy9tYWluLnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgY3JlYXRlQXBwIH0gZnJvbSAndnVlJ1xcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAudnVlJ1xcbmltcG9ydCBcXFwiLi9zdHlsZXMuY3NzXFxcIlxcblxcbmNyZWF0ZUFwcChBcHApLm1vdW50KCcjYXBwJylcXG5cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvaW5kZXguaHRtbFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIjwhRE9DVFlQRSBodG1sPlxcbjxodG1sIGxhbmc9XFxcImVuXFxcIj5cXG4gIDxoZWFkPlxcbiAgICA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCIgLz5cXG4gICAgPG1ldGEgbmFtZT1cXFwidmlld3BvcnRcXFwiIGNvbnRlbnQ9XFxcIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcXFwiIC8+XFxuICAgIDx0aXRsZT5WaXRlIEFwcDwvdGl0bGU+XFxuICA8L2hlYWQ+XFxuICA8Ym9keT5cXG4gICAgPGRpdiBpZD1cXFwiYXBwXFxcIj48L2Rpdj5cXG4gICAgPHNjcmlwdCB0eXBlPVxcXCJtb2R1bGVcXFwiIHNyYz1cXFwiL3NyYy9tYWluLnRzXFxcIj48L3NjcmlwdD5cXG4gIDwvYm9keT5cXG48L2h0bWw+XFxuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3ZpdGUtZW52LmQudHNcIjoge1xuICAgICAgICAgICAgY29kZTogJy8vLyA8cmVmZXJlbmNlIHR5cGVzPVwidml0ZS9jbGllbnRcIiAvPicsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3ZpdGUuY29uZmlnLnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSdcXG5pbXBvcnQgdnVlIGZyb20gJ0B2aXRlanMvcGx1Z2luLXZ1ZSdcXG5cXG4vLyBodHRwczovL3ZpdGVqcy5kZXYvY29uZmlnL1xcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbmZpZyh7XFxuICBwbHVnaW5zOiBbdnVlKCldXFxufSlcXG5cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJ0c2NvbmZpZy5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb21waWxlck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIkVTTmV4dFwiLFxuICAgICAgICAgICAgICAgICAgICB1c2VEZWZpbmVGb3JDbGFzc0ZpZWxkczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlOiBcIkVTTmV4dFwiLFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVSZXNvbHV0aW9uOiBcIk5vZGVcIixcbiAgICAgICAgICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBqc3g6IFwicHJlc2VydmVcIixcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZUpzb25Nb2R1bGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGVkTW9kdWxlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXNNb2R1bGVJbnRlcm9wOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBsaWI6IFtcIkVTTmV4dFwiLCBcIkRPTVwiXSxcbiAgICAgICAgICAgICAgICAgICAgc2tpcExpYkNoZWNrOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBub0VtaXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgICAgIFwic3JjLyoqLyoudHNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzcmMvKiovKi5kLnRzXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3JjLyoqLyoudHN4XCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3JjLyoqLyoudnVlXCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VzOiBbeyBwYXRoOiBcIi4vdHNjb25maWcubm9kZS5qc29uXCIgfV0sXG4gICAgICAgICAgICB9LCBudWxsLCAyKSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJ0c2NvbmZpZy5ub2RlLmpzb25cIjoge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGNvbXBpbGVyT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogXCJFU05leHRcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlUmVzb2x1dGlvbjogXCJOb2RlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFsbG93U3ludGhldGljRGVmYXVsdEltcG9ydHM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbXCJ2aXRlLmNvbmZpZy50c1wiXSxcbiAgICAgICAgICAgIH0sIG51bGwsIDIpLFxuICAgICAgICB9LFxuICAgICAgICBcIi9wYWNrYWdlLmpzb25cIjoge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHNjcmlwdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV2OiBcInZpdGVcIixcbiAgICAgICAgICAgICAgICAgICAgYnVpbGQ6IFwidHNjICYmIHZpdGUgYnVpbGRcIixcbiAgICAgICAgICAgICAgICAgICAgcHJldmlldzogXCJ2aXRlIHByZXZpZXdcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICB2dWU6IFwiXjMuMi40N1wiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQHZpdGVqcy9wbHVnaW4tdnVlXCI6IFwiXjQuMC4wXCIsXG4gICAgICAgICAgICAgICAgICAgIHZpdGU6IFwiNC4xLjRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ2dWUtdHNjXCI6IFwiXjEuMi4wXCIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGVzY3JpcHQ6IFwiXjQuOS41XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZXNidWlsZC13YXNtXCI6IFwiXjAuMTcuMTJcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSwgbnVsbCwgMiksXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBtYWluOiBcIi9zcmMvQXBwLnZ1ZVwiLFxuICAgIGVudmlyb25tZW50OiBcIm5vZGVcIixcbn07XG5cbnZhciBBTkdVTEFSX1RFTVBMQVRFID0ge1xuICAgIGZpbGVzOiB7XG4gICAgICAgIFwiL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3NcIjogY29tbW9uRmlsZXNbXCIvc3R5bGVzLmNzc1wiXSxcbiAgICAgICAgXCIvc3JjL2FwcC9hcHAuY29tcG9uZW50Lmh0bWxcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8ZGl2PlxcbjxoMT57eyBoZWxsb1dvcmxkIH19PC9oMT5cXG48L2Rpdj4gICAgIFxcblwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi9zcmMvYXBwL2FwcC5jb21wb25lbnQudHNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFxcXCJAYW5ndWxhci9jb3JlXFxcIjtcXG5cXG5AQ29tcG9uZW50KHtcXG4gIHNlbGVjdG9yOiBcXFwiYXBwLXJvb3RcXFwiLFxcbiAgdGVtcGxhdGVVcmw6IFxcXCIuL2FwcC5jb21wb25lbnQuaHRtbFxcXCIsXFxuICBzdHlsZVVybHM6IFtcXFwiLi9hcHAuY29tcG9uZW50LmNzc1xcXCJdXFxufSlcXG5leHBvcnQgY2xhc3MgQXBwQ29tcG9uZW50IHtcXG4gIGhlbGxvV29ybGQgPSBcXFwiSGVsbG8gd29ybGRcXFwiO1xcbn0gICAgICAgICAgIFxcblwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi9zcmMvYXBwL2FwcC5tb2R1bGUudHNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgeyBCcm93c2VyTW9kdWxlIH0gZnJvbSBcXFwiQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3NlclxcXCI7XFxuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tIFxcXCJAYW5ndWxhci9jb3JlXFxcIjtcXG4gICAgICBcXG5pbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tIFxcXCIuL2FwcC5jb21wb25lbnRcXFwiO1xcbiAgICAgIFxcbkBOZ01vZHVsZSh7XFxuICBkZWNsYXJhdGlvbnM6IFtBcHBDb21wb25lbnRdLFxcbiAgaW1wb3J0czogW0Jyb3dzZXJNb2R1bGVdLFxcbiAgcHJvdmlkZXJzOiBbXSxcXG4gIGJvb3RzdHJhcDogW0FwcENvbXBvbmVudF1cXG59KVxcbmV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge30gICAgICAgXFxuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3NyYy9pbmRleC5odG1sXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPCFkb2N0eXBlIGh0bWw+XFxuPGh0bWwgbGFuZz1cXFwiZW5cXFwiPlxcbiAgICAgIFxcbjxoZWFkPlxcbiAgPG1ldGEgY2hhcnNldD1cXFwidXRmLThcXFwiPlxcbiAgPHRpdGxlPkFuZ3VsYXI8L3RpdGxlPlxcbiAgPGJhc2UgaHJlZj1cXFwiL1xcXCI+XFxuICAgICAgXFxuICA8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTFcXFwiPlxcbiAgPGxpbmsgcmVsPVxcXCJpY29uXFxcIiB0eXBlPVxcXCJpbWFnZS94LWljb25cXFwiIGhyZWY9XFxcImZhdmljb24uaWNvXFxcIj5cXG48L2hlYWQ+XFxuICAgICAgXFxuPGJvZHk+XFxuICAgPGFwcC1yb290PjwvYXBwLXJvb3Q+XFxuPC9ib2R5PlxcbiAgICAgIFxcbjwvaHRtbD5cXG5cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvc3JjL21haW4udHNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgeyBlbmFibGVQcm9kTW9kZSB9IGZyb20gXFxcIkBhbmd1bGFyL2NvcmVcXFwiO1xcbmltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tIFxcXCJAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWNcXFwiO1xcbiAgICAgIFxcbmltcG9ydCB7IEFwcE1vZHVsZSB9IGZyb20gXFxcIi4vYXBwL2FwcC5tb2R1bGVcXFwiOyAgICAgIFxcblxcbnBsYXRmb3JtQnJvd3NlckR5bmFtaWMoKVxcbiAgLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpXFxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xcbiAgICAgIFxcblwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi9zcmMvcG9seWZpbGxzLnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IFxcXCJjb3JlLWpzL3Byb3Bvc2Fscy9yZWZsZWN0LW1ldGFkYXRhXFxcIjsgICBcXG4gICAgICBpbXBvcnQgXFxcInpvbmUuanMvZGlzdC96b25lXFxcIjtcXG5cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvcGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJAYW5ndWxhci9jb3JlXCI6IFwiXjExLjIuMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIkBhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXJcIjogXCJeMTEuMi4wXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljXCI6IFwiXjExLjIuMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIkBhbmd1bGFyL2NvbW1vblwiOiBcIl4xMS4yLjBcIixcbiAgICAgICAgICAgICAgICAgICAgXCJAYW5ndWxhci9jb21waWxlclwiOiBcIl4xMS4yLjBcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ6b25lLmpzXCI6IFwiMC4xMS4zXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiY29yZS1qc1wiOiBcIjMuOC4zXCIsXG4gICAgICAgICAgICAgICAgICAgIHJ4anM6IFwiNi42LjNcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1haW46IFwiL3NyYy9tYWluLnRzXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIG1haW46IFwiL3NyYy9hcHAvYXBwLmNvbXBvbmVudC50c1wiLFxuICAgIGVudmlyb25tZW50OiBcImFuZ3VsYXItY2xpXCIsXG59O1xuXG52YXIgUkVBQ1RfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb21tb25GaWxlcyksIHsgXCIvQXBwLmpzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKCkge1xcbiAgcmV0dXJuIDxoMT5IZWxsbyB3b3JsZDwvaDE+XFxufVxcblwiLFxuICAgICAgICB9LCBcIi9pbmRleC5qc1wiOiB7XG4gICAgICAgICAgICBjb2RlOiBcImltcG9ydCBSZWFjdCwgeyBTdHJpY3RNb2RlIH0gZnJvbSBcXFwicmVhY3RcXFwiO1xcbmltcG9ydCB7IGNyZWF0ZVJvb3QgfSBmcm9tIFxcXCJyZWFjdC1kb20vY2xpZW50XFxcIjtcXG5pbXBvcnQgXFxcIi4vc3R5bGVzLmNzc1xcXCI7XFxuXFxuaW1wb3J0IEFwcCBmcm9tIFxcXCIuL0FwcFxcXCI7XFxuXFxuY29uc3Qgcm9vdCA9IGNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXFxcInJvb3RcXFwiKSk7XFxucm9vdC5yZW5kZXIoXFxuICA8U3RyaWN0TW9kZT5cXG4gICAgPEFwcCAvPlxcbiAgPC9TdHJpY3RNb2RlPlxcbik7XCIsXG4gICAgICAgIH0sIFwiL3B1YmxpYy9pbmRleC5odG1sXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWwgbGFuZz1cXFwiZW5cXFwiPlxcbiAgPGhlYWQ+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XFxcIlVURi04XFxcIj5cXG4gICAgPG1ldGEgbmFtZT1cXFwidmlld3BvcnRcXFwiIGNvbnRlbnQ9XFxcIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcXFwiPlxcbiAgICA8dGl0bGU+RG9jdW1lbnQ8L3RpdGxlPlxcbiAgPC9oZWFkPlxcbiAgPGJvZHk+XFxuICAgIDxkaXYgaWQ9XFxcInJvb3RcXFwiPjwvZGl2PlxcbiAgPC9ib2R5PlxcbjwvaHRtbD5cIixcbiAgICAgICAgfSwgXCIvcGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVhY3Q6IFwiXjE4LjAuMFwiLFxuICAgICAgICAgICAgICAgICAgICBcInJlYWN0LWRvbVwiOiBcIl4xOC4wLjBcIixcbiAgICAgICAgICAgICAgICAgICAgXCJyZWFjdC1zY3JpcHRzXCI6IFwiXjUuMC4wXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtYWluOiBcIi9pbmRleC5qc1wiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0gfSksXG4gICAgbWFpbjogXCIvQXBwLmpzXCIsXG4gICAgZW52aXJvbm1lbnQ6IFwiY3JlYXRlLXJlYWN0LWFwcFwiLFxufTtcblxudmFyIFJFQUNUX1RZUEVTQ1JJUFRfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb21tb25GaWxlcyksIHsgXCJ0c2NvbmZpZy5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwie1xcbiAgXFxcImluY2x1ZGVcXFwiOiBbXFxuICAgIFxcXCIuLyoqLypcXFwiXFxuICBdLFxcbiAgXFxcImNvbXBpbGVyT3B0aW9uc1xcXCI6IHtcXG4gICAgXFxcInN0cmljdFxcXCI6IHRydWUsXFxuICAgIFxcXCJlc01vZHVsZUludGVyb3BcXFwiOiB0cnVlLFxcbiAgICBcXFwibGliXFxcIjogWyBcXFwiZG9tXFxcIiwgXFxcImVzMjAxNVxcXCIgXSxcXG4gICAgXFxcImpzeFxcXCI6IFxcXCJyZWFjdC1qc3hcXFwiXFxuICB9XFxufVwiLFxuICAgICAgICB9LCBcIi9BcHAudHN4XCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKCk6IEpTWC5FbGVtZW50IHtcXG4gIHJldHVybiA8aDE+SGVsbG8gd29ybGQ8L2gxPlxcbn1cXG5cIixcbiAgICAgICAgfSwgXCIvaW5kZXgudHN4XCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IFJlYWN0LCB7IFN0cmljdE1vZGUgfSBmcm9tIFxcXCJyZWFjdFxcXCI7XFxuaW1wb3J0IHsgY3JlYXRlUm9vdCB9IGZyb20gXFxcInJlYWN0LWRvbS9jbGllbnRcXFwiO1xcbmltcG9ydCBcXFwiLi9zdHlsZXMuY3NzXFxcIjtcXG5cXG5pbXBvcnQgQXBwIGZyb20gXFxcIi4vQXBwXFxcIjtcXG5cXG5jb25zdCByb290ID0gY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXFwicm9vdFxcXCIpKTtcXG5yb290LnJlbmRlcihcXG4gIDxTdHJpY3RNb2RlPlxcbiAgICA8QXBwIC8+XFxuICA8L1N0cmljdE1vZGU+XFxuKTtcIixcbiAgICAgICAgfSwgXCIvcHVibGljL2luZGV4Lmh0bWxcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8IURPQ1RZUEUgaHRtbD5cXG48aHRtbCBsYW5nPVxcXCJlblxcXCI+XFxuICA8aGVhZD5cXG4gICAgPG1ldGEgY2hhcnNldD1cXFwiVVRGLThcXFwiPlxcbiAgICA8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFxcXCI+XFxuICAgIDx0aXRsZT5Eb2N1bWVudDwvdGl0bGU+XFxuICA8L2hlYWQ+XFxuICA8Ym9keT5cXG4gICAgPGRpdiBpZD1cXFwicm9vdFxcXCI+PC9kaXY+XFxuICA8L2JvZHk+XFxuPC9odG1sPlwiLFxuICAgICAgICB9LCBcIi9wYWNrYWdlLmpzb25cIjoge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICByZWFjdDogXCJeMTguMC4wXCIsXG4gICAgICAgICAgICAgICAgICAgIFwicmVhY3QtZG9tXCI6IFwiXjE4LjAuMFwiLFxuICAgICAgICAgICAgICAgICAgICBcInJlYWN0LXNjcmlwdHNcIjogXCJeNC4wLjBcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRldkRlcGVuZGVuY2llczoge1xuICAgICAgICAgICAgICAgICAgICBcIkB0eXBlcy9yZWFjdFwiOiBcIl4xOC4wLjBcIixcbiAgICAgICAgICAgICAgICAgICAgXCJAdHlwZXMvcmVhY3QtZG9tXCI6IFwiXjE4LjAuMFwiLFxuICAgICAgICAgICAgICAgICAgICB0eXBlc2NyaXB0OiBcIl40LjAuMFwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWFpbjogXCIvaW5kZXgudHN4XCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSB9KSxcbiAgICBtYWluOiBcIi9BcHAudHN4XCIsXG4gICAgZW52aXJvbm1lbnQ6IFwiY3JlYXRlLXJlYWN0LWFwcFwiLFxufTtcblxudmFyIFNPTElEX1RFTVBMQVRFID0ge1xuICAgIGZpbGVzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29tbW9uRmlsZXMpLCB7IFwiL0FwcC50c3hcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFxcXCJzb2xpZC1qc1xcXCI7XFxuXFxuY29uc3QgQXBwOiBDb21wb25lbnQgPSAoKSA9PiB7XFxuICByZXR1cm4gPGgxPkhlbGxvIHdvcmxkPC9oMT5cXG59O1xcblxcbmV4cG9ydCBkZWZhdWx0IEFwcDtcIixcbiAgICAgICAgfSwgXCIvaW5kZXgudHN4XCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSBcXFwic29saWQtanMvd2ViXFxcIjtcXG5pbXBvcnQgQXBwIGZyb20gXFxcIi4vQXBwXFxcIjtcXG5cXG5pbXBvcnQgXFxcIi4vc3R5bGVzLmNzc1xcXCI7XFxuXFxucmVuZGVyKCgpID0+IDxBcHAgLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcXCJhcHBcXFwiKSk7XCIsXG4gICAgICAgIH0sIFwiL2luZGV4Lmh0bWxcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8aHRtbD5cXG48aGVhZD5cXG4gIDx0aXRsZT5QYXJjZWwgU2FuZGJveDwvdGl0bGU+XFxuICA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCIgLz5cXG48L2hlYWQ+XFxuPGJvZHk+XFxuICA8ZGl2IGlkPVxcXCJhcHBcXFwiPjwvZGl2PlxcbiAgPHNjcmlwdCBzcmM9XFxcInNyYy9pbmRleC50c3hcXFwiPjwvc2NyaXB0PlxcbjwvYm9keT5cXG48L2h0bWw+XCIsXG4gICAgICAgIH0sIFwiL3BhY2thZ2UuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwic29saWQtanNcIjogXCIxLjMuMTVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1haW46IFwiL2luZGV4LnRzeFwiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0gfSksXG4gICAgbWFpbjogXCIvQXBwLnRzeFwiLFxuICAgIGVudmlyb25tZW50OiBcInNvbGlkXCIsXG59O1xuXG52YXIgU1ZFTFRFX1RFTVBMQVRFID0ge1xuICAgIGZpbGVzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29tbW9uRmlsZXMpLCB7IFwiL0FwcC5zdmVsdGVcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8c3R5bGU+XFxuICBoMSB7XFxuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xcbiAgfVxcbjwvc3R5bGU+XFxuXFxuPHNjcmlwdD5cXG4gIGxldCBuYW1lID0gJ3dvcmxkJztcXG48L3NjcmlwdD5cXG5cXG48bWFpbj5cXG4gIDxoMT5IZWxsbyB7bmFtZX08L2gxPlxcbjwvbWFpbj5cIixcbiAgICAgICAgfSwgXCIvaW5kZXguanNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgQXBwIGZyb20gXFxcIi4vQXBwLnN2ZWx0ZVxcXCI7XFxuaW1wb3J0IFxcXCIuL3N0eWxlcy5jc3NcXFwiO1xcblxcbmNvbnN0IGFwcCA9IG5ldyBBcHAoe1xcbiAgdGFyZ2V0OiBkb2N1bWVudC5ib2R5XFxufSk7XFxuXFxuZXhwb3J0IGRlZmF1bHQgYXBwO1xcbiAgICAgIFwiLFxuICAgICAgICB9LCBcIi9wdWJsaWMvaW5kZXguaHRtbFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIjwhRE9DVFlQRSBodG1sPlxcbjxodG1sPlxcbiAgPGhlYWQ+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XFxcInV0ZjhcXFwiIC8+XFxuICAgIDxtZXRhIG5hbWU9XFxcInZpZXdwb3J0XFxcIiBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGhcXFwiIC8+XFxuXFxuICAgIDx0aXRsZT5TdmVsdGUgYXBwPC90aXRsZT5cXG5cXG4gICAgPGxpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCJwdWJsaWMvYnVuZGxlLmNzc1xcXCIgLz5cXG4gIDwvaGVhZD5cXG5cXG4gIDxib2R5PlxcbiAgICA8c2NyaXB0IHNyYz1cXFwiYnVuZGxlLmpzXFxcIj48L3NjcmlwdD5cXG4gIDwvYm9keT5cXG48L2h0bWw+XCIsXG4gICAgICAgIH0sIFwiL3BhY2thZ2UuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHN2ZWx0ZTogXCJeMy4wLjBcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1haW46IFwiL2luZGV4LmpzXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSB9KSxcbiAgICBtYWluOiBcIi9BcHAuc3ZlbHRlXCIsXG4gICAgZW52aXJvbm1lbnQ6IFwic3ZlbHRlXCIsXG59O1xuXG52YXIgVEVTVF9UWVBFU0NSSVBUX1RFTVBMQVRFID0ge1xuICAgIGZpbGVzOiB7XG4gICAgICAgIFwidHNjb25maWcuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIntcXG4gIFxcXCJpbmNsdWRlXFxcIjogW1xcbiAgICBcXFwiLi8qKi8qXFxcIlxcbiAgXSxcXG4gIFxcXCJjb21waWxlck9wdGlvbnNcXFwiOiB7XFxuICAgIFxcXCJzdHJpY3RcXFwiOiB0cnVlLFxcbiAgICBcXFwiZXNNb2R1bGVJbnRlcm9wXFxcIjogdHJ1ZSxcXG4gICAgXFxcImxpYlxcXCI6IFsgXFxcImRvbVxcXCIsIFxcXCJlczIwMTVcXFwiIF0sXFxuICAgIFxcXCJqc3hcXFwiOiBcXFwicmVhY3QtanN4XFxcIlxcbiAgfVxcbn1cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvYWRkLnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiZXhwb3J0IGNvbnN0IGFkZCA9IChhOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciA9PiBhICsgYjtcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvYWRkLnRlc3QudHNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgeyBhZGQgfSBmcm9tICcuL2FkZCc7XFxuXFxuZGVzY3JpYmUoJ2FkZCcsICgpID0+IHtcXG4gIHRlc3QoJ0NvbW11dGF0aXZlIExhdyBvZiBBZGRpdGlvbicsICgpID0+IHtcXG4gICAgZXhwZWN0KGFkZCgxLCAyKSkudG9CZShhZGQoMiwgMSkpO1xcbiAgfSk7XFxufSk7XCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwicGFja2FnZS5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHt9LFxuICAgICAgICAgICAgICAgIGRldkRlcGVuZGVuY2llczogeyB0eXBlc2NyaXB0OiBcIl40LjAuMFwiIH0sXG4gICAgICAgICAgICAgICAgbWFpbjogXCIvYWRkLnRzXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIG1haW46IFwiL2FkZC50ZXN0LnRzXCIsXG4gICAgZW52aXJvbm1lbnQ6IFwicGFyY2VsXCIsXG4gICAgbW9kZTogXCJ0ZXN0c1wiLFxufTtcblxudmFyIFZBTklMTEFfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb21tb25GaWxlcyksIHsgXCIvaW5kZXguanNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgXFxcIi4vc3R5bGVzLmNzc1xcXCI7XFxuXFxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXFxcImFwcFxcXCIpLmlubmVySFRNTCA9IGBcXG48aDE+SGVsbG8gd29ybGQ8L2gxPlxcbmA7XFxuXCIsXG4gICAgICAgIH0sIFwiL2luZGV4Lmh0bWxcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8IURPQ1RZUEUgaHRtbD5cXG48aHRtbD5cXG5cXG48aGVhZD5cXG4gIDx0aXRsZT5QYXJjZWwgU2FuZGJveDwvdGl0bGU+XFxuICA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCIgLz5cXG48L2hlYWQ+XFxuXFxuPGJvZHk+XFxuICA8ZGl2IGlkPVxcXCJhcHBcXFwiPjwvZGl2PlxcblxcbiAgPHNjcmlwdCBzcmM9XFxcImluZGV4LmpzXFxcIj5cXG4gIDwvc2NyaXB0PlxcbjwvYm9keT5cXG5cXG48L2h0bWw+XCIsXG4gICAgICAgIH0sIFwiL3BhY2thZ2UuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB7fSxcbiAgICAgICAgICAgICAgICBtYWluOiBcIi9pbmRleC5qc1wiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0gfSksXG4gICAgbWFpbjogXCIvaW5kZXguanNcIixcbiAgICBlbnZpcm9ubWVudDogXCJwYXJjZWxcIixcbn07XG5cbnZhciBWQU5JTExBX1RZUEVTQ1JJUFRfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb21tb25GaWxlcyksIHsgXCJ0c2NvbmZpZy5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwie1xcbiAgXFxcImNvbXBpbGVyT3B0aW9uc1xcXCI6IHtcXG4gICAgXFxcInN0cmljdFxcXCI6IHRydWUsXFxuICAgIFxcXCJtb2R1bGVcXFwiOiBcXFwiY29tbW9uanNcXFwiLFxcbiAgICBcXFwianN4XFxcIjogXFxcInByZXNlcnZlXFxcIixcXG4gICAgXFxcImVzTW9kdWxlSW50ZXJvcFxcXCI6IHRydWUsXFxuICAgIFxcXCJzb3VyY2VNYXBcXFwiOiB0cnVlLFxcbiAgICBcXFwiYWxsb3dKc1xcXCI6IHRydWUsXFxuICAgIFxcXCJsaWJcXFwiOiBbXFxuICAgICAgXFxcImVzNlxcXCIsXFxuICAgICAgXFxcImRvbVxcXCJcXG4gICAgXSxcXG4gICAgXFxcInJvb3REaXJcXFwiOiBcXFwic3JjXFxcIixcXG4gICAgXFxcIm1vZHVsZVJlc29sdXRpb25cXFwiOiBcXFwibm9kZVxcXCJcXG4gIH1cXG59XCIsXG4gICAgICAgIH0sIFwiL2luZGV4LnRzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IFxcXCIuL3N0eWxlcy5jc3NcXFwiO1xcblxcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcXCJhcHBcXFwiKS5pbm5lckhUTUwgPSBgXFxuPGgxPkhlbGxvIHdvcmxkPC9oMT5cXG5gO1xcblwiLFxuICAgICAgICB9LCBcIi9pbmRleC5odG1sXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWw+XFxuXFxuPGhlYWQ+XFxuICA8dGl0bGU+UGFyY2VsIFNhbmRib3g8L3RpdGxlPlxcbiAgPG1ldGEgY2hhcnNldD1cXFwiVVRGLThcXFwiIC8+XFxuPC9oZWFkPlxcblxcbjxib2R5PlxcbiAgPGRpdiBpZD1cXFwiYXBwXFxcIj48L2Rpdj5cXG5cXG4gIDxzY3JpcHQgc3JjPVxcXCJpbmRleC50c1xcXCI+XFxuICA8L3NjcmlwdD5cXG48L2JvZHk+XFxuXFxuPC9odG1sPlwiLFxuICAgICAgICB9LCBcIi9wYWNrYWdlLmpzb25cIjoge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczoge30sXG4gICAgICAgICAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVzY3JpcHQ6IFwiXjQuMC4wXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtYWluOiBcIi9pbmRleC50c1wiLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0gfSksXG4gICAgbWFpbjogXCIvaW5kZXgudHNcIixcbiAgICBlbnZpcm9ubWVudDogXCJwYXJjZWxcIixcbn07XG5cbnZhciBWVUVfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IHtcbiAgICAgICAgXCIvc3JjL3N0eWxlcy5jc3NcIjogY29tbW9uRmlsZXNbXCIvc3R5bGVzLmNzc1wiXSxcbiAgICAgICAgXCIvc3JjL0FwcC52dWVcIjoge1xuICAgICAgICAgICAgY29kZTogXCI8dGVtcGxhdGU+XFxuICA8aDE+SGVsbG8ge3sgbXNnIH19PC9oMT5cXG48L3RlbXBsYXRlPlxcblxcbjxzY3JpcHQgc2V0dXA+XFxuaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJztcXG5jb25zdCBtc2cgPSByZWYoJ3dvcmxkJyk7XFxuPC9zY3JpcHQ+XCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3NyYy9tYWluLmpzXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW1wb3J0IHsgY3JlYXRlQXBwIH0gZnJvbSAndnVlJ1xcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAudnVlJ1xcbmltcG9ydCBcXFwiLi9zdHlsZXMuY3NzXFxcIjtcXG5cXG5jcmVhdGVBcHAoQXBwKS5tb3VudCgnI2FwcCcpXFxuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiL3B1YmxpYy9pbmRleC5odG1sXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWwgbGFuZz1cXFwiZW5cXFwiPlxcbiAgPGhlYWQ+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XFxcInV0Zi04XFxcIiAvPlxcbiAgICA8bWV0YSBodHRwLWVxdWl2PVxcXCJYLVVBLUNvbXBhdGlibGVcXFwiIGNvbnRlbnQ9XFxcIklFPWVkZ2VcXFwiIC8+XFxuICAgIDxtZXRhIG5hbWU9XFxcInZpZXdwb3J0XFxcIiBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGgsaW5pdGlhbC1zY2FsZT0xLjBcXFwiIC8+XFxuICAgIDx0aXRsZT5jb2Rlc2FuZGJveDwvdGl0bGU+XFxuICA8L2hlYWQ+XFxuICA8Ym9keT5cXG4gICAgPG5vc2NyaXB0PlxcbiAgICAgIDxzdHJvbmdcXG4gICAgICAgID5XZSdyZSBzb3JyeSBidXQgY29kZXNhbmRib3ggZG9lc24ndCB3b3JrIHByb3Blcmx5IHdpdGhvdXQgSmF2YVNjcmlwdFxcbiAgICAgICAgZW5hYmxlZC4gUGxlYXNlIGVuYWJsZSBpdCB0byBjb250aW51ZS48L3N0cm9uZ1xcbiAgICAgID5cXG4gICAgPC9ub3NjcmlwdD5cXG4gICAgPGRpdiBpZD1cXFwiYXBwXFxcIj48L2Rpdj5cXG4gICAgPCEtLSBidWlsdCBmaWxlcyB3aWxsIGJlIGF1dG8gaW5qZWN0ZWQgLS0+XFxuICA8L2JvZHk+XFxuPC9odG1sPlxcblwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi9wYWNrYWdlLmpzb25cIjoge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IFwidnVlM1wiLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IFwiMC4xLjBcIixcbiAgICAgICAgICAgICAgICBwcml2YXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1haW46IFwiL3NyYy9tYWluLmpzXCIsXG4gICAgICAgICAgICAgICAgc2NyaXB0czoge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZTogXCJ2dWUtY2xpLXNlcnZpY2Ugc2VydmVcIixcbiAgICAgICAgICAgICAgICAgICAgYnVpbGQ6IFwidnVlLWNsaS1zZXJ2aWNlIGJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJjb3JlLWpzXCI6IFwiXjMuMjYuMVwiLFxuICAgICAgICAgICAgICAgICAgICB2dWU6IFwiXjMuMi40NVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQHZ1ZS9jbGktcGx1Z2luLWJhYmVsXCI6IFwiXjUuMC44XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiQHZ1ZS9jbGktc2VydmljZVwiOiBcIl41LjAuOFwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIG1haW46IFwiL3NyYy9BcHAudnVlXCIsXG4gICAgZW52aXJvbm1lbnQ6IFwidnVlLWNsaVwiLFxufTtcblxudmFyIFZVRV9UU19URU1QTEFURSA9IHtcbiAgICBmaWxlczoge1xuICAgICAgICBcIi9zcmMvc3R5bGVzLmNzc1wiOiBjb21tb25GaWxlc1tcIi9zdHlsZXMuY3NzXCJdLFxuICAgICAgICBcIi9zcmMvQXBwLnZ1ZVwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIjx0ZW1wbGF0ZT5cXG4gIDxoMT5IZWxsbyB7eyBtc2cgfX08L2gxPlxcbjwvdGVtcGxhdGU+XFxuXFxuPHNjcmlwdCBzZXR1cCBsYW5nPVxcXCJ0c1xcXCI+XFxuaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJztcXG5jb25zdCBtc2cgPSByZWY8c3RyaW5nPignd29ybGQnKTtcXG48L3NjcmlwdD5cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvc3JjL21haW4udHNcIjoge1xuICAgICAgICAgICAgY29kZTogXCJpbXBvcnQgeyBjcmVhdGVBcHAgfSBmcm9tICd2dWUnXFxuaW1wb3J0IEFwcCBmcm9tICcuL0FwcC52dWUnXFxuaW1wb3J0IFxcXCIuL3N0eWxlcy5jc3NcXFwiO1xcblxcbmNyZWF0ZUFwcChBcHApLm1vdW50KCcjYXBwJylcXG5cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIvc3JjL3NoaW1zLXZ1ZS5kLnRzXCI6IFwiLyogZXNsaW50LWRpc2FibGUgKi9cXG5kZWNsYXJlIG1vZHVsZSBcXFwiKi52dWVcXFwiIHtcXG4gIGltcG9ydCB0eXBlIHsgRGVmaW5lQ29tcG9uZW50IH0gZnJvbSBcXFwidnVlXFxcIjtcXG4gIGNvbnN0IGNvbXBvbmVudDogRGVmaW5lQ29tcG9uZW50PHt9LCB7fSwgYW55PjtcXG4gIGV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudDtcXG59XCIsXG4gICAgICAgIFwiL3B1YmxpYy9pbmRleC5odG1sXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWwgbGFuZz1cXFwiZW5cXFwiPlxcbiAgPGhlYWQ+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XFxcInV0Zi04XFxcIiAvPlxcbiAgICA8bWV0YSBodHRwLWVxdWl2PVxcXCJYLVVBLUNvbXBhdGlibGVcXFwiIGNvbnRlbnQ9XFxcIklFPWVkZ2VcXFwiIC8+XFxuICAgIDxtZXRhIG5hbWU9XFxcInZpZXdwb3J0XFxcIiBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGgsaW5pdGlhbC1zY2FsZT0xLjBcXFwiIC8+XFxuICAgIDx0aXRsZT5jb2Rlc2FuZGJveDwvdGl0bGU+XFxuICA8L2hlYWQ+XFxuICA8Ym9keT5cXG4gICAgPG5vc2NyaXB0PlxcbiAgICAgIDxzdHJvbmdcXG4gICAgICAgID5XZSdyZSBzb3JyeSBidXQgY29kZXNhbmRib3ggZG9lc24ndCB3b3JrIHByb3Blcmx5IHdpdGhvdXQgSmF2YVNjcmlwdFxcbiAgICAgICAgZW5hYmxlZC4gUGxlYXNlIGVuYWJsZSBpdCB0byBjb250aW51ZS48L3N0cm9uZ1xcbiAgICAgID5cXG4gICAgPC9ub3NjcmlwdD5cXG4gICAgPGRpdiBpZD1cXFwiYXBwXFxcIj48L2Rpdj5cXG4gICAgPCEtLSBidWlsdCBmaWxlcyB3aWxsIGJlIGF1dG8gaW5qZWN0ZWQgLS0+XFxuICA8L2JvZHk+XFxuPC9odG1sPlxcblwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi9wYWNrYWdlLmpzb25cIjoge1xuICAgICAgICAgICAgY29kZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IFwidnVlMy10c1wiLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IFwiMC4xLjBcIixcbiAgICAgICAgICAgICAgICBwcml2YXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1haW46IFwiL3NyYy9tYWluLnRzXCIsXG4gICAgICAgICAgICAgICAgc2NyaXB0czoge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZTogXCJ2dWUtY2xpLXNlcnZpY2Ugc2VydmVcIixcbiAgICAgICAgICAgICAgICAgICAgYnVpbGQ6IFwidnVlLWNsaS1zZXJ2aWNlIGJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJjb3JlLWpzXCI6IFwiXjMuMjYuMVwiLFxuICAgICAgICAgICAgICAgICAgICB2dWU6IFwiXjMuMi40NVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQHZ1ZS9jbGktcGx1Z2luLWJhYmVsXCI6IFwiXjUuMC44XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiQHZ1ZS9jbGktcGx1Z2luLXR5cGVzY3JpcHRcIjogXCJeNS4wLjhcIixcbiAgICAgICAgICAgICAgICAgICAgXCJAdnVlL2NsaS1zZXJ2aWNlXCI6IFwiXjUuMC44XCIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGVzY3JpcHQ6IFwiXjQuOS4zXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9LFxuICAgICAgICBcIi90c2NvbmZpZy5qc29uXCI6IHtcbiAgICAgICAgICAgIGNvZGU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb21waWxlck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcImVzbmV4dFwiLFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGU6IFwiZXNuZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAganN4OiBcInByZXNlcnZlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZVJlc29sdXRpb246IFwibm9kZVwiLFxuICAgICAgICAgICAgICAgICAgICBleHBlcmltZW50YWxEZWNvcmF0b3JzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBza2lwTGliQ2hlY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVzTW9kdWxlSW50ZXJvcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dTeW50aGV0aWNEZWZhdWx0SW1wb3J0czogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VDb25zaXN0ZW50Q2FzaW5nSW5GaWxlTmFtZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHVzZURlZmluZUZvckNsYXNzRmllbGRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VNYXA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBiYXNlVXJsOiBcIi5cIixcbiAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFtcIndlYnBhY2stZW52XCJdLFxuICAgICAgICAgICAgICAgICAgICBwYXRoczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJALypcIjogW1wic3JjLypcIl0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxpYjogW1wiZXNuZXh0XCIsIFwiZG9tXCIsIFwiZG9tLml0ZXJhYmxlXCIsIFwic2NyaXB0aG9zdFwiXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJzcmMvKiovKi50c1wiLFxuICAgICAgICAgICAgICAgICAgICBcInNyYy8qKi8qLnRzeFwiLFxuICAgICAgICAgICAgICAgICAgICBcInNyYy8qKi8qLnZ1ZVwiLFxuICAgICAgICAgICAgICAgICAgICBcInRlc3RzLyoqLyoudHNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0ZXN0cy8qKi8qLnRzeFwiLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogW1wibm9kZV9tb2R1bGVzXCJdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBtYWluOiBcIi9zcmMvQXBwLnZ1ZVwiLFxuICAgIGVudmlyb25tZW50OiBcInZ1ZS1jbGlcIixcbn07XG5cbnZhciBTVEFUSUNfVEVNUExBVEUgPSB7XG4gICAgZmlsZXM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb21tb25GaWxlcyksIHsgXCIvaW5kZXguaHRtbFwiOiB7XG4gICAgICAgICAgICBjb2RlOiBcIjwhRE9DVFlQRSBodG1sPlxcbjxodG1sPlxcblxcbjxoZWFkPlxcbiAgPHRpdGxlPlBhcmNlbCBTYW5kYm94PC90aXRsZT5cXG4gIDxtZXRhIGNoYXJzZXQ9XFxcIlVURi04XFxcIiAvPlxcbiAgPGxpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCIvc3R5bGVzLmNzc1xcXCIgLz5cXG48L2hlYWQ+XFxuXFxuPGJvZHk+XFxuICA8aDE+SGVsbG8gd29ybGQ8L2gxPlxcbjwvYm9keT5cXG5cXG48L2h0bWw+XCIsXG4gICAgICAgIH0sIFwiL3BhY2thZ2UuanNvblwiOiB7XG4gICAgICAgICAgICBjb2RlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB7fSxcbiAgICAgICAgICAgICAgICBtYWluOiBcIi9pbmRleC5odG1sXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSB9KSxcbiAgICBtYWluOiBcIi9pbmRleC5odG1sXCIsXG4gICAgZW52aXJvbm1lbnQ6IFwic3RhdGljXCIsXG59O1xuXG52YXIgU0FOREJPWF9URU1QTEFURVMgPSB7XG4gICAgc3RhdGljOiBTVEFUSUNfVEVNUExBVEUsXG4gICAgYW5ndWxhcjogQU5HVUxBUl9URU1QTEFURSxcbiAgICByZWFjdDogUkVBQ1RfVEVNUExBVEUsXG4gICAgXCJyZWFjdC10c1wiOiBSRUFDVF9UWVBFU0NSSVBUX1RFTVBMQVRFLFxuICAgIHNvbGlkOiBTT0xJRF9URU1QTEFURSxcbiAgICBzdmVsdGU6IFNWRUxURV9URU1QTEFURSxcbiAgICBcInRlc3QtdHNcIjogVEVTVF9UWVBFU0NSSVBUX1RFTVBMQVRFLFxuICAgIFwidmFuaWxsYS10c1wiOiBWQU5JTExBX1RZUEVTQ1JJUFRfVEVNUExBVEUsXG4gICAgdmFuaWxsYTogVkFOSUxMQV9URU1QTEFURSxcbiAgICB2dWU6IFZVRV9URU1QTEFURSxcbiAgICBcInZ1ZS10c1wiOiBWVUVfVFNfVEVNUExBVEUsXG4gICAgbm9kZTogTk9ERV9URU1QTEFURSxcbiAgICBuZXh0anM6IE5FWFRKU19URU1QTEFURSxcbiAgICB2aXRlOiBWSVRFX1RFTVBMQVRFLFxuICAgIFwidml0ZS1yZWFjdFwiOiBWSVRFX1JFQUNUX1RFTVBMQVRFLFxuICAgIFwidml0ZS1yZWFjdC10c1wiOiBWSVRFX1JFQUNUX1RTX1RFTVBMQVRFLFxuICAgIFwidml0ZS1wcmVhY3RcIjogVklURV9QUkVBQ1RfVEVNUExBVEUsXG4gICAgXCJ2aXRlLXByZWFjdC10c1wiOiBWSVRFX1BSRUFDVF9UU19URU1QTEFURSxcbiAgICBcInZpdGUtdnVlXCI6IFZJVEVfVlVFX1RFTVBMQVRFLFxuICAgIFwidml0ZS12dWUtdHNcIjogVklURV9WVUVfVFNfVEVNUExBVEUsXG4gICAgXCJ2aXRlLXN2ZWx0ZVwiOiBWSVRFX1NWRUxURV9URU1QTEFURSxcbiAgICBcInZpdGUtc3ZlbHRlLXRzXCI6IFZJVEVfU1ZFTFRFX1RTX1RFTVBMQVRFLFxuICAgIGFzdHJvOiBBU1RST19URU1QTEFURSxcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN0YW5kYXJkIHNhbmRwYWNrIHN0YXRlIGdpdmVuIHRoZSBzZXR1cCxcbiAqIG9wdGlvbnMsIGFuZCBmaWxlcyBwcm9wcy4gVXNpbmcgdGhpcyBmdW5jdGlvbiBpc1xuICogdGhlIHJlbGlhYmxlIHdheSB0byBlbnN1cmUgYSBjb25zaXN0ZW50IGFuZCBwcmVkaWN0YWJsZVxuICogc2FuZHBhY2stY29udGVudCB0aHJvdWdob3V0IGFwcGxpY2F0aW9uXG4gKi9cbnZhciBnZXRTYW5kcGFja1N0YXRlRnJvbVByb3BzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgdmFyIG5vcm1hbGl6ZWRGaWxlc1BhdGggPSBub3JtYWxpemVQYXRoKHByb3BzLmZpbGVzKTtcbiAgICAvLyBNZXJnZSBwcmVkZWZpbmVkIHRlbXBsYXRlIHdpdGggY3VzdG9tIHNldHVwXG4gICAgdmFyIHByb2plY3RTZXR1cCA9IGNvbWJpbmVUZW1wbGF0ZUZpbGVzVG9TZXR1cCh7XG4gICAgICAgIHRlbXBsYXRlOiBwcm9wcy50ZW1wbGF0ZSxcbiAgICAgICAgY3VzdG9tU2V0dXA6IHByb3BzLmN1c3RvbVNldHVwLFxuICAgICAgICBmaWxlczogbm9ybWFsaXplZEZpbGVzUGF0aCxcbiAgICB9KTtcbiAgICAvLyB2aXNpYmxlRmlsZXMgYW5kIGFjdGl2ZUZpbGUgb3ZlcnJpZGUgdGhlIHNldHVwIGZsYWdzXG4gICAgdmFyIHZpc2libGVGaWxlcyA9IG5vcm1hbGl6ZVBhdGgoKF9iID0gKF9hID0gcHJvcHMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZpc2libGVGaWxlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10pO1xuICAgIHZhciBhY3RpdmVGaWxlID0gKChfYyA9IHByb3BzLm9wdGlvbnMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5hY3RpdmVGaWxlKVxuICAgICAgICA/IHJlc29sdmVGaWxlKChfZCA9IHByb3BzLm9wdGlvbnMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5hY3RpdmVGaWxlLCBwcm9qZWN0U2V0dXAuZmlsZXMpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh2aXNpYmxlRmlsZXMubGVuZ3RoID09PSAwICYmIG5vcm1hbGl6ZWRGaWxlc1BhdGgpIHtcbiAgICAgICAgLy8gZXh0cmFjdCBvcGVuIGFuZCBhY3RpdmUgZmlsZXMgZnJvbSB0aGUgY3VzdG9tIGlucHV0IGZpbGVzXG4gICAgICAgIE9iamVjdC5rZXlzKG5vcm1hbGl6ZWRGaWxlc1BhdGgpLmZvckVhY2goZnVuY3Rpb24gKGZpbGVQYXRoKSB7XG4gICAgICAgICAgICB2YXIgZmlsZSA9IG5vcm1hbGl6ZWRGaWxlc1BhdGhbZmlsZVBhdGhdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdmlzaWJsZUZpbGVzLnB1c2goZmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYWN0aXZlRmlsZSAmJiBmaWxlLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUZpbGUgPSBmaWxlUGF0aDtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5oaWRkZW4gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWN0aXZlIGZpbGUgbmVlZHMgdG8gYmUgYXZhaWxhYmxlIGV2ZW4gaWYgc29tZW9uZSBzZXRzIGl0IGFzIGhpZGRlbiBieSBhY2NpZGVudFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlRmlsZXMucHVzaChmaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmaWxlLmhpZGRlbikge1xuICAgICAgICAgICAgICAgIHZpc2libGVGaWxlcy5wdXNoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh2aXNpYmxlRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIElmIG5vIGZpbGVzIGFyZSByZWNlaXZlZCwgdXNlIHRoZSBwcm9qZWN0IHNldHVwIC8gdGVtcGxhdGVcbiAgICAgICAgdmlzaWJsZUZpbGVzID0gW3Byb2plY3RTZXR1cC5tYWluXTtcbiAgICB9XG4gICAgLy8gTWFrZSBzdXJlIGl0IHJlc29sdmVzIHRoZSBlbnRyeSBmaWxlXG4gICAgaWYgKHByb2plY3RTZXR1cC5lbnRyeSAmJiAhcHJvamVjdFNldHVwLmZpbGVzW3Byb2plY3RTZXR1cC5lbnRyeV0pIHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBwcm9qZWN0U2V0dXAuZW50cnkgPSByZXNvbHZlRmlsZShwcm9qZWN0U2V0dXAuZW50cnksIHByb2plY3RTZXR1cC5maWxlcyk7XG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICB9XG4gICAgaWYgKCFhY3RpdmVGaWxlICYmIHByb2plY3RTZXR1cC5tYWluKSB7XG4gICAgICAgIGFjdGl2ZUZpbGUgPSBwcm9qZWN0U2V0dXAubWFpbjtcbiAgICB9XG4gICAgLy8gSWYgbm8gYWN0aXZlRmlsZSBpcyBzcGVjaWZpZWQsIHVzZSB0aGUgZmlyc3Qgb3BlbiBmaWxlXG4gICAgaWYgKCFhY3RpdmVGaWxlIHx8ICFwcm9qZWN0U2V0dXAuZmlsZXNbYWN0aXZlRmlsZV0pIHtcbiAgICAgICAgYWN0aXZlRmlsZSA9IHZpc2libGVGaWxlc1swXTtcbiAgICB9XG4gICAgLy8gSWYgZm9yIHdoYXRldmVyIHJlYXNvbiB0aGUgYWN0aXZlIHBhdGggd2FzIG5vdCBzZXQgYXMgb3Blbiwgc2V0IGl0XG4gICAgaWYgKCF2aXNpYmxlRmlsZXMuaW5jbHVkZXMoYWN0aXZlRmlsZSkpIHtcbiAgICAgICAgdmlzaWJsZUZpbGVzLnB1c2goYWN0aXZlRmlsZSk7XG4gICAgfVxuICAgIHZhciBmaWxlcyA9IGFkZFBhY2thZ2VKU09OSWZOZWVkZWQocHJvamVjdFNldHVwLmZpbGVzLCAoX2UgPSBwcm9qZWN0U2V0dXAuZGVwZW5kZW5jaWVzKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiB7fSwgKF9mID0gcHJvamVjdFNldHVwLmRldkRlcGVuZGVuY2llcykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDoge30sIHByb2plY3RTZXR1cC5lbnRyeSk7XG4gICAgdmFyIGV4aXN0T3BlblBhdGggPSB2aXNpYmxlRmlsZXMuZmlsdGVyKGZ1bmN0aW9uIChwYXRoKSB7IHJldHVybiBmaWxlc1twYXRoXTsgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmlzaWJsZUZpbGVzOiBleGlzdE9wZW5QYXRoLFxuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuICAgICAgICBhY3RpdmVGaWxlOiBhY3RpdmVGaWxlLFxuICAgICAgICBmaWxlczogZmlsZXMsXG4gICAgICAgIGVudmlyb25tZW50OiBwcm9qZWN0U2V0dXAuZW52aXJvbm1lbnQsXG4gICAgICAgIHNob3VsZFVwZGF0ZVByZXZpZXc6IHRydWUsXG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIGEgZmlsZSB0cmVlIGFuZCBhIGZpbGUsIGl0IHVzZXMgYSBjb3VwbGUgb2YgcnVsZXNcbiAqIHRvIHR3ZWFrIHRoZSBmaWxlbmFtZSB0byBtYXRjaCB3aXRoIG9uZSBvZiB0aGUgaW5zaWRlIG9mIGZpbGUgdHJlZVxuICpcbiAqIC0gQWRkcyB0aGUgbGVhZGluZyBzbGFzaDtcbiAqIC0gVHJpZXMgdG8gZmluZCB0aGUgc2FtZSBmaWxlbmFtZSB3aXRoIGRpZmZlcmVudCBleHRlbnNpb25zIChqcyBvbmx5KTtcbiAqIC0gUmV0dXJucyBgbnVsbGAgaWYgaXQgZG9lc24ndCBzYXRpc2Z5IGFueSBydWxlXG4gKi9cbnZhciByZXNvbHZlRmlsZSA9IGZ1bmN0aW9uIChwYXRoLCBmaWxlcykge1xuICAgIHZhciBub3JtYWxpemVkRmlsZXNQYXRoID0gbm9ybWFsaXplUGF0aChmaWxlcyk7XG4gICAgdmFyIG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplUGF0aChwYXRoKTtcbiAgICBpZiAobm9ybWFsaXplZFBhdGggaW4gbm9ybWFsaXplZEZpbGVzUGF0aCkge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplZFBhdGg7XG4gICAgfVxuICAgIGlmICghcGF0aCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIHJlc29sdmVkUGF0aCA9IG51bGw7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgc3RyYXRlZ2llcyA9IFtcIi5qc1wiLCBcIi5qc3hcIiwgXCIudHNcIiwgXCIudHN4XCJdO1xuICAgIHdoaWxlICghcmVzb2x2ZWRQYXRoICYmIGluZGV4IDwgc3RyYXRlZ2llcy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHJlbW92ZUV4dGVuc2lvbiA9IG5vcm1hbGl6ZWRQYXRoLnNwbGl0KFwiLlwiKVswXTtcbiAgICAgICAgdmFyIGF0dGVtcHRQYXRoID0gXCJcIi5jb25jYXQocmVtb3ZlRXh0ZW5zaW9uKS5jb25jYXQoc3RyYXRlZ2llc1tpbmRleF0pO1xuICAgICAgICBpZiAobm9ybWFsaXplZEZpbGVzUGF0aFthdHRlbXB0UGF0aF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVzb2x2ZWRQYXRoID0gYXR0ZW1wdFBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG4gICAgcmV0dXJuIHJlc29sdmVkUGF0aDtcbn07XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBpcyBwcmVkZWZpbmVkIChlZzogcmVhY3QsIHZ1ZSwgdmFuaWxsYSlcbiAqIFRoZSBzZXR1cCBjYW4gb3ZlcndyaXRlIGFueXRoaW5nIGZyb20gdGhlIHRlbXBsYXRlXG4gKiAoZWc6IGZpbGVzLCBkZXBlbmRlbmNpZXMsIGVudmlyb25tZW50LCBldGMuKVxuICovXG52YXIgY29tYmluZVRlbXBsYXRlRmlsZXNUb1NldHVwID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGZpbGVzID0gX2EuZmlsZXMsIHRlbXBsYXRlID0gX2EudGVtcGxhdGUsIGN1c3RvbVNldHVwID0gX2EuY3VzdG9tU2V0dXA7XG4gICAgaWYgKCF0ZW1wbGF0ZSkge1xuICAgICAgICAvLyBJZiBub3QgaW5wdXQsIGRlZmF1bHQgdG8gdmFuaWxsYVxuICAgICAgICBpZiAoIWN1c3RvbVNldHVwKSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdFRlbXBsYXRlID0gU0FOREJPWF9URU1QTEFURVMudmFuaWxsYTtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGVmYXVsdFRlbXBsYXRlKSwgeyBmaWxlczogX19hc3NpZ24oX19hc3NpZ24oe30sIGRlZmF1bHRUZW1wbGF0ZS5maWxlcyksIGNvbnZlcnRlZEZpbGVzVG9CdW5kbGVyRmlsZXMoZmlsZXMpKSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpbGVzIHx8IE9iamVjdC5rZXlzKGZpbGVzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIltzYW5kcGFjay1yZWFjdF06IHdpdGhvdXQgYSB0ZW1wbGF0ZSwgeW91IG11c3QgcGFzcyBhdCBsZWFzdCBvbmUgZmlsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBub3QgdGVtcGxhdGUgc3BlY2lmaWVkLCB1c2UgdGhlIHNldHVwIGVudGlyZWx5XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3VzdG9tU2V0dXApLCB7IGZpbGVzOiBjb252ZXJ0ZWRGaWxlc1RvQnVuZGxlckZpbGVzKGZpbGVzKSB9KTtcbiAgICB9XG4gICAgdmFyIGJhc2VUZW1wbGF0ZSA9IFNBTkRCT1hfVEVNUExBVEVTW3RlbXBsYXRlXTtcbiAgICBpZiAoIWJhc2VUZW1wbGF0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJbc2FuZHBhY2stcmVhY3RdOiBpbnZhbGlkIHRlbXBsYXRlIFxcXCJcIi5jb25jYXQodGVtcGxhdGUsIFwiXFxcIiBwcm92aWRlZFwiKSk7XG4gICAgfVxuICAgIC8vIElmIG5vIHNldHVwIGFuZCBub3QgZmlsZXMsIHRoZSB0ZW1wbGF0ZSBpcyB1c2VkIGVudGlyZWx5XG4gICAgaWYgKCFjdXN0b21TZXR1cCAmJiAhZmlsZXMpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VUZW1wbGF0ZTtcbiAgICB9XG4gICAgLy8gTWVyZ2UgdGhlIHNldHVwIG9uIHRvcCBvZiB0aGUgdGVtcGxhdGVcbiAgICByZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlucHV0IHNldHVwIG1pZ2h0IGhhdmUgZmlsZXMgaW4gdGhlIHNpbXBsZSBmb3JtIFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbiAgICAgICAgICogc28gd2UgY29udmVydCB0aGVtIHRvIHRoZSBzYW5kYm94IHRlbXBsYXRlIGZvcm1hdFxuICAgICAgICAgKi9cbiAgICAgICAgZmlsZXM6IGNvbnZlcnRlZEZpbGVzVG9CdW5kbGVyRmlsZXMoX19hc3NpZ24oX19hc3NpZ24oe30sIGJhc2VUZW1wbGF0ZS5maWxlcyksIGZpbGVzKSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXJnZSB0ZW1wbGF0ZSBkZXBlbmRlbmNpZXMgYW5kIHVzZXIgY3VzdG9tIGRlcGVuZGVuY2llcy5cbiAgICAgICAgICogQXMgYSBydWxlLCB0aGUgY3VzdG9tIGRlcGVuZGVuY2llcyBtdXN0IG92ZXJ3cml0ZSB0aGUgdGVtcGxhdGUgb25lcy5cbiAgICAgICAgICovXG4gICAgICAgIGRlcGVuZGVuY2llczogX19hc3NpZ24oX19hc3NpZ24oe30sIGJhc2VUZW1wbGF0ZS5kZXBlbmRlbmNpZXMpLCBjdXN0b21TZXR1cCA9PT0gbnVsbCB8fCBjdXN0b21TZXR1cCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VzdG9tU2V0dXAuZGVwZW5kZW5jaWVzKSxcbiAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYmFzZVRlbXBsYXRlLmRldkRlcGVuZGVuY2llcyksIGN1c3RvbVNldHVwID09PSBudWxsIHx8IGN1c3RvbVNldHVwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXN0b21TZXR1cC5kZXZEZXBlbmRlbmNpZXMpLFxuICAgICAgICBlbnRyeTogbm9ybWFsaXplUGF0aChjdXN0b21TZXR1cCA9PT0gbnVsbCB8fCBjdXN0b21TZXR1cCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VzdG9tU2V0dXAuZW50cnkpLFxuICAgICAgICBtYWluOiBiYXNlVGVtcGxhdGUubWFpbixcbiAgICAgICAgZW52aXJvbm1lbnQ6IChjdXN0b21TZXR1cCA9PT0gbnVsbCB8fCBjdXN0b21TZXR1cCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VzdG9tU2V0dXAuZW52aXJvbm1lbnQpIHx8IGJhc2VUZW1wbGF0ZS5lbnZpcm9ubWVudCxcbiAgICB9O1xufTtcbi8qKlxuICogVHJhbnNmb3JtIGFuIHJlZ3VsYXIgb2JqZWN0LCB3aGljaCBjb250YWluIGZpbGVzIHRvXG4gKiBhbiBvYmplY3QgdGhhdCBzYW5kcGFjay1jbGllbnQgY2FuIHVuZGVyc3RhbmRcbiAqXG4gKiBGcm9tOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gKiBUbzogUmVjb3JkPHN0cmluZywgeyBjb2RlOiBzdHJpbmcgfT5cbiAqL1xudmFyIGNvbnZlcnRlZEZpbGVzVG9CdW5kbGVyRmlsZXMgPSBmdW5jdGlvbiAoZmlsZXMpIHtcbiAgICBpZiAoIWZpbGVzKVxuICAgICAgICByZXR1cm4ge307XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGZpbGVzKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmlsZXNba2V5XSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgYWNjW2tleV0gPSB7IGNvZGU6IGZpbGVzW2tleV0gfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFjY1trZXldID0gZmlsZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn07XG5cbnZhciB1c2VBcHBTdGF0ZSA9IGZ1bmN0aW9uIChwcm9wcywgZmlsZXMpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSh7XG4gICAgICAgIGVkaXRvclN0YXRlOiBcInByaXN0aW5lXCIsXG4gICAgICAgIHRlYW1JZDogcHJvcHMudGVhbUlkLFxuICAgIH0pLCBzdGF0ZSA9IF9hWzBdLCBzZXRTdGF0ZSA9IF9hWzFdO1xuICAgIHZhciBvcmlnaW5hbFN0YXRlRnJvbVByb3BzID0gZ2V0U2FuZHBhY2tTdGF0ZUZyb21Qcm9wcyhwcm9wcyk7XG4gICAgdmFyIGVkaXRvclN0YXRlID0gZGVxdWFsKG9yaWdpbmFsU3RhdGVGcm9tUHJvcHMuZmlsZXMsIGZpbGVzKVxuICAgICAgICA/IFwicHJpc3RpbmVcIlxuICAgICAgICA6IFwiZGlydHlcIjtcbiAgICBpZiAoZWRpdG9yU3RhdGUgIT09IHN0YXRlLmVkaXRvclN0YXRlKSB7XG4gICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmV2KSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXYpLCB7IGVkaXRvclN0YXRlOiBlZGl0b3JTdGF0ZSB9KSk7IH0pO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG59O1xuXG52YXIgQlVORExFUl9USU1FT1VUID0gNDAwMDA7XG52YXIgdXNlQ2xpZW50ID0gZnVuY3Rpb24gKF9hLCBmaWxlc1N0YXRlKSB7XG4gICAgdmFyIF9iLCBfYywgX2Q7XG4gICAgdmFyIG9wdGlvbnMgPSBfYS5vcHRpb25zLCBjdXN0b21TZXR1cCA9IF9hLmN1c3RvbVNldHVwLCB0ZWFtSWQgPSBfYS50ZWFtSWQsIHNhbmRib3hJZCA9IF9hLnNhbmRib3hJZDtcbiAgICBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiAob3B0aW9ucyA9IHt9KTtcbiAgICBjdXN0b21TZXR1cCAhPT0gbnVsbCAmJiBjdXN0b21TZXR1cCAhPT0gdm9pZCAwID8gY3VzdG9tU2V0dXAgOiAoY3VzdG9tU2V0dXAgPSB7fSk7XG4gICAgdmFyIGluaXRNb2RlRnJvbVByb3BzID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pbml0TW9kZSkgfHwgXCJsYXp5XCI7XG4gICAgdmFyIF9lID0gdXNlU3RhdGUoe1xuICAgICAgICBzdGFydFJvdXRlOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc3RhcnRSb3V0ZSxcbiAgICAgICAgYnVuZGxlclN0YXRlOiB1bmRlZmluZWQsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBpbml0TW9kZTogaW5pdE1vZGVGcm9tUHJvcHMsXG4gICAgICAgIHJlYWN0RGV2VG9vbHM6IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhdHVzOiAoKF9iID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmF1dG9ydW4pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRydWUpID8gXCJpbml0aWFsXCIgOiBcImlkbGVcIixcbiAgICB9KSwgc3RhdGUgPSBfZVswXSwgc2V0U3RhdGUgPSBfZVsxXTtcbiAgICAvKipcbiAgICAgKiBSZWZzXG4gICAgICovXG4gICAgdmFyIGludGVyc2VjdGlvbk9ic2VydmVyID0gdXNlUmVmKG51bGwpO1xuICAgIHZhciBsYXp5QW5jaG9yUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIHZhciByZWdpc3RlcmVkSWZyYW1lcyA9IHVzZVJlZih7fSk7XG4gICAgdmFyIGNsaWVudHMgPSB1c2VSZWYoe30pO1xuICAgIHZhciB0aW1lb3V0SG9vayA9IHVzZVJlZihudWxsKTtcbiAgICB2YXIgdW5zdWJzY3JpYmVDbGllbnRMaXN0ZW5lcnMgPSB1c2VSZWYoe30pO1xuICAgIHZhciB1bnN1YnNjcmliZSA9IHVzZVJlZigpO1xuICAgIHZhciBxdWV1ZWRMaXN0ZW5lcnMgPSB1c2VSZWYoeyBnbG9iYWw6IHt9IH0pO1xuICAgIHZhciBkZWJvdW5jZUhvb2sgPSB1c2VSZWYoKTtcbiAgICB2YXIgcHJldkVudmlyb25tZW50ID0gdXNlUmVmKGZpbGVzU3RhdGUuZW52aXJvbm1lbnQpO1xuICAgIC8qKlxuICAgICAqIENhbGxiYWNrc1xuICAgICAqL1xuICAgIHZhciBjcmVhdGVDbGllbnQgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoaWZyYW1lLCBjbGllbnRJZCwgY2xpZW50UHJvcHNPdmVycmlkZSkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRpbWVPdXQsIHNob3VsZFNldFRpbWVvdXQsIGNsaWVudCwgZ2xvYmFsTGlzdGVuZXJzO1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZCkge1xuICAgICAgICAgICAgc3dpdGNoIChfZC5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgYW55IGV4aXN0aW5nIGNsaWVudHMgdGhhdFxuICAgICAgICAgICAgICAgICAgICAvLyBoYXZlIGJlZW4gY3JlYXRlZCB3aXRoIHRoZSBnaXZlbiBpZFxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xpZW50cy5jdXJyZW50W2NsaWVudElkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50cy5jdXJyZW50W2NsaWVudElkXS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDogKG9wdGlvbnMgPSB7fSk7XG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbVNldHVwICE9PSBudWxsICYmIGN1c3RvbVNldHVwICE9PSB2b2lkIDAgPyBjdXN0b21TZXR1cCA6IChjdXN0b21TZXR1cCA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgdGltZU91dCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5idW5kbGVyVGltZU91dCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogQlVORExFUl9USU1FT1VUO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dEhvb2suY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIb29rLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNldFRpbWVvdXQgPSB0eXBlb2YgdW5zdWJzY3JpYmUuY3VycmVudCAhPT0gXCJmdW5jdGlvblwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU2V0VGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dEhvb2suY3VycmVudCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVucmVnaXN0ZXJBbGxDbGllbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoZnVuY3Rpb24gKHByZXYpIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldiksIHsgc3RhdHVzOiBcInRpbWVvdXRcIiB9KSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGltZU91dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbG9hZFNhbmRwYWNrQ2xpZW50KGlmcmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzOiBmaWxlc1N0YXRlLmZpbGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBmaWxlc1N0YXRlLmVudmlyb25tZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVybmFsUmVzb3VyY2VzOiBvcHRpb25zLmV4dGVybmFsUmVzb3VyY2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZXJVUkw6IG9wdGlvbnMuYnVuZGxlclVSTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFJvdXRlOiAoX2IgPSBjbGllbnRQcm9wc092ZXJyaWRlID09PSBudWxsIHx8IGNsaWVudFByb3BzT3ZlcnJpZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsaWVudFByb3BzT3ZlcnJpZGUuc3RhcnRSb3V0ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogb3B0aW9ucy5zdGFydFJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVSZXNvbHZlcjogb3B0aW9ucy5maWxlUmVzb2x2ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEV2YWw6IChfYyA9IG9wdGlvbnMuc2tpcEV2YWwpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0xldmVsOiBvcHRpb25zLmxvZ0xldmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dPcGVuSW5Db2RlU2FuZGJveDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Vycm9yU2NyZWVuOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nU2NyZWVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFjdERldlRvb2xzOiBzdGF0ZS5yZWFjdERldlRvb2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbU5wbVJlZ2lzdHJpZXM6IGN1c3RvbVNldHVwID09PSBudWxsIHx8IGN1c3RvbVNldHVwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXN0b21TZXR1cC5ucG1SZWdpc3RyaWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1JZDogdGVhbUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbmRib3hJZDogc2FuZGJveElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50ID0gX2Quc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHVuc3Vic2NyaWJlLmN1cnJlbnQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUuY3VycmVudCA9IGNsaWVudC5saXN0ZW4oaGFuZGxlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmVDbGllbnRMaXN0ZW5lcnMuY3VycmVudFtjbGllbnRJZF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmVDbGllbnRMaXN0ZW5lcnMuY3VycmVudFtjbGllbnRJZF0gfHwge307XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBSZWdpc3RlciBhbnkgcG90ZW50aWFsIGxpc3RlbmVycyB0aGF0IHN1YnNjcmliZWQgYmVmb3JlIHNhbmRwYWNrIHJhblxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXVlZExpc3RlbmVycy5jdXJyZW50W2NsaWVudElkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocXVldWVkTGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdKS5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gcXVldWVkTGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdW2xpc3RlbmVySWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bnN1YnNjcmliZSA9IGNsaWVudC5saXN0ZW4obGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdW2xpc3RlbmVySWRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSBxdWV1ZWQgbGlzdGVuZXJzIGFmdGVyIHRoZXkgd2VyZSByZWdpc3RlcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZWRMaXN0ZW5lcnMuY3VycmVudFtjbGllbnRJZF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxMaXN0ZW5lcnMgPSBPYmplY3QuZW50cmllcyhxdWV1ZWRMaXN0ZW5lcnMuY3VycmVudC5nbG9iYWwpO1xuICAgICAgICAgICAgICAgICAgICBnbG9iYWxMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lcklkID0gX2FbMF0sIGxpc3RlbmVyID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBjbGllbnQubGlzdGVuKGxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdW2xpc3RlbmVySWRdID0gdW5zdWJzY3JpYmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEltcG9ydGFudDogRG8gbm90IGNsZWFuIHRoZSBnbG9iYWwgcXVldWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEluc3RlYWQgb2YgY2xlYW5pbmcgdGhlIHF1ZXVlLCBrZWVwIGl0IHRoZXJlIGZvciB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGZvbGxvd2luZyBjbGllbnRzIHRoYXQgbWlnaHQgYmUgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjbGllbnRzLmN1cnJlbnRbY2xpZW50SWRdID0gY2xpZW50O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pOyB9LCBbZmlsZXNTdGF0ZS5lbnZpcm9ubWVudCwgZmlsZXNTdGF0ZS5maWxlcywgc3RhdGUucmVhY3REZXZUb29sc10pO1xuICAgIHZhciB1bnJlZ2lzdGVyQWxsQ2xpZW50cyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoY2xpZW50cy5jdXJyZW50KS5tYXAodW5yZWdpc3RlckJ1bmRsZXIpO1xuICAgICAgICBpZiAodHlwZW9mIHVuc3Vic2NyaWJlLmN1cnJlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUuY3VycmVudCgpO1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcbiAgICB2YXIgcnVuU2FuZHBhY2sgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhyZWdpc3RlcmVkSWZyYW1lcy5jdXJyZW50KS5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpZW50SWQgPSBfYVswXSwgX2IgPSBfYVsxXSwgaWZyYW1lID0gX2IuaWZyYW1lLCBfYyA9IF9iLmNsaWVudFByb3BzT3ZlcnJpZGUsIGNsaWVudFByb3BzT3ZlcnJpZGUgPSBfYyA9PT0gdm9pZCAwID8ge30gOiBfYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfZC5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBjcmVhdGVDbGllbnQoaWZyYW1lLCBjbGllbnRJZCwgY2xpZW50UHJvcHNPdmVycmlkZSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAocHJldikgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2KSwgeyBlcnJvcjogbnVsbCwgc3RhdHVzOiBcInJ1bm5pbmdcIiB9KSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pOyB9LCBbY3JlYXRlQ2xpZW50XSk7XG4gICAgdmFyIGluaXRpYWxpemVTYW5kcGFja0lmcmFtZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHZhciBhdXRvcnVuID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmF1dG9ydW4pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRydWU7XG4gICAgICAgIGlmICghYXV0b3J1bikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvYnNlcnZlck9wdGlvbnMgPSAoX2IgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaW5pdE1vZGVPYnNlcnZlck9wdGlvbnMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHtcbiAgICAgICAgICAgIHJvb3RNYXJnaW46IFwiMTAwMHB4IDBweFwiLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uT2JzZXJ2ZXIuY3VycmVudCAmJiBsYXp5QW5jaG9yUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIChfYyA9IGludGVyc2VjdGlvbk9ic2VydmVyLmN1cnJlbnQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy51bm9ic2VydmUobGF6eUFuY2hvclJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGF6eUFuY2hvclJlZi5jdXJyZW50ICYmIHN0YXRlLmluaXRNb2RlID09PSBcImxhenlcIikge1xuICAgICAgICAgICAgLy8gSWYgYW55IGNvbXBvbmVudCByZWdpc3RlcmVkIGEgbGF6eSBhbmNob3IgcmVmIGNvbXBvbmVudCwgdXNlIHRoYXQgZm9yIHRoZSBpbnRlcnNlY3Rpb24gb2JzZXJ2ZXJcbiAgICAgICAgICAgIGludGVyc2VjdGlvbk9ic2VydmVyLmN1cnJlbnQgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKGVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJpZXMuc29tZShmdW5jdGlvbiAoZW50cnkpIHsgcmV0dXJuIGVudHJ5LmlzSW50ZXJzZWN0aW5nOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICBydW5TYW5kcGFjaygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGF6eUFuY2hvclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2EgPSBpbnRlcnNlY3Rpb25PYnNlcnZlci5jdXJyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudW5vYnNlcnZlKGxhenlBbmNob3JSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBvYnNlcnZlck9wdGlvbnMpO1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uT2JzZXJ2ZXIuY3VycmVudC5vYnNlcnZlKGxhenlBbmNob3JSZWYuY3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGF6eUFuY2hvclJlZi5jdXJyZW50ICYmIHN0YXRlLmluaXRNb2RlID09PSBcInVzZXItdmlzaWJsZVwiKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25PYnNlcnZlci5jdXJyZW50ID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJpZXMuc29tZShmdW5jdGlvbiAoZW50cnkpIHsgcmV0dXJuIGVudHJ5LmlzSW50ZXJzZWN0aW5nOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICBydW5TYW5kcGFjaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoY2xpZW50cy5jdXJyZW50KS5tYXAodW5yZWdpc3RlckJ1bmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyQWxsQ2xpZW50cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIG9ic2VydmVyT3B0aW9ucyk7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25PYnNlcnZlci5jdXJyZW50Lm9ic2VydmUobGF6eUFuY2hvclJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJ1blNhbmRwYWNrKCk7XG4gICAgICAgIH1cbiAgICB9LCBbXG4gICAgICAgIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5hdXRvcnVuLFxuICAgICAgICBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaW5pdE1vZGVPYnNlcnZlck9wdGlvbnMsXG4gICAgICAgIHJ1blNhbmRwYWNrLFxuICAgICAgICBzdGF0ZS5pbml0TW9kZSxcbiAgICAgICAgdW5yZWdpc3RlckFsbENsaWVudHMsXG4gICAgXSk7XG4gICAgdmFyIHJlZ2lzdGVyQnVuZGxlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChpZnJhbWUsIGNsaWVudElkLCBjbGllbnRQcm9wc092ZXJyaWRlKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgaWZyYW1lIGluZm8gc28gaXQgY2FuIGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZWQgbGF0ZXIgdG8gbWFudWFsbHkgcnVuIHNhbmRwYWNrXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWRJZnJhbWVzLmN1cnJlbnRbY2xpZW50SWRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lOiBpZnJhbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRQcm9wc092ZXJyaWRlOiBjbGllbnRQcm9wc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShzdGF0ZS5zdGF0dXMgPT09IFwicnVubmluZ1wiKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNyZWF0ZUNsaWVudChpZnJhbWUsIGNsaWVudElkLCBjbGllbnRQcm9wc092ZXJyaWRlKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcbiAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7IH0sIFtjcmVhdGVDbGllbnQsIHN0YXRlLnN0YXR1c10pO1xuICAgIHZhciB1bnJlZ2lzdGVyQnVuZGxlciA9IGZ1bmN0aW9uIChjbGllbnRJZCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB2YXIgY2xpZW50ID0gY2xpZW50cy5jdXJyZW50W2NsaWVudElkXTtcbiAgICAgICAgaWYgKGNsaWVudCkge1xuICAgICAgICAgICAgY2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIChfYSA9IGNsaWVudC5pZnJhbWUuY29udGVudFdpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxvY2F0aW9uLnJlcGxhY2UoXCJhYm91dDpibGFua1wiKTtcbiAgICAgICAgICAgIGNsaWVudC5pZnJhbWUucmVtb3ZlQXR0cmlidXRlKFwic3JjXCIpO1xuICAgICAgICAgICAgZGVsZXRlIGNsaWVudHMuY3VycmVudFtjbGllbnRJZF07XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHJlZ2lzdGVyZWRJZnJhbWVzLmN1cnJlbnRbY2xpZW50SWRdO1xuICAgICAgICBpZiAodGltZW91dEhvb2suY3VycmVudCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIb29rLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1bnN1YnNjcmliZVF1ZXVlZENsaWVudHMgPSBPYmplY3QudmFsdWVzKChfYiA9IHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSk7XG4gICAgICAgIC8vIFVuc3Vic2NyaWJpbmcgYWxsIGxpc3RlbmVyIHJlZ2lzdGVyZWRcbiAgICAgICAgdW5zdWJzY3JpYmVRdWV1ZWRDbGllbnRzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyT2ZDbGllbnQpIHtcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lckZ1bmN0aW9ucyA9IE9iamVjdC52YWx1ZXMobGlzdGVuZXJPZkNsaWVudCk7XG4gICAgICAgICAgICBsaXN0ZW5lckZ1bmN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh1bnN1YnNjcmliZSkgeyByZXR1cm4gdW5zdWJzY3JpYmUoKTsgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBLZWVwIHJ1bm5pbmcgaWYgaXQgc3RpbGwgaGF2ZSBjbGllbnRzXG4gICAgICAgIHZhciBzdGF0dXMgPSBPYmplY3Qua2V5cyhjbGllbnRzLmN1cnJlbnQpLmxlbmd0aCA+IDAgPyBcInJ1bm5pbmdcIiA6IFwiaWRsZVwiO1xuICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAocHJldikgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2KSwgeyBzdGF0dXM6IHN0YXR1cyB9KSk7IH0pO1xuICAgIH07XG4gICAgdmFyIGhhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgIGlmIChtc2cudHlwZSA9PT0gXCJzdGFydFwiKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAocHJldikgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2KSwgeyBlcnJvcjogbnVsbCB9KSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1zZy50eXBlID09PSBcInN0YXRlXCIpIHtcbiAgICAgICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmV2KSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXYpLCB7IGJ1bmRsZXJTdGF0ZTogbXNnLnN0YXRlIH0pKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKG1zZy50eXBlID09PSBcImRvbmVcIiAmJiAhbXNnLmNvbXBpbGF0b25FcnJvcikgfHxcbiAgICAgICAgICAgIG1zZy50eXBlID09PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICAgICAgICBpZiAodGltZW91dEhvb2suY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SG9vay5jdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmV2KSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXYpLCB7IGVycm9yOiBudWxsIH0pKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobXNnLnR5cGUgPT09IFwiYWN0aW9uXCIgJiYgbXNnLmFjdGlvbiA9PT0gXCJzaG93LWVycm9yXCIpIHtcbiAgICAgICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmV2KSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXYpLCB7IGVycm9yOiBleHRyYWN0RXJyb3JEZXRhaWxzKG1zZykgfSkpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtc2cudHlwZSA9PT0gXCJhY3Rpb25cIiAmJlxuICAgICAgICAgICAgbXNnLmFjdGlvbiA9PT0gXCJub3RpZmljYXRpb25cIiAmJlxuICAgICAgICAgICAgbXNnLm5vdGlmaWNhdGlvblR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgc2V0U3RhdGUoZnVuY3Rpb24gKHByZXYpIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldiksIHsgZXJyb3I6IHsgbWVzc2FnZTogbXNnLnRpdGxlIH0gfSkpOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlZ2lzdGVyUmVhY3REZXZUb29scyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAocHJldikgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2KSwgeyByZWFjdERldlRvb2xzOiB2YWx1ZSB9KSk7IH0pO1xuICAgIH07XG4gICAgdmFyIHJlY29tcGlsZU1vZGUgPSAoX2MgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucmVjb21waWxlTW9kZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJkZWxheWVkXCI7XG4gICAgdmFyIHJlY29tcGlsZURlbGF5ID0gKF9kID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnJlY29tcGlsZURlbGF5KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiA1MDA7XG4gICAgdmFyIGRpc3BhdGNoTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlLCBjbGllbnRJZCkge1xuICAgICAgICBpZiAoc3RhdGUuc3RhdHVzICE9PSBcInJ1bm5pbmdcIikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiW3NhbmRwYWNrLXJlYWN0XTogZGlzcGF0Y2ggY2Fubm90IGJlIGNhbGxlZCB3aGlsZSBpbiBpZGxlIG1vZGVcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsaWVudElkKSB7XG4gICAgICAgICAgICBjbGllbnRzLmN1cnJlbnRbY2xpZW50SWRdLmRpc3BhdGNoKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhjbGllbnRzLmN1cnJlbnQpLmZvckVhY2goZnVuY3Rpb24gKGNsaWVudCkge1xuICAgICAgICAgICAgICAgIGNsaWVudC5kaXNwYXRjaChtZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIsIGNsaWVudElkKSB7XG4gICAgICAgIGlmIChjbGllbnRJZCkge1xuICAgICAgICAgICAgaWYgKGNsaWVudHMuY3VycmVudFtjbGllbnRJZF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdW5zdWJzY3JpYmVMaXN0ZW5lciA9IGNsaWVudHMuY3VycmVudFtjbGllbnRJZF0ubGlzdGVuKGxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5zdWJzY3JpYmVMaXN0ZW5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFdoZW4gbGlzdGVuZXJzIGFyZSBhZGRlZCBiZWZvcmUgdGhlIGNsaWVudCBpcyBpbnN0YW50aWF0ZWQsIHRoZXkgYXJlIHN0b3JlZCB3aXRoIGFuIHVuaXF1ZSBpZFxuICAgICAgICAgICAgICAgICAqIFdoZW4gdGhlIGNsaWVudCBpcyBldmVudHVhbGx5IGluc3RhbnRpYXRlZCwgdGhlIGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBvbiB0aGUgc3BvdFxuICAgICAgICAgICAgICAgICAqIFRoZWlyIHVuc3Vic2NyaWJlIGZ1bmN0aW9ucyBhcmUgc3RvcmVkIGluIHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzIGZvciBmdXR1cmUgY2xlYW51cFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lcklkXzEgPSBnZW5lcmF0ZVJhbmRvbUlkKCk7XG4gICAgICAgICAgICAgICAgcXVldWVkTGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdID1cbiAgICAgICAgICAgICAgICAgICAgcXVldWVkTGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdIHx8IHt9O1xuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdID1cbiAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmVDbGllbnRMaXN0ZW5lcnMuY3VycmVudFtjbGllbnRJZF0gfHwge307XG4gICAgICAgICAgICAgICAgcXVldWVkTGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdW2xpc3RlbmVySWRfMV0gPSBsaXN0ZW5lcjtcbiAgICAgICAgICAgICAgICB2YXIgdW5zdWJzY3JpYmVMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXVlZExpc3RlbmVycy5jdXJyZW50W2NsaWVudElkXVtsaXN0ZW5lcklkXzFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIFVuc3Vic2NyaWJlIHdhcyBjYWxsZWQgYmVmb3JlIHRoZSBjbGllbnQgd2FzIGluc3RhbnRpYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICogY29tbW9uIGV4YW1wbGUgLSBhIGNvbXBvbmVudCB3aXRoIGF1dG9ydW49ZmFsc2UgdGhhdCB1bm1vdW50ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHF1ZXVlZExpc3RlbmVycy5jdXJyZW50W2NsaWVudElkXVtsaXN0ZW5lcklkXzFdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdW2xpc3RlbmVySWRfMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogdW5zdWJzY3JpYmUgd2FzIGNhbGxlZCBmb3IgYSBsaXN0ZW5lciB0aGF0IGdvdCBhZGRlZCBiZWZvcmUgdGhlIGNsaWVudCB3YXMgaW5zdGFudGlhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBjYWxsIHRoZSB1bnN1YnNjcmliZSBmdW5jdGlvbiBhbmQgcmVtb3ZlIGl0IGZyb20gbWVtb3J5XG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzLmN1cnJlbnRbY2xpZW50SWRdW2xpc3RlbmVySWRfMV0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1bnN1YnNjcmliZUNsaWVudExpc3RlbmVycy5jdXJyZW50W2NsaWVudElkXVtsaXN0ZW5lcklkXzFdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5zdWJzY3JpYmVMaXN0ZW5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFB1c2ggdG8gdGhlICoqZ2xvYmFsKiogcXVldWVcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lcklkXzIgPSBnZW5lcmF0ZVJhbmRvbUlkKCk7XG4gICAgICAgICAgICBxdWV1ZWRMaXN0ZW5lcnMuY3VycmVudC5nbG9iYWxbbGlzdGVuZXJJZF8yXSA9IGxpc3RlbmVyO1xuICAgICAgICAgICAgLy8gQWRkIHRvIHRoZSBjdXJyZW50IGNsaWVudHNcbiAgICAgICAgICAgIHZhciBjbGllbnRzTGlzdCA9IE9iamVjdC52YWx1ZXMoY2xpZW50cy5jdXJyZW50KTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2xpZW50VW5zdWJzY3JpYmVMaXN0ZW5lcnNfMSA9IGNsaWVudHNMaXN0Lm1hcChmdW5jdGlvbiAoY2xpZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5saXN0ZW4obGlzdGVuZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgdW5zdWJzY3JpYmVMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBVbnN1YnNjcmliaW5nIGZyb20gdGhlIGNsaWVudHMgYWxyZWFkeSBjcmVhdGVkXG4gICAgICAgICAgICAgICAgY3VycmVudENsaWVudFVuc3Vic2NyaWJlTGlzdGVuZXJzXzEuZm9yRWFjaChmdW5jdGlvbiAodW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHF1ZXVlZExpc3RlbmVycy5jdXJyZW50Lmdsb2JhbFtsaXN0ZW5lcklkXzJdO1xuICAgICAgICAgICAgICAgIC8vIFVuc3Vic2NyaWJlIGluIGNhc2UgaXQgd2FzIGFkZGVkIGxhdGVyIGZyb20gYGdsb2JhbGBcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzLmN1cnJlbnQpLmZvckVhY2goZnVuY3Rpb24gKGNsaWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IGNsaWVudCA9PT0gbnVsbCB8fCBjbGllbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsaWVudFtsaXN0ZW5lcklkXzJdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChjbGllbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB1bnN1YnNjcmliZUxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFZmZlY3RzXG4gICAgICovXG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uIHdhdGNoRmlsZUNoYW5nZXMoKSB7XG4gICAgICAgIGlmIChzdGF0ZS5zdGF0dXMgIT09IFwicnVubmluZ1wiIHx8ICFmaWxlc1N0YXRlLnNob3VsZFVwZGF0ZVByZXZpZXcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiB0aGUgZW52aXJvbm1lbnQgY2hhbmdlcywgU2FuZHBhY2sgbmVlZHMgdG8gbWFrZSBzdXJlXG4gICAgICAgICAqIHRvIGNyZWF0ZSBhIG5ldyBjbGllbnQgYW5kIHRoZSBwcm9wZXIgYnVuZGxlclxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHByZXZFbnZpcm9ubWVudC5jdXJyZW50ICE9PSBmaWxlc1N0YXRlLmVudmlyb25tZW50KSB7XG4gICAgICAgICAgICBwcmV2RW52aXJvbm1lbnQuY3VycmVudCA9IGZpbGVzU3RhdGUuZW52aXJvbm1lbnQ7XG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhjbGllbnRzLmN1cnJlbnQpLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hWzBdLCBjbGllbnQgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICByZWdpc3RlckJ1bmRsZXIoY2xpZW50LmlmcmFtZSwga2V5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWNvbXBpbGVNb2RlID09PSBcImltbWVkaWF0ZVwiKSB7XG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKGNsaWVudHMuY3VycmVudCkuZm9yRWFjaChmdW5jdGlvbiAoY2xpZW50KSB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQXZvaWQgY29uY3VycmVuY3lcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoY2xpZW50LnN0YXR1cyA9PT0gXCJkb25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50LnVwZGF0ZVNhbmRib3goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXM6IGZpbGVzU3RhdGUuZmlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogZmlsZXNTdGF0ZS5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlY29tcGlsZU1vZGUgPT09IFwiZGVsYXllZFwiKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGRlYm91bmNlSG9vay5jdXJyZW50KTtcbiAgICAgICAgICAgIGRlYm91bmNlSG9vay5jdXJyZW50ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoY2xpZW50cy5jdXJyZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChjbGllbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEF2b2lkIGNvbmN1cnJlbmN5XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xpZW50LnN0YXR1cyA9PT0gXCJkb25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC51cGRhdGVTYW5kYm94KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlczogZmlsZXNTdGF0ZS5maWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogZmlsZXNTdGF0ZS5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCByZWNvbXBpbGVEZWxheSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoZGVib3VuY2VIb29rLmN1cnJlbnQpO1xuICAgICAgICB9O1xuICAgIH0sIFtcbiAgICAgICAgZmlsZXNTdGF0ZS5maWxlcyxcbiAgICAgICAgZmlsZXNTdGF0ZS5lbnZpcm9ubWVudCxcbiAgICAgICAgZmlsZXNTdGF0ZS5zaG91bGRVcGRhdGVQcmV2aWV3LFxuICAgICAgICByZWNvbXBpbGVEZWxheSxcbiAgICAgICAgcmVjb21waWxlTW9kZSxcbiAgICAgICAgcmVnaXN0ZXJCdW5kbGVyLFxuICAgICAgICBzdGF0ZS5zdGF0dXMsXG4gICAgXSk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uIHdhdGNoSW5pdE1vZGUoKSB7XG4gICAgICAgIGlmIChpbml0TW9kZUZyb21Qcm9wcyAhPT0gc3RhdGUuaW5pdE1vZGUpIHtcbiAgICAgICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmV2KSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXYpLCB7IGluaXRNb2RlOiBpbml0TW9kZUZyb21Qcm9wcyB9KSk7IH0pO1xuICAgICAgICAgICAgaW5pdGlhbGl6ZVNhbmRwYWNrSWZyYW1lKCk7XG4gICAgICAgIH1cbiAgICB9LCBbaW5pdE1vZGVGcm9tUHJvcHMsIGluaXRpYWxpemVTYW5kcGFja0lmcmFtZSwgc3RhdGUuaW5pdE1vZGVdKTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gdW5tb3VudENsaWVudCgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdW5zdWJzY3JpYmUuY3VycmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUuY3VycmVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpbWVvdXRIb29rLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhvb2suY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVib3VuY2VIb29rLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZGVib3VuY2VIb29rLmN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvbk9ic2VydmVyLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25PYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNsaWVudHM6IGNsaWVudHMuY3VycmVudCxcbiAgICAgICAgICAgIGluaXRpYWxpemVTYW5kcGFja0lmcmFtZTogaW5pdGlhbGl6ZVNhbmRwYWNrSWZyYW1lLFxuICAgICAgICAgICAgcnVuU2FuZHBhY2s6IHJ1blNhbmRwYWNrLFxuICAgICAgICAgICAgcmVnaXN0ZXJCdW5kbGVyOiByZWdpc3RlckJ1bmRsZXIsXG4gICAgICAgICAgICB1bnJlZ2lzdGVyQnVuZGxlcjogdW5yZWdpc3RlckJ1bmRsZXIsXG4gICAgICAgICAgICByZWdpc3RlclJlYWN0RGV2VG9vbHM6IHJlZ2lzdGVyUmVhY3REZXZUb29scyxcbiAgICAgICAgICAgIGFkZExpc3RlbmVyOiBhZGRMaXN0ZW5lcixcbiAgICAgICAgICAgIGRpc3BhdGNoTWVzc2FnZTogZGlzcGF0Y2hNZXNzYWdlLFxuICAgICAgICAgICAgbGF6eUFuY2hvclJlZjogbGF6eUFuY2hvclJlZixcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlQ2xpZW50TGlzdGVuZXJzUmVmOiB1bnN1YnNjcmliZUNsaWVudExpc3RlbmVycyxcbiAgICAgICAgICAgIHF1ZXVlZExpc3RlbmVyc1JlZjogcXVldWVkTGlzdGVuZXJzLFxuICAgICAgICB9LFxuICAgIF07XG59O1xuXG52YXIgdXNlRmlsZXMgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgb3JpZ2luYWxTdGF0ZUZyb21Qcm9wcyA9IGdldFNhbmRwYWNrU3RhdGVGcm9tUHJvcHMocHJvcHMpO1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKG9yaWdpbmFsU3RhdGVGcm9tUHJvcHMpLCBzdGF0ZSA9IF9hWzBdLCBzZXRTdGF0ZSA9IF9hWzFdO1xuICAgIHZhciBpc01vdW50ZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgc2V0U3RhdGUoZ2V0U2FuZHBhY2tTdGF0ZUZyb21Qcm9wcyhwcm9wcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaXNNb3VudGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSwgW3Byb3BzLmZpbGVzLCBwcm9wcy5jdXN0b21TZXR1cCwgcHJvcHMudGVtcGxhdGVdKTtcbiAgICB2YXIgdXBkYXRlRmlsZSA9IGZ1bmN0aW9uIChwYXRoT3JGaWxlcywgY29kZSwgc2hvdWxkVXBkYXRlUHJldmlldykge1xuICAgICAgICBpZiAoc2hvdWxkVXBkYXRlUHJldmlldyA9PT0gdm9pZCAwKSB7IHNob3VsZFVwZGF0ZVByZXZpZXcgPSB0cnVlOyB9XG4gICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmV2KSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgZmlsZXMgPSBwcmV2LmZpbGVzO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXRoT3JGaWxlcyA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgY29kZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGZpbGVzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZpbGVzKSwgKF9hID0ge30sIF9hW3BhdGhPckZpbGVzXSA9IHsgY29kZTogY29kZSB9LCBfYSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHBhdGhPckZpbGVzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgZmlsZXMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmlsZXMpLCBjb252ZXJ0ZWRGaWxlc1RvQnVuZGxlckZpbGVzKHBhdGhPckZpbGVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXYpLCB7IGZpbGVzOiBub3JtYWxpemVQYXRoKGZpbGVzKSwgc2hvdWxkVXBkYXRlUHJldmlldzogc2hvdWxkVXBkYXRlUHJldmlldyB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB2YXIgb3BlcmF0aW9ucyA9IHtcbiAgICAgICAgb3BlbkZpbGU6IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlzaWJsZUZpbGVzID0gX2EudmlzaWJsZUZpbGVzLCByZXN0ID0gX19yZXN0KF9hLCBbXCJ2aXNpYmxlRmlsZXNcIl0pO1xuICAgICAgICAgICAgICAgIHZhciBuZXdQYXRocyA9IHZpc2libGVGaWxlcy5pbmNsdWRlcyhwYXRoKVxuICAgICAgICAgICAgICAgICAgICA/IHZpc2libGVGaWxlc1xuICAgICAgICAgICAgICAgICAgICA6IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgdmlzaWJsZUZpbGVzLCB0cnVlKSwgW3BhdGhdLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXN0KSwgeyBhY3RpdmVGaWxlOiBwYXRoLCB2aXNpYmxlRmlsZXM6IG5ld1BhdGhzIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc2V0RmlsZTogZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldlN0YXRlKSwgeyBmaWxlczogX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXZTdGF0ZS5maWxlcyksIChfYSA9IHt9LCBfYVtwYXRoXSA9IG9yaWdpbmFsU3RhdGVGcm9tUHJvcHMuZmlsZXNbcGF0aF0sIF9hKSkgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc2V0QWxsRmlsZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmV2KSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXYpLCB7IGZpbGVzOiBvcmlnaW5hbFN0YXRlRnJvbVByb3BzLmZpbGVzIH0pKTsgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEFjdGl2ZUZpbGU6IGZ1bmN0aW9uIChhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUuZmlsZXNbYWN0aXZlRmlsZV0pIHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAocHJldikgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2KSwgeyBhY3RpdmVGaWxlOiBhY3RpdmVGaWxlIH0pKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZUN1cnJlbnRGaWxlOiBmdW5jdGlvbiAoY29kZSwgc2hvdWxkVXBkYXRlUHJldmlldykge1xuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZVByZXZpZXcgPT09IHZvaWQgMCkgeyBzaG91bGRVcGRhdGVQcmV2aWV3ID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdXBkYXRlRmlsZShzdGF0ZS5hY3RpdmVGaWxlLCBjb2RlLCBzaG91bGRVcGRhdGVQcmV2aWV3KTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlRmlsZTogdXBkYXRlRmlsZSxcbiAgICAgICAgYWRkRmlsZTogdXBkYXRlRmlsZSxcbiAgICAgICAgY2xvc2VGaWxlOiBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLnZpc2libGVGaWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlzaWJsZUZpbGVzID0gX2EudmlzaWJsZUZpbGVzLCBhY3RpdmVGaWxlID0gX2EuYWN0aXZlRmlsZSwgcHJldiA9IF9fcmVzdChfYSwgW1widmlzaWJsZUZpbGVzXCIsIFwiYWN0aXZlRmlsZVwiXSk7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4T2ZSZW1vdmVkUGF0aCA9IHZpc2libGVGaWxlcy5pbmRleE9mKHBhdGgpO1xuICAgICAgICAgICAgICAgIHZhciBuZXdQYXRocyA9IHZpc2libGVGaWxlcy5maWx0ZXIoZnVuY3Rpb24gKG9wZW5QYXRoKSB7IHJldHVybiBvcGVuUGF0aCAhPT0gcGF0aDsgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2KSwgeyBhY3RpdmVGaWxlOiBwYXRoID09PSBhY3RpdmVGaWxlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGluZGV4T2ZSZW1vdmVkUGF0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdmlzaWJsZUZpbGVzWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2aXNpYmxlRmlsZXNbaW5kZXhPZlJlbW92ZWRQYXRoIC0gMV1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogYWN0aXZlRmlsZSwgdmlzaWJsZUZpbGVzOiBuZXdQYXRocyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGVGaWxlOiBmdW5jdGlvbiAocGF0aCwgc2hvdWxkVXBkYXRlUHJldmlldykge1xuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZVByZXZpZXcgPT09IHZvaWQgMCkgeyBzaG91bGRVcGRhdGVQcmV2aWV3ID0gdHJ1ZTsgfVxuICAgICAgICAgICAgc2V0U3RhdGUoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpc2libGVGaWxlcyA9IF9hLnZpc2libGVGaWxlcywgZmlsZXMgPSBfYS5maWxlcywgYWN0aXZlRmlsZSA9IF9hLmFjdGl2ZUZpbGUsIHJlc3QgPSBfX3Jlc3QoX2EsIFtcInZpc2libGVGaWxlc1wiLCBcImZpbGVzXCIsIFwiYWN0aXZlRmlsZVwiXSk7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0ZpbGVzID0gX19hc3NpZ24oe30sIGZpbGVzKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgbmV3RmlsZXNbcGF0aF07XG4gICAgICAgICAgICAgICAgdmFyIHJlbWFpbmluZ1Zpc2libGVGaWxlcyA9IHZpc2libGVGaWxlcy5maWx0ZXIoZnVuY3Rpb24gKG9wZW5QYXRoKSB7IHJldHVybiBvcGVuUGF0aCAhPT0gcGF0aDsgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGRlbGV0ZWRMYXN0VmlzaWJsZUZpbGUgPSByZW1haW5pbmdWaXNpYmxlRmlsZXMubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVkTGFzdFZpc2libGVGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0RmlsZSA9IE9iamVjdC5rZXlzKGZpbGVzKVtPYmplY3Qua2V5cyhmaWxlcykubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVzdCksIHsgdmlzaWJsZUZpbGVzOiBbbmV4dEZpbGVdLCBhY3RpdmVGaWxlOiBuZXh0RmlsZSwgZmlsZXM6IG5ld0ZpbGVzLCBzaG91bGRVcGRhdGVQcmV2aWV3OiBzaG91bGRVcGRhdGVQcmV2aWV3IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHJlc3QpLCB7IHZpc2libGVGaWxlczogcmVtYWluaW5nVmlzaWJsZUZpbGVzLCBhY3RpdmVGaWxlOiBwYXRoID09PSBhY3RpdmVGaWxlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlbWFpbmluZ1Zpc2libGVGaWxlc1tyZW1haW5pbmdWaXNpYmxlRmlsZXMubGVuZ3RoIC0gMV1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogYWN0aXZlRmlsZSwgZmlsZXM6IG5ld0ZpbGVzLCBzaG91bGRVcGRhdGVQcmV2aWV3OiBzaG91bGRVcGRhdGVQcmV2aWV3IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gW1xuICAgICAgICBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc3RhdGUpLCB7IHZpc2libGVGaWxlc0Zyb21Qcm9wczogb3JpZ2luYWxTdGF0ZUZyb21Qcm9wcy52aXNpYmxlRmlsZXMgfSksXG4gICAgICAgIG9wZXJhdGlvbnMsXG4gICAgXTtcbn07XG5cbnZhciBTYW5kcGFjayQxID0gUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTtcbnZhciBTYW5kcGFja1Byb3ZpZGVyID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbiwgb3B0aW9ucyA9IHByb3BzLm9wdGlvbnMsIHN0eWxlID0gcHJvcHMuc3R5bGUsIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSwgdGhlbWUgPSBwcm9wcy50aGVtZTtcbiAgICB2YXIgX2MgPSB1c2VGaWxlcyhwcm9wcyksIGZpbGVTdGF0ZSA9IF9jWzBdLCBmaWxlT3BlcmF0aW9ucyA9IF9jWzFdO1xuICAgIHZhciBfZCA9IHVzZUNsaWVudChwcm9wcywgZmlsZVN0YXRlKSwgY2xpZW50U3RhdGUgPSBfZFswXSwgX2UgPSBfZFsxXSwgZGlzcGF0Y2hNZXNzYWdlID0gX2UuZGlzcGF0Y2hNZXNzYWdlLCBhZGRMaXN0ZW5lciA9IF9lLmFkZExpc3RlbmVyLCBjbGllbnRPcGVyYXRpb25zID0gX19yZXN0KF9lLCBbXCJkaXNwYXRjaE1lc3NhZ2VcIiwgXCJhZGRMaXN0ZW5lclwiXSk7XG4gICAgdmFyIGFwcFN0YXRlID0gdXNlQXBwU3RhdGUocHJvcHMsIGZpbGVTdGF0ZS5maWxlcyk7XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xpZW50T3BlcmF0aW9ucy5pbml0aWFsaXplU2FuZHBhY2tJZnJhbWUoKTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIChqc3goU2FuZHBhY2skMS5Qcm92aWRlciwgeyB2YWx1ZTogX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIGZpbGVTdGF0ZSksIGNsaWVudFN0YXRlKSwgYXBwU3RhdGUpLCBmaWxlT3BlcmF0aW9ucyksIGNsaWVudE9wZXJhdGlvbnMpLCB7IGF1dG9SZWxvYWQ6IChfYiA9IChfYSA9IHByb3BzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hdXRvUmVsb2FkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB0cnVlLCBsaXN0ZW46IGFkZExpc3RlbmVyLCBkaXNwYXRjaDogZGlzcGF0Y2hNZXNzYWdlIH0pLCBjaGlsZHJlbjoganN4KENsYXNzTmFtZXNQcm92aWRlciwgeyBjbGFzc2VzOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2xhc3NlcywgY2hpbGRyZW46IGpzeChTYW5kcGFja1RoZW1lUHJvdmlkZXIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiBzdHlsZSwgdGhlbWU6IHRoZW1lLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkgfSkgfSkpO1xufTtcbi8qKlxuICogQGNhdGVnb3J5IFByb3ZpZGVyXG4gKi9cbnZhciBTYW5kcGFja0NvbnN1bWVyID0gU2FuZHBhY2skMS5Db25zdW1lcjtcblxuLyoqXG4gKiBAY2F0ZWdvcnkgSG9va3NcbiAqL1xuZnVuY3Rpb24gdXNlU2FuZHBhY2soKSB7XG4gICAgdmFyIHNhbmRwYWNrID0gUmVhY3QudXNlQ29udGV4dChTYW5kcGFjayQxKTtcbiAgICBpZiAoc2FuZHBhY2sgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW3NhbmRwYWNrLXJlYWN0XTogXFxcInVzZVNhbmRwYWNrXFxcIiBtdXN0IGJlIHdyYXBwZWQgYnkgYSBcXFwiU2FuZHBhY2tQcm92aWRlclxcXCJcIik7XG4gICAgfVxuICAgIHZhciBkaXNwYXRjaCA9IHNhbmRwYWNrLmRpc3BhdGNoLCBsaXN0ZW4gPSBzYW5kcGFjay5saXN0ZW4sIHJlc3QgPSBfX3Jlc3Qoc2FuZHBhY2ssIFtcImRpc3BhdGNoXCIsIFwibGlzdGVuXCJdKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzYW5kcGFjazogX19hc3NpZ24oe30sIHJlc3QpLFxuICAgICAgICBkaXNwYXRjaDogZGlzcGF0Y2gsXG4gICAgICAgIGxpc3RlbjogbGlzdGVuLFxuICAgIH07XG59XG5cbi8qKlxuICogVGhpcyByZXR1cm5zIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhY3RpdmUgZmlsZVxuICogYW5kIGEgbWV0aG9kIHRvIHVwZGF0ZSBpdHMgY29udGVudC5cbiAqXG4gKiBAY2F0ZWdvcnkgSG9va3NcbiAqL1xudmFyIHVzZUFjdGl2ZUNvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgdmFyIHNhbmRwYWNrID0gdXNlU2FuZHBhY2soKS5zYW5kcGFjaztcbiAgICByZXR1cm4ge1xuICAgICAgICBjb2RlOiAoX2EgPSBzYW5kcGFjay5maWxlc1tzYW5kcGFjay5hY3RpdmVGaWxlXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvZGUsXG4gICAgICAgIHJlYWRPbmx5OiAoX2MgPSAoX2IgPSBzYW5kcGFjay5maWxlc1tzYW5kcGFjay5hY3RpdmVGaWxlXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnJlYWRPbmx5KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlQ29kZTogc2FuZHBhY2sudXBkYXRlQ3VycmVudEZpbGUsXG4gICAgfTtcbn07XG5cbnZhciBfYSQ4LCBfYiQyLCBfYztcbnZhciBpY29uU3RhbmRhbG9uZUNsYXNzTmFtZSA9IGNzcyh7XG4gICAgc3ZnOiB7IG1hcmdpbjogXCJhdXRvXCIgfSxcbn0pO1xudmFyIGJ1dHRvbkNsYXNzTmFtZSA9IGNzcygoX2EkOCA9IHtcbiAgICAgICAgYXBwZWFyYW5jZTogXCJub25lXCIsXG4gICAgICAgIG91dGxpbmU6IFwibm9uZVwiLFxuICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgICAgZm9udFNpemU6IFwiaW5oZXJpdFwiLFxuICAgICAgICBmb250RmFtaWx5OiBcImluaGVyaXRcIixcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50XCIsXG4gICAgICAgIHRyYW5zaXRpb246IFwiY29sb3IgJGRlZmF1bHQsIGJhY2tncm91bmQgJGRlZmF1bHRcIixcbiAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcbiAgICAgICAgY29sb3I6IFwiJGNvbG9ycyRjbGlja2FibGVcIixcbiAgICAgICAgYm9yZGVyOiAwLFxuICAgICAgICB0ZXh0RGVjb3JhdGlvbjogXCJub25lXCIsXG4gICAgICAgIFwiJjpkaXNhYmxlZFwiOiB7IGNvbG9yOiBcIiRjb2xvcnMkZGlzYWJsZWRcIiB9LFxuICAgICAgICBcIiY6aG92ZXI6bm90KDpkaXNhYmxlZCxbZGF0YS1hY3RpdmU9J3RydWUnXSlcIjogeyBjb2xvcjogXCIkY29sb3JzJGhvdmVyXCIgfSxcbiAgICAgICAgJyZbZGF0YS1hY3RpdmU9XCJ0cnVlXCJdJzogeyBjb2xvcjogXCIkY29sb3JzJGFjY2VudFwiIH0sXG4gICAgICAgIHN2Zzoge1xuICAgICAgICAgICAgbWluV2lkdGg6IFwiJHNwYWNlJDRcIixcbiAgICAgICAgICAgIHdpZHRoOiBcIiRzcGFjZSQ0XCIsXG4gICAgICAgICAgICBoZWlnaHQ6IFwiJHNwYWNlJDRcIixcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2EkOFtcIiYuXCIuY29uY2F0KGljb25TdGFuZGFsb25lQ2xhc3NOYW1lKV0gPSB7XG4gICAgICAgIHBhZGRpbmc6IFwiJHNwYWNlJDFcIixcbiAgICAgICAgaGVpZ2h0OiBcIiRzcGFjZSQ3XCIsXG4gICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgIH0sXG4gICAgLy8gSWYgdGhlcmUncyBhIGNoaWxkcmVuIGJlc2lkZXMgdGhlIGljb25cbiAgICBfYSQ4W1wiJi5cIi5jb25jYXQoaWNvblN0YW5kYWxvbmVDbGFzc05hbWUsIFwiJjpub3QoOmhhcyhzcGFuKSlcIildID0ge1xuICAgICAgICB3aWR0aDogXCIkc3BhY2UkN1wiLFxuICAgIH0sXG4gICAgX2EkOFtcIiYuXCIuY29uY2F0KGljb25TdGFuZGFsb25lQ2xhc3NOYW1lLCBcIiY6aGFzKHN2ZyArIHNwYW4pXCIpXSA9IHtcbiAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIiRzcGFjZSQzXCIsXG4gICAgICAgIHBhZGRpbmdMZWZ0OiBcIiRzcGFjZSQyXCIsXG4gICAgICAgIGdhcDogXCIkc3BhY2UkMVwiLFxuICAgIH0sXG4gICAgX2EkOCkpO1xudmFyIHJvdW5kZWRCdXR0b25DbGFzc05hbWUgPSBjc3Moe1xuICAgIGJhY2tncm91bmRDb2xvcjogXCIkY29sb3JzJHN1cmZhY2UyXCIsXG4gICAgYm9yZGVyUmFkaXVzOiBcIjk5OTk5cHhcIixcbiAgICBib3JkZXI6IFwiMXB4IHNvbGlkICRjb2xvcnMkc3VyZmFjZTNcIixcbiAgICAnJltkYXRhLWFjdGl2ZT1cInRydWVcIl0nOiB7XG4gICAgICAgIGNvbG9yOiBcIiRjb2xvcnMkc3VyZmFjZTFcIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIkY29sb3JzJGFjY2VudFwiLFxuICAgIH0sXG4gICAgXCImOmhvdmVyOm5vdCg6ZGlzYWJsZWQsW2RhdGEtYWN0aXZlPSd0cnVlJ10pXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiRjb2xvcnMkc3VyZmFjZTNcIixcbiAgICB9LFxufSk7XG52YXIgaWNvbkNsYXNzTmFtZSA9IGNzcyh7IHBhZGRpbmc6IDAgfSk7XG52YXIgZmFkZUluID0ga2V5ZnJhbWVzKHtcbiAgICBcIjAlXCI6IHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICB9LFxuICAgIFwiMTAwJVwiOiB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgfSxcbn0pO1xudmFyIGFic29sdXRlQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIGJvdHRvbTogXCIwXCIsXG4gICAgbGVmdDogXCIwXCIsXG4gICAgcmlnaHQ6IFwiMFwiLFxuICAgIHRvcDogXCIwXCIsXG4gICAgbWFyZ2luOiBcIjBcIixcbiAgICBvdmVyZmxvdzogXCJhdXRvXCIsXG4gICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICB6SW5kZXg6IFwiJHRvcFwiLFxufSk7XG52YXIgZXJyb3JDbGFzc05hbWUgPSBjc3MoKF9iJDIgPSB7XG4gICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcbiAgICAgICAgcGFkZGluZzogXCIkc3BhY2UkMTBcIixcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiRjb2xvcnMkc3VyZmFjZTFcIixcbiAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgIGdhcDogXCIkc3BhY2UkMlwiLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiXG4gICAgfSxcbiAgICBfYiQyW1wiLlwiLmNvbmNhdChidXR0b25DbGFzc05hbWUpXSA9IHtcbiAgICAgICAgd2lkdGg6IFwiYXV0b1wiLFxuICAgICAgICBnYXA6IFwiJHNwYWNlJDJcIixcbiAgICAgICAgcGFkZGluZzogXCIwICRzcGFjZSQzIDAgJHNwYWNlJDJcIixcbiAgICAgICAgbWFyZ2luVG9wOiBcIiRzcGFjZSQxXCIsXG4gICAgfSxcbiAgICBfYiQyLnZhcmlhbnRzID0ge1xuICAgICAgICBzb2xpZEJnOiB7XG4gICAgICAgICAgICB0cnVlOiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiRjb2xvcnMkZXJyb3JTdXJmYWNlXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgX2IkMikpO1xudmFyIGVycm9yQnVuZGxlckNsYXNzTmFtZSA9IGNzcygoX2MgPSB7XG4gICAgICAgIHBhZGRpbmc6IFwiJHNwYWNlJDEwXCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIkY29sb3JzJHN1cmZhY2UxXCJcbiAgICB9LFxuICAgIF9jW1wiLlwiLmNvbmNhdChidXR0b25DbGFzc05hbWUpXSA9IHtcbiAgICAgICAgbWFyZ2luVG9wOiBcIiRzcGFjZSQ2XCIsXG4gICAgICAgIHdpZHRoOiBcImF1dG9cIixcbiAgICAgICAgZ2FwOiBcIiRzcGFjZSQyXCIsXG4gICAgICAgIHBhZGRpbmc6IFwiMCAkc3BhY2UkMyAwICRzcGFjZSQyXCIsXG4gICAgfSxcbiAgICBfYykpO1xudmFyIGVycm9yTWVzc2FnZUNsYXNzTmFtZSA9IGNzcyh7XG4gICAgYW5pbWF0aW9uOiBcIlwiLmNvbmNhdChmYWRlSW4sIFwiIDE1MG1zIGVhc2VcIiksXG4gICAgY29sb3I6IFwiJGNvbG9ycyRlcnJvclwiLFxuICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgZ2FwOiBcIiRzcGFjZSQzXCIsXG4gICAgdmFyaWFudHM6IHtcbiAgICAgICAgZXJyb3JDb2RlOiB7IHRydWU6IHsgZm9udEZhbWlseTogXCIkZm9udCRtb25vXCIgfSB9LFxuICAgIH0sXG4gICAgYToge1xuICAgICAgICBjb2xvcjogXCJpbmhlcml0XCIsXG4gICAgfSxcbiAgICBwOiB7XG4gICAgICAgIG1hcmdpbjogMCxcbiAgICB9LFxufSk7XG5cbnZhciBfYSQ3O1xudmFyIHRhYnNDbGFzc05hbWUgPSBjc3Moe1xuICAgIGJvcmRlckJvdHRvbTogXCIxcHggc29saWQgJGNvbG9ycyRzdXJmYWNlMlwiLFxuICAgIGJhY2tncm91bmQ6IFwiJGNvbG9ycyRzdXJmYWNlMVwiLFxufSk7XG52YXIgdGFic1Njcm9sbGFibGVDbGFzc05hbWUgPSBjc3Moe1xuICAgIHBhZGRpbmc6IFwiMCAkc3BhY2UkMlwiLFxuICAgIG92ZXJmbG93OiBcImF1dG9cIixcbiAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICBmbGV4V3JhcDogXCJub3dyYXBcIixcbiAgICBhbGlnbkl0ZW1zOiBcInN0cmV0Y2hcIixcbiAgICBtaW5IZWlnaHQ6IFwiNDBweFwiLFxuICAgIG1hcmdpbkJvdHRvbTogXCItMXB4XCIsXG59KTtcbnZhciBjbG9zZUJ1dHRvbkNsYXNzTmFtZSA9IGNzcyh7XG4gICAgcGFkZGluZzogXCIwICRzcGFjZSQxIDAgJHNwYWNlJDFcIixcbiAgICBib3JkZXJSYWRpdXM6IFwiJGJvcmRlciRyYWRpdXNcIixcbiAgICBtYXJnaW5MZWZ0OiBcIiRzcGFjZSQxXCIsXG4gICAgd2lkdGg6IFwiJHNwYWNlJDVcIixcbiAgICB2aXNpYmlsaXR5OiBcImhpZGRlblwiLFxuICAgIHN2Zzoge1xuICAgICAgICB3aWR0aDogXCIkc3BhY2UkM1wiLFxuICAgICAgICBoZWlnaHQ6IFwiJHNwYWNlJDNcIixcbiAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICB0b3A6IDEsXG4gICAgfSxcbn0pO1xudmFyIHRhYkJ1dHRvbiA9IGNzcygoX2EkNyA9IHtcbiAgICAgICAgcGFkZGluZzogXCIwICRzcGFjZSQyXCIsXG4gICAgICAgIGhlaWdodDogXCIkbGF5b3V0JGhlYWRlckhlaWdodFwiLFxuICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiLFxuICAgICAgICBcIiY6Zm9jdXNcIjogeyBvdXRsaW5lOiBcIm5vbmVcIiB9XG4gICAgfSxcbiAgICBfYSQ3W1wiJjpob3ZlciA+IC5cIi5jb25jYXQoY2xvc2VCdXR0b25DbGFzc05hbWUpXSA9IHsgdmlzaWJpbGl0eTogXCJ1bnNldFwiIH0sXG4gICAgX2EkNykpO1xuLyoqXG4gKiBGaWxlVGFicyBpcyBhIGxpc3Qgb2YgYWxsIG9wZW4gZmlsZXMsIHRoZSBhY3RpdmUgZmlsZSwgYW5kIGl0cyBzdGF0ZS5cbiAqL1xudmFyIEZpbGVUYWJzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGNsb3NhYmxlVGFicyA9IF9hLmNsb3NhYmxlVGFicywgY2xhc3NOYW1lID0gX2EuY2xhc3NOYW1lLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wiY2xvc2FibGVUYWJzXCIsIFwiY2xhc3NOYW1lXCJdKTtcbiAgICB2YXIgc2FuZHBhY2sgPSB1c2VTYW5kcGFjaygpLnNhbmRwYWNrO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHZhciBhY3RpdmVGaWxlID0gc2FuZHBhY2suYWN0aXZlRmlsZSwgdmlzaWJsZUZpbGVzID0gc2FuZHBhY2sudmlzaWJsZUZpbGVzLCBzZXRBY3RpdmVGaWxlID0gc2FuZHBhY2suc2V0QWN0aXZlRmlsZTtcbiAgICB2YXIgaGFuZGxlQ2xvc2VGaWxlID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB2YXIgdGFiRWxtID0gZXYudGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS1hY3RpdmVdXCIpO1xuICAgICAgICB2YXIgcGF0aFRvQ2xvc2UgPSB0YWJFbG0gPT09IG51bGwgfHwgdGFiRWxtID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0YWJFbG0uZ2V0QXR0cmlidXRlKFwidGl0bGVcIik7XG4gICAgICAgIGlmICghcGF0aFRvQ2xvc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzYW5kcGFjay5jbG9zZUZpbGUocGF0aFRvQ2xvc2UpO1xuICAgIH07XG4gICAgdmFyIGdldFRyaWdnZXJUZXh0ID0gZnVuY3Rpb24gKGN1cnJlbnRQYXRoKSB7XG4gICAgICAgIHZhciBkb2N1bWVudEZpbGVOYW1lID0gZ2V0RmlsZU5hbWUoY3VycmVudFBhdGgpO1xuICAgICAgICB2YXIgcGF0aHNXaXRoRHVwbGljYXRlRmlsZU5hbWVzID0gdmlzaWJsZUZpbGVzLnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3Vycikge1xuICAgICAgICAgICAgaWYgKGN1cnIgPT09IGN1cnJlbnRQYXRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBnZXRGaWxlTmFtZShjdXJyKTtcbiAgICAgICAgICAgIGlmIChmaWxlTmFtZSA9PT0gZG9jdW1lbnRGaWxlTmFtZSkge1xuICAgICAgICAgICAgICAgIHByZXYucHVzaChjdXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmIChwYXRoc1dpdGhEdXBsaWNhdGVGaWxlTmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRGaWxlTmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxjdWxhdGVOZWFyZXN0VW5pcXVlUGF0aChjdXJyZW50UGF0aCwgcGF0aHNXaXRoRHVwbGljYXRlRmlsZU5hbWVzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0YWJzXCIsIFt0YWJzQ2xhc3NOYW1lLCBjbGFzc05hbWVdKSwgdHJhbnNsYXRlOiBcIm5vXCIgfSwgcHJvcHMsIHsgY2hpbGRyZW46IGpzeChcImRpdlwiLCB7IFwiYXJpYS1sYWJlbFwiOiBcIlNlbGVjdCBhY3RpdmUgZmlsZVwiLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0YWJzLXNjcm9sbGFibGUtY29udGFpbmVyXCIsIFtcbiAgICAgICAgICAgICAgICB0YWJzU2Nyb2xsYWJsZUNsYXNzTmFtZSxcbiAgICAgICAgICAgIF0pLCByb2xlOiBcInRhYmxpc3RcIiwgY2hpbGRyZW46IHZpc2libGVGaWxlcy5tYXAoZnVuY3Rpb24gKGZpbGVQYXRoKSB7IHJldHVybiAoanN4cyhcImJ1dHRvblwiLCB7IFwiYXJpYS1zZWxlY3RlZFwiOiBmaWxlUGF0aCA9PT0gYWN0aXZlRmlsZSwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGFiLWJ1dHRvblwiLCBbYnV0dG9uQ2xhc3NOYW1lLCB0YWJCdXR0b25dKSwgXCJkYXRhLWFjdGl2ZVwiOiBmaWxlUGF0aCA9PT0gYWN0aXZlRmlsZSwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0QWN0aXZlRmlsZShmaWxlUGF0aCk7IH0sIHJvbGU6IFwidGFiXCIsIHRpdGxlOiBmaWxlUGF0aCwgdHlwZTogXCJidXR0b25cIiwgY2hpbGRyZW46IFtnZXRUcmlnZ2VyVGV4dChmaWxlUGF0aCksIGNsb3NhYmxlVGFicyAmJiB2aXNpYmxlRmlsZXMubGVuZ3RoID4gMSAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImNsb3NlLWJ1dHRvblwiLCBbY2xvc2VCdXR0b25DbGFzc05hbWVdKSwgb25DbGljazogaGFuZGxlQ2xvc2VGaWxlLCBjaGlsZHJlbjoganN4KENsb3NlSWNvbiwge30pIH0pKV0gfSwgZmlsZVBhdGgpKTsgfSkgfSkgfSkpKTtcbn07XG5cbnZhciBSb3VuZGVkQnV0dG9uID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIG9uQ2xpY2sgPSBfYS5vbkNsaWNrLCBjbGFzc05hbWUgPSBfYS5jbGFzc05hbWUsIGNoaWxkcmVuID0gX2EuY2hpbGRyZW47XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB1c2VDbGFzc05hbWVzKCk7XG4gICAgcmV0dXJuIChqc3goXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJidXR0b25cIiwgW1xuICAgICAgICAgICAgY2xhc3NOYW1lcyhcImljb24tc3RhbmRhbG9uZVwiKSxcbiAgICAgICAgICAgIGJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgICAgIGljb25TdGFuZGFsb25lQ2xhc3NOYW1lLFxuICAgICAgICAgICAgcm91bmRlZEJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgXSksIG9uQ2xpY2s6IG9uQ2xpY2ssIHR5cGU6IFwiYnV0dG9uXCIsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xuXG52YXIgcnVuQnV0dG9uQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIGJvdHRvbTogXCIkc3BhY2UkMlwiLFxuICAgIHJpZ2h0OiBcIiRzcGFjZSQyXCIsXG4gICAgcGFkZGluZ1JpZ2h0OiBcIiRzcGFjZSQzXCIsXG59KTtcbnZhciBSdW5CdXR0b24kMSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIF9hLmNsYXNzTmFtZTsgdmFyIG9uQ2xpY2sgPSBfYS5vbkNsaWNrLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wiY2xhc3NOYW1lXCIsIFwib25DbGlja1wiXSk7XG4gICAgdmFyIHNhbmRwYWNrID0gdXNlU2FuZHBhY2soKS5zYW5kcGFjaztcbiAgICByZXR1cm4gKGpzeHMoUm91bmRlZEJ1dHRvbiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IHJ1bkJ1dHRvbkNsYXNzTmFtZS50b1N0cmluZygpLCBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHNhbmRwYWNrLnJ1blNhbmRwYWNrKCk7XG4gICAgICAgICAgICBvbkNsaWNrID09PSBudWxsIHx8IG9uQ2xpY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQ2xpY2soZXZlbnQpO1xuICAgICAgICB9IH0sIHByb3BzLCB7IGNoaWxkcmVuOiBbanN4KFJ1bkljb24sIHt9KSwganN4KFwic3BhblwiLCB7IGNoaWxkcmVuOiBcIlJ1blwiIH0pXSB9KSkpO1xufTtcblxudmFyIF9hJDY7XG52YXIgc3RhY2tDbGFzc05hbWUgPSBjc3MoKF9hJDYgPSB7XG4gICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIkY29sb3JzJHN1cmZhY2UxXCIsXG4gICAgICAgIGdhcDogMVxuICAgIH0sXG4gICAgX2EkNltcIiY6aGFzKC5cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1zdGFjaylcIildID0ge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiJGNvbG9ycyRzdXJmYWNlMlwiLFxuICAgIH0sXG4gICAgX2EkNikpO1xudmFyIFNhbmRwYWNrU3RhY2sgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gX2EuY2xhc3NOYW1lLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInN0YWNrXCIsIFtzdGFja0NsYXNzTmFtZSwgY2xhc3NOYW1lXSkgfSwgcHJvcHMpKSk7XG59O1xuXG4vKipcbiAqIEBjYXRlZ29yeSBIb29rc1xuICovXG52YXIgdXNlU2FuZHBhY2tUaGVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2EgPSBSZWFjdC51c2VDb250ZXh0KFNhbmRwYWNrVGhlbWVDb250ZXh0KSwgdGhlbWUgPSBfYS50aGVtZSwgaWQgPSBfYS5pZCwgbW9kZSA9IF9hLm1vZGU7XG4gICAgcmV0dXJuIHsgdGhlbWU6IHRoZW1lLCB0aGVtZUlkOiBpZCwgdGhlbWVNb2RlOiBtb2RlIH07XG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG52YXIgc2hhbGxvd0VxdWFsID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGlmIChhW2luZGV4XSAhPT0gYltpbmRleF0pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBnZXRDb2RlTWlycm9yUG9zaXRpb24gPSBmdW5jdGlvbiAoZG9jLCBfYSkge1xuICAgIHZhciBsaW5lID0gX2EubGluZSwgY29sdW1uID0gX2EuY29sdW1uO1xuICAgIHJldHVybiBkb2MubGluZShsaW5lKS5mcm9tICsgKGNvbHVtbiAhPT0gbnVsbCAmJiBjb2x1bW4gIT09IHZvaWQgMCA/IGNvbHVtbiA6IDApIC0gMTtcbn07XG52YXIgZ2V0RWRpdG9yVGhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIEVkaXRvclZpZXcudGhlbWUoe1xuICAgICAgICBcIiZcIjoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLWNvbG9ycy1zdXJmYWNlMSlcIiksXG4gICAgICAgICAgICBjb2xvcjogXCJ2YXIoLS1cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1zeW50YXgtY29sb3ItcGxhaW4pXCIpLFxuICAgICAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tbWF0Y2hpbmdCcmFja2V0LCAuY20tbm9ubWF0Y2hpbmdCcmFja2V0LCAmLmNtLWZvY3VzZWQgLmNtLW1hdGNoaW5nQnJhY2tldCwgJi5jbS1mb2N1c2VkIC5jbS1ub25tYXRjaGluZ0JyYWNrZXRcIjoge1xuICAgICAgICAgICAgY29sb3I6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMTI4LDEyOCwxMjgsLjI1KVwiLFxuICAgICAgICAgICAgYmFja2dyb3VuZEJsZW5kTW9kZTogXCJkaWZmZXJlbmNlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiJi5jbS1lZGl0b3IuY20tZm9jdXNlZFwiOiB7XG4gICAgICAgICAgICBvdXRsaW5lOiBcIm5vbmVcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tYWN0aXZlTGluZVwiOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwidmFyKC0tXCIuY29uY2F0KFRIRU1FX1BSRUZJWCwgXCItY29sb3JzLXN1cmZhY2UzKVwiKSxcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogXCJ2YXIoLS1cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1ib3JkZXItcmFkaXVzKVwiKSxcbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tZXJyb3JMaW5lXCI6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ2YXIoLS1cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1jb2xvcnMtZXJyb3JTdXJmYWNlKVwiKSxcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogXCJ2YXIoLS1cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1ib3JkZXItcmFkaXVzKVwiKSxcbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tY29udGVudFwiOiB7XG4gICAgICAgICAgICBjYXJldENvbG9yOiBcInZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLWNvbG9ycy1hY2NlbnQpXCIpLFxuICAgICAgICAgICAgcGFkZGluZzogXCIwIHZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLXNwYWNlLTQpXCIpLFxuICAgICAgICB9LFxuICAgICAgICBcIi5jbS1zY3JvbGxlclwiOiB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiBcInZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLWZvbnQtbW9ubylcIiksXG4gICAgICAgICAgICBsaW5lSGVpZ2h0OiBcInZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLWZvbnQtbGluZUhlaWdodClcIiksXG4gICAgICAgIH0sXG4gICAgICAgIFwiLmNtLWd1dHRlcnNcIjoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLWNvbG9ycy1zdXJmYWNlMSlcIiksXG4gICAgICAgICAgICBjb2xvcjogXCJ2YXIoLS1cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1jb2xvcnMtZGlzYWJsZWQpXCIpLFxuICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiBcInZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLXNwYWNlLTEpXCIpLFxuICAgICAgICB9LFxuICAgICAgICBcIi5jbS1ndXR0ZXIuY20tbGluZU51bWJlcnNcIjoge1xuICAgICAgICAgICAgZm9udFNpemU6IFwiLjZlbVwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi5jbS1saW5lTnVtYmVycyAuY20tZ3V0dGVyRWxlbWVudFwiOiB7XG4gICAgICAgICAgICBsaW5lSGVpZ2h0OiBcInZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLWZvbnQtbGluZUhlaWdodClcIiksXG4gICAgICAgICAgICBtaW5XaWR0aDogXCJ2YXIoLS1cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1zcGFjZS01KVwiKSxcbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tY29udGVudCAuY20tbGluZVwiOiB7IHBhZGRpbmdMZWZ0OiBcInZhcigtLVwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLXNwYWNlLTEpXCIpIH0sXG4gICAgICAgIFwiLmNtLWNvbnRlbnQuY20tcmVhZG9ubHkgLmNtLWxpbmVcIjogeyBwYWRkaW5nTGVmdDogMCB9LFxuICAgIH0pO1xufTtcbnZhciBjbGFzc05hbWVUb2tlbiA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KFRIRU1FX1BSRUZJWCwgXCItc3ludGF4LVwiKS5jb25jYXQobmFtZSk7XG59O1xudmFyIHN0eWxlVG9rZW5zID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzeW50YXhIaWdoTGlnaHRUb2tlbnMgPSBbXG4gICAgICAgIFwic3RyaW5nXCIsXG4gICAgICAgIFwicGxhaW5cIixcbiAgICAgICAgXCJjb21tZW50XCIsXG4gICAgICAgIFwia2V5d29yZFwiLFxuICAgICAgICBcImRlZmluaXRpb25cIixcbiAgICAgICAgXCJwdW5jdHVhdGlvblwiLFxuICAgICAgICBcInByb3BlcnR5XCIsXG4gICAgICAgIFwidGFnXCIsXG4gICAgICAgIFwic3RhdGljXCIsXG4gICAgXTtcbiAgICByZXR1cm4gc3ludGF4SGlnaExpZ2h0VG9rZW5zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCB0b2tlbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYWNjKSwgKF9hID0ge30sIF9hW1wiLlwiLmNvbmNhdChjbGFzc05hbWVUb2tlbih0b2tlbikpXSA9IHtcbiAgICAgICAgICAgIGNvbG9yOiBcIiRzeW50YXgkY29sb3IkXCIuY29uY2F0KHRva2VuKSxcbiAgICAgICAgICAgIGZvbnRTdHlsZTogXCIkc3ludGF4JGZvbnRTdHlsZSRcIi5jb25jYXQodG9rZW4pLFxuICAgICAgICB9LCBfYSkpO1xuICAgIH0sIHt9KTtcbn07XG52YXIgZ2V0U3ludGF4SGlnaGxpZ2h0ID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgcmV0dXJuIEhpZ2hsaWdodFN0eWxlLmRlZmluZShbXG4gICAgICAgIHsgdGFnOiB0YWdzLmxpbmssIHRleHREZWNvcmF0aW9uOiBcInVuZGVybGluZVwiIH0sXG4gICAgICAgIHsgdGFnOiB0YWdzLmVtcGhhc2lzLCBmb250U3R5bGU6IFwiaXRhbGljXCIgfSxcbiAgICAgICAgeyB0YWc6IHRhZ3Muc3Ryb25nLCBmb250V2VpZ2h0OiBcImJvbGRcIiB9LFxuICAgICAgICB7XG4gICAgICAgICAgICB0YWc6IHRhZ3Mua2V5d29yZCxcbiAgICAgICAgICAgIGNsYXNzOiBjbGFzc05hbWVUb2tlbihcImtleXdvcmRcIiksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogW3RhZ3MuYXRvbSwgdGFncy5udW1iZXIsIHRhZ3MuYm9vbF0sXG4gICAgICAgICAgICBjbGFzczogY2xhc3NOYW1lVG9rZW4oXCJzdGF0aWNcIiksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogdGFncy52YXJpYWJsZU5hbWUsXG4gICAgICAgICAgICBjbGFzczogY2xhc3NOYW1lVG9rZW4oXCJwbGFpblwiKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gU3RhbmRhcmQgdGFncywgZS5nIDxoMSAvPlxuICAgICAgICAgICAgdGFnOiB0YWdzLnN0YW5kYXJkKHRhZ3MudGFnTmFtZSksXG4gICAgICAgICAgICBjbGFzczogY2xhc3NOYW1lVG9rZW4oXCJ0YWdcIiksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogW1xuICAgICAgICAgICAgICAgIC8vIEhpZ2hsaWdodCBmdW5jdGlvbiBjYWxsXG4gICAgICAgICAgICAgICAgdGFncy5mdW5jdGlvbih0YWdzLnZhcmlhYmxlTmFtZSksXG4gICAgICAgICAgICAgICAgLy8gSGlnaGxpZ2h0IGZ1bmN0aW9uIGRlZmluaXRpb24gZGlmZmVyZW50bHkgKGVnOiBmdW5jdGlvbmFsIGNvbXBvbmVudCBkZWYgaW4gUmVhY3QpXG4gICAgICAgICAgICAgICAgdGFncy5kZWZpbml0aW9uKHRhZ3MuZnVuY3Rpb24odGFncy52YXJpYWJsZU5hbWUpKSxcbiAgICAgICAgICAgICAgICAvLyBcIkN1c3RvbSB0YWdzXCIsIG1lYW5pbmcgUmVhY3QgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgdGFncy50YWdOYW1lLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGNsYXNzOiBjbGFzc05hbWVUb2tlbihcImRlZmluaXRpb25cIiksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogdGFncy5wcm9wZXJ0eU5hbWUsXG4gICAgICAgICAgICBjbGFzczogY2xhc3NOYW1lVG9rZW4oXCJwcm9wZXJ0eVwiKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgdGFnOiBbdGFncy5saXRlcmFsLCB0YWdzLmluc2VydGVkXSxcbiAgICAgICAgICAgIGNsYXNzOiBjbGFzc05hbWVUb2tlbih0aGVtZS5zeW50YXguc3RyaW5nID8gXCJzdHJpbmdcIiA6IFwic3RhdGljXCIpLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICB0YWc6IHRhZ3MucHVuY3R1YXRpb24sXG4gICAgICAgICAgICBjbGFzczogY2xhc3NOYW1lVG9rZW4oXCJwdW5jdHVhdGlvblwiKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgdGFnOiBbdGFncy5jb21tZW50LCB0YWdzLnF1b3RlXSxcbiAgICAgICAgICAgIGNsYXNzOiBjbGFzc05hbWVUb2tlbihcImNvbW1lbnRcIiksXG4gICAgICAgIH0sXG4gICAgXSk7XG59O1xudmFyIGdldExhbmd1YWdlRnJvbUZpbGUgPSBmdW5jdGlvbiAoZmlsZVBhdGgsIGZpbGVUeXBlLCBhZGRpdGlvbmFsTGFuZ3VhZ2VzKSB7XG4gICAgaWYgKCFmaWxlUGF0aCAmJiAhZmlsZVR5cGUpXG4gICAgICAgIHJldHVybiBcImphdmFzY3JpcHRcIjtcbiAgICB2YXIgZXh0ZW5zaW9uID0gZmlsZVR5cGU7XG4gICAgaWYgKCFleHRlbnNpb24gJiYgZmlsZVBhdGgpIHtcbiAgICAgICAgdmFyIGV4dGVuc2lvbkRvdEluZGV4ID0gZmlsZVBhdGgubGFzdEluZGV4T2YoXCIuXCIpO1xuICAgICAgICBleHRlbnNpb24gPSBmaWxlUGF0aC5zbGljZShleHRlbnNpb25Eb3RJbmRleCArIDEpO1xuICAgIH1cbiAgICBmb3IgKHZhciBfaSA9IDAsIGFkZGl0aW9uYWxMYW5ndWFnZXNfMSA9IGFkZGl0aW9uYWxMYW5ndWFnZXM7IF9pIDwgYWRkaXRpb25hbExhbmd1YWdlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgYWRkaXRpb25hbExhbmd1YWdlID0gYWRkaXRpb25hbExhbmd1YWdlc18xW19pXTtcbiAgICAgICAgaWYgKGV4dGVuc2lvbiA9PT0gYWRkaXRpb25hbExhbmd1YWdlLm5hbWUgfHxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxMYW5ndWFnZS5leHRlbnNpb25zLmluY2x1ZGVzKGV4dGVuc2lvbiB8fCBcIlwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIGFkZGl0aW9uYWxMYW5ndWFnZS5uYW1lO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN3aXRjaCAoZXh0ZW5zaW9uKSB7XG4gICAgICAgIGNhc2UgXCJ0c1wiOlxuICAgICAgICBjYXNlIFwidHN4XCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ0eXBlc2NyaXB0XCI7XG4gICAgICAgIGNhc2UgXCJodG1sXCI6XG4gICAgICAgIGNhc2UgXCJzdmVsdGVcIjpcbiAgICAgICAgY2FzZSBcInZ1ZVwiOlxuICAgICAgICBjYXNlIFwiYXN0cm9cIjpcbiAgICAgICAgICAgIHJldHVybiBcImh0bWxcIjtcbiAgICAgICAgY2FzZSBcImNzc1wiOlxuICAgICAgICBjYXNlIFwibGVzc1wiOlxuICAgICAgICBjYXNlIFwic2Nzc1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiY3NzXCI7XG4gICAgICAgIGNhc2UgXCJqc1wiOlxuICAgICAgICBjYXNlIFwianN4XCI6XG4gICAgICAgIGNhc2UgXCJqc29uXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJqYXZhc2NyaXB0XCI7XG4gICAgfVxufTtcbnZhciBnZXRDb2RlTWlycm9yTGFuZ3VhZ2UgPSBmdW5jdGlvbiAoZXh0ZW5zaW9uLCBhZGRpdGlvbmFsTGFuZ3VhZ2VzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIGphdmFzY3JpcHQ6IGphdmFzY3JpcHQoeyBqc3g6IHRydWUsIHR5cGVzY3JpcHQ6IGZhbHNlIH0pLFxuICAgICAgICB0eXBlc2NyaXB0OiBqYXZhc2NyaXB0KHsganN4OiB0cnVlLCB0eXBlc2NyaXB0OiB0cnVlIH0pLFxuICAgICAgICBodG1sOiBodG1sKCksXG4gICAgICAgIGNzczogY3NzJDEoKSxcbiAgICB9O1xuICAgIGZvciAodmFyIF9pID0gMCwgYWRkaXRpb25hbExhbmd1YWdlc18yID0gYWRkaXRpb25hbExhbmd1YWdlczsgX2kgPCBhZGRpdGlvbmFsTGFuZ3VhZ2VzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBhZGRpdGlvbmFsTGFuZ3VhZ2UgPSBhZGRpdGlvbmFsTGFuZ3VhZ2VzXzJbX2ldO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uID09PSBhZGRpdGlvbmFsTGFuZ3VhZ2UubmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFkZGl0aW9uYWxMYW5ndWFnZS5sYW5ndWFnZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3B0aW9uc1tleHRlbnNpb25dO1xufTtcbnZhciB1c2VDb21iaW5lZFJlZnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlZnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICByZWZzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBSZWFjdC51c2VDYWxsYmFjayhmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gcmVmcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgICAgIGlmICghcmVmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVmIGNhbiBoYXZlIHR3byB0eXBlcyAtIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0LiBXZSB0cmVhdCBlYWNoIGNhc2UuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlZiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZihlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFzIHBlciBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzEzMDI5XG4gICAgICAgICAgICAvLyBpdCBzaG91bGQgYmUgZmluZSB0byBzZXQgY3VycmVudCB0aGlzIHdheS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICByZWYuY3VycmVudCA9IGVsZW1lbnQ7XG4gICAgICAgIH0pO1xuICAgIH0sIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICByZWZzKTtcbn07XG5cbmZ1bmN0aW9uIGhpZ2hsaWdodERlY29yYXRvcnMocG9zaXRpb25zKSB7XG4gICAgcmV0dXJuIFZpZXdQbHVnaW4uZnJvbUNsYXNzKC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gY2xhc3NfMSh2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5nZXREZWNvcmF0aW9uKHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0RGVjb3JhdGlvbiA9IGZ1bmN0aW9uICh2aWV3KSB7XG4gICAgICAgICAgICBpZiAoIXBvc2l0aW9ucylcbiAgICAgICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICAgICAgdmFyIHJhbmdlc0RlY29yYXRvcnMgPSBwb3NpdGlvbnMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVEZWNvID0gRGVjb3JhdGlvbi5saW5lKHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogeyBjbGFzczogKF9hID0gaXRlbS5jbGFzc05hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCIgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbWFya0RlY28gPSBEZWNvcmF0aW9uLm1hcmsoe1xuICAgICAgICAgICAgICAgICAgICBjbGFzczogKF9iID0gaXRlbS5jbGFzc05hbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IChfYyA9IGl0ZW0uZWxlbWVudEF0dHJpYnV0ZXMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb25MaW5lU3RhcnQgPSBnZXRDb2RlTWlycm9yUG9zaXRpb24odmlldy5zdGF0ZS5kb2MsIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZTogaXRlbS5saW5lLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGl0ZW0uc3RhcnRDb2x1bW4sXG4gICAgICAgICAgICAgICAgfSkgKyAxO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnN0YXJ0Q29sdW1uICYmIGl0ZW0uZW5kQ29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbkxpbmVFbmQgPSBnZXRDb2RlTWlycm9yUG9zaXRpb24odmlldy5zdGF0ZS5kb2MsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGl0ZW0ubGluZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogaXRlbS5lbmRDb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIH0pICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtEZWNvLnJhbmdlKHBvc2l0aW9uTGluZVN0YXJ0LCBwb3NpdGlvbkxpbmVFbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbGluZURlY28ucmFuZ2UocG9zaXRpb25MaW5lU3RhcnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQocmFuZ2VzRGVjb3JhdG9ycyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjbGFzc18xO1xuICAgIH0oKSksIHtcbiAgICAgICAgZGVjb3JhdGlvbnM6IGZ1bmN0aW9uICh2KSB7IHJldHVybiB2LmRlY29yYXRpb25zOyB9LFxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRJbmxpbmVFcnJvcigpIHtcbiAgICByZXR1cm4gYWN0aXZlTGluZUhpZ2hsaWdodGVyO1xufVxudmFyIGxpbmVEZWNvID0gRGVjb3JhdGlvbi5saW5lKHsgYXR0cmlidXRlczogeyBjbGFzczogXCJjbS1lcnJvckxpbmVcIiB9IH0pO1xudmFyIGFjdGl2ZUxpbmVIaWdobGlnaHRlciA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjbGFzc18xKCkge1xuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gRGVjb3JhdGlvbi5ub25lO1xuICAgIH1cbiAgICBjbGFzc18xLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodXBkYXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHVwZGF0ZS50cmFuc2FjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHZhciBlcnJvclZhbHVlID0gdHJhbnMuYW5ub3RhdGlvbihcInNob3ctZXJyb3JcIik7XG4gICAgICAgICAgICBpZiAoZXJyb3JWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gZ2V0Q29kZU1pcnJvclBvc2l0aW9uKHVwZGF0ZS52aWV3LnN0YXRlLmRvYywge1xuICAgICAgICAgICAgICAgICAgICBsaW5lOiBlcnJvclZhbHVlLFxuICAgICAgICAgICAgICAgIH0pICsgMTtcbiAgICAgICAgICAgICAgICBfdGhpcy5kZWNvcmF0aW9ucyA9IERlY29yYXRpb24uc2V0KFtsaW5lRGVjby5yYW5nZShwb3NpdGlvbildKTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0cmFucy5hbm5vdGF0aW9uKFwicmVtb3ZlLWVycm9yc1wiKSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmRlY29yYXRpb25zID0gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBjbGFzc18xO1xufSgpKSwge1xuICAgIGRlY29yYXRpb25zOiBmdW5jdGlvbiAodikgeyByZXR1cm4gdi5kZWNvcmF0aW9uczsgfSxcbn0pO1xuXG52YXIgX2EkNSwgX2IkMTtcbnZhciBwbGFjZWhvbGRlckNsYXNzTmFtZSA9IGNzcyh7XG4gICAgbWFyZ2luOiBcIjBcIixcbiAgICBkaXNwbGF5OiBcImJsb2NrXCIsXG4gICAgZm9udEZhbWlseTogXCIkZm9udCRtb25vXCIsXG4gICAgZm9udFNpemU6IFwiJGZvbnQkc2l6ZVwiLFxuICAgIGNvbG9yOiBcIiRzeW50YXgkY29sb3IkcGxhaW5cIixcbiAgICBsaW5lSGVpZ2h0OiBcIiRmb250JGxpbmVIZWlnaHRcIixcbn0pO1xudmFyIHRva2Vuc0NsYXNzTmFtZSA9IGNzcyhzdHlsZVRva2VucygpKTtcbnZhciBlZGl0b3JDbGFzc05hbWUgPSBjc3MoKF9hJDUgPSB7XG4gICAgICAgIGZsZXg6IDEsXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIG92ZXJmbG93OiBcImF1dG9cIixcbiAgICAgICAgYmFja2dyb3VuZDogXCIkY29sb3JzJHN1cmZhY2UxXCIsXG4gICAgICAgIFwiLmNtLXNjcm9sbGVyXCI6IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IFwiJHNwYWNlJDQgMFwiLFxuICAgICAgICB9XG4gICAgfSxcbiAgICBfYSQ1W1wiLlwiLmNvbmNhdChwbGFjZWhvbGRlckNsYXNzTmFtZSldID0ge1xuICAgICAgICBwYWRkaW5nOiBcIiRzcGFjZSQ0IDBcIixcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEZvciBpT1M6IHByZXZlbnQgYnJvd3NlciB6b29tIHdoZW4gY2xpY2tpbmcgb24gc2FuZGJveC5cbiAgICAgKiBEb2VzIE5PVCBhcHBseSB0byBjb2RlIGJsb2Nrcy5cbiAgICAgKi9cbiAgICBfYSQ1W1wiQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY4cHgpXCJdID0ge1xuICAgICAgICBcIkBzdXBwb3J0cyAoLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoKVwiOiB7XG4gICAgICAgICAgICBcIi5jbS1jb250ZW50XCI6IHsgZm9udFNpemU6IFwiMTZweFwiIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBfYSQ1KSk7XG52YXIgY21DbGFzc05hbWUgPSBjc3Moe1xuICAgIG1hcmdpbjogXCIwXCIsXG4gICAgb3V0bGluZTogXCJub25lXCIsXG4gICAgaGVpZ2h0OiBcIjEwMCVcIixcbn0pO1xudmFyIHJlYWRPbmx5Q2xhc3NOYW1lID0gY3NzKChfYiQxID0ge1xuICAgICAgICBmb250RmFtaWx5OiBcIiRmb250JG1vbm9cIixcbiAgICAgICAgZm9udFNpemU6IFwiMC44ZW1cIixcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgcmlnaHQ6IFwiJHNwYWNlJDJcIixcbiAgICAgICAgYm90dG9tOiBcIiRzcGFjZSQyXCIsXG4gICAgICAgIHpJbmRleDogXCIkdG9wXCIsXG4gICAgICAgIGNvbG9yOiBcIiRjb2xvcnMkY2xpY2thYmxlXCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIkY29sb3JzJHN1cmZhY2UyXCIsXG4gICAgICAgIGJvcmRlclJhZGl1czogXCI5OTk5OXB4XCIsXG4gICAgICAgIHBhZGRpbmc6IFwiY2FsYygkc3BhY2UkMSAvIDIpICRzcGFjZSQyXCJcbiAgICB9LFxuICAgIF9iJDFbXCImICsgLlwiLmNvbmNhdChidXR0b25DbGFzc05hbWUpXSA9IHtcbiAgICAgICAgcmlnaHQ6IFwiY2FsYygkc3BhY2UkMTEgKiAyKVwiLFxuICAgIH0sXG4gICAgX2IkMSkpO1xuXG52YXIgdXNlU3ludGF4SGlnaGxpZ2h0ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGxhbmdTdXBwb3J0ID0gX2EubGFuZ1N1cHBvcnQsIGhpZ2hsaWdodFRoZW1lID0gX2EuaGlnaGxpZ2h0VGhlbWUsIF9iID0gX2EuY29kZSwgY29kZSA9IF9iID09PSB2b2lkIDAgPyBcIlwiIDogX2I7XG4gICAgdmFyIHRyZWUgPSBsYW5nU3VwcG9ydC5sYW5ndWFnZS5wYXJzZXIucGFyc2UoY29kZSk7XG4gICAgdmFyIG9mZlNldCA9IDA7XG4gICAgdmFyIGNvZGVFbGVtZW50c1JlbmRlciA9IFtdO1xuICAgIHZhciBhZGRFbGVtZW50ID0gZnVuY3Rpb24gKHRvLCBjbGFzc05hbWUpIHtcbiAgICAgICAgaWYgKHRvID4gb2ZmU2V0KSB7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBjb2RlLnNsaWNlKG9mZlNldCwgdG8pO1xuICAgICAgICAgICAgY29kZUVsZW1lbnRzUmVuZGVyLnB1c2goY2xhc3NOYW1lXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgIGtleTogXCJcIi5jb25jYXQodG8pLmNvbmNhdChvZmZTZXQpLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBjaGlsZHJlbik7XG4gICAgICAgICAgICBvZmZTZXQgPSB0bztcbiAgICAgICAgfVxuICAgIH07XG4gICAgaGlnaGxpZ2h0VHJlZSh0cmVlLCBoaWdobGlnaHRUaGVtZSwgZnVuY3Rpb24gKGZyb20sIHRvLCBjbGFzc05hbWUpIHtcbiAgICAgICAgYWRkRWxlbWVudChmcm9tLCBcIlwiKTtcbiAgICAgICAgYWRkRWxlbWVudCh0bywgY2xhc3NOYW1lKTtcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBUaGUgbGFuZ3VhZ2UgcGFyc2UgZG9lc24ndCBsb29rIGNvbnNpc3RlbnQuXG4gICAgICogVGhlIGZpbmFsIHN5bnRheCBoaWdobGlnaHQgdXNlZCBieSBDb2RlTWlycm9yXG4gICAgICogaW5jbHVkZXMgYW4gZW5kIGVtcHR5IGxpbmUsIGFuZCB0aGUgcGFyc2UgaGVyZSBkb2Vzbid0LFxuICAgICAqIHNvIGxldCdzIGFkZCBpdCBtYW51YWxseS5cbiAgICAgKi9cbiAgICBpZiAob2ZmU2V0IDwgY29kZS5sZW5ndGggJiYgKGNvZGUgPT09IG51bGwgfHwgY29kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29kZS5pbmNsdWRlcyhcIlxcblwiKSkpIHtcbiAgICAgICAgY29kZUVsZW1lbnRzUmVuZGVyLnB1c2goXCJcXG5cXG5cIik7XG4gICAgfVxuICAgIHJldHVybiBjb2RlRWxlbWVudHNSZW5kZXI7XG59O1xuXG52YXIgQ29kZU1pcnJvciA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYS5jb2RlLCBjb2RlID0gX2IgPT09IHZvaWQgMCA/IFwiXCIgOiBfYiwgZmlsZVBhdGggPSBfYS5maWxlUGF0aCwgZmlsZVR5cGUgPSBfYS5maWxlVHlwZSwgb25Db2RlVXBkYXRlID0gX2Eub25Db2RlVXBkYXRlLCBfYyA9IF9hLnNob3dMaW5lTnVtYmVycywgc2hvd0xpbmVOdW1iZXJzID0gX2MgPT09IHZvaWQgMCA/IGZhbHNlIDogX2MsIF9kID0gX2Euc2hvd0lubGluZUVycm9ycywgc2hvd0lubGluZUVycm9ycyA9IF9kID09PSB2b2lkIDAgPyBmYWxzZSA6IF9kLCBfZSA9IF9hLndyYXBDb250ZW50LCB3cmFwQ29udGVudCA9IF9lID09PSB2b2lkIDAgPyBmYWxzZSA6IF9lLCBfZiA9IF9hLmVkaXRvclN0YXRlLCBlZGl0b3JTdGF0ZSA9IF9mID09PSB2b2lkIDAgPyBcInByaXN0aW5lXCIgOiBfZiwgX2cgPSBfYS5yZWFkT25seSwgcmVhZE9ubHkgPSBfZyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZywgX2ggPSBfYS5zaG93UmVhZE9ubHksIHNob3dSZWFkT25seSA9IF9oID09PSB2b2lkIDAgPyB0cnVlIDogX2gsIGRlY29yYXRvcnMgPSBfYS5kZWNvcmF0b3JzLCBfaiA9IF9hLmluaXRNb2RlLCBpbml0TW9kZSA9IF9qID09PSB2b2lkIDAgPyBcImxhenlcIiA6IF9qLCBfayA9IF9hLmV4dGVuc2lvbnMsIGV4dGVuc2lvbnMgPSBfayA9PT0gdm9pZCAwID8gW10gOiBfaywgX2wgPSBfYS5leHRlbnNpb25zS2V5bWFwLCBleHRlbnNpb25zS2V5bWFwID0gX2wgPT09IHZvaWQgMCA/IFtdIDogX2wsIF9tID0gX2EuYWRkaXRpb25hbExhbmd1YWdlcywgYWRkaXRpb25hbExhbmd1YWdlcyA9IF9tID09PSB2b2lkIDAgPyBbXSA6IF9tO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdmFyIHdyYXBwZXIgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gICAgdmFyIGNvbWJpbmVkUmVmID0gdXNlQ29tYmluZWRSZWZzKHdyYXBwZXIsIHJlZik7XG4gICAgdmFyIGNtVmlldyA9IFJlYWN0LnVzZVJlZigpO1xuICAgIHZhciBfbyA9IHVzZVNhbmRwYWNrVGhlbWUoKSwgdGhlbWUgPSBfby50aGVtZSwgdGhlbWVJZCA9IF9vLnRoZW1lSWQ7XG4gICAgdmFyIF9wID0gUmVhY3QudXNlU3RhdGUoY29kZSksIGludGVybmFsQ29kZSA9IF9wWzBdLCBzZXRJbnRlcm5hbENvZGUgPSBfcFsxXTtcbiAgICB2YXIgX3EgPSBSZWFjdC51c2VTdGF0ZShpbml0TW9kZSA9PT0gXCJpbW1lZGlhdGVcIiksIHNob3VsZEluaXRFZGl0b3IgPSBfcVswXSwgc2V0U2hvdWxkSW5pdEVkaXRvciA9IF9xWzFdO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHZhciBfciA9IHVzZVNhbmRwYWNrKCksIGxpc3RlbiA9IF9yLmxpc3RlbiwgYXV0b1JlbG9hZCA9IF9yLnNhbmRwYWNrLmF1dG9SZWxvYWQ7XG4gICAgdmFyIHByZXZFeHRlbnNpb24gPSBSZWFjdC51c2VSZWYoW10pO1xuICAgIHZhciBwcmV2RXh0ZW5zaW9uS2V5bWFwID0gUmVhY3QudXNlUmVmKFtdKTtcbiAgICB2YXIgaXNJbnRlcnNlY3RpbmcgPSB1c2VJbnRlcnNlY3Rpb25PYnNlcnZlcih3cmFwcGVyLCB7XG4gICAgICAgIHJvb3RNYXJnaW46IFwiNjAwcHggMHB4XCIsXG4gICAgICAgIHRocmVzaG9sZDogMC4yLFxuICAgIH0pLmlzSW50ZXJzZWN0aW5nO1xuICAgIFJlYWN0LnVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgICAgICBnZXRDb2RlbWlycm9yOiBmdW5jdGlvbiAoKSB7IHJldHVybiBjbVZpZXcuY3VycmVudDsgfSxcbiAgICB9KTsgfSk7XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1vZGUgPSBpbml0TW9kZSA9PT0gXCJsYXp5XCIgfHwgaW5pdE1vZGUgPT09IFwidXNlci12aXNpYmxlXCI7XG4gICAgICAgIGlmIChtb2RlICYmIGlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICBzZXRTaG91bGRJbml0RWRpdG9yKHRydWUpO1xuICAgICAgICB9XG4gICAgfSwgW2luaXRNb2RlLCBpc0ludGVyc2VjdGluZ10pO1xuICAgIHZhciBsYW5ndWFnZUV4dGVuc2lvbiA9IGdldExhbmd1YWdlRnJvbUZpbGUoZmlsZVBhdGgsIGZpbGVUeXBlLCBhZGRpdGlvbmFsTGFuZ3VhZ2VzKTtcbiAgICB2YXIgbGFuZ1N1cHBvcnQgPSBnZXRDb2RlTWlycm9yTGFuZ3VhZ2UobGFuZ3VhZ2VFeHRlbnNpb24sIGFkZGl0aW9uYWxMYW5ndWFnZXMpO1xuICAgIHZhciBoaWdobGlnaHRUaGVtZSA9IGdldFN5bnRheEhpZ2hsaWdodCh0aGVtZSk7XG4gICAgdmFyIHN5bnRheEhpZ2hsaWdodFJlbmRlciA9IHVzZVN5bnRheEhpZ2hsaWdodCh7XG4gICAgICAgIGxhbmdTdXBwb3J0OiBsYW5nU3VwcG9ydCxcbiAgICAgICAgaGlnaGxpZ2h0VGhlbWU6IGhpZ2hsaWdodFRoZW1lLFxuICAgICAgICBjb2RlOiBjb2RlLFxuICAgIH0pO1xuICAgIC8vIGRlY29yYXRvcnMgbmVlZCB0byBiZSBzb3J0ZWQgYnkgYGxpbmVgLCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBlcnJvclxuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY29kZXNhbmRib3gvc2FuZHBhY2svaXNzdWVzLzM4M1xuICAgIHZhciBzb3J0ZWREZWNvcmF0b3JzID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBkZWNvcmF0b3JzXG4gICAgICAgICAgICA/IGRlY29yYXRvcnMuc29ydChmdW5jdGlvbiAoZDEsIGQyKSB7IHJldHVybiBkMS5saW5lIC0gZDIubGluZTsgfSlcbiAgICAgICAgICAgIDogZGVjb3JhdG9ycztcbiAgICB9LCBbZGVjb3JhdG9yc10pO1xuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghd3JhcHBlci5jdXJyZW50IHx8ICFzaG91bGRJbml0RWRpdG9yKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgY3VzdG9tQ29tbWFuZHNLZXltYXAgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiBcIlRhYlwiLFxuICAgICAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgICAgICAgICAgaW5kZW50TW9yZSh2aWV3KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbUtleSA9IGV4dGVuc2lvbnNLZXltYXAuZmluZChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYS5rZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5ID09PSBcIlRhYlwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IGN1c3RvbUtleSA9PT0gbnVsbCB8fCBjdXN0b21LZXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1c3RvbUtleS5ydW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKGN1c3RvbUtleSwgdmlldykpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiBcIlNoaWZ0LVRhYlwiLFxuICAgICAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYiwgX2M7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IF9hLnN0YXRlLCBkaXNwYXRjaCA9IF9hLmRpc3BhdGNoO1xuICAgICAgICAgICAgICAgICAgICBpbmRlbnRMZXNzKHsgc3RhdGU6IHN0YXRlLCBkaXNwYXRjaDogZGlzcGF0Y2ggfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21LZXkgPSBleHRlbnNpb25zS2V5bWFwLmZpbmQoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2Eua2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleSA9PT0gXCJTaGlmdC1UYWJcIjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoX2MgPSAoX2IgPSBjdXN0b21LZXkgPT09IG51bGwgfHwgY3VzdG9tS2V5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXN0b21LZXkucnVuKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChjdXN0b21LZXksIHZpZXcpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogXCJFc2NhcGVcIixcbiAgICAgICAgICAgICAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYWRPbmx5KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3cmFwcGVyLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY3VycmVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogXCJtb2QtQmFja3NwYWNlXCIsXG4gICAgICAgICAgICAgICAgcnVuOiBkZWxldGVHcm91cEJhY2t3YXJkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGV4dGVuc2lvbkxpc3QgPSBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW1xuICAgICAgICAgICAgaGlnaGxpZ2h0U3BlY2lhbENoYXJzKCksXG4gICAgICAgICAgICBoaXN0b3J5KCksXG4gICAgICAgICAgICBjbG9zZUJyYWNrZXRzKClcbiAgICAgICAgXSwgZXh0ZW5zaW9ucywgdHJ1ZSksIFtcbiAgICAgICAgICAgIGtleW1hcC5vZihfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIGNsb3NlQnJhY2tldHNLZXltYXAsIHRydWUpLCBkZWZhdWx0S2V5bWFwLCB0cnVlKSwgaGlzdG9yeUtleW1hcCwgdHJ1ZSksIGN1c3RvbUNvbW1hbmRzS2V5bWFwLCB0cnVlKSwgZXh0ZW5zaW9uc0tleW1hcCwgdHJ1ZSkpLFxuICAgICAgICAgICAgbGFuZ1N1cHBvcnQsXG4gICAgICAgICAgICBnZXRFZGl0b3JUaGVtZSgpLFxuICAgICAgICAgICAgc3ludGF4SGlnaGxpZ2h0aW5nKGhpZ2hsaWdodFRoZW1lKSxcbiAgICAgICAgXSwgZmFsc2UpO1xuICAgICAgICBpZiAocmVhZE9ubHkpIHtcbiAgICAgICAgICAgIGV4dGVuc2lvbkxpc3QucHVzaChFZGl0b3JTdGF0ZS5yZWFkT25seS5vZih0cnVlKSk7XG4gICAgICAgICAgICBleHRlbnNpb25MaXN0LnB1c2goRWRpdG9yVmlldy5lZGl0YWJsZS5vZihmYWxzZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXh0ZW5zaW9uTGlzdC5wdXNoKGJyYWNrZXRNYXRjaGluZygpKTtcbiAgICAgICAgICAgIGV4dGVuc2lvbkxpc3QucHVzaChoaWdobGlnaHRBY3RpdmVMaW5lKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3J0ZWREZWNvcmF0b3JzKSB7XG4gICAgICAgICAgICBleHRlbnNpb25MaXN0LnB1c2goaGlnaGxpZ2h0RGVjb3JhdG9ycyhzb3J0ZWREZWNvcmF0b3JzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdyYXBDb250ZW50KSB7XG4gICAgICAgICAgICBleHRlbnNpb25MaXN0LnB1c2goRWRpdG9yVmlldy5saW5lV3JhcHBpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG93TGluZU51bWJlcnMpIHtcbiAgICAgICAgICAgIGV4dGVuc2lvbkxpc3QucHVzaChsaW5lTnVtYmVycygpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvd0lubGluZUVycm9ycykge1xuICAgICAgICAgICAgZXh0ZW5zaW9uTGlzdC5wdXNoKGhpZ2hsaWdodElubGluZUVycm9yKCkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJlbnREaXYgPSB3cmFwcGVyLmN1cnJlbnQ7XG4gICAgICAgIHZhciBleGlzdGluZ1BsYWNlaG9sZGVyID0gcGFyZW50RGl2LnF1ZXJ5U2VsZWN0b3IoXCIuc3AtcHJlLXBsYWNlaG9sZGVyXCIpO1xuICAgICAgICBpZiAoZXhpc3RpbmdQbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgcGFyZW50RGl2LnJlbW92ZUNoaWxkKGV4aXN0aW5nUGxhY2Vob2xkZXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IEVkaXRvclZpZXcoe1xuICAgICAgICAgICAgZG9jOiBjb2RlLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczogZXh0ZW5zaW9uTGlzdCxcbiAgICAgICAgICAgIHBhcmVudDogcGFyZW50RGl2LFxuICAgICAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgICAgIHZpZXcudXBkYXRlKFt0cl0pO1xuICAgICAgICAgICAgICAgIGlmICh0ci5kb2NDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdDb2RlID0gdHIubmV3RG9jLnNsaWNlU3RyaW5nKDAsIHRyLm5ld0RvYy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBzZXRJbnRlcm5hbENvZGUobmV3Q29kZSk7XG4gICAgICAgICAgICAgICAgICAgIG9uQ29kZVVwZGF0ZSA9PT0gbnVsbCB8fCBvbkNvZGVVcGRhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQ29kZVVwZGF0ZShuZXdDb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdmlldy5jb250ZW50RE9NLnNldEF0dHJpYnV0ZShcImRhdGEtZ3JhbW1cIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgdmlldy5jb250ZW50RE9NLnNldEF0dHJpYnV0ZShcImRhdGEtbHQtYWN0aXZlXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIHZpZXcuY29udGVudERPTS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIGZpbGVQYXRoID8gXCJDb2RlIEVkaXRvciBmb3IgXCIuY29uY2F0KGdldEZpbGVOYW1lKGZpbGVQYXRoKSkgOiBcIkNvZGUgRWRpdG9yXCIpO1xuICAgICAgICBpZiAocmVhZE9ubHkpIHtcbiAgICAgICAgICAgIHZpZXcuY29udGVudERPTS5jbGFzc0xpc3QuYWRkKFwiY20tcmVhZG9ubHlcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2aWV3LmNvbnRlbnRET00uc2V0QXR0cmlidXRlKFwidGFiSW5kZXhcIiwgXCItMVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjbVZpZXcuY3VycmVudCA9IHZpZXc7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoX2EgPSBjbVZpZXcuY3VycmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlc3Ryb3koKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtcbiAgICAgICAgc2hvdWxkSW5pdEVkaXRvcixcbiAgICAgICAgc2hvd0xpbmVOdW1iZXJzLFxuICAgICAgICB3cmFwQ29udGVudCxcbiAgICAgICAgdGhlbWVJZCxcbiAgICAgICAgc29ydGVkRGVjb3JhdG9ycyxcbiAgICAgICAgcmVhZE9ubHksXG4gICAgICAgIGF1dG9SZWxvYWQsXG4gICAgXSk7XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uIGFwcGx5RXh0ZW5zaW9ucygpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBjbVZpZXcuY3VycmVudDtcbiAgICAgICAgdmFyIGRlcGVuZGVuY2llc0FyZURpZmYgPSAhc2hhbGxvd0VxdWFsKGV4dGVuc2lvbnMsIHByZXZFeHRlbnNpb24uY3VycmVudCkgfHxcbiAgICAgICAgICAgICFzaGFsbG93RXF1YWwoZXh0ZW5zaW9uc0tleW1hcCwgcHJldkV4dGVuc2lvbktleW1hcC5jdXJyZW50KTtcbiAgICAgICAgaWYgKHZpZXcgJiYgZGVwZW5kZW5jaWVzQXJlRGlmZikge1xuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgZWZmZWN0czogU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKGV4dGVuc2lvbnMpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBTdGF0ZUVmZmVjdC5hcHBlbmRDb25maWcub2Yoa2V5bWFwLm9mKF9fc3ByZWFkQXJyYXkoW10sIGV4dGVuc2lvbnNLZXltYXAsIHRydWUpKSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHByZXZFeHRlbnNpb24uY3VycmVudCA9IGV4dGVuc2lvbnM7XG4gICAgICAgICAgICBwcmV2RXh0ZW5zaW9uS2V5bWFwLmN1cnJlbnQgPSBleHRlbnNpb25zS2V5bWFwO1xuICAgICAgICB9XG4gICAgfSwgW2V4dGVuc2lvbnMsIGV4dGVuc2lvbnNLZXltYXBdKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyBvbiBhIHRhYiBidXR0b24gb24gYSBsYXJnZXIgc2NyZWVuXG4gICAgICAgIC8vIEF2b2lkIGF1dG9mb2N1cyBvbiBtb2JpbGUgYXMgaXQgbGVhZHMgdG8gYSBiYWQgZXhwZXJpZW5jZSBhbmQgYW4gdW5leHBlY3RlZCBsYXlvdXQgc2hpZnRcbiAgICAgICAgaWYgKGNtVmlldy5jdXJyZW50ICYmXG4gICAgICAgICAgICBlZGl0b3JTdGF0ZSA9PT0gXCJkaXJ0eVwiICYmXG4gICAgICAgICAgICB3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDc2OHB4KVwiKS5tYXRjaGVzKSB7XG4gICAgICAgICAgICBjbVZpZXcuY3VycmVudC5jb250ZW50RE9NLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtdKTtcbiAgICAvLyBVcGRhdGUgZWRpdG9yIHdoZW4gY29kZSBwYXNzZWQgYXMgcHJvcCBmcm9tIG91dHNpZGUgc2FuZHBhY2sgY2hhbmdlc1xuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjbVZpZXcuY3VycmVudCAmJiB0eXBlb2YgY29kZSA9PT0gXCJzdHJpbmdcIiAmJiBjb2RlICE9PSBpbnRlcm5hbENvZGUpIHtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gY21WaWV3LmN1cnJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLnNvbWUoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvID0gX2EudG8sIGZyb20gPSBfYS5mcm9tO1xuICAgICAgICAgICAgICAgIHJldHVybiB0byA+IGNvZGUubGVuZ3RoIHx8IGZyb20gPiBjb2RlLmxlbmd0aDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgPyBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGNvZGUubGVuZ3RoKVxuICAgICAgICAgICAgICAgIDogdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgICAgICB2YXIgY2hhbmdlcyA9IHsgZnJvbTogMCwgdG86IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCwgaW5zZXJ0OiBjb2RlIH07XG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgY2hhbmdlczogY2hhbmdlcywgc2VsZWN0aW9uOiBzZWxlY3Rpb24gfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtjb2RlXSk7XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uIG1lc3NhZ2VUb0lubGluZUVycm9yKCkge1xuICAgICAgICBpZiAoIXNob3dJbmxpbmVFcnJvcnMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciB1bnN1YnNjcmliZSA9IGxpc3RlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBjbVZpZXcuY3VycmVudDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgdmlldyA9PT0gbnVsbCB8fCB2aWV3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogW25ldyBBbm5vdGF0aW9uKFwicmVtb3ZlLWVycm9yc1wiLCB0cnVlKV0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiYWN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmFjdGlvbiA9PT0gXCJzaG93LWVycm9yXCIgJiZcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBhdGggPT09IGZpbGVQYXRoICYmXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5saW5lKSB7XG4gICAgICAgICAgICAgICAgdmlldyA9PT0gbnVsbCB8fCB2aWV3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogW25ldyBBbm5vdGF0aW9uKFwic2hvdy1lcnJvclwiLCBtZXNzYWdlLmxpbmUpXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiB1bnN1YnNjcmliZSgpOyB9O1xuICAgIH0sIFtsaXN0ZW4sIHNob3dJbmxpbmVFcnJvcnNdKTtcbiAgICB2YXIgaGFuZGxlQ29udGFpbmVyS2V5RG93biA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRW50ZXJcIiAmJiBjbVZpZXcuY3VycmVudCkge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjbVZpZXcuY3VycmVudC5jb250ZW50RE9NLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBndXR0ZXJMaW5lT2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBwYWRkaW5nLWxlZnRcbiAgICAgICAgdmFyIG9mZnNldCA9IDQ7XG4gICAgICAgIGlmIChzaG93TGluZU51bWJlcnMpIHtcbiAgICAgICAgICAgIC8vIGxpbmUtbnVtYmVyLWd1dHRlci13aWR0aCArIGd1dHRlci1wYWRkaW5nXG4gICAgICAgICAgICBvZmZzZXQgKz0gNjtcbiAgICAgICAgfVxuICAgICAgICAvLyBsaW5lLXBhZGRpbmdcbiAgICAgICAgaWYgKCFyZWFkT25seSkge1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwidmFyKC0tXCIuY29uY2F0KFRIRU1FX1BSRUZJWCwgXCItc3BhY2UtXCIpLmNvbmNhdChvZmZzZXQsIFwiKVwiKTtcbiAgICB9O1xuICAgIGlmIChyZWFkT25seSkge1xuICAgICAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtqc3goXCJwcmVcIiwgeyByZWY6IGNvbWJpbmVkUmVmLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJjbVwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWVzKGVkaXRvclN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZXMobGFuZ3VhZ2VFeHRlbnNpb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgY21DbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnNDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgIF0pLCB0cmFuc2xhdGU6IFwibm9cIiwgY2hpbGRyZW46IGpzeChcImNvZGVcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJwcmUtcGxhY2Vob2xkZXJcIiwgW3BsYWNlaG9sZGVyQ2xhc3NOYW1lXSksIHN0eWxlOiB7IG1hcmdpbkxlZnQ6IGd1dHRlckxpbmVPZmZzZXQoKSB9LCBjaGlsZHJlbjogc3ludGF4SGlnaGxpZ2h0UmVuZGVyIH0pIH0pLCByZWFkT25seSAmJiBzaG93UmVhZE9ubHkgJiYgKGpzeChcInNwYW5cIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJyZWFkLW9ubHlcIiwgW3JlYWRPbmx5Q2xhc3NOYW1lXSkgfSwgKHt9KSwgeyBjaGlsZHJlbjogXCJSZWFkLW9ubHlcIiB9KSkpXSB9KSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgcmVmOiBjb21iaW5lZFJlZiwgXCJhcmlhLWF1dG9jb21wbGV0ZVwiOiBcImxpc3RcIiwgXCJhcmlhLWxhYmVsXCI6IGZpbGVQYXRoID8gXCJDb2RlIEVkaXRvciBmb3IgXCIuY29uY2F0KGdldEZpbGVOYW1lKGZpbGVQYXRoKSkgOiBcIkNvZGUgRWRpdG9yXCIsIFwiYXJpYS1tdWx0aWxpbmVcIjogXCJ0cnVlXCIsIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImNtXCIsIFtcbiAgICAgICAgICAgIGNsYXNzTmFtZXMoZWRpdG9yU3RhdGUpLFxuICAgICAgICAgICAgY2xhc3NOYW1lcyhsYW5ndWFnZUV4dGVuc2lvbiksXG4gICAgICAgICAgICBjbUNsYXNzTmFtZSxcbiAgICAgICAgICAgIHRva2Vuc0NsYXNzTmFtZSxcbiAgICAgICAgXSksIG9uS2V5RG93bjogaGFuZGxlQ29udGFpbmVyS2V5RG93biwgcm9sZTogXCJ0ZXh0Ym94XCIsIHRhYkluZGV4OiAwLCB0cmFuc2xhdGU6IFwibm9cIiwgc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nOiB0cnVlLCBjaGlsZHJlbjoganN4KFwicHJlXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwicHJlLXBsYWNlaG9sZGVyXCIsIFtwbGFjZWhvbGRlckNsYXNzTmFtZV0pLCBzdHlsZTogeyBtYXJnaW5MZWZ0OiBndXR0ZXJMaW5lT2Zmc2V0KCkgfSwgY2hpbGRyZW46IHN5bnRheEhpZ2hsaWdodFJlbmRlciB9KSB9KSk7XG59KTtcblxudmFyIFNhbmRwYWNrQ29kZUVkaXRvciA9IGZvcndhcmRSZWYoZnVuY3Rpb24gKF9hLCByZWYpIHtcbiAgICB2YXIgc2hvd1RhYnMgPSBfYS5zaG93VGFicywgX2IgPSBfYS5zaG93TGluZU51bWJlcnMsIHNob3dMaW5lTnVtYmVycyA9IF9iID09PSB2b2lkIDAgPyBmYWxzZSA6IF9iLCBfYyA9IF9hLnNob3dJbmxpbmVFcnJvcnMsIHNob3dJbmxpbmVFcnJvcnMgPSBfYyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYywgX2QgPSBfYS5zaG93UnVuQnV0dG9uLCBzaG93UnVuQnV0dG9uID0gX2QgPT09IHZvaWQgMCA/IHRydWUgOiBfZCwgX2UgPSBfYS53cmFwQ29udGVudCwgd3JhcENvbnRlbnQgPSBfZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZSwgX2YgPSBfYS5jbG9zYWJsZVRhYnMsIGNsb3NhYmxlVGFicyA9IF9mID09PSB2b2lkIDAgPyBmYWxzZSA6IF9mLCBpbml0TW9kZSA9IF9hLmluaXRNb2RlLCBleHRlbnNpb25zID0gX2EuZXh0ZW5zaW9ucywgZXh0ZW5zaW9uc0tleW1hcCA9IF9hLmV4dGVuc2lvbnNLZXltYXAsIHJlYWRPbmx5ID0gX2EucmVhZE9ubHksIHNob3dSZWFkT25seSA9IF9hLnNob3dSZWFkT25seSwgYWRkaXRpb25hbExhbmd1YWdlcyA9IF9hLmFkZGl0aW9uYWxMYW5ndWFnZXMsIGNsYXNzTmFtZSA9IF9hLmNsYXNzTmFtZSwgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcInNob3dUYWJzXCIsIFwic2hvd0xpbmVOdW1iZXJzXCIsIFwic2hvd0lubGluZUVycm9yc1wiLCBcInNob3dSdW5CdXR0b25cIiwgXCJ3cmFwQ29udGVudFwiLCBcImNsb3NhYmxlVGFic1wiLCBcImluaXRNb2RlXCIsIFwiZXh0ZW5zaW9uc1wiLCBcImV4dGVuc2lvbnNLZXltYXBcIiwgXCJyZWFkT25seVwiLCBcInNob3dSZWFkT25seVwiLCBcImFkZGl0aW9uYWxMYW5ndWFnZXNcIiwgXCJjbGFzc05hbWVcIl0pO1xuICAgIHZhciBzYW5kcGFjayA9IHVzZVNhbmRwYWNrKCkuc2FuZHBhY2s7XG4gICAgdmFyIF9nID0gdXNlQWN0aXZlQ29kZSgpLCBjb2RlID0gX2cuY29kZSwgdXBkYXRlQ29kZSA9IF9nLnVwZGF0ZUNvZGUsIHJlYWRPbmx5RmlsZSA9IF9nLnJlYWRPbmx5O1xuICAgIHZhciBhY3RpdmVGaWxlID0gc2FuZHBhY2suYWN0aXZlRmlsZSwgc3RhdHVzID0gc2FuZHBhY2suc3RhdHVzLCBlZGl0b3JTdGF0ZSA9IHNhbmRwYWNrLmVkaXRvclN0YXRlO1xuICAgIHZhciBzaG91bGRTaG93VGFicyA9IHNob3dUYWJzICE9PSBudWxsICYmIHNob3dUYWJzICE9PSB2b2lkIDAgPyBzaG93VGFicyA6IHNhbmRwYWNrLnZpc2libGVGaWxlcy5sZW5ndGggPiAxO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHZhciBoYW5kbGVDb2RlVXBkYXRlID0gZnVuY3Rpb24gKG5ld0NvZGUsIHNob3VsZFVwZGF0ZVByZXZpZXcpIHtcbiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZVByZXZpZXcgPT09IHZvaWQgMCkgeyBzaG91bGRVcGRhdGVQcmV2aWV3ID0gdHJ1ZTsgfVxuICAgICAgICB1cGRhdGVDb2RlKG5ld0NvZGUsIHNob3VsZFVwZGF0ZVByZXZpZXcpO1xuICAgIH07XG4gICAgcmV0dXJuIChqc3hzKFNhbmRwYWNrU3RhY2ssIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiZWRpdG9yXCIsIFtjbGFzc05hbWVdKSB9LCBwcm9wcywgeyBjaGlsZHJlbjogW3Nob3VsZFNob3dUYWJzICYmIGpzeChGaWxlVGFicywgeyBjbG9zYWJsZVRhYnM6IGNsb3NhYmxlVGFicyB9KSwganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImNvZGUtZWRpdG9yXCIsIFtlZGl0b3JDbGFzc05hbWVdKSwgY2hpbGRyZW46IFtqc3goQ29kZU1pcnJvciwgeyByZWY6IHJlZiwgYWRkaXRpb25hbExhbmd1YWdlczogYWRkaXRpb25hbExhbmd1YWdlcywgY29kZTogY29kZSwgZWRpdG9yU3RhdGU6IGVkaXRvclN0YXRlLCBleHRlbnNpb25zOiBleHRlbnNpb25zLCBleHRlbnNpb25zS2V5bWFwOiBleHRlbnNpb25zS2V5bWFwLCBmaWxlUGF0aDogYWN0aXZlRmlsZSwgaW5pdE1vZGU6IGluaXRNb2RlIHx8IHNhbmRwYWNrLmluaXRNb2RlLCBvbkNvZGVVcGRhdGU6IGZ1bmN0aW9uIChuZXdDb2RlKSB7IHZhciBfYTsgcmV0dXJuIGhhbmRsZUNvZGVVcGRhdGUobmV3Q29kZSwgKF9hID0gc2FuZHBhY2suYXV0b1JlbG9hZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZSk7IH0sIHJlYWRPbmx5OiByZWFkT25seSB8fCByZWFkT25seUZpbGUsIHNob3dJbmxpbmVFcnJvcnM6IHNob3dJbmxpbmVFcnJvcnMsIHNob3dMaW5lTnVtYmVyczogc2hvd0xpbmVOdW1iZXJzLCBzaG93UmVhZE9ubHk6IHNob3dSZWFkT25seSwgd3JhcENvbnRlbnQ6IHdyYXBDb250ZW50IH0sIGFjdGl2ZUZpbGUpLCBzaG93UnVuQnV0dG9uICYmICghc2FuZHBhY2suYXV0b1JlbG9hZCB8fCBzdGF0dXMgPT09IFwiaWRsZVwiKSA/IChqc3goUnVuQnV0dG9uJDEsIHt9KSkgOiBudWxsXSB9KV0gfSkpKTtcbn0pO1xuXG52YXIgU2FuZHBhY2tDb2RlVmlld2VyID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX2EsIHJlZikge1xuICAgIHZhciBzaG93VGFicyA9IF9hLnNob3dUYWJzLCBzaG93TGluZU51bWJlcnMgPSBfYS5zaG93TGluZU51bWJlcnMsIGRlY29yYXRvcnMgPSBfYS5kZWNvcmF0b3JzLCBwcm9wQ29kZSA9IF9hLmNvZGUsIGluaXRNb2RlID0gX2EuaW5pdE1vZGUsIHdyYXBDb250ZW50ID0gX2Eud3JhcENvbnRlbnQsIGFkZGl0aW9uYWxMYW5ndWFnZXMgPSBfYS5hZGRpdGlvbmFsTGFuZ3VhZ2VzLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wic2hvd1RhYnNcIiwgXCJzaG93TGluZU51bWJlcnNcIiwgXCJkZWNvcmF0b3JzXCIsIFwiY29kZVwiLCBcImluaXRNb2RlXCIsIFwid3JhcENvbnRlbnRcIiwgXCJhZGRpdGlvbmFsTGFuZ3VhZ2VzXCJdKTtcbiAgICB2YXIgc2FuZHBhY2sgPSB1c2VTYW5kcGFjaygpLnNhbmRwYWNrO1xuICAgIHZhciBjb2RlID0gdXNlQWN0aXZlQ29kZSgpLmNvZGU7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB1c2VDbGFzc05hbWVzKCk7XG4gICAgdmFyIHNob3VsZFNob3dUYWJzID0gc2hvd1RhYnMgIT09IG51bGwgJiYgc2hvd1RhYnMgIT09IHZvaWQgMCA/IHNob3dUYWJzIDogc2FuZHBhY2sudmlzaWJsZUZpbGVzLmxlbmd0aCA+IDE7XG4gICAgcmV0dXJuIChqc3hzKFNhbmRwYWNrU3RhY2ssIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiZWRpdG9yLXZpZXdlclwiKSB9LCBwcm9wcywgeyBjaGlsZHJlbjogW3Nob3VsZFNob3dUYWJzID8ganN4KEZpbGVUYWJzLCB7fSkgOiBudWxsLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJjb2RlLWVkaXRvclwiLCBbZWRpdG9yQ2xhc3NOYW1lXSksIGNoaWxkcmVuOiBqc3goQ29kZU1pcnJvciwgeyByZWY6IHJlZiwgYWRkaXRpb25hbExhbmd1YWdlczogYWRkaXRpb25hbExhbmd1YWdlcywgY29kZTogcHJvcENvZGUgIT09IG51bGwgJiYgcHJvcENvZGUgIT09IHZvaWQgMCA/IHByb3BDb2RlIDogY29kZSwgZGVjb3JhdG9yczogZGVjb3JhdG9ycywgZmlsZVBhdGg6IHNhbmRwYWNrLmFjdGl2ZUZpbGUsIGluaXRNb2RlOiBpbml0TW9kZSB8fCBzYW5kcGFjay5pbml0TW9kZSwgc2hvd0xpbmVOdW1iZXJzOiBzaG93TGluZU51bWJlcnMsIHNob3dSZWFkT25seTogZmFsc2UsIHdyYXBDb250ZW50OiB3cmFwQ29udGVudCwgcmVhZE9ubHk6IHRydWUgfSkgfSksIHNhbmRwYWNrLnN0YXR1cyA9PT0gXCJpZGxlXCIgPyBqc3goUnVuQnV0dG9uJDEsIHt9KSA6IG51bGxdIH0pKSk7XG59KTtcblxudmFyIF9hJDQsIF9iO1xudmFyIGxheW91dENsYXNzTmFtZSA9IGNzcygoX2EkNCA9IHtcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAkY29sb3JzJHN1cmZhY2UyXCIsXG4gICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICBmbGV4V3JhcDogXCJ3cmFwXCIsXG4gICAgICAgIGFsaWduSXRlbXM6IFwic3RyZXRjaFwiLFxuICAgICAgICBib3JkZXJSYWRpdXM6IFwiJGJvcmRlciRyYWRpdXNcIixcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIkY29sb3JzJHN1cmZhY2UyXCIsXG4gICAgICAgIGdhcDogMVxuICAgIH0sXG4gICAgX2EkNFtcIj4gLlwiLmNvbmNhdChzdGFja0NsYXNzTmFtZSldID0ge1xuICAgICAgICBmbGV4R3JvdzogMSxcbiAgICAgICAgZmxleFNocmluazogMSxcbiAgICAgICAgZmxleEJhc2lzOiBcIjBcIixcbiAgICAgICAgaGVpZ2h0OiBcIiRsYXlvdXQkaGVpZ2h0XCIsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICBcIkBtZWRpYSBwcmludFwiOiB7XG4gICAgICAgICAgICBoZWlnaHQ6IFwiYXV0b1wiLFxuICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICB9LFxuICAgICAgICBcIkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KVwiOiAoX2IgPSB7fSxcbiAgICAgICAgICAgIF9iW1wiJjpub3QoLlwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLXByZXZpZXcsIC5cIikuY29uY2F0KFRIRU1FX1BSRUZJWCwgXCItZWRpdG9yLCAuXCIpLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLXByZXNldC1jb2x1bW4pXCIpXSA9IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiY2FsYygkbGF5b3V0JGhlaWdodCAvIDIpXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyogdHJpZ2dlcnMgdGhlIGxheW91dCBicmVhayBhdCB0aGUgNzY4cHggYnJlYWtwb2ludCwgbm90IHdoZW4gdGhlIGNvbXBvbmVudCBpcyBsZXNzIHRoZW4gNzAwcHggKi9cbiAgICAgICAgICAgIF9iLm1pbldpZHRoID0gXCIxMDAlO1wiLFxuICAgICAgICAgICAgX2IpLFxuICAgIH0sXG4gICAgX2EkNFtcIj4gLlwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLWZpbGUtZXhwbG9yZXJcIildID0ge1xuICAgICAgICBmbGV4OiAwLjIsXG4gICAgICAgIG1pbldpZHRoOiAyMDAsXG4gICAgICAgIFwiQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY4cHgpXCI6IHtcbiAgICAgICAgICAgIGZsZXg6IDEsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBfYSQ0KSk7XG52YXIgU2FuZHBhY2tMYXlvdXQgPSBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChfYSwgcmVmKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW4sIGNsYXNzTmFtZSA9IF9hLmNsYXNzTmFtZSwgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcImNoaWxkcmVuXCIsIFwiY2xhc3NOYW1lXCJdKTtcbiAgICB2YXIgc2FuZHBhY2sgPSB1c2VTYW5kcGFjaygpLnNhbmRwYWNrO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHZhciBjb21iaW5lZFJlZiA9IHVzZUNvbWJpbmVkUmVmcyhzYW5kcGFjay5sYXp5QW5jaG9yUmVmLCByZWYpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIF9fYXNzaWduKHsgcmVmOiBjb21iaW5lZFJlZiwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwibGF5b3V0XCIsIFtsYXlvdXRDbGFzc05hbWUsIGNsYXNzTmFtZV0pIH0sIHByb3BzLCB7IGNoaWxkcmVuOiBjaGlsZHJlbiB9KSkpO1xufSk7XG5cbi8qKlxuICogQGNhdGVnb3J5IEhvb2tzXG4gKi9cbnZhciB1c2VFcnJvck1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBzYW5kcGFjayA9IHVzZVNhbmRwYWNrKCkuc2FuZHBhY2s7XG4gICAgdmFyIGVycm9yID0gc2FuZHBhY2suZXJyb3I7XG4gICAgcmV0dXJuIChfYSA9IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xufTtcblxudmFyIEZBREVfQU5JTUFUSU9OX0RVUkFUSU9OID0gMjAwO1xuLyoqXG4gKiBAY2F0ZWdvcnkgSG9va3NcbiAqL1xudmFyIHVzZUxvYWRpbmdPdmVybGF5U3RhdGUgPSBmdW5jdGlvbiAoY2xpZW50SWQsIGV4dGVybmFsTG9hZGluZykge1xuICAgIHZhciBfYSA9IHVzZVNhbmRwYWNrKCksIHNhbmRwYWNrID0gX2Euc2FuZHBhY2ssIGxpc3RlbiA9IF9hLmxpc3RlbjtcbiAgICB2YXIgX2IgPSBSZWFjdC51c2VTdGF0ZShcIkxPQURJTkdcIiksIHN0YXRlID0gX2JbMF0sIHNldFN0YXRlID0gX2JbMV07XG4gICAgLyoqXG4gICAgICogU2FuZHBhY2sgbGlzdGVuZXJcbiAgICAgKi9cbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBsaXN0ZW4oZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwic3RhcnRcIiAmJiBtZXNzYWdlLmZpcnN0TG9hZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHNldFN0YXRlKFwiTE9BRElOR1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiZG9uZVwiKSB7XG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoZnVuY3Rpb24gKHByZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXYgPT09IFwiTE9BRElOR1wiID8gXCJQUkVfRkFESU5HXCIgOiBcIkhJRERFTlwiO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBjbGllbnRJZCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW2NsaWVudElkLCBzYW5kcGFjay5zdGF0dXMgPT09IFwiaWRsZVwiXSk7XG4gICAgLyoqXG4gICAgICogRmFkaW5nIHRyYW5zaWVudCBzdGF0ZVxuICAgICAqL1xuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmYWRlVGltZW91dDtcbiAgICAgICAgaWYgKHN0YXRlID09PSBcIlBSRV9GQURJTkdcIiAmJiAhZXh0ZXJuYWxMb2FkaW5nKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZShcIkZBRElOR1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGF0ZSA9PT0gXCJGQURJTkdcIikge1xuICAgICAgICAgICAgZmFkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFN0YXRlKFwiSElEREVOXCIpOyB9LCBGQURFX0FOSU1BVElPTl9EVVJBVElPTik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChmYWRlVGltZW91dCk7XG4gICAgICAgIH07XG4gICAgfSwgW3N0YXRlLCBleHRlcm5hbExvYWRpbmddKTtcbiAgICBpZiAoc2FuZHBhY2suc3RhdHVzID09PSBcInRpbWVvdXRcIikge1xuICAgICAgICByZXR1cm4gXCJUSU1FT1VUXCI7XG4gICAgfVxuICAgIGlmIChzYW5kcGFjay5zdGF0dXMgIT09IFwicnVubmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBcIkhJRERFTlwiO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG59O1xuXG4vKipcbiAqIEBjYXRlZ29yeSBIb29rc1xuICovXG52YXIgdXNlU2FuZHBhY2tOYXZpZ2F0aW9uID0gZnVuY3Rpb24gKGNsaWVudElkKSB7XG4gICAgdmFyIGRpc3BhdGNoID0gdXNlU2FuZHBhY2soKS5kaXNwYXRjaDtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZyZXNoOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkaXNwYXRjaCh7IHR5cGU6IFwicmVmcmVzaFwiIH0sIGNsaWVudElkKTsgfSxcbiAgICAgICAgYmFjazogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGlzcGF0Y2goeyB0eXBlOiBcInVybGJhY2tcIiB9LCBjbGllbnRJZCk7IH0sXG4gICAgICAgIGZvcndhcmQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRpc3BhdGNoKHsgdHlwZTogXCJ1cmxmb3J3YXJkXCIgfSwgY2xpZW50SWQpOyB9LFxuICAgIH07XG59O1xuXG5mdW5jdGlvbiBnZXRUcmFuc3BpbGVkQ29kZShzYW5kcGFjaykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdmFyIGFjdGl2ZUZpbGUgPSBzYW5kcGFjay5hY3RpdmVGaWxlLCBidW5kbGVyU3RhdGUgPSBzYW5kcGFjay5idW5kbGVyU3RhdGU7XG4gICAgaWYgKGJ1bmRsZXJTdGF0ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgdE1vZHVsZSA9IGJ1bmRsZXJTdGF0ZS50cmFuc3BpbGVkTW9kdWxlc1thY3RpdmVGaWxlICsgXCI6XCJdO1xuICAgIHJldHVybiAoX2IgPSAoX2EgPSB0TW9kdWxlID09PSBudWxsIHx8IHRNb2R1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRNb2R1bGUuc291cmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29tcGlsZWRDb2RlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xufVxuLyoqXG4gKiBAY2F0ZWdvcnkgSG9va3NcbiAqL1xudmFyIHVzZVRyYW5zcGlsZWRDb2RlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzYW5kcGFjayA9IHVzZVNhbmRwYWNrKCkuc2FuZHBhY2s7XG4gICAgaWYgKHNhbmRwYWNrLnN0YXR1cyAhPT0gXCJydW5uaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBnZXRUcmFuc3BpbGVkQ29kZShzYW5kcGFjayk7XG59O1xuXG4vKipcbiAqIEl0IHJlZ2lzdGVycyBhIG5ldyBzYW5kcGFjayBjbGllbnQgYW5kIHJldHVybnMgaXRzIGluc3RhbmNlLFxuICogbGlzdGVuZXJzLCBhbmQgZGlzcGF0Y2ggZnVuY3Rpb24uIFVzaW5nIGl0IHdoZW4gY3JlYXRpbmcgYSBjdXN0b21cbiAqIGNvbXBvbmVudCB0byBpbnRlcmFjdCBkaXJlY3RseSB3aXRoIHRoZSBjbGllbnQgaXMgcmVjb21tZW5kZWQuXG4gKiBGb3Igb3RoZXIgY2FzZXMsIHVzZSBgdXNlU2FuZHBhY2tgIGluc3RlYWQuXG4gKlxuICogQGNhdGVnb3J5IEhvb2tzXG4gKi9cbnZhciB1c2VTYW5kcGFja0NsaWVudCA9IGZ1bmN0aW9uIChjbGllbnRQcm9wc092ZXJyaWRlKSB7XG4gICAgdmFyIF9hID0gdXNlU2FuZHBhY2soKSwgc2FuZHBhY2sgPSBfYS5zYW5kcGFjaywgbGlzdGVuID0gX2EubGlzdGVuLCBkaXNwYXRjaCA9IF9hLmRpc3BhdGNoO1xuICAgIHZhciBpZnJhbWVSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gICAgdmFyIGNsaWVudElkID0gUmVhY3QudXNlUmVmKGdlbmVyYXRlUmFuZG9tSWQoKSk7XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlmcmFtZUVsZW1lbnQgPSBpZnJhbWVSZWYuY3VycmVudDtcbiAgICAgICAgdmFyIGNsaWVudElkVmFsdWUgPSBjbGllbnRJZC5jdXJyZW50O1xuICAgICAgICBpZiAoaWZyYW1lRWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2FuZHBhY2sucmVnaXN0ZXJCdW5kbGVyKGlmcmFtZUVsZW1lbnQsIGNsaWVudElkVmFsdWUsIGNsaWVudFByb3BzT3ZlcnJpZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBzYW5kcGFjay51bnJlZ2lzdGVyQnVuZGxlcihjbGllbnRJZFZhbHVlKTsgfTtcbiAgICB9LCBbXSk7XG4gICAgdmFyIGdldENsaWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNhbmRwYWNrLmNsaWVudHNbY2xpZW50SWQuY3VycmVudF0gfHwgbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHNhbmRwYWNrOiBzYW5kcGFjayxcbiAgICAgICAgZ2V0Q2xpZW50OiBnZXRDbGllbnQsXG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZC5jdXJyZW50LFxuICAgICAgICBpZnJhbWU6IGlmcmFtZVJlZixcbiAgICAgICAgbGlzdGVuOiBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW4obGlzdGVuZXIsIGNsaWVudElkLmN1cnJlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24gKG1lc3NhZ2UpIHsgcmV0dXJuIGRpc3BhdGNoKG1lc3NhZ2UsIGNsaWVudElkLmN1cnJlbnQpOyB9LFxuICAgIH07XG59O1xuXG4vKipcbiAqIEBjYXRlZ29yeSBIb29rc1xuICovXG52YXIgdXNlU2FuZHBhY2tTaGVsbCA9IGZ1bmN0aW9uIChjbGllbnRJZCkge1xuICAgIHZhciBkaXNwYXRjaCA9IHVzZVNhbmRwYWNrKCkuZGlzcGF0Y2g7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdGFydDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGlzcGF0Y2goeyB0eXBlOiBcInNoZWxsL3Jlc3RhcnRcIiB9LCBjbGllbnRJZCk7IH0sXG4gICAgICAgIG9wZW5QcmV2aWV3OiBmdW5jdGlvbiAoKSB7IHJldHVybiBkaXNwYXRjaCh7IHR5cGU6IFwic2hlbGwvb3BlblByZXZpZXdcIiB9LCBjbGllbnRJZCk7IH0sXG4gICAgfTtcbn07XG5cbnZhciBtYXBQcm9ncmVzc01lc3NhZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWxNZXNzYWdlLCBmaXJzdFRvdGFsUGVuZGluZykge1xuICAgIHZhciBfYTtcbiAgICBzd2l0Y2ggKG9yaWdpbmFsTWVzc2FnZS5zdGF0ZSkge1xuICAgICAgICBjYXNlIFwiZG93bmxvYWRpbmdfbWFuaWZlc3RcIjpcbiAgICAgICAgICAgIHJldHVybiBcIlsxLzNdIERvd25sb2FkaW5nIG1hbmlmZXN0XCI7XG4gICAgICAgIGNhc2UgXCJkb3dubG9hZGVkX21vZHVsZVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiWzIvM10gRG93bmxvYWRlZCBcIi5jb25jYXQob3JpZ2luYWxNZXNzYWdlLm5hbWUsIFwiIChcIikuY29uY2F0KGZpcnN0VG90YWxQZW5kaW5nIC0gb3JpZ2luYWxNZXNzYWdlLnRvdGFsUGVuZGluZywgXCIvXCIpLmNvbmNhdChmaXJzdFRvdGFsUGVuZGluZywgXCIpXCIpO1xuICAgICAgICBjYXNlIFwic3RhcnRpbmdfY29tbWFuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiWzMvM10gU3RhcnRpbmcgY29tbWFuZFwiO1xuICAgICAgICBjYXNlIFwiY29tbWFuZF9ydW5uaW5nXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJbMy8zXSBSdW5uaW5nIFxcXCJcIi5jb25jYXQoKF9hID0gb3JpZ2luYWxNZXNzYWdlLmNvbW1hbmQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmltKCksIFwiXFxcIlwiKTtcbiAgICB9XG59O1xudmFyIHVzZVNhbmRwYWNrUHJldmlld1Byb2dyZXNzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgdmFyIF9hID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpLCBpc1JlYWR5ID0gX2FbMF0sIHNldElzUmVhZHkgPSBfYVsxXTtcbiAgICB2YXIgX2IgPSBSZWFjdC51c2VTdGF0ZSgpLCB0b3RhbERlcGVuZGVuY2llcyA9IF9iWzBdLCBzZXRUb3RhbERlcGVuZGVuY2llcyA9IF9iWzFdO1xuICAgIHZhciBfYyA9IFJlYWN0LnVzZVN0YXRlKG51bGwpLCBsb2FkaW5nTWVzc2FnZSA9IF9jWzBdLCBzZXRMb2FkaW5nTWVzc2FnZSA9IF9jWzFdO1xuICAgIHZhciB0aW1lb3V0ID0gcHJvcHMgPT09IG51bGwgfHwgcHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3BzLnRpbWVvdXQ7XG4gICAgdmFyIGNsaWVudElkID0gcHJvcHMgPT09IG51bGwgfHwgcHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3BzLmNsaWVudElkO1xuICAgIHZhciBsaXN0ZW4gPSB1c2VTYW5kcGFjaygpLmxpc3RlbjtcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGltZXI7XG4gICAgICAgIHZhciB1bnN1YnNjcmliZSA9IGxpc3RlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJzdGFydFwiICYmIG1lc3NhZ2UuZmlyc3RMb2FkKSB7XG4gICAgICAgICAgICAgICAgc2V0SXNSZWFkeShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmdNZXNzYWdlKG51bGwpO1xuICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJzaGVsbC9wcm9ncmVzc1wiICYmICFpc1JlYWR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0b3RhbERlcGVuZGVuY2llcyAmJiBtZXNzYWdlLmRhdGEuc3RhdGUgPT09IFwiZG93bmxvYWRlZF9tb2R1bGVcIikge1xuICAgICAgICAgICAgICAgICAgICBzZXRUb3RhbERlcGVuZGVuY2llcyhtZXNzYWdlLmRhdGEudG90YWxQZW5kaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZ01lc3NhZ2UobWFwUHJvZ3Jlc3NNZXNzYWdlKG1lc3NhZ2UuZGF0YSwgdG90YWxEZXBlbmRlbmNpZXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcImRvbmVcIiAmJiBtZXNzYWdlLmNvbXBpbGF0b25FcnJvciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBzZXRMb2FkaW5nTWVzc2FnZShudWxsKTtcbiAgICAgICAgICAgICAgICBzZXRJc1JlYWR5KHRydWUpO1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGNsaWVudElkKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9O1xuICAgIH0sIFtjbGllbnRJZCwgaXNSZWFkeSwgdG90YWxEZXBlbmRlbmNpZXMsIHRpbWVvdXRdKTtcbiAgICByZXR1cm4gbG9hZGluZ01lc3NhZ2U7XG59O1xuXG52YXIgTUFYX01FU1NBR0VfQ09VTlQkMSA9IDQwMCAqIDI7XG52YXIgdXNlU2FuZHBhY2tTaGVsbFN0ZG91dCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBjbGllbnRJZCA9IF9hLmNsaWVudElkLCBfYiA9IF9hLm1heE1lc3NhZ2VDb3VudCwgbWF4TWVzc2FnZUNvdW50ID0gX2IgPT09IHZvaWQgMCA/IE1BWF9NRVNTQUdFX0NPVU5UJDEgOiBfYjsgX2EucmVzZXRPblByZXZpZXdSZXN0YXJ0O1xuICAgIHZhciBfZCA9IFJlYWN0LnVzZVN0YXRlKFtdKSwgbG9ncyA9IF9kWzBdLCBzZXRMb2dzID0gX2RbMV07XG4gICAgdmFyIGxpc3RlbiA9IHVzZVNhbmRwYWNrKCkubGlzdGVuO1xuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1bnN1YnNjcmliZSA9IGxpc3RlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJzdGFydFwiKSB7XG4gICAgICAgICAgICAgICAgc2V0TG9ncyhbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwic3Rkb3V0XCIgJiZcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBheWxvYWQuZGF0YSAmJlxuICAgICAgICAgICAgICAgIEJvb2xlYW4obWVzc2FnZS5wYXlsb2FkLmRhdGEudHJpbSgpKSkge1xuICAgICAgICAgICAgICAgIHNldExvZ3MoZnVuY3Rpb24gKHByZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBwcmV2LCB0cnVlKSwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgeyBkYXRhOiBtZXNzYWdlLnBheWxvYWQuZGF0YSwgaWQ6IGdlbmVyYXRlUmFuZG9tSWQoKSB9LFxuICAgICAgICAgICAgICAgICAgICBdLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChtZXNzYWdlcy5sZW5ndGggPiBtYXhNZXNzYWdlQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBjbGllbnRJZCk7XG4gICAgICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgICB9LCBbbWF4TWVzc2FnZUNvdW50LCBjbGllbnRJZF0pO1xuICAgIHJldHVybiB7IGxvZ3M6IGxvZ3MsIHJlc2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRMb2dzKFtdKTsgfSB9O1xufTtcblxudmFyIG1hcEJ1bmRsZXJFcnJvcnMgPSBmdW5jdGlvbiAob3JpZ2luYWxNZXNzYWdlKSB7XG4gICAgdmFyIGVycm9yTWVzc2FnZSA9IG9yaWdpbmFsTWVzc2FnZS5yZXBsYWNlKFwiW3NhbmRwYWNrLWNsaWVudF06IFwiLCBcIlwiKTtcbiAgICBpZiAoL3Byb2Nlc3MuZXhpdC8udGVzdChlcnJvck1lc3NhZ2UpKSB7XG4gICAgICAgIHZhciBleGl0Q29kZSA9IGVycm9yTWVzc2FnZS5tYXRjaCgvcHJvY2Vzcy5leGl0XFwoKFxcZCspXFwpLyk7XG4gICAgICAgIGlmICghZXhpdENvZGUpXG4gICAgICAgICAgICByZXR1cm4gZXJyb3JNZXNzYWdlO1xuICAgICAgICAvLyBDcmFzaFxuICAgICAgICBpZiAoTnVtYmVyKGV4aXRDb2RlWzFdKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiU2VydmVyIGlzIG5vdCBydW5uaW5nLCB3b3VsZCB5b3UgbGlrZSB0byBzdGFydCBpdCBhZ2Fpbj9cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJTZXJ2ZXIgaGFzIGNyYXNoZWQgd2l0aCBzdGF0dXMgY29kZSBcIi5jb25jYXQoZXhpdENvZGVbMV0sIFwiLCB3b3VsZCB5b3UgbGlrZSB0byByZXN0YXJ0IHRoZSBzZXJ2ZXI/XCIpO1xuICAgIH1cbiAgICByZXR1cm4gZXJyb3JNZXNzYWdlO1xufTtcbnZhciBFcnJvck92ZXJsYXkgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbiwgY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lLCBvdGhlclByb3BzID0gX19yZXN0KHByb3BzLCBbXCJjaGlsZHJlblwiLCBcImNsYXNzTmFtZVwiXSk7XG4gICAgdmFyIGVycm9yTWVzc2FnZSA9IHVzZUVycm9yTWVzc2FnZSgpO1xuICAgIHZhciByZXN0YXJ0ID0gdXNlU2FuZHBhY2tTaGVsbCgpLnJlc3RhcnQ7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB1c2VDbGFzc05hbWVzKCk7XG4gICAgdmFyIF9hID0gdXNlU2FuZHBhY2soKS5zYW5kcGFjaywgcnVuU2FuZHBhY2sgPSBfYS5ydW5TYW5kcGFjaywgdGVhbUlkID0gX2EudGVhbUlkO1xuICAgIHZhciBkaXNwYXRjaCA9IHVzZVNhbmRwYWNrKCkuZGlzcGF0Y2g7XG4gICAgaWYgKCFlcnJvck1lc3NhZ2UgJiYgIWNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgaXNTYW5kcGFja0J1bmRsZXJFcnJvciA9IGVycm9yTWVzc2FnZSA9PT0gbnVsbCB8fCBlcnJvck1lc3NhZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yTWVzc2FnZS5zdGFydHNXaXRoKFwiW3NhbmRwYWNrLWNsaWVudF1cIik7XG4gICAgdmFyIHByaXZhdGVEZXBlbmRlbmN5RXJyb3IgPSBlcnJvck1lc3NhZ2UgPT09IG51bGwgfHwgZXJyb3JNZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJOUE1fUkVHSVNUUllfVU5BVVRIRU5USUNBVEVEX1JFUVVFU1RcIik7XG4gICAgdmFyIG9uU2lnbkluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGVhbUlkKSB7XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFwic2lnbi1pblwiLCB0ZWFtSWQ6IHRlYW1JZCB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKHByaXZhdGVEZXBlbmRlbmN5RXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwib3ZlcmxheVwiLCBbXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lcyhcImVycm9yXCIpLFxuICAgICAgICAgICAgICAgIGFic29sdXRlQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGVycm9yQnVuZGxlckNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgICBdKSB9LCBwcm9wcywgeyBjaGlsZHJlbjogW2pzeChcInBcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJlcnJvci1tZXNzYWdlXCIsIFtlcnJvck1lc3NhZ2VDbGFzc05hbWVdKSwgY2hpbGRyZW46IGpzeChcInN0cm9uZ1wiLCB7IGNoaWxkcmVuOiBcIlVuYWJsZSB0byBmZXRjaCByZXF1aXJlZCBkZXBlbmRlbmN5LlwiIH0pIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJlcnJvci1tZXNzYWdlXCIsIFtlcnJvck1lc3NhZ2VDbGFzc05hbWVdKSwgY2hpbGRyZW46IGpzeHMoXCJwXCIsIHsgY2hpbGRyZW46IFtcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkLiBQbGVhc2Ugc2lnbiBpbiB0byB5b3VyIGFjY291bnQgKG1ha2Ugc3VyZSB0byBhbGxvdyBwb3AtdXBzIHRvIHRoaXMgcGFnZSkgYW5kIHRyeSBhZ2Fpbi4gSWYgdGhlIGlzc3VlIHBlcnNpc3RzLCBjb250YWN0XCIsIFwiIFwiLCBqc3goXCJhXCIsIHsgaHJlZjogXCJtYWlsdG86aGVsbG9AY29kZXNhbmRib3guaW8/c3ViamVjdD1TYW5kcGFjayBUaW1lb3V0IEVycm9yXCIsIGNoaWxkcmVuOiBcInN1cHBvcnRcIiB9KSwgXCIgXCIsIFwiZm9yIGZ1cnRoZXIgYXNzaXN0YW5jZS5cIl0gfSkgfSksIGpzeChcImRpdlwiLCB7IGNoaWxkcmVuOiBqc3hzKFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiYnV0dG9uXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25DbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblN0YW5kYWxvbmVDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91bmRlZEJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pLCBvbkNsaWNrOiBvblNpZ25JbiwgY2hpbGRyZW46IFtqc3goU2lnbkluSWNvbiwge30pLCBqc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IFwiU2lnbiBpblwiIH0pXSB9KSB9KV0gfSkpKTtcbiAgICB9XG4gICAgaWYgKGlzU2FuZHBhY2tCdW5kbGVyRXJyb3IgJiYgZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiAoanN4KFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwib3ZlcmxheVwiLCBbXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lcyhcImVycm9yXCIpLFxuICAgICAgICAgICAgICAgIGFic29sdXRlQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGVycm9yQnVuZGxlckNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgICBdKSB9LCBvdGhlclByb3BzLCB7IGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiZXJyb3ItbWVzc2FnZVwiLCBbZXJyb3JNZXNzYWdlQ2xhc3NOYW1lXSksIGNoaWxkcmVuOiBbanN4KFwicFwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImVycm9yLXRpdGxlXCIsIFtjc3MoeyBmb250V2VpZ2h0OiBcImJvbGRcIiB9KV0pLCBjaGlsZHJlbjogXCJDb3VsZG4ndCBjb25uZWN0IHRvIHNlcnZlclwiIH0pLCBqc3goXCJwXCIsIHsgY2hpbGRyZW46IG1hcEJ1bmRsZXJFcnJvcnMoZXJyb3JNZXNzYWdlKSB9KSwganN4KFwiZGl2XCIsIHsgY2hpbGRyZW46IGpzeHMoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJidXR0b25cIiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWVzKFwiaWNvbi1zdGFuZGFsb25lXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25DbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdGFuZGFsb25lQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3VuZGVkQnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuU2FuZHBhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aXRsZTogXCJSZXN0YXJ0IHNjcmlwdFwiLCB0eXBlOiBcImJ1dHRvblwiLCBjaGlsZHJlbjogW2pzeChSZXN0YXJ0SWNvbiwge30pLCBcIiBcIiwganN4KFwic3BhblwiLCB7IGNoaWxkcmVuOiBcIlJlc3RhcnRcIiB9KV0gfSkgfSldIH0pIH0pKSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIm92ZXJsYXlcIiwgW1xuICAgICAgICAgICAgY2xhc3NOYW1lcyhcImVycm9yXCIpLFxuICAgICAgICAgICAgYWJzb2x1dGVDbGFzc05hbWUsXG4gICAgICAgICAgICBlcnJvckNsYXNzTmFtZSh7IHNvbGlkQmc6IHRydWUgfSksXG4gICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgIF0pLCB0cmFuc2xhdGU6IFwibm9cIiB9LCBvdGhlclByb3BzLCB7IGNoaWxkcmVuOiBbanN4KFwicFwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImVycm9yLW1lc3NhZ2VcIiwgW2Vycm9yTWVzc2FnZUNsYXNzTmFtZV0pLCBjaGlsZHJlbjoganN4KFwic3Ryb25nXCIsIHsgY2hpbGRyZW46IFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIiB9KSB9KSwganN4KFwicFwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImVycm9yLW1lc3NhZ2VcIiwgW1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VDbGFzc05hbWUoeyBlcnJvckNvZGU6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgXSksIGNoaWxkcmVuOiBlcnJvck1lc3NhZ2UgfHwgY2hpbGRyZW4gfSldIH0pKSk7XG59O1xuXG4vKipcbiAqIFN0b2xlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL250ZXJhY3QvYW5zaS10by1yZWFjdC9ibG9iL21hc3Rlci9zcmMvaW5kZXgudHNcbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBBTlNJIHN0cmluZ3MgaW50byBKU09OIG91dHB1dC5cbiAqIEBuYW1lIGFuc2lUb0pTT05cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBpbnB1dCBzdHJpbmcuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZV9jbGFzc2VzIElmIGB0cnVlYCwgSFRNTCBjbGFzc2VzIHdpbGwgYmUgYXBwZW5kZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gdGhlIEhUTUwgb3V0cHV0LlxuICogQHJldHVybiB7QXJyYXl9IFRoZSBwYXJzZWQgaW5wdXQuXG4gKi9cbmZ1bmN0aW9uIGFuc2lUb0pTT04oaW5wdXQsIHVzZV9jbGFzc2VzKSB7XG4gICAgaWYgKHVzZV9jbGFzc2VzID09PSB2b2lkIDApIHsgdXNlX2NsYXNzZXMgPSBmYWxzZTsgfVxuICAgIGlucHV0ID0gZXNjYXBlQ2FycmlhZ2VSZXR1cm4oZml4QmFja3NwYWNlKGlucHV0KSk7XG4gICAgcmV0dXJuIEFuc2VyLmFuc2lUb0pzb24oaW5wdXQsIHtcbiAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgcmVtb3ZlX2VtcHR5OiB0cnVlLFxuICAgICAgICB1c2VfY2xhc3NlczogdXNlX2NsYXNzZXMsXG4gICAgfSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIGNsYXNzIHN0cmluZy5cbiAqIEBuYW1lIGNyZWF0ZUNsYXNzXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7QW5zZXJKc29uRW50cnl9IGJ1bmRsZVxuICogQHJldHVybiB7U3RyaW5nfSBjbGFzcyBuYW1lKHMpXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNsYXNzKGJ1bmRsZSkge1xuICAgIHZhciBjbGFzc05hbWVzID0gXCJcIjtcbiAgICBpZiAoYnVuZGxlLmJnKSB7XG4gICAgICAgIGNsYXNzTmFtZXMgKz0gXCJcIi5jb25jYXQoYnVuZGxlLmJnLCBcIi1iZyBcIik7XG4gICAgfVxuICAgIGlmIChidW5kbGUuZmcpIHtcbiAgICAgICAgY2xhc3NOYW1lcyArPSBcIlwiLmNvbmNhdChidW5kbGUuZmcsIFwiLWZnIFwiKTtcbiAgICB9XG4gICAgaWYgKGJ1bmRsZS5kZWNvcmF0aW9uKSB7XG4gICAgICAgIGNsYXNzTmFtZXMgKz0gXCJhbnNpLVwiLmNvbmNhdChidW5kbGUuZGVjb3JhdGlvbiwgXCIgXCIpO1xuICAgIH1cbiAgICBpZiAoY2xhc3NOYW1lcyA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXMuc3Vic3RyaW5nKDAsIGNsYXNzTmFtZXMubGVuZ3RoIC0gMSk7XG4gICAgcmV0dXJuIGNsYXNzTmFtZXM7XG59XG4vKipcbiAqIENyZWF0ZSB0aGUgc3R5bGUgYXR0cmlidXRlLlxuICogQG5hbWUgY3JlYXRlU3R5bGVcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtBbnNlckpzb25FbnRyeX0gYnVuZGxlXG4gKiBAcmV0dXJuIHtPYmplY3R9IHJldHVybnMgdGhlIHN0eWxlIG9iamVjdFxuICovXG5mdW5jdGlvbiBjcmVhdGVTdHlsZShidW5kbGUpIHtcbiAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICBpZiAoYnVuZGxlLmJnKSB7XG4gICAgICAgIHN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKFwiLmNvbmNhdChidW5kbGUuYmcsIFwiKVwiKTtcbiAgICB9XG4gICAgaWYgKGJ1bmRsZS5mZykge1xuICAgICAgICBzdHlsZS5jb2xvciA9IFwicmdiKFwiLmNvbmNhdChidW5kbGUuZmcsIFwiKVwiKTtcbiAgICB9XG4gICAgc3dpdGNoIChidW5kbGUuZGVjb3JhdGlvbikge1xuICAgICAgICBjYXNlIFwiYm9sZFwiOlxuICAgICAgICAgICAgc3R5bGUuZm9udFdlaWdodCA9IFwiYm9sZFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkaW1cIjpcbiAgICAgICAgICAgIHN0eWxlLm9wYWNpdHkgPSBcIjAuNVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJpdGFsaWNcIjpcbiAgICAgICAgICAgIHN0eWxlLmZvbnRTdHlsZSA9IFwiaXRhbGljXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImhpZGRlblwiOlxuICAgICAgICAgICAgc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0cmlrZXRocm91Z2hcIjpcbiAgICAgICAgICAgIHN0eWxlLnRleHREZWNvcmF0aW9uID0gXCJsaW5lLXRocm91Z2hcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidW5kZXJsaW5lXCI6XG4gICAgICAgICAgICBzdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwidW5kZXJsaW5lXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJsaW5rXCI6XG4gICAgICAgICAgICBzdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwiYmxpbmtcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gc3R5bGU7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIEFuc2VyIGJ1bmRsZSBpbnRvIGEgUmVhY3QgTm9kZS5cbiAqIEBwYXJhbSBsaW5raWZ5IHdoZXRoZXIgbGlua3Mgc2hvdWxkIGJlIGNvbnZlcnRpbmcgaW50byBjbGlja2FibGUgYW5jaG9yIHRhZ3MuXG4gKiBAcGFyYW0gdXNlQ2xhc3NlcyBzaG91bGQgcmVuZGVyIHRoZSBzcGFuIHdpdGggYSBjbGFzcyBpbnN0ZWFkIG9mIHN0eWxlLlxuICogQHBhcmFtIGJ1bmRsZSBBbnNlciBvdXRwdXQuXG4gKiBAcGFyYW0ga2V5XG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRCdW5kbGVJbnRvUmVhY3QobGlua2lmeSwgdXNlQ2xhc3NlcywgYnVuZGxlLCBrZXkpIHtcbiAgICB2YXIgc3R5bGUgPSB1c2VDbGFzc2VzID8gbnVsbCA6IGNyZWF0ZVN0eWxlKGJ1bmRsZSk7XG4gICAgdmFyIGNsYXNzTmFtZSA9IHVzZUNsYXNzZXMgPyBjcmVhdGVDbGFzcyhidW5kbGUpIDogbnVsbDtcbiAgICBpZiAoIWxpbmtpZnkpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgc3R5bGU6IHN0eWxlLCBrZXk6IGtleSwgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSwgYnVuZGxlLmNvbnRlbnQpO1xuICAgIH1cbiAgICB2YXIgY29udGVudCA9IFtdO1xuICAgIHZhciBsaW5rUmVnZXggPSAvKFxcc3xeKShodHRwcz86XFwvXFwvKD86d3d3XFwufCg/IXd3dykpW15cXHMuXStcXC5bXlxcc117Mix9fHd3d1xcLlteXFxzXStcXC5bXlxcc117Mix9KS9nO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSBsaW5rUmVnZXguZXhlYyhidW5kbGUuY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICAgIHZhciBwcmUgPSBtYXRjaFsxXSwgdXJsID0gbWF0Y2hbMl07XG4gICAgICAgIHZhciBzdGFydEluZGV4ID0gbWF0Y2guaW5kZXggKyBwcmUubGVuZ3RoO1xuICAgICAgICBpZiAoc3RhcnRJbmRleCA+IGluZGV4KSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goYnVuZGxlLmNvbnRlbnQuc3Vic3RyaW5nKGluZGV4LCBzdGFydEluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBocmVmIHdlIGdlbmVyYXRlIGZyb20gdGhlIGxpbmsgaXMgZnVsbHkgcXVhbGlmaWVkLiBXZSBhc3N1bWUgaHR0cFxuICAgICAgICAvLyBpZiBpdCBzdGFydHMgd2l0aCBhIHd3dyBiZWNhdXNlIG1hbnkgc2l0ZXMgZG9uJ3Qgc3VwcG9ydCBodHRwc1xuICAgICAgICB2YXIgaHJlZiA9IHVybC5zdGFydHNXaXRoKFwid3d3LlwiKSA/IFwiaHR0cDovL1wiLmNvbmNhdCh1cmwpIDogdXJsO1xuICAgICAgICBjb250ZW50LnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChcImFcIiwge1xuICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgIGhyZWY6IGhyZWYsXG4gICAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgIH0sIFwiXCIuY29uY2F0KHVybCkpKTtcbiAgICAgICAgaW5kZXggPSBsaW5rUmVnZXgubGFzdEluZGV4O1xuICAgIH1cbiAgICBpZiAoaW5kZXggPCBidW5kbGUuY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgY29udGVudC5wdXNoKGJ1bmRsZS5jb250ZW50LnN1YnN0cmluZyhpbmRleCkpO1xuICAgIH1cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBzdHlsZTogc3R5bGUsIGtleToga2V5LCBjbGFzc05hbWU6IGNsYXNzTmFtZSB9LCBjb250ZW50KTtcbn1cbmZ1bmN0aW9uIEFuc2kocHJvcHMpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lLCB1c2VDbGFzc2VzID0gcHJvcHMudXNlQ2xhc3NlcywgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbiwgbGlua2lmeSA9IHByb3BzLmxpbmtpZnk7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJjb2RlXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSwgYW5zaVRvSlNPTihjaGlsZHJlbiAhPT0gbnVsbCAmJiBjaGlsZHJlbiAhPT0gdm9pZCAwID8gY2hpbGRyZW4gOiBcIlwiLCB1c2VDbGFzc2VzICE9PSBudWxsICYmIHVzZUNsYXNzZXMgIT09IHZvaWQgMCA/IHVzZUNsYXNzZXMgOiBmYWxzZSkubWFwKGNvbnZlcnRCdW5kbGVJbnRvUmVhY3QuYmluZChudWxsLCBsaW5raWZ5ICE9PSBudWxsICYmIGxpbmtpZnkgIT09IHZvaWQgMCA/IGxpbmtpZnkgOiBmYWxzZSwgdXNlQ2xhc3NlcyAhPT0gbnVsbCAmJiB1c2VDbGFzc2VzICE9PSB2b2lkIDAgPyB1c2VDbGFzc2VzIDogZmFsc2UpKSk7XG59XG4vLyBUaGlzIGlzIGNvcGllZCBmcm9tIHRoZSBKdXB5dGVyIENsYXNzaWMgc291cmNlIGNvZGVcbi8vIG5vdGVib29rL3N0YXRpYy9iYXNlL2pzL3V0aWxzLmpzIHRvIGhhbmRsZSBcXGIgaW4gYSB3YXlcbi8vIHRoYXQgaXMgKipjb21wYXRpYmxlIHdpdGggSnVweXRlciBjbGFzc2ljKiouICAgT25lIGNhblxuLy8gYXJndWUgdGhhdCB0aGlzIGJlaGF2aW9yIGlzIHF1ZXN0aW9uYWJsZTpcbi8vICAgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTU0NDAxNTIvbXVsdGlwbGUtYi1kb2VzbnQtd29yay1hcy1leHBlY3RlZC1pbi1qdXB5dGVyI1xuZnVuY3Rpb24gZml4QmFja3NwYWNlKHR4dCkge1xuICAgIHZhciB0bXAgPSB0eHQ7XG4gICAgZG8ge1xuICAgICAgICB0eHQgPSB0bXA7XG4gICAgICAgIC8vIENhbmNlbCBvdXQgYW55dGhpbmctYnV0LW5ld2xpbmUgZm9sbG93ZWQgYnkgYmFja3NwYWNlXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgICAgIHRtcCA9IHR4dC5yZXBsYWNlKC9bXlxcbl1cXHgwOC9nbSwgXCJcIik7XG4gICAgfSB3aGlsZSAodG1wLmxlbmd0aCA8IHR4dC5sZW5ndGgpO1xuICAgIHJldHVybiB0eHQ7XG59XG5cbnZhciBTdGRvdXRMaXN0ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGRhdGEgPSBfYS5kYXRhO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHJldHVybiAoanN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBkYXRhLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gX2EuZGF0YSwgaWQgPSBfYS5pZDtcbiAgICAgICAgICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiY29uc29sZS1pdGVtXCIsIFtjb25zb2xlSXRlbUNsYXNzTmFtZSQxXSksIGNoaWxkcmVuOiBqc3goQW5zaSwgeyBjaGlsZHJlbjogZGF0YSB9KSB9LCBpZCkpO1xuICAgICAgICB9KSB9KSk7XG59O1xudmFyIGNvbnNvbGVJdGVtQ2xhc3NOYW1lJDEgPSBjc3Moe1xuICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICBwYWRkaW5nOiBcIiRzcGFjZSQzICRzcGFjZSQyXCIsXG4gICAgZm9udFNpemU6IFwiLjg1ZW1cIixcbiAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgIHdoaXRlU3BhY2U6IFwicHJlXCIsXG4gICAgXCImOm5vdCg6Zmlyc3QtY2hpbGQpOmFmdGVyXCI6IHtcbiAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICByaWdodDogMCxcbiAgICAgICAgaGVpZ2h0OiAxLFxuICAgICAgICBiYWNrZ3JvdW5kOiBcIiRjb2xvcnMkc3VyZmFjZTNcIixcbiAgICB9LFxufSk7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG52YXIgZ2V0UGFyYW1ldGVycyA9IGZ1bmN0aW9uIChwYXJhbWV0ZXJzKSB7XG4gICAgcmV0dXJuIExaU3RyaW5nLmNvbXByZXNzVG9CYXNlNjQoSlNPTi5zdHJpbmdpZnkocGFyYW1ldGVycykpXG4gICAgICAgIC5yZXBsYWNlKC9cXCsvZywgXCItXCIpIC8vIENvbnZlcnQgJysnIHRvICctJ1xuICAgICAgICAucmVwbGFjZSgvXFwvL2csIFwiX1wiKSAvLyBDb252ZXJ0ICcvJyB0byAnXydcbiAgICAgICAgLnJlcGxhY2UoLz0rJC8sIFwiXCIpO1xufTsgLyogUmVtb3ZlIGVuZGluZyAnPScqL1xudmFyIENTQl9VUkwgPSBcImh0dHBzOi8vY29kZXNhbmRib3guaW8vYXBpL3YxL3NhbmRib3hlcy9kZWZpbmVcIjtcbnZhciBnZXRGaWxlUGFyYW1ldGVycyA9IGZ1bmN0aW9uIChmaWxlcywgZW52aXJvbm1lbnQpIHtcbiAgICB2YXIgbm9ybWFsaXplZEZpbGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgbmV4dCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBmaWxlTmFtZSA9IG5leHQucmVwbGFjZShcIi9cIiwgXCJcIik7XG4gICAgICAgIHZhciB2YWx1ZSA9IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IGZpbGVzW25leHRdLmNvZGUsXG4gICAgICAgICAgICBpc0JpbmFyeTogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldiksIChfYSA9IHt9LCBfYVtmaWxlTmFtZV0gPSB2YWx1ZSwgX2EpKTtcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIGdldFBhcmFtZXRlcnMoX19hc3NpZ24oeyBmaWxlczogbm9ybWFsaXplZEZpbGVzIH0sIChlbnZpcm9ubWVudCA/IHsgdGVtcGxhdGU6IGVudmlyb25tZW50IH0gOiBudWxsKSkpO1xufTtcbnZhciBVbnN0eWxlZE9wZW5JbkNvZGVTYW5kYm94QnV0dG9uID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIF9iLCBfYywgX2Q7XG4gICAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW4sIHByb3BzID0gX19yZXN0KF9hLCBbXCJjaGlsZHJlblwiXSk7XG4gICAgdmFyIHNhbmRwYWNrID0gdXNlU2FuZHBhY2soKS5zYW5kcGFjaztcbiAgICB2YXIgZm9ybVJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgICB2YXIgX2UgPSBSZWFjdC51c2VTdGF0ZSgpLCBwYXJhbXNWYWx1ZXMgPSBfZVswXSwgc2V0UGFyYW1zVmFsdWVzID0gX2VbMV07XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uIGRlYm91bmNlKCkge1xuICAgICAgICB2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBnZXRGaWxlUGFyYW1ldGVycyhzYW5kcGFjay5maWxlcywgc2FuZHBhY2suZW52aXJvbm1lbnQpO1xuICAgICAgICAgICAgdmFyIHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHBhcmFtcyxcbiAgICAgICAgICAgICAgICBxdWVyeTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgICAgIGZpbGU6IHNhbmRwYWNrLmFjdGl2ZUZpbGUsXG4gICAgICAgICAgICAgICAgICAgIHV0bV9tZWRpdW06IFwic2FuZHBhY2tcIixcbiAgICAgICAgICAgICAgICB9KS50b1N0cmluZygpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXRQYXJhbXNWYWx1ZXMoc2VhcmNoUGFyYW1zKTtcbiAgICAgICAgfSwgNjAwKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIH07XG4gICAgfSwgW3NhbmRwYWNrLmFjdGl2ZUZpbGUsIHNhbmRwYWNrLmVudmlyb25tZW50LCBzYW5kcGFjay5maWxlc10pO1xuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgYSBzYWZlIGxpbWl0IHRvIGF2b2lkIHRvbyBsb25nIHJlcXVlc3RzICg0MDEpLFxuICAgICAqIGFzIGFsbCBwYXJhbWV0ZXJzIGFyZSBhdHRhY2hlZCBpbiB0aGUgVVJMXG4gICAgICovXG4gICAgaWYgKCgoX2QgPSAoX2MgPSAoX2IgPSBwYXJhbXNWYWx1ZXMgPT09IG51bGwgfHwgcGFyYW1zVmFsdWVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXNWYWx1ZXMuZ2V0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChwYXJhbXNWYWx1ZXMsIFwicGFyYW1ldGVyc1wiKSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmxlbmd0aCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMCkgPiAxNTAwKSB7XG4gICAgICAgIHJldHVybiAoanN4cyhcImJ1dHRvblwiLCBfX2Fzc2lnbih7IG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZm9ybVJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3VibWl0KCk7IH0sIHRpdGxlOiBcIk9wZW4gaW4gQ29kZVNhbmRib3hcIiwgdHlwZTogXCJidXR0b25cIiB9LCBwcm9wcywgeyBjaGlsZHJlbjogW2pzeHMoXCJmb3JtXCIsIHsgcmVmOiBmb3JtUmVmLCBhY3Rpb246IENTQl9VUkwsIG1ldGhvZDogXCJQT1NUXCIsIHN0eWxlOiB7IHZpc2liaWxpdHk6IFwiaGlkZGVuXCIgfSwgdGFyZ2V0OiBcIl9ibGFua1wiLCBjaGlsZHJlbjogW2pzeChcImlucHV0XCIsIHsgbmFtZTogXCJlbnZpcm9ubWVudFwiLCB0eXBlOiBcImhpZGRlblwiLCB2YWx1ZTogc2FuZHBhY2suZW52aXJvbm1lbnQgPT09IFwibm9kZVwiID8gXCJzZXJ2ZXJcIiA6IHNhbmRwYWNrLmVudmlyb25tZW50IH0pLCBBcnJheS5mcm9tKHBhcmFtc1ZhbHVlcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hWzBdLCB2YWx1ZSA9IF9hWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoanN4KFwiaW5wdXRcIiwgeyBuYW1lOiBrZXksIHR5cGU6IFwiaGlkZGVuXCIsIHZhbHVlOiB2YWx1ZSB9LCBrZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXSB9KSwgY2hpbGRyZW5dIH0pKSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4KFwiYVwiLCBfX2Fzc2lnbih7IGhyZWY6IFwiXCIuY29uY2F0KENTQl9VUkwsIFwiP1wiKS5jb25jYXQocGFyYW1zVmFsdWVzID09PSBudWxsIHx8IHBhcmFtc1ZhbHVlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zVmFsdWVzLnRvU3RyaW5nKCksIFwiJmVudmlyb25tZW50PVwiKS5jb25jYXQoc2FuZHBhY2suZW52aXJvbm1lbnQgPT09IFwibm9kZVwiID8gXCJzZXJ2ZXJcIiA6IHNhbmRwYWNrLmVudmlyb25tZW50KSwgcmVsOiBcIm5vcmVmZXJyZXIgbm9vcGVuZXJcIiwgdGFyZ2V0OiBcIl9ibGFua1wiLCB0aXRsZTogXCJPcGVuIGluIENvZGVTYW5kYm94XCIgfSwgcHJvcHMsIHsgY2hpbGRyZW46IGNoaWxkcmVuIH0pKSk7XG59O1xuXG52YXIgT3BlbkluQ29kZVNhbmRib3hCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB1c2VDbGFzc05hbWVzKCk7XG4gICAgcmV0dXJuIChqc3hzKFVuc3R5bGVkT3BlbkluQ29kZVNhbmRib3hCdXR0b24sIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiYnV0dG9uXCIsIFtcbiAgICAgICAgICAgIGNsYXNzTmFtZXMoXCJpY29uLXN0YW5kYWxvbmVcIiksXG4gICAgICAgICAgICBidXR0b25DbGFzc05hbWUsXG4gICAgICAgICAgICBpY29uU3RhbmRhbG9uZUNsYXNzTmFtZSxcbiAgICAgICAgICAgIHJvdW5kZWRCdXR0b25DbGFzc05hbWUsXG4gICAgICAgIF0pLCBjaGlsZHJlbjogW2pzeChFeHBvcnRJY29uLCB7fSksIGpzeChcInNwYW5cIiwgeyBjaGlsZHJlbjogXCJPcGVuIFNhbmRib3hcIiB9KV0gfSkpO1xufTtcblxudmFyIF9hJDM7XG52YXIgY3ViZUNsYXNzTmFtZSA9IGNzcyh7XG4gICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtNHB4LCA5cHgpIHNjYWxlKDAuMTMsIDAuMTMpXCIsXG4gICAgXCIqXCI6IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgd2lkdGg6IFwiOTZweFwiLCBoZWlnaHQ6IFwiOTZweFwiIH0sXG59KTtcbnZhciB3cmFwcGVyQ2xhc3NOYW1lJDIgPSBjc3MoKF9hJDMgPSB7XG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIHJpZ2h0OiBcIiRzcGFjZSQyXCIsXG4gICAgICAgIGJvdHRvbTogXCIkc3BhY2UkMlwiLFxuICAgICAgICB6SW5kZXg6IFwiJHRvcFwiLFxuICAgICAgICB3aWR0aDogXCIzMnB4XCIsXG4gICAgICAgIGhlaWdodDogXCIzMnB4XCIsXG4gICAgICAgIGJvcmRlclJhZGl1czogXCIkYm9yZGVyJHJhZGl1c1wiXG4gICAgfSxcbiAgICBfYSQzW1wiLlwiLmNvbmNhdChjdWJlQ2xhc3NOYW1lKV0gPSB7IGRpc3BsYXk6IFwiZmxleFwiIH0sXG4gICAgX2EkM1tcIi5zcC1idXR0b24uXCIuY29uY2F0KGJ1dHRvbkNsYXNzTmFtZSldID0geyBkaXNwbGF5OiBcIm5vbmVcIiB9LFxuICAgIF9hJDNbXCImOmhvdmVyIC5zcC1idXR0b24uXCIuY29uY2F0KGJ1dHRvbkNsYXNzTmFtZSldID0geyBkaXNwbGF5OiBcImZsZXhcIiB9LFxuICAgIF9hJDNbXCImOmhvdmVyIC5zcC1idXR0b24uXCIuY29uY2F0KGJ1dHRvbkNsYXNzTmFtZSwgXCIgPiBzcGFuXCIpXSA9IHsgZGlzcGxheTogXCJub25lXCIgfSxcbiAgICBfYSQzW1wiJjpob3ZlciAuXCIuY29uY2F0KGN1YmVDbGFzc05hbWUpXSA9IHsgZGlzcGxheTogXCJub25lXCIgfSxcbiAgICBfYSQzKSk7XG52YXIgY3ViZVJvdGF0ZSA9IGtleWZyYW1lcyh7XG4gICAgXCIwJVwiOiB7XG4gICAgICAgIHRyYW5zZm9ybTogXCJyb3RhdGVYKC0yNS41ZGVnKSByb3RhdGVZKDQ1ZGVnKVwiLFxuICAgIH0sXG4gICAgXCIxMDAlXCI6IHtcbiAgICAgICAgdHJhbnNmb3JtOiBcInJvdGF0ZVgoLTI1LjVkZWcpIHJvdGF0ZVkoNDA1ZGVnKVwiLFxuICAgIH0sXG59KTtcbnZhciBzaWRlc0NsYXNzTmFtZXMgPSBjc3Moe1xuICAgIGFuaW1hdGlvbjogXCJcIi5jb25jYXQoY3ViZVJvdGF0ZSwgXCIgMXMgbGluZWFyIGluZmluaXRlXCIpLFxuICAgIGFuaW1hdGlvbkZpbGxNb2RlOiBcImZvcndhcmRzXCIsXG4gICAgdHJhbnNmb3JtU3R5bGU6IFwicHJlc2VydmUtM2RcIixcbiAgICB0cmFuc2Zvcm06IFwicm90YXRlWCgtMjUuNWRlZykgcm90YXRlWSg0NWRlZylcIixcbiAgICBcIipcIjoge1xuICAgICAgICBib3JkZXI6IFwiMTBweCBzb2xpZCAkY29sb3JzJGNsaWNrYWJsZVwiLFxuICAgICAgICBib3JkZXJSYWRpdXM6IFwiOHB4XCIsXG4gICAgICAgIGJhY2tncm91bmQ6IFwiJGNvbG9ycyRzdXJmYWNlMVwiLFxuICAgIH0sXG4gICAgXCIudG9wXCI6IHtcbiAgICAgICAgdHJhbnNmb3JtOiBcInJvdGF0ZVgoOTBkZWcpIHRyYW5zbGF0ZVooNDRweClcIixcbiAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiBcIjUwJSA1MCVcIixcbiAgICB9LFxuICAgIFwiLmJvdHRvbVwiOiB7XG4gICAgICAgIHRyYW5zZm9ybTogXCJyb3RhdGVYKC05MGRlZykgdHJhbnNsYXRlWig0NHB4KVwiLFxuICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiNTAlIDUwJVwiLFxuICAgIH0sXG4gICAgXCIuZnJvbnRcIjoge1xuICAgICAgICB0cmFuc2Zvcm06IFwicm90YXRlWSgwZGVnKSB0cmFuc2xhdGVaKDQ0cHgpXCIsXG4gICAgICAgIHRyYW5zZm9ybU9yaWdpbjogXCI1MCUgNTAlXCIsXG4gICAgfSxcbiAgICBcIi5iYWNrXCI6IHtcbiAgICAgICAgdHJhbnNmb3JtOiBcInJvdGF0ZVkoLTE4MGRlZykgdHJhbnNsYXRlWig0NHB4KVwiLFxuICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiNTAlIDUwJVwiLFxuICAgIH0sXG4gICAgXCIubGVmdFwiOiB7XG4gICAgICAgIHRyYW5zZm9ybTogXCJyb3RhdGVZKC05MGRlZykgdHJhbnNsYXRlWig0NHB4KVwiLFxuICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiNTAlIDUwJVwiLFxuICAgIH0sXG4gICAgXCIucmlnaHRcIjoge1xuICAgICAgICB0cmFuc2Zvcm06IFwicm90YXRlWSg5MGRlZykgdHJhbnNsYXRlWig0NHB4KVwiLFxuICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiNTAlIDUwJVwiLFxuICAgIH0sXG59KTtcbnZhciBMb2FkaW5nID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9IF9hLmNsYXNzTmFtZSwgc2hvd09wZW5JbkNvZGVTYW5kYm94ID0gX2Euc2hvd09wZW5JbkNvZGVTYW5kYm94LCBwcm9wcyA9IF9fcmVzdChfYSwgW1wiY2xhc3NOYW1lXCIsIFwic2hvd09wZW5JbkNvZGVTYW5kYm94XCJdKTtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJjdWJlLXdyYXBwZXJcIiwgW3dyYXBwZXJDbGFzc05hbWUkMiwgY2xhc3NOYW1lXSksIHRpdGxlOiBcIk9wZW4gaW4gQ29kZVNhbmRib3hcIiB9LCBwcm9wcywgeyBjaGlsZHJlbjogW3Nob3dPcGVuSW5Db2RlU2FuZGJveCAmJiBqc3goT3BlbkluQ29kZVNhbmRib3hCdXR0b24sIHt9KSwganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiY3ViZVwiLCBbY3ViZUNsYXNzTmFtZV0pLCBjaGlsZHJlbjoganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInNpZGVzXCIsIFtzaWRlc0NsYXNzTmFtZXNdKSwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidG9wXCIgfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJyaWdodFwiIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiYm90dG9tXCIgfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsZWZ0XCIgfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmcm9udFwiIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiYmFja1wiIH0pXSB9KSB9KV0gfSkpKTtcbn07XG5cbnZhciBsb2FkaW5nQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiJGNvbG9ycyRzdXJmYWNlMVwiLFxufSk7XG52YXIgTG9hZGluZ092ZXJsYXkgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgY2xpZW50SWQgPSBfYS5jbGllbnRJZCwgbG9hZGluZyA9IF9hLmxvYWRpbmcsIGNsYXNzTmFtZSA9IF9hLmNsYXNzTmFtZSwgc3R5bGUgPSBfYS5zdHlsZSwgc2hvd09wZW5JbkNvZGVTYW5kYm94ID0gX2Euc2hvd09wZW5JbkNvZGVTYW5kYm94LCBwcm9wcyA9IF9fcmVzdChfYSwgW1wiY2xpZW50SWRcIiwgXCJsb2FkaW5nXCIsIFwiY2xhc3NOYW1lXCIsIFwic3R5bGVcIiwgXCJzaG93T3BlbkluQ29kZVNhbmRib3hcIl0pO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHZhciBfYiA9IHVzZVNhbmRwYWNrKCkuc2FuZHBhY2ssIHJ1blNhbmRwYWNrID0gX2IucnVuU2FuZHBhY2ssIGVudmlyb25tZW50ID0gX2IuZW52aXJvbm1lbnQ7XG4gICAgdmFyIF9jID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpLCBzaG91bGRTaG93U3Rkb3V0ID0gX2NbMF0sIHNldFNob3VsZFNob3dTdGRvdXQgPSBfY1sxXTtcbiAgICB2YXIgbG9hZGluZ092ZXJsYXlTdGF0ZSA9IHVzZUxvYWRpbmdPdmVybGF5U3RhdGUoY2xpZW50SWQsIGxvYWRpbmcpO1xuICAgIHZhciBwcm9ncmVzc01lc3NhZ2UgPSB1c2VTYW5kcGFja1ByZXZpZXdQcm9ncmVzcyh7IGNsaWVudElkOiBjbGllbnRJZCB9KTtcbiAgICB2YXIgc3Rkb3V0RGF0YSA9IHVzZVNhbmRwYWNrU2hlbGxTdGRvdXQoeyBjbGllbnRJZDogY2xpZW50SWQgfSkubG9ncztcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGltZXI7XG4gICAgICAgIGlmIChwcm9ncmVzc01lc3NhZ2UgPT09IG51bGwgfHwgcHJvZ3Jlc3NNZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9ncmVzc01lc3NhZ2UuaW5jbHVkZXMoXCJSdW5uaW5nXCIpKSB7XG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldFNob3VsZFNob3dTdGRvdXQodHJ1ZSk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRpbWVyKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbcHJvZ3Jlc3NNZXNzYWdlXSk7XG4gICAgaWYgKGxvYWRpbmdPdmVybGF5U3RhdGUgPT09IFwiSElEREVOXCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChsb2FkaW5nT3ZlcmxheVN0YXRlID09PSBcIlRJTUVPVVRcIikge1xuICAgICAgICByZXR1cm4gKGpzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIm92ZXJsYXlcIiwgW1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZXMoXCJlcnJvclwiKSxcbiAgICAgICAgICAgICAgICBhYnNvbHV0ZUNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBlcnJvckNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBlcnJvckJ1bmRsZXJDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgICAgXSkgfSwgcHJvcHMsIHsgY2hpbGRyZW46IGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJlcnJvci1tZXNzYWdlXCIsIFtlcnJvck1lc3NhZ2VDbGFzc05hbWVdKSwgY2hpbGRyZW46IFtqc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiZXJyb3ItdGl0bGVcIiwgW2Nzcyh7IGZvbnRXZWlnaHQ6IFwiYm9sZFwiIH0pXSksIGNoaWxkcmVuOiBcIkNvdWxkbid0IGNvbm5lY3QgdG8gc2VydmVyXCIgfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImVycm9yLW1lc3NhZ2VcIiwgW2Vycm9yTWVzc2FnZUNsYXNzTmFtZV0pLCBjaGlsZHJlbjoganN4cyhcInBcIiwgeyBjaGlsZHJlbjogW1wiVGhpcyBtZWFucyBzYW5kcGFjayBjYW5ub3QgY29ubmVjdCB0byB0aGUgcnVudGltZSBvciB5b3VyIG5ldHdvcmsgaXMgaGF2aW5nIHNvbWUgaXNzdWVzLiBQbGVhc2UgY2hlY2sgdGhlIG5ldHdvcmsgdGFiIGluIHlvdXIgYnJvd3NlciBhbmQgdHJ5IGFnYWluLiBJZiB0aGUgcHJvYmxlbSBwZXJzaXN0cywgcmVwb3J0IGl0IHZpYVwiLCBcIiBcIiwganN4KFwiYVwiLCB7IGhyZWY6IFwibWFpbHRvOmhlbGxvQGNvZGVzYW5kYm94LmlvP3N1YmplY3Q9U2FuZHBhY2sgVGltZW91dCBFcnJvclwiLCBjaGlsZHJlbjogXCJlbWFpbFwiIH0pLCBcIiBcIiwgXCJvciBzdWJtaXQgYW4gaXNzdWUgb25cIiwgXCIgXCIsIGpzeChcImFcIiwgeyBocmVmOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9jb2Rlc2FuZGJveC9zYW5kcGFjay9pc3N1ZXNcIiwgcmVsOiBcIm5vcmVmZXJyZXIgbm9vcGVuZXJcIiwgdGFyZ2V0OiBcIl9ibGFua1wiLCBjaGlsZHJlbjogXCJHaXRIdWIuXCIgfSldIH0pIH0pLCBqc3hzKFwicFwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImVycm9yLW1lc3NhZ2VcIiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZUNsYXNzTmFtZSh7IGVycm9yQ29kZTogdHJ1ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pLCBjaGlsZHJlbjogW1wiRU5WOiBcIiwgZW52aXJvbm1lbnQsIGpzeChcImJyXCIsIHt9KSwgXCJFUlJPUjogVElNRV9PVVRcIl0gfSksIGpzeChcImRpdlwiLCB7IGNoaWxkcmVuOiBqc3hzKFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiYnV0dG9uXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lcyhcImljb24tc3RhbmRhbG9uZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU3RhbmRhbG9uZUNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91bmRlZEJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSwgb25DbGljazogcnVuU2FuZHBhY2ssIHRpdGxlOiBcIlJlc3RhcnQgc2NyaXB0XCIsIHR5cGU6IFwiYnV0dG9uXCIsIGNoaWxkcmVuOiBbanN4KFJlc3RhcnRJY29uLCB7fSksIFwiIFwiLCBqc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IFwiVHJ5IGFnYWluXCIgfSldIH0pIH0pXSB9KSB9KSkpO1xuICAgIH1cbiAgICB2YXIgc3RpbGxMb2FkaW5nID0gbG9hZGluZ092ZXJsYXlTdGF0ZSA9PT0gXCJMT0FESU5HXCIgfHwgbG9hZGluZ092ZXJsYXlTdGF0ZSA9PT0gXCJQUkVfRkFESU5HXCI7XG4gICAgcmV0dXJuIChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIm92ZXJsYXlcIiwgW1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWVzKFwibG9hZGluZ1wiKSxcbiAgICAgICAgICAgICAgICAgICAgYWJzb2x1dGVDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmdDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBdKSwgc3R5bGU6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBzdHlsZSksIHsgb3BhY2l0eTogc3RpbGxMb2FkaW5nID8gMSA6IDAsIHRyYW5zaXRpb246IFwib3BhY2l0eSBcIi5jb25jYXQoRkFERV9BTklNQVRJT05fRFVSQVRJT04sIFwibXMgZWFzZS1vdXRcIikgfSkgfSwgcHJvcHMsIHsgY2hpbGRyZW46IFtzaG91bGRTaG93U3Rkb3V0ICYmIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IHN0ZG91dFByZXZpZXcudG9TdHJpbmcoKSwgY2hpbGRyZW46IGpzeChTdGRvdXRMaXN0LCB7IGRhdGE6IHN0ZG91dERhdGEgfSkgfSkpLCBqc3goTG9hZGluZywgeyBzaG93T3BlbkluQ29kZVNhbmRib3g6IHNob3dPcGVuSW5Db2RlU2FuZGJveCB9KV0gfSkpLCBwcm9ncmVzc01lc3NhZ2UgJiYgKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogcHJvZ3Jlc3NDbGFzc05hbWUkMS50b1N0cmluZygpLCBjaGlsZHJlbjoganN4KFwicFwiLCB7IGNoaWxkcmVuOiBwcm9ncmVzc01lc3NhZ2UgfSkgfSkpXSB9KSk7XG59O1xudmFyIHN0ZG91dFByZXZpZXcgPSBjc3Moe1xuICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IFwiJHNwYWNlJDhcIixcbiAgICBvdmVyZmxvdzogXCJhdXRvXCIsXG4gICAgb3BhY2l0eTogMC41LFxuICAgIG92ZXJmbG93WDogXCJoaWRkZW5cIixcbn0pO1xudmFyIHByb2dyZXNzQ2xhc3NOYW1lJDEgPSBjc3Moe1xuICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgbGVmdDogXCIkc3BhY2UkNVwiLFxuICAgIGJvdHRvbTogXCIkc3BhY2UkNFwiLFxuICAgIHpJbmRleDogXCIkdG9wXCIsXG4gICAgY29sb3I6IFwiJGNvbG9ycyRjbGlja2FibGVcIixcbiAgICBhbmltYXRpb246IFwiXCIuY29uY2F0KGZhZGVJbiwgXCIgMTUwbXMgZWFzZVwiKSxcbiAgICBmb250RmFtaWx5OiBcIiRmb250JG1vbm9cIixcbiAgICBmb250U2l6ZTogXCIuOGVtXCIsXG4gICAgd2lkdGg6IFwiNzUlXCIsXG4gICAgcDoge1xuICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiLFxuICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgIHRleHRPdmVyZmxvdzogXCJlbGxpcHNpc1wiLFxuICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICB9LFxufSk7XG5cbnZhciBEZXBlbmRlbmNpZXNQcm9ncmVzcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBjbGllbnRJZCA9IF9hLmNsaWVudElkO1xuICAgIHZhciBwcm9ncmVzc01lc3NhZ2UgPSB1c2VTYW5kcGFja1ByZXZpZXdQcm9ncmVzcyh7XG4gICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICB9KTtcbiAgICBpZiAoIXByb2dyZXNzTWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IHByb2dyZXNzQ2xhc3NOYW1lLnRvU3RyaW5nKCksIGNoaWxkcmVuOiBqc3goXCJwXCIsIHsgY2hpbGRyZW46IHByb2dyZXNzTWVzc2FnZSB9KSB9KSk7XG59O1xudmFyIHByb2dyZXNzQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIGxlZnQ6IFwiJHNwYWNlJDVcIixcbiAgICBib3R0b206IFwiJHNwYWNlJDRcIixcbiAgICB6SW5kZXg6IFwiJHRvcFwiLFxuICAgIGNvbG9yOiBcIiRjb2xvcnMkY2xpY2thYmxlXCIsXG4gICAgYW5pbWF0aW9uOiBcIlwiLmNvbmNhdChmYWRlSW4sIFwiIDE1MG1zIGVhc2VcIiksXG4gICAgZm9udEZhbWlseTogXCIkZm9udCRtb25vXCIsXG4gICAgZm9udFNpemU6IFwiLjhlbVwiLFxuICAgIHdpZHRoOiBcIjc1JVwiLFxuICAgIHA6IHtcbiAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIixcbiAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICB0ZXh0T3ZlcmZsb3c6IFwiZWxsaXBzaXNcIixcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgfSxcbn0pO1xuXG52YXIgZXhwbG9yZXJDbGFzc05hbWUgPSBjc3Moe1xuICAgIGJvcmRlclJhZGl1czogXCIwXCIsXG4gICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgIHBhZGRpbmc6IDAsXG4gICAgbWFyZ2luQm90dG9tOiBcIiRzcGFjZSQyXCIsXG4gICAgc3Bhbjoge1xuICAgICAgICB0ZXh0T3ZlcmZsb3c6IFwiZWxsaXBzaXNcIixcbiAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIixcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgfSxcbiAgICBzdmc6IHtcbiAgICAgICAgbWFyZ2luUmlnaHQ6IFwiJHNwYWNlJDFcIixcbiAgICB9LFxufSk7XG52YXIgRmlsZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBzZWxlY3RGaWxlID0gX2Euc2VsZWN0RmlsZSwgcGF0aCA9IF9hLnBhdGgsIGFjdGl2ZSA9IF9hLmFjdGl2ZSwgb25DbGljayA9IF9hLm9uQ2xpY2ssIGRlcHRoID0gX2EuZGVwdGgsIGlzRGlyT3BlbiA9IF9hLmlzRGlyT3BlbjtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICB2YXIgb25DbGlja0J1dHRvbiA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoc2VsZWN0RmlsZSkge1xuICAgICAgICAgICAgc2VsZWN0RmlsZShwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBvbkNsaWNrID09PSBudWxsIHx8IG9uQ2xpY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQ2xpY2soZXZlbnQpO1xuICAgIH07XG4gICAgdmFyIGZpbGVOYW1lID0gcGF0aC5zcGxpdChcIi9cIikuZmlsdGVyKEJvb2xlYW4pLnBvcCgpO1xuICAgIHZhciBnZXRJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZWN0RmlsZSlcbiAgICAgICAgICAgIHJldHVybiBqc3goRmlsZUljb24sIHt9KTtcbiAgICAgICAgcmV0dXJuIGlzRGlyT3BlbiA/IGpzeChEaXJlY3RvcnlJY29uT3Blbiwge30pIDoganN4KERpcmVjdG9yeUljb25DbG9zZWQsIHt9KTtcbiAgICB9O1xuICAgIHJldHVybiAoanN4cyhcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImJ1dHRvblwiLCBbXG4gICAgICAgICAgICBjbGFzc05hbWVzKFwiZXhwbG9yZXJcIiksXG4gICAgICAgICAgICBidXR0b25DbGFzc05hbWUsXG4gICAgICAgICAgICBleHBsb3JlckNsYXNzTmFtZSxcbiAgICAgICAgXSksIFwiZGF0YS1hY3RpdmVcIjogYWN0aXZlLCBvbkNsaWNrOiBvbkNsaWNrQnV0dG9uLCBzdHlsZTogeyBwYWRkaW5nTGVmdDogMTggKiBkZXB0aCArIFwicHhcIiB9LCB0aXRsZTogZmlsZU5hbWUsIHR5cGU6IFwiYnV0dG9uXCIsIGNoaWxkcmVuOiBbZ2V0SWNvbigpLCBqc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IGZpbGVOYW1lIH0pXSB9KSk7XG59O1xuXG52YXIgRGlyZWN0b3J5ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHByZWZpeGVkUGF0aCA9IF9hLnByZWZpeGVkUGF0aCwgZmlsZXMgPSBfYS5maWxlcywgc2VsZWN0RmlsZSA9IF9hLnNlbGVjdEZpbGUsIGFjdGl2ZUZpbGUgPSBfYS5hY3RpdmVGaWxlLCBkZXB0aCA9IF9hLmRlcHRoLCBhdXRvSGlkZGVuRmlsZXMgPSBfYS5hdXRvSGlkZGVuRmlsZXMsIHZpc2libGVGaWxlcyA9IF9hLnZpc2libGVGaWxlcywgaW5pdGlhbENvbGxhcHNlZEZvbGRlciA9IF9hLmluaXRpYWxDb2xsYXBzZWRGb2xkZXI7XG4gICAgdmFyIF9iID0gUmVhY3QudXNlU3RhdGUoIShpbml0aWFsQ29sbGFwc2VkRm9sZGVyID09PSBudWxsIHx8IGluaXRpYWxDb2xsYXBzZWRGb2xkZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluaXRpYWxDb2xsYXBzZWRGb2xkZXIuaW5jbHVkZXMocHJlZml4ZWRQYXRoKSkpLCBvcGVuID0gX2JbMF0sIHNldE9wZW4gPSBfYlsxXTtcbiAgICB2YXIgdG9nZ2xlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0T3BlbihmdW5jdGlvbiAocHJldikgeyByZXR1cm4gIXByZXY7IH0pOyB9O1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNoaWxkcmVuOiBbanN4KEZpbGUsIHsgZGVwdGg6IGRlcHRoLCBpc0Rpck9wZW46IG9wZW4sIG9uQ2xpY2s6IHRvZ2dsZSwgcGF0aDogcHJlZml4ZWRQYXRoICsgXCIvXCIgfSksIG9wZW4gJiYgKGpzeChNb2R1bGVMaXN0LCB7IGFjdGl2ZUZpbGU6IGFjdGl2ZUZpbGUsIGF1dG9IaWRkZW5GaWxlczogYXV0b0hpZGRlbkZpbGVzLCBkZXB0aDogZGVwdGggKyAxLCBmaWxlczogZmlsZXMsIGluaXRpYWxDb2xsYXBzZWRGb2xkZXI6IGluaXRpYWxDb2xsYXBzZWRGb2xkZXIsIHByZWZpeGVkUGF0aDogcHJlZml4ZWRQYXRoLCBzZWxlY3RGaWxlOiBzZWxlY3RGaWxlLCB2aXNpYmxlRmlsZXM6IHZpc2libGVGaWxlcyB9KSldIH0sIHByZWZpeGVkUGF0aCkpO1xufTtcblxudmFyIGZyb21Qcm9wc1RvTW9kdWxlcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBhdXRvSGlkZGVuRmlsZXMgPSBfYS5hdXRvSGlkZGVuRmlsZXMsIHZpc2libGVGaWxlcyA9IF9hLnZpc2libGVGaWxlcywgZmlsZXMgPSBfYS5maWxlcywgcHJlZml4ZWRQYXRoID0gX2EucHJlZml4ZWRQYXRoO1xuICAgIHZhciBoYXNWaXNpYmxlRmlsZXNPcHRpb24gPSB2aXNpYmxlRmlsZXMubGVuZ3RoID4gMDtcbiAgICAvKipcbiAgICAgKiBXaGVuIHZpc2libGVGaWxlcyBvciBhY3RpdmVGaWxlIGFyZSBzZXQsIHRoZSBoaWRkZW4gYW5kIGFjdGl2ZSBmbGFncyBvbiB0aGUgZmlsZXMgcHJvcCBhcmUgaWdub3JlZC5cbiAgICAgKi9cbiAgICB2YXIgZmlsdGVyQnlIaWRkZW5Qcm9wZXJ0eSA9IGF1dG9IaWRkZW5GaWxlcyAmJiAhaGFzVmlzaWJsZUZpbGVzT3B0aW9uO1xuICAgIHZhciBmaWx0ZXJCeVZpc2libGVGaWxlc09wdGlvbiA9IGF1dG9IaWRkZW5GaWxlcyAmJiAhIWhhc1Zpc2libGVGaWxlc09wdGlvbjtcbiAgICB2YXIgZmlsZUxpc3RXaXRob3V0UHJlZml4ID0gT2JqZWN0LmtleXMoZmlsZXMpXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGZpbGVQYXRoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGlzVmFsaWRhdGVkUGF0aCA9IGZpbGVQYXRoLnN0YXJ0c1dpdGgocHJlZml4ZWRQYXRoKTtcbiAgICAgICAgaWYgKGZpbHRlckJ5VmlzaWJsZUZpbGVzT3B0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNWYWxpZGF0ZWRQYXRoICYmIHZpc2libGVGaWxlcy5pbmNsdWRlcyhmaWxlUGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbHRlckJ5SGlkZGVuUHJvcGVydHkpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkYXRlZFBhdGggJiYgISgoX2EgPSBmaWxlc1tmaWxlUGF0aF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oaWRkZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc1ZhbGlkYXRlZFBhdGg7XG4gICAgfSlcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoZmlsZSkgeyByZXR1cm4gZmlsZS5zdWJzdHJpbmcocHJlZml4ZWRQYXRoLmxlbmd0aCk7IH0pO1xuICAgIHZhciBkaXJlY3RvcmllcyA9IG5ldyBTZXQoZmlsZUxpc3RXaXRob3V0UHJlZml4XG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHsgcmV0dXJuIGZpbGUuaW5jbHVkZXMoXCIvXCIpOyB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChmaWxlKSB7IHJldHVybiBcIlwiLmNvbmNhdChwcmVmaXhlZFBhdGgpLmNvbmNhdChmaWxlLnNwbGl0KFwiL1wiKVswXSwgXCIvXCIpOyB9KSk7XG4gICAgdmFyIG1vZHVsZXMgPSBmaWxlTGlzdFdpdGhvdXRQcmVmaXhcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkgeyByZXR1cm4gIWZpbGUuaW5jbHVkZXMoXCIvXCIpOyB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChmaWxlKSB7IHJldHVybiBcIlwiLmNvbmNhdChwcmVmaXhlZFBhdGgpLmNvbmNhdChmaWxlKTsgfSk7XG4gICAgcmV0dXJuIHsgZGlyZWN0b3JpZXM6IEFycmF5LmZyb20oZGlyZWN0b3JpZXMpLCBtb2R1bGVzOiBtb2R1bGVzIH07XG59O1xuXG52YXIgTW9kdWxlTGlzdCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBfYiA9IF9hLmRlcHRoLCBkZXB0aCA9IF9iID09PSB2b2lkIDAgPyAwIDogX2IsIGFjdGl2ZUZpbGUgPSBfYS5hY3RpdmVGaWxlLCBzZWxlY3RGaWxlID0gX2Euc2VsZWN0RmlsZSwgcHJlZml4ZWRQYXRoID0gX2EucHJlZml4ZWRQYXRoLCBmaWxlcyA9IF9hLmZpbGVzLCBhdXRvSGlkZGVuRmlsZXMgPSBfYS5hdXRvSGlkZGVuRmlsZXMsIHZpc2libGVGaWxlcyA9IF9hLnZpc2libGVGaWxlcywgaW5pdGlhbENvbGxhcHNlZEZvbGRlciA9IF9hLmluaXRpYWxDb2xsYXBzZWRGb2xkZXI7XG4gICAgdmFyIF9jID0gZnJvbVByb3BzVG9Nb2R1bGVzKHtcbiAgICAgICAgdmlzaWJsZUZpbGVzOiB2aXNpYmxlRmlsZXMsXG4gICAgICAgIGF1dG9IaWRkZW5GaWxlczogYXV0b0hpZGRlbkZpbGVzLFxuICAgICAgICBwcmVmaXhlZFBhdGg6IHByZWZpeGVkUGF0aCxcbiAgICAgICAgZmlsZXM6IGZpbGVzLFxuICAgIH0pLCBkaXJlY3RvcmllcyA9IF9jLmRpcmVjdG9yaWVzLCBtb2R1bGVzID0gX2MubW9kdWxlcztcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW2RpcmVjdG9yaWVzLm1hcChmdW5jdGlvbiAoZGlyKSB7IHJldHVybiAoanN4KERpcmVjdG9yeSwgeyBhY3RpdmVGaWxlOiBhY3RpdmVGaWxlLCBhdXRvSGlkZGVuRmlsZXM6IGF1dG9IaWRkZW5GaWxlcywgZGVwdGg6IGRlcHRoLCBmaWxlczogZmlsZXMsIGluaXRpYWxDb2xsYXBzZWRGb2xkZXI6IGluaXRpYWxDb2xsYXBzZWRGb2xkZXIsIHByZWZpeGVkUGF0aDogZGlyLCBzZWxlY3RGaWxlOiBzZWxlY3RGaWxlLCB2aXNpYmxlRmlsZXM6IHZpc2libGVGaWxlcyB9LCBkaXIpKTsgfSksIG1vZHVsZXMubWFwKGZ1bmN0aW9uIChmaWxlKSB7IHJldHVybiAoanN4KEZpbGUsIHsgYWN0aXZlOiBhY3RpdmVGaWxlID09PSBmaWxlLCBkZXB0aDogZGVwdGgsIHBhdGg6IGZpbGUsIHNlbGVjdEZpbGU6IHNlbGVjdEZpbGUgfSwgZmlsZSkpOyB9KV0gfSkpO1xufTtcblxudmFyIGZpbGVFeHBsb3JlckNsYXNzTmFtZSA9IGNzcyh7XG4gICAgcGFkZGluZzogXCIkc3BhY2UkM1wiLFxuICAgIG92ZXJmbG93OiBcImF1dG9cIixcbiAgICBoZWlnaHQ6IFwiMTAwJVwiLFxufSk7XG52YXIgU2FuZHBhY2tGaWxlRXhwbG9yZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gX2EuY2xhc3NOYW1lLCBfYiA9IF9hLmF1dG9IaWRkZW5GaWxlcywgYXV0b0hpZGRlbkZpbGVzID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsIF9jID0gX2EuaW5pdGlhbENvbGxhcHNlZEZvbGRlciwgaW5pdGlhbENvbGxhcHNlZEZvbGRlciA9IF9jID09PSB2b2lkIDAgPyBbXSA6IF9jLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wiY2xhc3NOYW1lXCIsIFwiYXV0b0hpZGRlbkZpbGVzXCIsIFwiaW5pdGlhbENvbGxhcHNlZEZvbGRlclwiXSk7XG4gICAgdmFyIF9kID0gdXNlU2FuZHBhY2soKSwgX2UgPSBfZC5zYW5kcGFjaywgc3RhdHVzID0gX2Uuc3RhdHVzLCB1cGRhdGVGaWxlID0gX2UudXBkYXRlRmlsZSwgZGVsZXRlRmlsZSA9IF9lLmRlbGV0ZUZpbGUsIGFjdGl2ZUZpbGUgPSBfZS5hY3RpdmVGaWxlLCBmaWxlcyA9IF9lLmZpbGVzLCBvcGVuRmlsZSA9IF9lLm9wZW5GaWxlLCB2aXNpYmxlRmlsZXNGcm9tUHJvcHMgPSBfZS52aXNpYmxlRmlsZXNGcm9tUHJvcHMsIGxpc3RlbiA9IF9kLmxpc3RlbjtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gd2F0Y2hGU0ZpbGVzQ2hhbmdlcygpIHtcbiAgICAgICAgaWYgKHN0YXR1cyAhPT0gXCJydW5uaW5nXCIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciB1bnN1YnNjcmliZSA9IGxpc3RlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJmcy9jaGFuZ2VcIikge1xuICAgICAgICAgICAgICAgIHVwZGF0ZUZpbGUobWVzc2FnZS5wYXRoLCBtZXNzYWdlLmNvbnRlbnQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiZnMvcmVtb3ZlXCIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGVGaWxlKG1lc3NhZ2UucGF0aCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICAgIH0sIFtzdGF0dXNdKTtcbiAgICB2YXIgb3JkZXJlZEZpbGVzID0gT2JqZWN0LmtleXMoZmlsZXMpXG4gICAgICAgIC5zb3J0KClcbiAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgICAgICAgb2JqW2tleV0gPSBmaWxlc1trZXldO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sIHt9KTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImZpbGUtZXhwbG9yZXJcIiwgW3N0YWNrQ2xhc3NOYW1lLCBjbGFzc05hbWVdKSB9LCBwcm9wcywgeyBjaGlsZHJlbjoganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiZmlsZS1leHBsb3Jlci1saXN0XCIsIFtmaWxlRXhwbG9yZXJDbGFzc05hbWVdKSwgY2hpbGRyZW46IGpzeChNb2R1bGVMaXN0LCB7IGFjdGl2ZUZpbGU6IGFjdGl2ZUZpbGUsIGF1dG9IaWRkZW5GaWxlczogYXV0b0hpZGRlbkZpbGVzLCBmaWxlczogb3JkZXJlZEZpbGVzLCBpbml0aWFsQ29sbGFwc2VkRm9sZGVyOiBpbml0aWFsQ29sbGFwc2VkRm9sZGVyLCBwcmVmaXhlZFBhdGg6IFwiL1wiLCBzZWxlY3RGaWxlOiBvcGVuRmlsZSwgdmlzaWJsZUZpbGVzOiB2aXNpYmxlRmlsZXNGcm9tUHJvcHMgfSkgfSkgfSkpKTtcbn07XG5cbnZhciBzcGxpdFVybCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICB2YXIgbWF0Y2ggPSB1cmwubWF0Y2goLyhodHRwcz86XFwvXFwvLio/KVxcLy8pO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICByZXR1cm4gW21hdGNoWzFdLCB1cmwucmVwbGFjZShtYXRjaFsxXSwgXCJcIildO1xuICAgIH1cbiAgICByZXR1cm4gW3VybCwgXCIvXCJdO1xufTtcblxudmFyIG5hdmlnYXRvckNsYXNzTmFtZSA9IGNzcyh7XG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBoZWlnaHQ6IFwiJGxheW91dCRoZWFkZXJIZWlnaHRcIixcbiAgICBib3JkZXJCb3R0b206IFwiMXB4IHNvbGlkICRjb2xvcnMkc3VyZmFjZTJcIixcbiAgICBwYWRkaW5nOiBcIiRzcGFjZSQzICRzcGFjZSQyXCIsXG4gICAgYmFja2dyb3VuZDogXCIkY29sb3JzJHN1cmZhY2UxXCIsXG59KTtcbnZhciBpbnB1dENsYXNzTmFtZSA9IGNzcyh7XG4gICAgYmFja2dyb3VuZENvbG9yOiBcIiRjb2xvcnMkc3VyZmFjZTJcIixcbiAgICBjb2xvcjogXCIkY29sb3JzJGNsaWNrYWJsZVwiLFxuICAgIHBhZGRpbmc6IFwiJHNwYWNlJDEgJHNwYWNlJDNcIixcbiAgICBib3JkZXJSYWRpdXM6IFwiOTk5OTlweFwiLFxuICAgIGJvcmRlcjogXCIxcHggc29saWQgJGNvbG9ycyRzdXJmYWNlMlwiLFxuICAgIGhlaWdodDogXCIyNHB4XCIsXG4gICAgbGluZUhlaWdodDogXCIyNHB4XCIsXG4gICAgZm9udFNpemU6IFwiaW5oZXJpdFwiLFxuICAgIG91dGxpbmU6IFwibm9uZVwiLFxuICAgIGZsZXg6IDEsXG4gICAgbWFyZ2luTGVmdDogXCIkc3BhY2UkNFwiLFxuICAgIHdpZHRoOiBcIjBcIixcbiAgICB0cmFuc2l0aW9uOiBcImJhY2tncm91bmQgJHRyYW5zaXRpb25zJGRlZmF1bHRcIixcbiAgICBcIiY6aG92ZXJcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiJGNvbG9ycyRzdXJmYWNlM1wiLFxuICAgIH0sXG4gICAgXCImOmZvY3VzXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiRzdXJmYWNlMVwiLFxuICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkICRjb2xvcnMkYWNjZW50XCIsXG4gICAgICAgIGNvbG9yOiBcIiRjb2xvcnMkYmFzZVwiLFxuICAgIH0sXG59KTtcbnZhciBOYXZpZ2F0b3IgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2I7XG4gICAgdmFyIGNsaWVudElkID0gX2EuY2xpZW50SWQsIG9uVVJMQ2hhbmdlID0gX2Eub25VUkxDaGFuZ2UsIGNsYXNzTmFtZSA9IF9hLmNsYXNzTmFtZSwgc3RhcnRSb3V0ZSA9IF9hLnN0YXJ0Um91dGUsIHByb3BzID0gX19yZXN0KF9hLCBbXCJjbGllbnRJZFwiLCBcIm9uVVJMQ2hhbmdlXCIsIFwiY2xhc3NOYW1lXCIsIFwic3RhcnRSb3V0ZVwiXSk7XG4gICAgdmFyIF9jID0gUmVhY3QudXNlU3RhdGUoXCJcIiksIGJhc2VVcmwgPSBfY1swXSwgc2V0QmFzZVVybCA9IF9jWzFdO1xuICAgIHZhciBfZCA9IHVzZVNhbmRwYWNrKCksIHNhbmRwYWNrID0gX2Quc2FuZHBhY2ssIGRpc3BhdGNoID0gX2QuZGlzcGF0Y2gsIGxpc3RlbiA9IF9kLmxpc3RlbjtcbiAgICB2YXIgX2UgPSBSZWFjdC51c2VTdGF0ZSgoX2IgPSBzdGFydFJvdXRlICE9PSBudWxsICYmIHN0YXJ0Um91dGUgIT09IHZvaWQgMCA/IHN0YXJ0Um91dGUgOiBzYW5kcGFjay5zdGFydFJvdXRlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIi9cIiksIHJlbGF0aXZlVXJsID0gX2VbMF0sIHNldFJlbGF0aXZlVXJsID0gX2VbMV07XG4gICAgdmFyIF9mID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpLCBiYWNrRW5hYmxlZCA9IF9mWzBdLCBzZXRCYWNrRW5hYmxlZCA9IF9mWzFdO1xuICAgIHZhciBfZyA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKSwgZm9yd2FyZEVuYWJsZWQgPSBfZ1swXSwgc2V0Rm9yd2FyZEVuYWJsZWQgPSBfZ1sxXTtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdW5zdWIgPSBsaXN0ZW4oZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwidXJsY2hhbmdlXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gbWVzc2FnZS51cmwsIGJhY2sgPSBtZXNzYWdlLmJhY2ssIGZvcndhcmQgPSBtZXNzYWdlLmZvcndhcmQ7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gc3BsaXRVcmwodXJsKSwgbmV3QmFzZVVybCA9IF9hWzBdLCBuZXdSZWxhdGl2ZVVybCA9IF9hWzFdO1xuICAgICAgICAgICAgICAgIHNldEJhc2VVcmwobmV3QmFzZVVybCk7XG4gICAgICAgICAgICAgICAgc2V0UmVsYXRpdmVVcmwobmV3UmVsYXRpdmVVcmwpO1xuICAgICAgICAgICAgICAgIHNldEJhY2tFbmFibGVkKGJhY2spO1xuICAgICAgICAgICAgICAgIHNldEZvcndhcmRFbmFibGVkKGZvcndhcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBjbGllbnRJZCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiB1bnN1YigpOyB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW10pO1xuICAgIHZhciBoYW5kbGVJbnB1dENoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBwYXRoID0gZS50YXJnZXQudmFsdWUuc3RhcnRzV2l0aChcIi9cIilcbiAgICAgICAgICAgID8gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgIDogXCIvXCIuY29uY2F0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgc2V0UmVsYXRpdmVVcmwocGF0aCk7XG4gICAgfTtcbiAgICB2YXIgaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlLmNvZGUgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgLy8gIEVudGVyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvblVSTENoYW5nZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgb25VUkxDaGFuZ2UoYmFzZVVybCArIGUuY3VycmVudFRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBoYW5kbGVSZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFwicmVmcmVzaFwiIH0pO1xuICAgIH07XG4gICAgdmFyIGhhbmRsZUJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogXCJ1cmxiYWNrXCIgfSk7XG4gICAgfTtcbiAgICB2YXIgaGFuZGxlRm9yd2FyZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcInVybGZvcndhcmRcIiB9KTtcbiAgICB9O1xuICAgIHZhciBidXR0b25zQ2xhc3NOYW1lcyA9IGNsYXNzTmFtZXMoXCJidXR0b25cIiwgW1xuICAgICAgICBjbGFzc05hbWVzKFwiaWNvblwiKSxcbiAgICAgICAgYnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICBpY29uQ2xhc3NOYW1lLFxuICAgICAgICBjc3Moe1xuICAgICAgICAgICAgbWluV2lkdGg6IFwiJHNwYWNlJDZcIixcbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgICAgICB9KSxcbiAgICBdKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJuYXZpZ2F0b3JcIiwgW25hdmlnYXRvckNsYXNzTmFtZSwgY2xhc3NOYW1lXSkgfSwgcHJvcHMsIHsgY2hpbGRyZW46IFtqc3goXCJidXR0b25cIiwgeyBcImFyaWEtbGFiZWxcIjogXCJHbyBiYWNrIG9uZSBwYWdlXCIsIGNsYXNzTmFtZTogYnV0dG9uc0NsYXNzTmFtZXMsIGRpc2FibGVkOiAhYmFja0VuYWJsZWQsIG9uQ2xpY2s6IGhhbmRsZUJhY2ssIHR5cGU6IFwiYnV0dG9uXCIsIGNoaWxkcmVuOiBqc3goQmFja3dhcmRJY29uLCB7fSkgfSksIGpzeChcImJ1dHRvblwiLCB7IFwiYXJpYS1sYWJlbFwiOiBcIkdvIGZvcndhcmQgb25lIHBhZ2VcIiwgY2xhc3NOYW1lOiBidXR0b25zQ2xhc3NOYW1lcywgZGlzYWJsZWQ6ICFmb3J3YXJkRW5hYmxlZCwgb25DbGljazogaGFuZGxlRm9yd2FyZCwgdHlwZTogXCJidXR0b25cIiwgY2hpbGRyZW46IGpzeChGb3J3YXJkSWNvbiwge30pIH0pLCBqc3goXCJidXR0b25cIiwgeyBcImFyaWEtbGFiZWxcIjogXCJSZWZyZXNoIHBhZ2VcIiwgY2xhc3NOYW1lOiBidXR0b25zQ2xhc3NOYW1lcywgb25DbGljazogaGFuZGxlUmVmcmVzaCwgdHlwZTogXCJidXR0b25cIiwgY2hpbGRyZW46IGpzeChSZWZyZXNoSWNvbiwge30pIH0pLCBqc3goXCJpbnB1dFwiLCB7IFwiYXJpYS1sYWJlbFwiOiBcIkN1cnJlbnQgU2FuZHBhY2sgVVJMXCIsIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImlucHV0XCIsIFtpbnB1dENsYXNzTmFtZV0pLCBuYW1lOiBcIkN1cnJlbnQgU2FuZHBhY2sgVVJMXCIsIG9uQ2hhbmdlOiBoYW5kbGVJbnB1dENoYW5nZSwgb25LZXlEb3duOiBoYW5kbGVLZXlEb3duLCB0eXBlOiBcInRleHRcIiwgdmFsdWU6IHJlbGF0aXZlVXJsIH0pXSB9KSkpO1xufTtcblxudmFyIF9hJDI7XG52YXIgcHJldmlld0NsYXNzTmFtZSA9IGNzcygoX2EkMiA9IHtcbiAgICAgICAgZmxleDogMSxcbiAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgIGJhY2tncm91bmQ6IFwid2hpdGVcIixcbiAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiXG4gICAgfSxcbiAgICBfYSQyW1wiLlwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLWJyaWRnZS1mcmFtZVwiKV0gPSB7XG4gICAgICAgIGJvcmRlcjogMCxcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgbGVmdDogXCIkc3BhY2UkMlwiLFxuICAgICAgICBib3R0b206IFwiJHNwYWNlJDJcIixcbiAgICAgICAgekluZGV4OiBcIiR0b3BcIixcbiAgICAgICAgaGVpZ2h0OiAxMixcbiAgICAgICAgd2lkdGg6IFwiMzAlXCIsXG4gICAgICAgIG1peEJsZW5kTW9kZTogXCJtdWx0aXBseVwiLFxuICAgICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIixcbiAgICB9LFxuICAgIF9hJDIpKTtcbnZhciBwcmV2aWV3SWZyYW1lID0gY3NzKHtcbiAgICBib3JkZXI6IFwiMFwiLFxuICAgIG91dGxpbmU6IFwiMFwiLFxuICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgIG1pbkhlaWdodDogXCIxNjBweFwiLFxuICAgIG1heEhlaWdodDogXCIyMDAwcHhcIixcbiAgICBmbGV4OiAxLFxufSk7XG52YXIgcHJldmlld0FjdGlvbnNDbGFzc05hbWUkMSA9IGNzcyh7XG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICBib3R0b206IFwiJHNwYWNlJDJcIixcbiAgICByaWdodDogXCIkc3BhY2UkMlwiLFxuICAgIHpJbmRleDogXCIkb3ZlcmxheVwiLFxuICAgIGdhcDogXCIkc3BhY2UkMlwiLFxufSk7XG52YXIgU2FuZHBhY2tQcmV2aWV3ID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX2EsIHJlZikge1xuICAgIHZhciBfYiA9IF9hLnNob3dOYXZpZ2F0b3IsIHNob3dOYXZpZ2F0b3IgPSBfYiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYiwgX2MgPSBfYS5zaG93UmVmcmVzaEJ1dHRvbiwgc2hvd1JlZnJlc2hCdXR0b24gPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLCBfZCA9IF9hLnNob3dPcGVuSW5Db2RlU2FuZGJveCwgc2hvd09wZW5JbkNvZGVTYW5kYm94ID0gX2QgPT09IHZvaWQgMCA/IHRydWUgOiBfZCwgX2UgPSBfYS5zaG93U2FuZHBhY2tFcnJvck92ZXJsYXksIHNob3dTYW5kcGFja0Vycm9yT3ZlcmxheSA9IF9lID09PSB2b2lkIDAgPyB0cnVlIDogX2U7IF9hLnNob3dPcGVuTmV3dGFiOyB2YXIgX2cgPSBfYS5zaG93UmVzdGFydEJ1dHRvbiwgc2hvd1Jlc3RhcnRCdXR0b24gPSBfZyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9nLCBfaCA9IF9hLmFjdGlvbnNDaGlsZHJlbiwgYWN0aW9uc0NoaWxkcmVuID0gX2ggPT09IHZvaWQgMCA/IGpzeChGcmFnbWVudCwge30pIDogX2gsIGNoaWxkcmVuID0gX2EuY2hpbGRyZW4sIGNsYXNzTmFtZSA9IF9hLmNsYXNzTmFtZSwgX2ogPSBfYS5zdGFydFJvdXRlLCBzdGFydFJvdXRlID0gX2ogPT09IHZvaWQgMCA/IFwiL1wiIDogX2osIHByb3BzID0gX19yZXN0KF9hLCBbXCJzaG93TmF2aWdhdG9yXCIsIFwic2hvd1JlZnJlc2hCdXR0b25cIiwgXCJzaG93T3BlbkluQ29kZVNhbmRib3hcIiwgXCJzaG93U2FuZHBhY2tFcnJvck92ZXJsYXlcIiwgXCJzaG93T3Blbk5ld3RhYlwiLCBcInNob3dSZXN0YXJ0QnV0dG9uXCIsIFwiYWN0aW9uc0NoaWxkcmVuXCIsIFwiY2hpbGRyZW5cIiwgXCJjbGFzc05hbWVcIiwgXCJzdGFydFJvdXRlXCJdKTtcbiAgICB2YXIgX2sgPSB1c2VTYW5kcGFja0NsaWVudCh7IHN0YXJ0Um91dGU6IHN0YXJ0Um91dGUgfSksIHNhbmRwYWNrID0gX2suc2FuZHBhY2ssIGxpc3RlbiA9IF9rLmxpc3RlbiwgaWZyYW1lID0gX2suaWZyYW1lLCBnZXRDbGllbnQgPSBfay5nZXRDbGllbnQsIGNsaWVudElkID0gX2suY2xpZW50SWQsIGRpc3BhdGNoID0gX2suZGlzcGF0Y2g7XG4gICAgdmFyIF9sID0gUmVhY3QudXNlU3RhdGUobnVsbCksIGlmcmFtZUNvbXB1dGVkSGVpZ2h0ID0gX2xbMF0sIHNldENvbXB1dGVkQXV0b0hlaWdodCA9IF9sWzFdO1xuICAgIHZhciBzdGF0dXMgPSBzYW5kcGFjay5zdGF0dXM7XG4gICAgdmFyIHJlZnJlc2ggPSB1c2VTYW5kcGFja05hdmlnYXRpb24oY2xpZW50SWQpLnJlZnJlc2g7XG4gICAgdmFyIHJlc3RhcnQgPSB1c2VTYW5kcGFja1NoZWxsKGNsaWVudElkKS5yZXN0YXJ0O1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1bnN1YnNjcmliZSA9IGxpc3RlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJyZXNpemVcIikge1xuICAgICAgICAgICAgICAgIHNldENvbXB1dGVkQXV0b0hlaWdodChtZXNzYWdlLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbXSk7XG4gICAgUmVhY3QudXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgZ2V0Q2xpZW50OiBnZXRDbGllbnQsXG4gICAgfSk7IH0sIFtnZXRDbGllbnQsIGNsaWVudElkXSk7XG4gICAgdmFyIGhhbmRsZU5ld1VSTCA9IGZ1bmN0aW9uIChuZXdVcmwpIHtcbiAgICAgICAgaWYgKCFpZnJhbWUuY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmcmFtZS5jdXJyZW50LnNyYyA9IG5ld1VybDtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH07XG4gICAgcmV0dXJuIChqc3hzKFNhbmRwYWNrU3RhY2ssIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwicHJldmlld1wiLCBbY2xhc3NOYW1lXSkgfSwgcHJvcHMsIHsgY2hpbGRyZW46IFtzaG93TmF2aWdhdG9yICYmIChqc3goTmF2aWdhdG9yLCB7IGNsaWVudElkOiBjbGllbnRJZCwgb25VUkxDaGFuZ2U6IGhhbmRsZU5ld1VSTCwgc3RhcnRSb3V0ZTogc3RhcnRSb3V0ZSB9KSksIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJwcmV2aWV3LWNvbnRhaW5lclwiLCBbcHJldmlld0NsYXNzTmFtZV0pLCBjaGlsZHJlbjogW2pzeChcImlmcmFtZVwiLCB7IHJlZjogaWZyYW1lLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJwcmV2aWV3LWlmcmFtZVwiLCBbcHJldmlld0lmcmFtZV0pLCBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBoZWlnaHQgYmFzZWQgb24gdGhlIGNvbnRlbnQgb25seSBpbiBhdXRvIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgd2hlbiB0aGUgY29tcHV0ZWQgaGVpZ2h0IHdhcyByZXR1cm5lZCBieSB0aGUgYnVuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogaWZyYW1lQ29tcHV0ZWRIZWlnaHQgPyBpZnJhbWVDb21wdXRlZEhlaWdodCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRpdGxlOiBcIlNhbmRwYWNrIFByZXZpZXdcIiB9KSwganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInByZXZpZXctYWN0aW9uc1wiLCBbcHJldmlld0FjdGlvbnNDbGFzc05hbWUkMV0pLCBjaGlsZHJlbjogW2FjdGlvbnNDaGlsZHJlbiwgc2hvd1Jlc3RhcnRCdXR0b24gJiYgc2FuZHBhY2suZW52aXJvbm1lbnQgPT09IFwibm9kZVwiICYmIChqc3goUm91bmRlZEJ1dHRvbiwgeyBvbkNsaWNrOiByZXN0YXJ0LCBjaGlsZHJlbjoganN4KFJlc3RhcnRJY29uLCB7fSkgfSkpLCAhc2hvd05hdmlnYXRvciAmJiBzaG93UmVmcmVzaEJ1dHRvbiAmJiBzdGF0dXMgPT09IFwicnVubmluZ1wiICYmIChqc3goUm91bmRlZEJ1dHRvbiwgeyBvbkNsaWNrOiByZWZyZXNoLCBjaGlsZHJlbjoganN4KFJlZnJlc2hJY29uLCB7fSkgfSkpLCBzYW5kcGFjay50ZWFtSWQgJiYgKGpzeChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcImJ1dHRvblwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWVzKFwiaWNvbi1zdGFuZGFsb25lXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblN0YW5kYWxvbmVDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3VuZGVkQnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGlzcGF0Y2goeyB0eXBlOiBcInNpZ24tb3V0XCIgfSk7IH0sIHRpdGxlOiBcIlNpZ24gb3V0XCIsIHR5cGU6IFwiYnV0dG9uXCIsIGNoaWxkcmVuOiBqc3goU2lnbk91dEljb24sIHt9KSB9KSksIHNob3dPcGVuSW5Db2RlU2FuZGJveCAmJiBqc3goT3BlbkluQ29kZVNhbmRib3hCdXR0b24sIHt9KV0gfSksIGpzeChMb2FkaW5nT3ZlcmxheSwgeyBjbGllbnRJZDogY2xpZW50SWQsIHNob3dPcGVuSW5Db2RlU2FuZGJveDogc2hvd09wZW5JbkNvZGVTYW5kYm94IH0pLCBzaG93U2FuZHBhY2tFcnJvck92ZXJsYXkgJiYganN4KEVycm9yT3ZlcmxheSwge30pLCBjaGlsZHJlbl0gfSldIH0pKSk7XG59KTtcblxudmFyIF9hJDE7XG52YXIgdHJhbnNwaWxlZENvZGVDbGFzc05hbWUgPSBjc3MoKF9hJDEgPSB7XG4gICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIG92ZXJmbG93OiBcImF1dG9cIixcbiAgICAgICAgbWluSGVpZ2h0OiBcIjE2MHB4XCIsXG4gICAgICAgIGZsZXg6IDFcbiAgICB9LFxuICAgIF9hJDFbXCIuXCIuY29uY2F0KFRIRU1FX1BSRUZJWCwgXCItc3RhY2tcIildID0ge1xuICAgICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgIH0sXG4gICAgX2EkMSkpO1xudmFyIFNhbmRwYWNrVHJhbnNwaWxlZENvZGUgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gX2EuY2xhc3NOYW1lLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgICB2YXIgc2FuZHBhY2sgPSB1c2VTYW5kcGFjaygpLnNhbmRwYWNrO1xuICAgIHZhciB0cmFuc3BpbGVkQ29kZSA9IHVzZVRyYW5zcGlsZWRDb2RlKCk7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB1c2VDbGFzc05hbWVzKCk7XG4gICAgdmFyIGhpZGRlbklmcmFtZVJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaGlkZGVuSWZyYW1lID0gaGlkZGVuSWZyYW1lUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmIChoaWRkZW5JZnJhbWUpIHtcbiAgICAgICAgICAgIHNhbmRwYWNrLnJlZ2lzdGVyQnVuZGxlcihoaWRkZW5JZnJhbWUsIFwiaGlkZGVuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzYW5kcGFjay51bnJlZ2lzdGVyQnVuZGxlcihcImhpZGRlblwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0cmFuc3BpbGVkLWNvZGVcIiwgW1xuICAgICAgICAgICAgc3RhY2tDbGFzc05hbWUsXG4gICAgICAgICAgICB0cmFuc3BpbGVkQ29kZUNsYXNzTmFtZSxcbiAgICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgXSkgfSwgcHJvcHMsIHsgY2hpbGRyZW46IFtqc3goU2FuZHBhY2tDb2RlVmlld2VyLCBfX2Fzc2lnbih7IGNvZGU6IHRyYW5zcGlsZWRDb2RlICE9PSBudWxsICYmIHRyYW5zcGlsZWRDb2RlICE9PSB2b2lkIDAgPyB0cmFuc3BpbGVkQ29kZSA6IFwiXCIsIGluaXRNb2RlOiBzYW5kcGFjay5pbml0TW9kZSB9LCBwcm9wcykpLCBqc3goXCJpZnJhbWVcIiwgeyByZWY6IGhpZGRlbklmcmFtZVJlZiwgc3R5bGU6IHsgZGlzcGxheTogXCJub25lXCIgfSwgdGl0bGU6IFwidHJhbnNwaWxlZCBzYW5kcGFjayBjb2RlXCIgfSksIGpzeChFcnJvck92ZXJsYXksIHt9KSwganN4KExvYWRpbmdPdmVybGF5LCB7IGNsaWVudElkOiBcImhpZGRlblwiLCBzaG93T3BlbkluQ29kZVNhbmRib3g6IGZhbHNlIH0pXSB9KSkpO1xufTtcblxudmFyIHdyYXBwZXJDbGFzc05hbWUkMSA9IGNzcyh7XG4gICAganVzdGlmeUNvbnRlbnQ6IFwic3BhY2UtYmV0d2VlblwiLFxuICAgIGJvcmRlckJvdHRvbTogXCIxcHggc29saWQgJGNvbG9ycyRzdXJmYWNlMlwiLFxuICAgIHBhZGRpbmc6IFwiMCAkc3BhY2UkMlwiLFxuICAgIGZvbnRGYW1pbHk6IFwiJGZvbnQkbW9ub1wiLFxuICAgIGhlaWdodDogXCIkbGF5b3V0JGhlYWRlckhlaWdodFwiLFxuICAgIG1pbkhlaWdodDogXCIkbGF5b3V0JGhlYWRlckhlaWdodFwiLFxuICAgIG92ZXJmbG93WDogXCJhdXRvXCIsXG4gICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIixcbn0pO1xudmFyIGZsZXhDbGFzc05hbWUkMSA9IGNzcyh7XG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgZmxleERpcmVjdGlvbjogXCJyb3dcIixcbiAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgIGdhcDogXCIkc3BhY2UkMlwiLFxufSk7XG52YXIgSGVhZGVyJDEgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgc3RhdHVzID0gX2Euc3RhdHVzLCBzdWl0ZU9ubHkgPSBfYS5zdWl0ZU9ubHksIHNldFN1aXRlT25seSA9IF9hLnNldFN1aXRlT25seSwgc2V0VmVyYm9zZSA9IF9hLnNldFZlcmJvc2UsIHZlcmJvc2UgPSBfYS52ZXJib3NlLCB3YXRjaE1vZGUgPSBfYS53YXRjaE1vZGUsIHNldFdhdGNoTW9kZSA9IF9hLnNldFdhdGNoTW9kZSwgc2hvd1N1aXRlc09ubHkgPSBfYS5zaG93U3VpdGVzT25seSwgc2hvd1dhdGNoQnV0dG9uID0gX2Euc2hvd1dhdGNoQnV0dG9uLCBzaG93VmVyYm9zZUJ1dHRvbiA9IF9hLnNob3dWZXJib3NlQnV0dG9uLCBoaWRlVGVzdHNBbmRTdXByZXNzTG9ncyA9IF9hLmhpZGVUZXN0c0FuZFN1cHJlc3NMb2dzO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHZhciBidXR0b25zQ2xhc3NOYW1lID0gY2xhc3NOYW1lcyhcInRlc3QtaGVhZGVyLWJ1dHRvblwiLCBbXG4gICAgICAgIGJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgcm91bmRlZEJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgY3NzKHsgcGFkZGluZzogXCIkc3BhY2UkMSAkc3BhY2UkM1wiIH0pLFxuICAgIF0pO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3QtaGVhZGVyXCIsIFt3cmFwcGVyQ2xhc3NOYW1lJDEsIGZsZXhDbGFzc05hbWUkMV0pLCBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3QtaGVhZGVyLXdyYXBwZXJcIiwgW2ZsZXhDbGFzc05hbWUkMV0pLCBjaGlsZHJlbjoganN4cyhcInBcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LWhlYWRlci10aXRsZVwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiRjb2xvcnMkYmFzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIiRmb250JHNpemVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogXCIkc3BhY2UkMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0pLCBjaGlsZHJlbjogW2pzeChDb25zb2xlSWNvbiwge30pLCBcIlRlc3RzXCJdIH0pIH0pLCBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1oZWFkZXItYWN0aW9uc1wiLCBbZmxleENsYXNzTmFtZSQxXSksIGNoaWxkcmVuOiBbc2hvd1N1aXRlc09ubHkgJiYgKGpzeChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogYnV0dG9uc0NsYXNzTmFtZSwgXCJkYXRhLWFjdGl2ZVwiOiBzdWl0ZU9ubHksIGRpc2FibGVkOiBzdGF0dXMgPT09IFwiaW5pdGlhbGlzaW5nXCIsIG9uQ2xpY2s6IHNldFN1aXRlT25seSwgdHlwZTogXCJidXR0b25cIiwgY2hpbGRyZW46IFwiU3VpdGUgb25seVwiIH0pKSwgc2hvd1ZlcmJvc2VCdXR0b24gJiYgKGpzeChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogYnV0dG9uc0NsYXNzTmFtZSwgXCJkYXRhLWFjdGl2ZVwiOiB2ZXJib3NlLCBkaXNhYmxlZDogc3RhdHVzID09PSBcImluaXRpYWxpc2luZ1wiIHx8IGhpZGVUZXN0c0FuZFN1cHJlc3NMb2dzLCBvbkNsaWNrOiBzZXRWZXJib3NlLCB0eXBlOiBcImJ1dHRvblwiLCBjaGlsZHJlbjogXCJWZXJib3NlXCIgfSkpLCBzaG93V2F0Y2hCdXR0b24gJiYgKGpzeChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogYnV0dG9uc0NsYXNzTmFtZSwgXCJkYXRhLWFjdGl2ZVwiOiB3YXRjaE1vZGUsIGRpc2FibGVkOiBzdGF0dXMgPT09IFwiaW5pdGlhbGlzaW5nXCIsIG9uQ2xpY2s6IHNldFdhdGNoTW9kZSwgdHlwZTogXCJidXR0b25cIiwgY2hpbGRyZW46IFwiV2F0Y2hcIiB9KSldIH0pXSB9KSk7XG59O1xuXG52YXIgUnVuQnV0dG9uID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIG9uQ2xpY2sgPSBfYS5vbkNsaWNrO1xuICAgIHJldHVybiAoanN4KFJvdW5kZWRCdXR0b24sIHsgb25DbGljazogb25DbGljaywgdGl0bGU6IFwiUnVuIHRlc3RzXCIsIGNoaWxkcmVuOiBqc3goUnVuSWNvbiwge30pIH0pKTtcbn07XG5cbnZhciBzZXRUZXN0VGhlbWUgPSBmdW5jdGlvbiAoaXNEYXJrKSB7IHJldHVybiAoe1xuICAgIFwiLS10ZXN0LXBhc3NcIjogaXNEYXJrID8gXCIjMThkZjE2XCIgOiBcIiMxNWMyMTNcIixcbiAgICBcIi0tdGVzdC1mYWlsXCI6IGlzRGFyayA/IFwiI2RmMTYyYlwiIDogXCIjYzIxMzI1XCIsXG4gICAgXCItLXRlc3Qtc2tpcFwiOiBpc0RhcmsgPyBcIiNlYWNlMmJcIiA6IFwiI2MyYTgxM1wiLFxuICAgIFwiLS10ZXN0LXJ1blwiOiBpc0RhcmsgPyBcIiNlYWNlMmJcIiA6IFwiI2MyYTgxM1wiLFxuICAgIFwiLS10ZXN0LXRpdGxlXCI6IGlzRGFyayA/IFwiIzNmYmFiZVwiIDogXCIjMjU2YzZmXCIsXG59KTsgfTtcbnZhciBjb2xvciA9IGNzcyh7XG4gICAgdmFyaWFudHM6IHtcbiAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICBwYXNzOiB7IGNvbG9yOiBcInZhcigtLXRlc3QtcGFzcylcIiB9LFxuICAgICAgICAgICAgZmFpbDogeyBjb2xvcjogXCJ2YXIoLS10ZXN0LWZhaWwpXCIgfSxcbiAgICAgICAgICAgIHNraXA6IHsgY29sb3I6IFwidmFyKC0tdGVzdC1za2lwKVwiIH0sXG4gICAgICAgICAgICB0aXRsZTogeyBjb2xvcjogXCJ2YXIoLS10ZXN0LXRpdGxlKVwiIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbn0pO1xudmFyIHBhc3NUZXh0Q2xhc3NOYW1lID0gY29sb3IoeyBzdGF0dXM6IFwicGFzc1wiIH0pO1xudmFyIGZhaWxUZXh0Q2xhc3NOYW1lID0gY29sb3IoeyBzdGF0dXM6IFwiZmFpbFwiIH0pO1xudmFyIHNraXBUZXh0Q2xhc3NOYW1lID0gY29sb3IoeyBzdGF0dXM6IFwic2tpcFwiIH0pO1xudmFyIHRpdGxlVGV4dENsYXNzTmFtZSA9IGNvbG9yKHsgc3RhdHVzOiBcInRpdGxlXCIgfSk7XG52YXIgYmFja2dyb3VuZCA9IGNzcyh7XG4gICAgdmFyaWFudHM6IHtcbiAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICBwYXNzOiB7IGJhY2tncm91bmQ6IFwidmFyKC0tdGVzdC1wYXNzKVwiLCBjb2xvcjogXCIkY29sb3JzJHN1cmZhY2UxXCIgfSxcbiAgICAgICAgICAgIGZhaWw6IHsgYmFja2dyb3VuZDogXCJ2YXIoLS10ZXN0LWZhaWwpXCIsIGNvbG9yOiBcIiRjb2xvcnMkc3VyZmFjZTFcIiB9LFxuICAgICAgICAgICAgcnVuOiB7IGJhY2tncm91bmQ6IFwidmFyKC0tdGVzdC1ydW4pXCIsIGNvbG9yOiBcIiRjb2xvcnMkc3VyZmFjZTFcIiB9LFxuICAgICAgICB9LFxuICAgIH0sXG59KTtcbnZhciBydW5CYWNrZ3JvdW5kQ2xhc3NOYW1lID0gYmFja2dyb3VuZCh7IHN0YXR1czogXCJydW5cIiB9KTtcbnZhciBwYXNzQmFja2dyb3VuZENsYXNzTmFtZSA9IGJhY2tncm91bmQoeyBzdGF0dXM6IFwicGFzc1wiIH0pO1xudmFyIGZhaWxCYWNrZ3JvdW5kQ2xhc3NOYW1lID0gYmFja2dyb3VuZCh7IHN0YXR1czogXCJmYWlsXCIgfSk7XG5cbnZhciB0ZXN0Q29udGFpbmVyQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBtYXJnaW5MZWZ0OiBcIiRzcGFjZSQ0XCIsXG59KTtcbnZhciBjb250YWluZXJDbGFzc05hbWUkNCA9IGNzcyh7XG4gICAgbWFyZ2luQm90dG9tOiBcIiRzcGFjZSQyXCIsXG4gICAgY29sb3I6IFwiJGNvbG9ycyRjbGlja2FibGVcIixcbn0pO1xudmFyIHRlc3RDbGFzc05hbWUgPSBjc3Moe1xuICAgIG1hcmdpbkJvdHRvbTogXCIkc3BhY2UkMlwiLFxuICAgIGNvbG9yOiBcIiRjb2xvcnMkaG92ZXJcIixcbn0pO1xudmFyIGR1cmF0aW9uQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBtYXJnaW5MZWZ0OiBcIiRzcGFjZSQyXCIsXG59KTtcbnZhciBnYXBSaWdodENsYXNzTmFtZSA9IGNzcyh7XG4gICAgbWFyZ2luUmlnaHQ6IFwiJHNwYWNlJDJcIixcbn0pO1xudmFyIFRlc3RzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHRlc3RzID0gX2EudGVzdHM7IF9hLnN0eWxlO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdFwiLCBbdGVzdENvbnRhaW5lckNsYXNzTmFtZV0pLCBjaGlsZHJlbjogdGVzdHMubWFwKGZ1bmN0aW9uICh0ZXN0KSB7IHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3QtcmVzdWx0XCIsIFtjb250YWluZXJDbGFzc05hbWUkNF0pLCBjaGlsZHJlbjogW3Rlc3Quc3RhdHVzID09PSBcInBhc3NcIiAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3QtcGFzcy10ZXh0XCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NUZXh0Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FwUmlnaHRDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgIF0pLCBjaGlsZHJlbjogXCJcXHUyNzEzXCIgfSkpLCB0ZXN0LnN0YXR1cyA9PT0gXCJmYWlsXCIgJiYgKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LWZhaWwtdGV4dFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsVGV4dENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhcFJpZ2h0Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICBdKSwgY2hpbGRyZW46IFwiXFx1MjcxNVwiIH0pKSwgdGVzdC5zdGF0dXMgPT09IFwiaWRsZVwiICYmIChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1pZGxlLXRleHRcIiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFRleHRDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnYXBSaWdodENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgXSksIGNoaWxkcmVuOiBcIlxcdTI1Q0JcIiB9KSksIGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LW5hbWUtdGV4dFwiLCBbdGVzdENsYXNzTmFtZV0pLCBjaGlsZHJlbjogdGVzdC5uYW1lIH0pLCB0ZXN0LmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgKGpzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1kdXJhdGlvbi10ZXh0XCIsIFtkdXJhdGlvbkNsYXNzTmFtZV0pLCBjaGlsZHJlbjogW1wiKFwiLCB0ZXN0LmR1cmF0aW9uLCBcIiBtcylcIl0gfSkpXSB9LCB0ZXN0Lm5hbWUpKTsgfSkgfSkpO1xufTtcblxudmFyIGdldFRlc3RzID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBfYiwgX2M7XG4gICAgcmV0dXJuIChfYSA9IE9iamVjdC52YWx1ZXMoKF9iID0gYmxvY2sudGVzdHMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9KSkuY29uY2F0LmFwcGx5KF9hLCBPYmplY3QudmFsdWVzKChfYyA9IGJsb2NrLmRlc2NyaWJlcykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDoge30pLm1hcChnZXRUZXN0cykpO1xufTtcbnZhciBnZXRGYWlsaW5nVGVzdHMgPSBmdW5jdGlvbiAoYmxvY2spIHtcbiAgICByZXR1cm4gZ2V0VGVzdHMoYmxvY2spLmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gdC5zdGF0dXMgPT09IFwiZmFpbFwiOyB9KTtcbn07XG52YXIgZ2V0QWxsVGVzdFJlc3VsdHMgPSBmdW5jdGlvbiAoc3BlY3MpIHtcbiAgICByZXR1cm4gc3BlY3MubWFwKGdldFNwZWNUZXN0UmVzdWx0cykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHN0YXRzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXNzOiBhY2MucGFzcyArIHN0YXRzLnBhc3MsXG4gICAgICAgICAgICBmYWlsOiBhY2MuZmFpbCArIHN0YXRzLmZhaWwsXG4gICAgICAgICAgICBza2lwOiBhY2Muc2tpcCArIHN0YXRzLnNraXAsXG4gICAgICAgICAgICB0b3RhbDogYWNjLnRvdGFsICsgc3RhdHMudG90YWwsXG4gICAgICAgIH07XG4gICAgfSwgeyBwYXNzOiAwLCBza2lwOiAwLCBmYWlsOiAwLCB0b3RhbDogMCB9KTtcbn07XG52YXIgZ2V0U3BlY1Rlc3RSZXN1bHRzID0gZnVuY3Rpb24gKHNwZWMpIHtcbiAgICByZXR1cm4gZ2V0VGVzdHMoc3BlYykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHRlc3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhc3M6IHRlc3Quc3RhdHVzID09PSBcInBhc3NcIiA/IGFjYy5wYXNzICsgMSA6IGFjYy5wYXNzLFxuICAgICAgICAgICAgZmFpbDogdGVzdC5zdGF0dXMgPT09IFwiZmFpbFwiID8gYWNjLmZhaWwgKyAxIDogYWNjLmZhaWwsXG4gICAgICAgICAgICBza2lwOiB0ZXN0LnN0YXR1cyA9PT0gXCJpZGxlXCIgfHwgdGVzdC5zdGF0dXMgPT09IFwicnVubmluZ1wiXG4gICAgICAgICAgICAgICAgPyBhY2Muc2tpcCArIDFcbiAgICAgICAgICAgICAgICA6IGFjYy5za2lwLFxuICAgICAgICAgICAgdG90YWw6IGFjYy50b3RhbCArIDEsXG4gICAgICAgIH07XG4gICAgfSwgeyBwYXNzOiAwLCBmYWlsOiAwLCBza2lwOiAwLCB0b3RhbDogMCB9KTtcbn07XG52YXIgZ2V0QWxsU3VpdGVSZXN1bHRzID0gZnVuY3Rpb24gKHNwZWNzKSB7XG4gICAgcmV0dXJuIHNwZWNzXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHNwZWMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoKF9hID0gc3BlYy5kZXNjcmliZXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KS5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKChfYiA9IHNwZWMudGVzdHMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9KS5sZW5ndGggPiAwO1xuICAgIH0pXG4gICAgICAgIC5tYXAoZ2V0U3BlY1Rlc3RSZXN1bHRzKVxuICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHN0YXRzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXNzOiBhY2MucGFzcyArIChzdGF0cy5mYWlsID09PSAwID8gMSA6IDApLFxuICAgICAgICAgICAgZmFpbDogYWNjLmZhaWwgKyAoc3RhdHMuZmFpbCA+IDAgPyAxIDogMCksXG4gICAgICAgICAgICB0b3RhbDogYWNjLnRvdGFsICsgMSxcbiAgICAgICAgfTtcbiAgICB9LCB7IHBhc3M6IDAsIGZhaWw6IDAsIHRvdGFsOiAwIH0pO1xufTtcbnZhciBnZXREdXJhdGlvbiA9IGZ1bmN0aW9uIChzcGVjcykge1xuICAgIHJldHVybiBmbGF0TWFwKHNwZWNzLCBnZXRUZXN0cykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHRlc3QpIHsgcmV0dXJuIGFjYyArICh0ZXN0LmR1cmF0aW9uIHx8IDApOyB9LCAwKTtcbn07XG52YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIChibG9jaykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoKF9hID0gYmxvY2suZGVzY3JpYmVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSkubGVuZ3RoID09PSAwICYmXG4gICAgICAgIE9iamVjdC52YWx1ZXMoKF9iID0gYmxvY2sudGVzdHMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9KS5sZW5ndGggPT09IDA7XG59O1xudmFyIHNwbGl0VGFpbCA9IGZ1bmN0aW9uIChhcykge1xuICAgIHZhciBsYXN0SW5kZXggPSBhcy5sZW5ndGggLSAxO1xuICAgIHZhciBoZWFkID0gYXMuc2xpY2UoMCwgbGFzdEluZGV4KTtcbiAgICB2YXIgdGFpbCA9IGFzW2xhc3RJbmRleF07XG4gICAgcmV0dXJuIFtoZWFkLCB0YWlsXTtcbn07XG52YXIgZmxhdE1hcCA9IGZ1bmN0aW9uIChhcywgZikge1xuICAgIHJldHVybiBhcy5tYXAoZikucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5leHQpIHsgcmV0dXJuIGFjYy5jb25jYXQobmV4dCk7IH0sIFtdKTtcbn07XG52YXIgc2V0ID0gZnVuY3Rpb24gKHBhdGgsIHZhbHVlKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gY2xlYW5TZXQob2JqZWN0LCBwYXRoLCB2YWx1ZSk7XG4gICAgfTtcbn07XG5cbnZhciBuYW1lQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBjb2xvcjogXCIkY29sb3JzJGhvdmVyXCIsXG4gICAgbWFyZ2luQm90dG9tOiBcIiRzcGFjZSQyXCIsXG59KTtcbnZhciBjb250YWluZXJDbGFzc05hbWUkMyA9IGNzcyh7XG4gICAgbWFyZ2luTGVmdDogXCIkc3BhY2UkNFwiLFxufSk7XG52YXIgRGVzY3JpYmVzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGRlc2NyaWJlcyA9IF9hLmRlc2NyaWJlcztcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICByZXR1cm4gKGpzeChGcmFnbWVudCwgeyBjaGlsZHJlbjogZGVzY3JpYmVzLm1hcChmdW5jdGlvbiAoZGVzY3JpYmUpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICBpZiAoaXNFbXB0eShkZXNjcmliZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZXN0cyA9IE9iamVjdC52YWx1ZXMoKF9hID0gZGVzY3JpYmUudGVzdHMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KTtcbiAgICAgICAgICAgIHZhciBkZXNjcmliZXMgPSBPYmplY3QudmFsdWVzKChfYiA9IGRlc2NyaWJlLmRlc2NyaWJlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pO1xuICAgICAgICAgICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1kZXNjcmliZVwiLCBbY29udGFpbmVyQ2xhc3NOYW1lJDNdKSwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LW5hbWVcIiwgW25hbWVDbGFzc05hbWVdKSwgY2hpbGRyZW46IGRlc2NyaWJlLm5hbWUgfSksIGpzeChUZXN0cywgeyB0ZXN0czogdGVzdHMgfSksIGpzeChEZXNjcmliZXMsIHsgZGVzY3JpYmVzOiBkZXNjcmliZXMgfSldIH0sIGRlc2NyaWJlLm5hbWUpKTtcbiAgICAgICAgfSkgfSkpO1xufTtcblxudmFyIGNvbnRhaW5lckNsYXNzTmFtZSQyID0gY3NzKHtcbiAgICBjb2xvcjogXCIkY29sb3JzJGhvdmVyXCIsXG4gICAgZm9udFNpemU6IFwiJGZvbnQkc2l6ZVwiLFxuICAgIHBhZGRpbmc6IFwiJHNwYWNlJDJcIixcbiAgICB3aGl0ZVNwYWNlOiBcInByZS13cmFwXCIsXG59KTtcbnZhciBGb3JtYXR0ZWRFcnJvciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBlcnJvciA9IF9hLmVycm9yLCBwYXRoID0gX2EucGF0aDtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3QtZXJyb3JcIiwgW2NvbnRhaW5lckNsYXNzTmFtZSQyXSksIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogZm9ybWF0RGlmZk1lc3NhZ2UoZXJyb3IsIHBhdGgpIH0gfSkpO1xufTtcbnZhciBlc2NhcGVIdG1sID0gZnVuY3Rpb24gKHVuc2FmZSkge1xuICAgIHJldHVybiB1bnNhZmVcbiAgICAgICAgLnJlcGxhY2UoLyYvZywgXCImYW1wO1wiKVxuICAgICAgICAucmVwbGFjZSgvPC9nLCBcIiZsdDtcIilcbiAgICAgICAgLnJlcGxhY2UoLz4vZywgXCImZ3Q7XCIpXG4gICAgICAgIC5yZXBsYWNlKC9cIi9nLCBcIiZxdW90O1wiKVxuICAgICAgICAucmVwbGFjZSgvJy9nLCBcIiYjMDM5O1wiKTtcbn07XG52YXIgZm9ybWF0RGlmZk1lc3NhZ2UgPSBmdW5jdGlvbiAoZXJyb3IsIHBhdGgpIHtcbiAgICB2YXIgZmluYWxNZXNzYWdlID0gXCJcIjtcbiAgICBpZiAoZXJyb3IubWF0Y2hlclJlc3VsdCkge1xuICAgICAgICBmaW5hbE1lc3NhZ2UgPSBcIjxzcGFuPlwiLmNvbmNhdChlc2NhcGVIdG1sKGVycm9yLm1lc3NhZ2UpXG4gICAgICAgICAgICAucmVwbGFjZSgvKGV4cGVjdGVkKS9tLCBcIjxzcGFuIGNsYXNzPVxcXCJcIi5jb25jYXQocGFzc1RleHRDbGFzc05hbWUsIFwiXFxcIj4kMTwvc3Bhbj5cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgvKHJlY2VpdmVkKS9tLCBcIjxzcGFuIGNsYXNzPVxcXCJcIi5jb25jYXQoZmFpbFRleHRDbGFzc05hbWUsIFwiXFxcIj4kMTwvc3Bhbj5cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgvKERpZmZlcmVuY2U6KS9tLCBcIjxzcGFuPiQxPC9zcGFuPlwiKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyhFeHBlY3RlZDopKC4qKS9tLCBcIjxzcGFuPiQxPC9zcGFuPjxzcGFuIGNsYXNzPVxcXCJcIi5jb25jYXQocGFzc1RleHRDbGFzc05hbWUsIFwiXFxcIj4kMjwvc3Bhbj5cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgvKFJlY2VpdmVkOikoLiopL20sIFwiPHNwYW4+JDE8L3NwYW4+PHNwYW4gY2xhc3M9XFxcIlwiLmNvbmNhdChmYWlsVGV4dENsYXNzTmFtZSwgXCJcXFwiPiQyPC9zcGFuPlwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eKC0uKikvZ20sIFwiPHNwYW4gY2xhc3M9XFxcIlwiLmNvbmNhdChmYWlsVGV4dENsYXNzTmFtZSwgXCJcXFwiPiQxPC9zcGFuPlwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eKFxcKy4qKS9nbSwgXCI8c3BhbiBjbGFzcz1cXFwiXCIuY29uY2F0KHBhc3NUZXh0Q2xhc3NOYW1lLCBcIlxcXCI+JDE8L3NwYW4+XCIpKSwgXCI8L3NwYW4+XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZmluYWxNZXNzYWdlID0gZXNjYXBlSHRtbChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gICAgaWYgKGVycm9yLm1hcHBlZEVycm9ycyAmJlxuICAgICAgICBlcnJvci5tYXBwZWRFcnJvcnNbMF0gJiZcbiAgICAgICAgZXJyb3IubWFwcGVkRXJyb3JzWzBdLmZpbGVOYW1lLmVuZHNXaXRoKHBhdGgpICYmXG4gICAgICAgIGVycm9yLm1hcHBlZEVycm9yc1swXS5fb3JpZ2luYWxTY3JpcHRDb2RlKSB7XG4gICAgICAgIHZhciBtYXBwZWRFcnJvciA9IGVycm9yLm1hcHBlZEVycm9yc1swXTtcbiAgICAgICAgdmFyIF9vcmlnaW5hbFNjcmlwdENvZGUgPSBtYXBwZWRFcnJvci5fb3JpZ2luYWxTY3JpcHRDb2RlIHx8IFtdO1xuICAgICAgICB2YXIgd2lkZXN0TnVtYmVyXzEgPSBNYXRoLm1heC5hcHBseShNYXRoLCBfb3JpZ2luYWxTY3JpcHRDb2RlLm1hcChmdW5jdGlvbiAoY29kZSkgeyByZXR1cm4gKGNvZGUubGluZU51bWJlciArIFwiXCIpLmxlbmd0aDsgfSkpICsgMjtcbiAgICAgICAgdmFyIG1hcmdpbl8xID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogd2lkZXN0TnVtYmVyXzEgfSkubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiIFwiOyB9KTtcbiAgICAgICAgZmluYWxNZXNzYWdlICs9IFwiPGJyIC8+XCI7XG4gICAgICAgIGZpbmFsTWVzc2FnZSArPSBcIjxiciAvPlwiO1xuICAgICAgICBmaW5hbE1lc3NhZ2UgKz0gXCI8ZGl2PlwiO1xuICAgICAgICBfb3JpZ2luYWxTY3JpcHRDb2RlXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLmNvbnRlbnQudHJpbSgpOyB9KVxuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGNvZGUpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50TGluZU1hcmdpbiA9IChjb2RlLmxpbmVOdW1iZXIgKyBcIlwiKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgbmV3TWFyZ2luID0gX19zcHJlYWRBcnJheShbXSwgbWFyZ2luXzEsIHRydWUpO1xuICAgICAgICAgICAgbmV3TWFyZ2luLmxlbmd0aCAtPSBjdXJyZW50TGluZU1hcmdpbjtcbiAgICAgICAgICAgIGlmIChjb2RlLmhpZ2hsaWdodCkge1xuICAgICAgICAgICAgICAgIG5ld01hcmdpbi5sZW5ndGggLT0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0b0JlSW5kZXggPSBjb2RlLmNvbnRlbnQuaW5kZXhPZihcIi50b1wiKTtcbiAgICAgICAgICAgIHZhciB0b0JlTWFyZ2luID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogbWFyZ2luXzEubGVuZ3RoICsgdG9CZUluZGV4IC0gKHdpZGVzdE51bWJlcl8xIC0gMSkgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gXCIgXCI7IH0pO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBlc2NhcGVIdG1sKGNvZGUuY29udGVudClcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKGRlc2NyaWJlfHRlc3R8aXQpKFxcKCkoJiMwMzk7fCZxdW90O3xgKSguKikoJiMwMzk7fCZxdW90O3xgKS9tLCBcIjxzcGFuPiQxJDIkMzwvc3Bhbj48c3BhbiBjbGFzcz1cXFwiXCIuY29uY2F0KHRpdGxlVGV4dENsYXNzTmFtZSwgXCJcXFwiPiQ0PC9zcGFuPjxzcGFuPiQ1PC9zcGFuPlwiKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKGV4cGVjdFxcKCkoLiopKFxcKVxcLi4qKSh0b1tcXHdcXGRdKikoXFwoKSguKikoXFwpKS9tLCBcIjxzcGFuPiQxPC9zcGFuPjxzcGFuIGNsYXNzPVxcXCJcIi5jb25jYXQoZmFpbFRleHRDbGFzc05hbWUsIFwiXFxcIj4kMjwvc3Bhbj48c3Bhbj4kMzwvc3Bhbj48c3BhbiBzdHlsZT1cXFwidGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IGZvbnQtd2VpZ2h0OiA5MDBcXFwiPiQ0PC9zcGFuPjxzcGFuPiQ1PC9zcGFuPjxzcGFuIGNsYXNzPVxcXCJcIikuY29uY2F0KHBhc3NUZXh0Q2xhc3NOYW1lLCBcIlxcXCI+JDY8L3NwYW4+PHNwYW4+JDc8L3NwYW4+XCIpKTtcbiAgICAgICAgICAgIGZpbmFsTWVzc2FnZSArPVxuICAgICAgICAgICAgICAgIFwiPGRpdiBcIi5jb25jYXQoY29kZS5oaWdobGlnaHQgPyBcInN0eWxlPVxcXCJmb250LXdlaWdodDoyMDA7XFxcIlwiIDogXCJcIiwgXCI+XCIpICtcbiAgICAgICAgICAgICAgICAgICAgKGNvZGUuaGlnaGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiPHNwYW4gY2xhc3M9XFxcIlwiLmNvbmNhdChmYWlsVGV4dENsYXNzTmFtZSwgXCJcXFwiPj48L3NwYW4+IFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgIG5ld01hcmdpbi5qb2luKFwiXCIpICtcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlSHRtbChcIlwiICsgY29kZS5saW5lTnVtYmVyKSArXG4gICAgICAgICAgICAgICAgICAgIFwiIHwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICtcbiAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj5cIiArXG4gICAgICAgICAgICAgICAgICAgIChjb2RlLmhpZ2hsaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIjxkaXY+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbl8xLmpvaW4oXCJcIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIHwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQmVNYXJnaW4uam9pbihcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8c3BhbiBjbGFzcz1cXFwiXCIuY29uY2F0KGZhaWxUZXh0Q2xhc3NOYW1lLCBcIlxcXCI+Xjwvc3Bhbj5cIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBmaW5hbE1lc3NhZ2UgKz0gXCI8L2Rpdj5cIjtcbiAgICB9XG4gICAgcmV0dXJuIGZpbmFsTWVzc2FnZS5yZXBsYWNlKC8oPzpcXHJcXG58XFxyfFxcbikvZywgXCI8YnIgLz5cIik7XG59O1xuXG52YXIgZmlsZUNvbnRhaW5lciA9IGNzcyh7XG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgZmxleERpcmVjdGlvbjogXCJyb3dcIixcbiAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgIG1hcmdpbkJvdHRvbTogXCIkc3BhY2UkMlwiLFxufSk7XG52YXIgZ2FwQm90dG9tQ2xhc3NOYW1lJDEgPSBjc3Moe1xuICAgIG1hcmdpbkJvdHRvbTogXCIkc3BhY2UkMlwiLFxufSk7XG52YXIgZmFpbFRlc3RDbGFzc05hbWUgPSBjc3Moe1xuICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLFxufSk7XG52YXIgbGFiZWxDbGFzc05hbWUkMSA9IGNzcyh7XG4gICAgYm9yZGVyUmFkaXVzOiBcImNhbGMoJGJvcmRlciRyYWRpdXMgLyAyKVwiLFxufSk7XG52YXIgc3BlY0xhYmVsQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBwYWRkaW5nOiBcIiRzcGFjZSQxICRzcGFjZSQyXCIsXG4gICAgZm9udEZhbWlseTogXCIkZm9udCRtb25vXCIsXG4gICAgdGV4dFRyYW5zZm9ybTogXCJ1cHBlcmNhc2VcIixcbiAgICBtYXJnaW5SaWdodDogXCIkc3BhY2UkMlwiLFxufSk7XG52YXIgZmlsZVBhdGhCdXR0b25DbGFzc05hbWUgPSBjc3Moe1xuICAgIGZvbnRGYW1pbHk6IFwiJGZvbnQkbW9ub1wiLFxuICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXG4gICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbn0pO1xudmFyIGZpbGVQYXRoQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBjb2xvcjogXCIkY29sb3JzJGNsaWNrYWJsZVwiLFxuICAgIHRleHREZWNvcmF0aW9uU3R5bGU6IFwiZG90dGVkXCIsXG4gICAgdGV4dERlY29yYXRpb25MaW5lOiBcInVuZGVybGluZVwiLFxufSk7XG52YXIgZmlsZU5hbWVDbGFzc05hbWUgPSBjc3Moe1xuICAgIGNvbG9yOiBcIiRjb2xvcnMkaG92ZXJcIixcbiAgICBmb250V2VpZ2h0OiBcImJvbGRcIixcbiAgICB0ZXh0RGVjb3JhdGlvblN0eWxlOiBcImRvdHRlZFwiLFxuICAgIHRleHREZWNvcmF0aW9uTGluZTogXCJ1bmRlcmxpbmVcIixcbn0pO1xudmFyIFNwZWNzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHNwZWNzID0gX2Euc3BlY3MsIG9wZW5TcGVjID0gX2Eub3BlblNwZWMsIHN0YXR1cyA9IF9hLnN0YXR1cywgdmVyYm9zZSA9IF9hLnZlcmJvc2UsIGhpZGVUZXN0c0FuZFN1cHJlc3NMb2dzID0gX2EuaGlkZVRlc3RzQW5kU3VwcmVzc0xvZ3M7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB1c2VDbGFzc05hbWVzKCk7XG4gICAgcmV0dXJuIChqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IHNwZWNzLm1hcChmdW5jdGlvbiAoc3BlYykge1xuICAgICAgICAgICAgaWYgKHNwZWMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LXNwZWNcIiwgW2dhcEJvdHRvbUNsYXNzTmFtZSQxXSksIGNoaWxkcmVuOiBbanN4KFNwZWNMYWJlbCwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LXNwZWMtZXJyb3JcIiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbENsYXNzTmFtZSQxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsQmFja2dyb3VuZENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSwgY2hpbGRyZW46IFwiRXJyb3JcIiB9KSwganN4KEZpbGVQYXRoLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9wZW5TcGVjKHNwZWMubmFtZSk7IH0sIHBhdGg6IHNwZWMubmFtZSB9KSwganN4KEZvcm1hdHRlZEVycm9yLCB7IGVycm9yOiBzcGVjLmVycm9yLCBwYXRoOiBzcGVjLm5hbWUgfSldIH0sIHNwZWMubmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRW1wdHkoc3BlYykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZXN0cyA9IE9iamVjdC52YWx1ZXMoc3BlYy50ZXN0cyk7XG4gICAgICAgICAgICB2YXIgZGVzY3JpYmVzID0gT2JqZWN0LnZhbHVlcyhzcGVjLmRlc2NyaWJlcyk7XG4gICAgICAgICAgICB2YXIgc3RhdHMgPSBnZXRTcGVjVGVzdFJlc3VsdHMoc3BlYyk7XG4gICAgICAgICAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LXNwZWMtbmFtZVwiLCBbZ2FwQm90dG9tQ2xhc3NOYW1lJDFdKSwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1zcGVjLW5hbWUtY29udGFpbmVyXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSksIGNoaWxkcmVuOiBbc3RhdHVzID09PSBcImNvbXBsZXRlXCIgPyAoc3RhdHMuZmFpbCA+IDAgPyAoanN4KFNwZWNMYWJlbCwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LXNwZWMtY29tcGxldGVcIiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxDbGFzc05hbWUkMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxCYWNrZ3JvdW5kQ2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSwgY2hpbGRyZW46IFwiRmFpbFwiIH0pKSA6IChqc3goU3BlY0xhYmVsLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3BlYy1wYXNzXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsQ2xhc3NOYW1lJDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzQmFja2dyb3VuZENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksIGNoaWxkcmVuOiBcIlBhc3NcIiB9KSkpIDogKGpzeChTcGVjTGFiZWwsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1zcGVjLXJ1blwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbENsYXNzTmFtZSQxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuQmFja2dyb3VuZENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksIGNoaWxkcmVuOiBcIlJ1blwiIH0pKSwganN4KEZpbGVQYXRoLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGlkZVRlc3RzQW5kU3VwcmVzc0xvZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuU3BlYyhzcGVjLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBwYXRoOiBzcGVjLm5hbWUgfSldIH0pLCB2ZXJib3NlICYmICFoaWRlVGVzdHNBbmRTdXByZXNzTG9ncyAmJiBqc3goVGVzdHMsIHsgdGVzdHM6IHRlc3RzIH0pLCB2ZXJib3NlICYmICFoaWRlVGVzdHNBbmRTdXByZXNzTG9ncyAmJiAoanN4KERlc2NyaWJlcywgeyBkZXNjcmliZXM6IGRlc2NyaWJlcyB9KSksICFoaWRlVGVzdHNBbmRTdXByZXNzTG9ncyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RmFpbGluZ1Rlc3RzKHNwZWMpLm1hcChmdW5jdGlvbiAodGVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3BlYy1lcnJvclwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXBCb3R0b21DbGFzc05hbWUkMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksIGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3BlYy1lcnJvci10ZXh0XCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbFRlc3RDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxUZXh0Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLCBjaGlsZHJlbjogW1wiXFx1MjVDRiBcIiwgdGVzdC5ibG9ja3Muam9pbihcIiDigLogXCIpLCBcIiBcXHUyMDNBIFwiLCB0ZXN0Lm5hbWVdIH0pLCB0ZXN0LmVycm9ycy5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIChqc3goRm9ybWF0dGVkRXJyb3IsIHsgZXJyb3I6IGUsIHBhdGg6IHRlc3QucGF0aCB9LCBcImZhaWxpbmctXCIuY29uY2F0KHRlc3QubmFtZSwgXCItZXJyb3JcIikpKTsgfSldIH0sIFwiZmFpbGluZy1cIi5jb25jYXQodGVzdC5uYW1lKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSldIH0sIHNwZWMubmFtZSkpO1xuICAgICAgICB9KSB9KSk7XG59O1xudmFyIFNwZWNMYWJlbCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBjbGFzc05hbWUgPSBfYS5jbGFzc05hbWU7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB1c2VDbGFzc05hbWVzKCk7XG4gICAgcmV0dXJuIChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1zcGVjLWxhYmVsXCIsIFtzcGVjTGFiZWxDbGFzc05hbWUsIGNsYXNzTmFtZV0pLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcbnZhciBGaWxlUGF0aCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBvbkNsaWNrID0gX2Eub25DbGljaywgcGF0aCA9IF9hLnBhdGg7XG4gICAgdmFyIHBhcnRzID0gcGF0aC5zcGxpdChcIi9cIik7XG4gICAgdmFyIGJhc2VQYXRoID0gcGFydHMuc2xpY2UoMCwgcGFydHMubGVuZ3RoIC0gMSkuam9pbihcIi9cIikgKyBcIi9cIjtcbiAgICB2YXIgZmlsZU5hbWUgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICByZXR1cm4gKGpzeHMoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LWZpbGVuYW1lXCIsIFtcbiAgICAgICAgICAgIGJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgICAgIGZpbGVQYXRoQnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICBdKSwgb25DbGljazogb25DbGljaywgdHlwZTogXCJidXR0b25cIiwgY2hpbGRyZW46IFtqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1maWxlbmFtZS1iYXNlXCIsIFtmaWxlUGF0aENsYXNzTmFtZV0pLCBjaGlsZHJlbjogYmFzZVBhdGggfSksIGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LWZpbGVuYW1lLWZpbGVcIiwgW2ZpbGVOYW1lQ2xhc3NOYW1lXSksIGNoaWxkcmVuOiBmaWxlTmFtZSB9KV0gfSkpO1xufTtcblxudmFyIGdhcEJvdHRvbUNsYXNzTmFtZSA9IGNzcyh7XG4gICAgbWFyZ2luQm90dG9tOiBcIiRzcGFjZSQyXCIsXG59KTtcbnZhciBsYWJlbENsYXNzTmFtZSA9IGNzcyh7XG4gICAgZm9udFdlaWdodDogXCJib2xkXCIsXG4gICAgY29sb3I6IFwiJGNvbG9ycyRob3ZlclwiLFxuICAgIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcbn0pO1xudmFyIGNvbnRhaW5lckNsYXNzTmFtZSQxID0gY3NzKHtcbiAgICBmb250V2VpZ2h0OiBcImJvbGRcIixcbiAgICBjb2xvcjogXCIkY29sb3JzJGNsaWNrYWJsZVwiLFxufSk7XG52YXIgU3VtbWFyeSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBzdWl0ZXMgPSBfYS5zdWl0ZXMsIHRlc3RzID0gX2EudGVzdHMsIGR1cmF0aW9uID0gX2EuZHVyYXRpb247XG4gICAgdmFyIHdpZGVzdExhYmVsID0gXCJUZXN0IHN1aXRlczogXCI7XG4gICAgdmFyIHdpdGhNYXJnaW4gPSBmdW5jdGlvbiAobGFiZWwpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVuY2UgPSB3aWRlc3RMYWJlbC5sZW5ndGggLSBsYWJlbC5sZW5ndGg7XG4gICAgICAgIHZhciBtYXJnaW4gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBkaWZmZXJlbmNlIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiIFwiOyB9KS5qb2luKFwiXCIpO1xuICAgICAgICByZXR1cm4gbGFiZWwgKyBtYXJnaW47XG4gICAgfTtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0ZXN0LXN1bW1hcnlcIiwgW2NvbnRhaW5lckNsYXNzTmFtZSQxXSksIGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3VtbWFyeVwiLCBbZ2FwQm90dG9tQ2xhc3NOYW1lXSksIGNoaWxkcmVuOiBbanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3VtbWFyeS1zdWl0ZXMtbGFiZWxcIiwgW2xhYmVsQ2xhc3NOYW1lXSksIGNoaWxkcmVuOiB3aWRlc3RMYWJlbCB9KSwgc3VpdGVzLmZhaWwgPiAwICYmIChqc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3VtbWFyeS1zdWl0ZXMtZmFpbFwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbFRleHRDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBdKSwgY2hpbGRyZW46IFtzdWl0ZXMuZmFpbCwgXCIgZmFpbGVkLFwiLCBcIiBcIl0gfSkpLCBzdWl0ZXMucGFzcyA+IDAgJiYgKGpzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1zdW1tYXJ5LXN1aXRlcy1wYXNzXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzVGV4dENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pLCBjaGlsZHJlbjogW3N1aXRlcy5wYXNzLCBcIiBwYXNzZWQsXCIsIFwiIFwiXSB9KSksIGpzeHMoXCJzcGFuXCIsIHsgY2hpbGRyZW46IFtzdWl0ZXMudG90YWwsIFwiIHRvdGFsXCJdIH0pXSB9KSwganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3VtbWFyeVwiLCBbZ2FwQm90dG9tQ2xhc3NOYW1lXSksIGNoaWxkcmVuOiBbanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3VtbWFyeS1sYWJlbFwiLCBbbGFiZWxDbGFzc05hbWVdKSwgY2hpbGRyZW46IHdpdGhNYXJnaW4oXCJUZXN0czpcIikgfSksIHRlc3RzLmZhaWwgPiAwICYmIChqc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3VtbWFyeS1mYWlsXCIsIFtmYWlsVGV4dENsYXNzTmFtZV0pLCBjaGlsZHJlbjogW3Rlc3RzLmZhaWwsIFwiIGZhaWxlZCxcIiwgXCIgXCJdIH0pKSwgdGVzdHMuc2tpcCA+IDAgJiYgKGpzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1zdW1tYXJ5LXNraXBcIiwgW3NraXBUZXh0Q2xhc3NOYW1lXSksIGNoaWxkcmVuOiBbdGVzdHMuc2tpcCwgXCIgc2tpcHBlZCxcIiwgXCIgXCJdIH0pKSwgdGVzdHMucGFzcyA+IDAgJiYgKGpzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGVzdC1zdW1tYXJ5LXBhc3NcIiwgW3Bhc3NUZXh0Q2xhc3NOYW1lXSksIGNoaWxkcmVuOiBbdGVzdHMucGFzcywgXCIgcGFzc2VkLFwiLCBcIiBcIl0gfSkpLCBqc3hzKFwic3BhblwiLCB7IGNoaWxkcmVuOiBbdGVzdHMudG90YWwsIFwiIHRvdGFsXCJdIH0pXSB9KSwganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3Qtc3VtbWFyeS1jdXJhdGlvblwiLCBbbGFiZWxDbGFzc05hbWVdKSwgY2hpbGRyZW46IFt3aXRoTWFyZ2luKFwiVGltZTpcIiksIGR1cmF0aW9uIC8gMTAwMCwgXCJzXCJdIH0pXSB9KSk7XG59O1xuXG52YXIgcHJldmlld0FjdGlvbnNDbGFzc05hbWUgPSBjc3Moe1xuICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgYm90dG9tOiBcIiRzcGFjZSQyXCIsXG4gICAgcmlnaHQ6IFwiJHNwYWNlJDJcIixcbiAgICB6SW5kZXg6IFwiJG92ZXJsYXlcIixcbiAgICBcIj4gKlwiOiB7IG1hcmdpbkxlZnQ6IFwiJHNwYWNlJDJcIiB9LFxufSk7XG52YXIgSU5JVElBTF9TVEFURSA9IHtcbiAgICBzcGVjczoge30sXG4gICAgc3RhdHVzOiBcImluaXRpYWxpc2luZ1wiLFxuICAgIHZlcmJvc2U6IGZhbHNlLFxuICAgIHdhdGNoTW9kZTogdHJ1ZSxcbiAgICBzdWl0ZU9ubHk6IGZhbHNlLFxuICAgIHNwZWNzQ291bnQ6IDAsXG59O1xudmFyIFNhbmRwYWNrVGVzdHMgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYS52ZXJib3NlLCB2ZXJib3NlID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsIF9jID0gX2Eud2F0Y2hNb2RlLCB3YXRjaE1vZGUgPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLCBzdHlsZSA9IF9hLnN0eWxlLCBjbGFzc05hbWUgPSBfYS5jbGFzc05hbWUsIG9uQ29tcGxldGUgPSBfYS5vbkNvbXBsZXRlLCBhY3Rpb25zQ2hpbGRyZW4gPSBfYS5hY3Rpb25zQ2hpbGRyZW4sIF9kID0gX2Euc2hvd1ZlcmJvc2VCdXR0b24sIHNob3dWZXJib3NlQnV0dG9uID0gX2QgPT09IHZvaWQgMCA/IHRydWUgOiBfZCwgX2UgPSBfYS5zaG93V2F0Y2hCdXR0b24sIHNob3dXYXRjaEJ1dHRvbiA9IF9lID09PSB2b2lkIDAgPyB0cnVlIDogX2UsIF9mID0gX2EuaGlkZVRlc3RzQW5kU3VwcmVzc0xvZ3MsIGhpZGVUZXN0c0FuZFN1cHJlc3NMb2dzID0gX2YgPT09IHZvaWQgMCA/IGZhbHNlIDogX2YsIHByb3BzID0gX19yZXN0KF9hLCBbXCJ2ZXJib3NlXCIsIFwid2F0Y2hNb2RlXCIsIFwic3R5bGVcIiwgXCJjbGFzc05hbWVcIiwgXCJvbkNvbXBsZXRlXCIsIFwiYWN0aW9uc0NoaWxkcmVuXCIsIFwic2hvd1ZlcmJvc2VCdXR0b25cIiwgXCJzaG93V2F0Y2hCdXR0b25cIiwgXCJoaWRlVGVzdHNBbmRTdXByZXNzTG9nc1wiXSk7XG4gICAgdmFyIHRoZW1lID0gdXNlU2FuZHBhY2tUaGVtZSgpO1xuICAgIHZhciBfZyA9IHVzZVNhbmRwYWNrQ2xpZW50KCksIGdldENsaWVudCA9IF9nLmdldENsaWVudCwgaWZyYW1lID0gX2cuaWZyYW1lLCBsaXN0ZW4gPSBfZy5saXN0ZW4sIHNhbmRwYWNrID0gX2cuc2FuZHBhY2s7XG4gICAgdmFyIF9oID0gUmVhY3QudXNlU3RhdGUoX19hc3NpZ24oX19hc3NpZ24oe30sIElOSVRJQUxfU1RBVEUpLCB7IHZlcmJvc2U6IHZlcmJvc2UsIHdhdGNoTW9kZTogd2F0Y2hNb2RlIH0pKSwgc3RhdGUgPSBfaFswXSwgc2V0U3RhdGUgPSBfaFsxXTtcbiAgICB2YXIgcnVuQWxsVGVzdHMgPSBSZWFjdC51c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChvbGRTdGF0ZSkgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvbGRTdGF0ZSksIHsgc3RhdHVzOiBcInJ1bm5pbmdcIiwgc3BlY3M6IHt9IH0pKTsgfSk7XG4gICAgICAgIHZhciBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgICAgICAgaWYgKGNsaWVudCkge1xuICAgICAgICAgICAgY2xpZW50LmRpc3BhdGNoKHsgdHlwZTogXCJydW4tYWxsLXRlc3RzXCIgfSk7XG4gICAgICAgIH1cbiAgICB9LCBbZ2V0Q2xpZW50XSk7XG4gICAgdmFyIHJ1blNwZWMgPSBSZWFjdC51c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChvbGRTdGF0ZSkgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvbGRTdGF0ZSksIHsgc3RhdHVzOiBcInJ1bm5pbmdcIiwgc3BlY3M6IHt9IH0pKTsgfSk7XG4gICAgICAgIHZhciBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgICAgICAgaWYgKGNsaWVudCkge1xuICAgICAgICAgICAgY2xpZW50LmRpc3BhdGNoKHsgdHlwZTogXCJydW4tdGVzdHNcIiwgcGF0aDogc2FuZHBhY2suYWN0aXZlRmlsZSB9KTtcbiAgICAgICAgfVxuICAgIH0sIFtnZXRDbGllbnQsIHNhbmRwYWNrLmFjdGl2ZUZpbGVdKTtcbiAgICB2YXIgdGVzdEZpbGVSZWdleCA9IC8uKlxcLih0ZXN0fHNwZWMpXFwuW3RqXXN4PyQvO1xuICAgIHZhciBpc1NwZWNPcGVuID0gc2FuZHBhY2suYWN0aXZlRmlsZS5tYXRjaCh0ZXN0RmlsZVJlZ2V4KSAhPT0gbnVsbDtcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudERlc2NyaWJlQmxvY2tzID0gW107XG4gICAgICAgIHZhciBjdXJyZW50U3BlYyA9IFwiXCI7XG4gICAgICAgIHZhciB1bnN1YnNjcmliZSA9IGxpc3RlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgLy8gTm90ZTogc2hvcnQtY2lyY3VpdCBpZiBtZXNzYWdlIGlzbid0IGZvciB0aGUgY3VycmVudGx5IGFjdGl2ZSBzcGVjIHdoZW4gYHN1aXRlT25seWAgaXMgdHJ1ZVxuICAgICAgICAgICAgaWYgKHN0YXRlLnN1aXRlT25seSAmJlxuICAgICAgICAgICAgICAgICgoXCJwYXRoXCIgaW4gZGF0YSAmJiBkYXRhLnBhdGggIT09IHNhbmRwYWNrLmFjdGl2ZUZpbGUpIHx8XG4gICAgICAgICAgICAgICAgICAgIChcInRlc3RcIiBpbiBkYXRhICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBcInBhdGhcIiBpbiBkYXRhLnRlc3QgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudGVzdC5wYXRoICE9PSBzYW5kcGFjay5hY3RpdmVGaWxlKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcImFjdGlvblwiICYmXG4gICAgICAgICAgICAgICAgZGF0YS5hY3Rpb24gPT09IFwiY2xlYXItZXJyb3JzXCIgJiZcbiAgICAgICAgICAgICAgICBkYXRhLnNvdXJjZSA9PT0gXCJqZXN0XCIpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3BlYyA9IGRhdGEucGF0aDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcInRlc3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmV2ZW50ID09PSBcImluaXRpYWxpemVfdGVzdHNcIikge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVzY3JpYmVCbG9ja3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNwZWMgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUud2F0Y2hNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVuQWxsVGVzdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTdGF0ZShmdW5jdGlvbiAob2xkU3RhdGUpIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb2xkU3RhdGUpLCB7IHN0YXR1czogXCJpZGxlXCIsIHNwZWNzOiB7fSB9KSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmV2ZW50ID09PSBcInRlc3RfY291bnRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0U3RhdGUoZnVuY3Rpb24gKG9sZFN0YXRlKSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIG9sZFN0YXRlKSwgeyBzcGVjc0NvdW50OiBkYXRhLmNvdW50IH0pKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmV2ZW50ID09PSBcInRvdGFsX3Rlc3Rfc3RhcnRcIikge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVzY3JpYmVCbG9ja3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFN0YXRlKGZ1bmN0aW9uIChvbGRTdGF0ZSkgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvbGRTdGF0ZSksIHsgc3RhdHVzOiBcInJ1bm5pbmdcIiB9KSk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ldmVudCA9PT0gXCJ0b3RhbF90ZXN0X2VuZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTdGF0ZShmdW5jdGlvbiAob2xkU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKG9sZFN0YXRlLnNwZWNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb2xkU3RhdGUpLCB7IHN0YXR1czogXCJjb21wbGV0ZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXZlbnQgPT09IFwiYWRkX2ZpbGVcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0U3RhdGUoc2V0KFtcInNwZWNzXCIsIGRhdGEucGF0aF0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXN0czoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXZlbnQgPT09IFwicmVtb3ZlX2ZpbGVcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0U3RhdGUoZnVuY3Rpb24gKG9sZFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BlY3MgPSBPYmplY3QuZW50cmllcyhvbGRTdGF0ZS5zcGVjcykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYVswXSwgdmFsdWUgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBkYXRhLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYWNjKSwgKF9iID0ge30sIF9iW2tleV0gPSB2YWx1ZSwgX2IpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG9sZFN0YXRlKSwgeyBzcGVjczogc3BlY3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ldmVudCA9PT0gXCJmaWxlX2Vycm9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFN0YXRlKHNldChbXCJzcGVjc1wiLCBkYXRhLnBhdGgsIFwiZXJyb3JcIl0sIGRhdGEuZXJyb3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXZlbnQgPT09IFwiZGVzY3JpYmVfc3RhcnRcIikge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVzY3JpYmVCbG9ja3MucHVzaChkYXRhLmJsb2NrTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IHNwbGl0VGFpbChjdXJyZW50RGVzY3JpYmVCbG9ja3MpLCBkZXNjcmliZVBhdGggPSBfYVswXSwgY3VycmVudERlc2NyaWJlID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGVjID0gY3VycmVudFNwZWM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RGVzY3JpYmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTdGF0ZShzZXQoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3BlY3NcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWMsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRlc2NyaWJlc1wiXG4gICAgICAgICAgICAgICAgICAgIF0sIGZsYXRNYXAoZGVzY3JpYmVQYXRoLCBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW25hbWUsIFwiZGVzY3JpYmVzXCJdOyB9KSwgdHJ1ZSksIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZXNjcmliZSxcbiAgICAgICAgICAgICAgICAgICAgXSwgZmFsc2UpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLmJsb2NrTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlc3RzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlczoge30sXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXZlbnQgPT09IFwiZGVzY3JpYmVfZW5kXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudERlc2NyaWJlQmxvY2tzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmV2ZW50ID09PSBcImFkZF90ZXN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9iID0gc3BsaXRUYWlsKGN1cnJlbnREZXNjcmliZUJsb2NrcyksIGRlc2NyaWJlUGF0aCA9IF9iWzBdLCBjdXJyZW50RGVzY3JpYmUgPSBfYlsxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3RfMSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJpZGxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS50ZXN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrczogX19zcHJlYWRBcnJheShbXSwgY3VycmVudERlc2NyaWJlQmxvY2tzLCB0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREZXNjcmliZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0U3RhdGUoc2V0KFtcInNwZWNzXCIsIGRhdGEucGF0aCwgXCJ0ZXN0c1wiLCBkYXRhLnRlc3ROYW1lXSwgdGVzdF8xKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0U3RhdGUoc2V0KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzcGVjc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRlc2NyaWJlc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBdLCBmbGF0TWFwKGRlc2NyaWJlUGF0aCwgZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtuYW1lLCBcImRlc2NyaWJlc1wiXTsgfSksIHRydWUpLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERlc2NyaWJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGVzdHNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRlc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSwgZmFsc2UpLCB0ZXN0XzEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ldmVudCA9PT0gXCJ0ZXN0X3N0YXJ0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3RfMiA9IGRhdGEudGVzdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9jID0gc3BsaXRUYWlsKHRlc3RfMi5ibG9ja3MpLCBkZXNjcmliZVBhdGggPSBfY1swXSwgY3VycmVudERlc2NyaWJlID0gX2NbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydGVkVGVzdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJydW5uaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0ZXN0XzIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrczogdGVzdF8yLmJsb2NrcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHRlc3RfMi5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREZXNjcmliZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0U3RhdGUoc2V0KFtcInNwZWNzXCIsIHRlc3RfMi5wYXRoLCBcInRlc3RzXCIsIHRlc3RfMi5uYW1lXSwgc3RhcnRlZFRlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTdGF0ZShzZXQoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNwZWNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdF8yLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkZXNjcmliZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXSwgZmxhdE1hcChkZXNjcmliZVBhdGgsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbbmFtZSwgXCJkZXNjcmliZXNcIl07IH0pLCB0cnVlKSwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZXNjcmliZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRlc3RzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdF8yLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLCBmYWxzZSksIHN0YXJ0ZWRUZXN0KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXZlbnQgPT09IFwidGVzdF9lbmRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdF8zID0gZGF0YS50ZXN0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2QgPSBzcGxpdFRhaWwodGVzdF8zLmJsb2NrcyksIGRlc2NyaWJlUGF0aCA9IF9kWzBdLCBjdXJyZW50RGVzY3JpYmUgPSBfZFsxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZGVkVGVzdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGVzdF8zLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogdGVzdF8zLmVycm9ycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0ZXN0XzMuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0ZXN0XzMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrczogdGVzdF8zLmJsb2NrcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHRlc3RfMy5wYXRoLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudERlc2NyaWJlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTdGF0ZShzZXQoW1wic3BlY3NcIiwgdGVzdF8zLnBhdGgsIFwidGVzdHNcIiwgdGVzdF8zLm5hbWVdLCBlbmRlZFRlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTdGF0ZShzZXQoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNwZWNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdF8zLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkZXNjcmliZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXSwgZmxhdE1hcChkZXNjcmliZVBhdGgsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbbmFtZSwgXCJkZXNjcmliZXNcIl07IH0pLCB0cnVlKSwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZXNjcmliZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRlc3RzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdF8zLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLCBmYWxzZSksIGVuZGVkVGVzdCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICAgIH0sIFtzdGF0ZS5zdWl0ZU9ubHksIHN0YXRlLndhdGNoTW9kZSwgc2FuZHBhY2suYWN0aXZlRmlsZV0pO1xuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiB3YXRjaE1vZGUoKSB7XG4gICAgICAgIHZhciB1bnN1bnNjcmliZSA9IGxpc3RlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gX2EudHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcImRvbmVcIiAmJiBzdGF0ZS53YXRjaE1vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTcGVjT3Blbikge1xuICAgICAgICAgICAgICAgICAgICBydW5TcGVjKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBydW5BbGxUZXN0cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1bnN1bnNjcmliZTtcbiAgICB9LCBbcnVuU3BlYywgcnVuQWxsVGVzdHMsIHN0YXRlLndhdGNoTW9kZSwgaXNTcGVjT3Blbl0pO1xuICAgIHZhciBvcGVuU3BlYyA9IGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgIHNhbmRwYWNrLnNldEFjdGl2ZUZpbGUoZmlsZSk7XG4gICAgfTtcbiAgICB2YXIgc3BlY3MgPSBPYmplY3QudmFsdWVzKHN0YXRlLnNwZWNzKTtcbiAgICB2YXIgZHVyYXRpb24gPSBnZXREdXJhdGlvbihzcGVjcyk7XG4gICAgdmFyIHRlc3RSZXN1bHRzID0gZ2V0QWxsVGVzdFJlc3VsdHMoc3BlY3MpO1xuICAgIHZhciBzdWl0ZVJlc3VsdHMgPSBnZXRBbGxTdWl0ZVJlc3VsdHMoc3BlY3MpO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHJldHVybiAoanN4cyhTYW5kcGFja1N0YWNrLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRlc3RzXCIsIFtjbGFzc05hbWVdKSwgc3R5bGU6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBzZXRUZXN0VGhlbWUodGhlbWUudGhlbWVNb2RlID09PSBcImRhcmtcIikpLCBzdHlsZSkgfSwgcHJvcHMsIHsgY2hpbGRyZW46IFtqc3goXCJpZnJhbWVcIiwgeyByZWY6IGlmcmFtZSwgc3R5bGU6IHsgZGlzcGxheTogXCJub25lXCIgfSwgdGl0bGU6IFwiU2FuZHBhY2sgVGVzdHNcIiB9KSwganN4KEhlYWRlciQxLCB7IGhpZGVUZXN0c0FuZFN1cHJlc3NMb2dzOiBoaWRlVGVzdHNBbmRTdXByZXNzTG9ncywgc2V0U3VpdGVPbmx5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTdGF0ZShmdW5jdGlvbiAocykgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBzKSwgeyBzdWl0ZU9ubHk6ICFzLnN1aXRlT25seSB9KSk7IH0pO1xuICAgICAgICAgICAgICAgIH0sIHNldFZlcmJvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFN0YXRlKGZ1bmN0aW9uIChzKSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHMpLCB7IHZlcmJvc2U6ICFzLnZlcmJvc2UgfSkpOyB9KTtcbiAgICAgICAgICAgICAgICB9LCBzZXRXYXRjaE1vZGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcyksIHsgd2F0Y2hNb2RlOiAhcy53YXRjaE1vZGUgfSkpOyB9KTtcbiAgICAgICAgICAgICAgICB9LCBzaG93U3VpdGVzT25seTogc3RhdGUuc3BlY3NDb3VudCA+IDEsIHNob3dWZXJib3NlQnV0dG9uOiBzaG93VmVyYm9zZUJ1dHRvbiwgc2hvd1dhdGNoQnV0dG9uOiBzaG93V2F0Y2hCdXR0b24sIHN0YXR1czogc3RhdGUuc3RhdHVzLCBzdWl0ZU9ubHk6IHN0YXRlLnN1aXRlT25seSwgdmVyYm9zZTogc3RhdGUudmVyYm9zZSwgd2F0Y2hNb2RlOiBzdGF0ZS53YXRjaE1vZGUgfSksIHN0YXRlLnN0YXR1cyA9PT0gXCJydW5uaW5nXCIgfHwgc3RhdGUuc3RhdHVzID09PSBcImluaXRpYWxpc2luZ1wiID8gKGpzeChMb2FkaW5nLCB7IHNob3dPcGVuSW5Db2RlU2FuZGJveDogZmFsc2UgfSkpIDogKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHByZXZpZXdBY3Rpb25zQ2xhc3NOYW1lLnRvU3RyaW5nKCksIGNoaWxkcmVuOiBbYWN0aW9uc0NoaWxkcmVuLCBqc3goUnVuQnV0dG9uLCB7IG9uQ2xpY2s6IHN0YXRlLnN1aXRlT25seSA/IHJ1blNwZWMgOiBydW5BbGxUZXN0cyB9KV0gfSkpLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNvbnRhaW5lckNsYXNzTmFtZS50b1N0cmluZygpLCBjaGlsZHJlbjogc3BlY3MubGVuZ3RoID09PSAwICYmIHN0YXRlLnN0YXR1cyA9PT0gXCJjb21wbGV0ZVwiID8gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGZpbGVFcnJvckNvbnRhaW5lckNsYXNzTmFtZS50b1N0cmluZygpLCBjaGlsZHJlbjogW2pzeChcInBcIiwgeyBjaGlsZHJlbjogXCJObyB0ZXN0IGZpbGVzIGZvdW5kLlwiIH0pLCBqc3hzKFwicFwiLCB7IGNoaWxkcmVuOiBbXCJUZXN0IG1hdGNoOlwiLCBcIiBcIiwganN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogZmFpbFRleHRDbGFzc05hbWUudG9TdHJpbmcoKSwgY2hpbGRyZW46IHRlc3RGaWxlUmVnZXgudG9TdHJpbmcoKSB9KV0gfSldIH0pKSA6IChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbanN4KFNwZWNzLCB7IGhpZGVUZXN0c0FuZFN1cHJlc3NMb2dzOiBoaWRlVGVzdHNBbmRTdXByZXNzTG9ncywgb3BlblNwZWM6IG9wZW5TcGVjLCBzcGVjczogc3BlY3MsIHN0YXR1czogc3RhdGUuc3RhdHVzLCB2ZXJib3NlOiBzdGF0ZS52ZXJib3NlIH0pLCBzdGF0ZS5zdGF0dXMgPT09IFwiY29tcGxldGVcIiAmJiB0ZXN0UmVzdWx0cy50b3RhbCA+IDAgJiYgKGpzeChTdW1tYXJ5LCB7IGR1cmF0aW9uOiBkdXJhdGlvbiwgc3VpdGVzOiBzdWl0ZVJlc3VsdHMsIHRlc3RzOiB0ZXN0UmVzdWx0cyB9KSldIH0pKSB9KV0gfSkpKTtcbn07XG52YXIgY29udGFpbmVyQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBwYWRkaW5nOiBcIiRzcGFjZSQ0XCIsXG4gICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICBvdmVyZmxvdzogXCJhdXRvXCIsXG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgIGZvbnRGYW1pbHk6IFwiJGZvbnQkbW9ub1wiLFxufSk7XG52YXIgZmlsZUVycm9yQ29udGFpbmVyQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBmb250V2VpZ2h0OiBcImJvbGRcIixcbiAgICBjb2xvcjogXCIkY29sb3JzJGJhc2VcIixcbn0pO1xuXG52YXIgU1lOVEFYX0VSUk9SX1BBVFRFUk4gPSBbXCJTeW50YXhFcnJvcjogXCIsIFwiRXJyb3IgaW4gc2FuZGJveDpcIl07XG52YXIgQ0xFQVJfTE9HID0ge1xuICAgIGlkOiBcInJhbmRvbVwiLFxuICAgIG1ldGhvZDogXCJjbGVhclwiLFxuICAgIGRhdGE6IFtcIkNvbnNvbGUgd2FzIGNsZWFyZWRcIl0sXG59O1xudmFyIFRSQU5TRk9STUVEX1RZUEVfS0VZID0gXCJAdFwiO1xudmFyIFRSQU5TRk9STUVEX1RZUEVfS0VZX0FMVEVSTkFURSA9IFwiI0B0XCI7XG52YXIgQ0lSQ1VMQVJfUkVGX0tFWSA9IFwiQHJcIjtcbnZhciBNQVhfTEVOR1RIX1NUUklORyA9IDEwMDAwO1xudmFyIE1BWF9ORVNUX0xFVkVMID0gMjtcbnZhciBNQVhfS0VZUyA9IDQwMDtcbnZhciBNQVhfTUVTU0FHRV9DT1VOVCA9IE1BWF9LRVlTICogMjtcblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb24gKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1mdW5jdGlvbi1yZXR1cm4tdHlwZSAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuLy8gQ29uc3RcbnZhciBHTE9CQUwgPSAoZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xuICAgIC8vIE5PVEU6IHNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wL2luZGV4Lmh0bWwjc2VjLXBlcmZvcm1ldmFsIHN0ZXAgMTBcbiAgICB2YXIgc2F2ZWRFdmFsID0gZXZhbDtcbiAgICByZXR1cm4gc2F2ZWRFdmFsKFwidGhpc1wiKTtcbn0pKCk7XG52YXIgQVJSQVlfQlVGRkVSX1NVUFBPUlRFRCA9IHR5cGVvZiBBcnJheUJ1ZmZlciA9PT0gXCJmdW5jdGlvblwiO1xudmFyIE1BUF9TVVBQT1JURUQgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCI7XG52YXIgU0VUX1NVUFBPUlRFRCA9IHR5cGVvZiBTZXQgPT09IFwiZnVuY3Rpb25cIjtcbnZhciBBcml0aG1ldGljO1xuKGZ1bmN0aW9uIChBcml0aG1ldGljKSB7XG4gICAgQXJpdGhtZXRpY1tBcml0aG1ldGljW1wiaW5maW5pdHlcIl0gPSAwXSA9IFwiaW5maW5pdHlcIjtcbiAgICBBcml0aG1ldGljW0FyaXRobWV0aWNbXCJtaW51c0luZmluaXR5XCJdID0gMV0gPSBcIm1pbnVzSW5maW5pdHlcIjtcbiAgICBBcml0aG1ldGljW0FyaXRobWV0aWNbXCJtaW51c1plcm9cIl0gPSAyXSA9IFwibWludXNaZXJvXCI7XG59KShBcml0aG1ldGljIHx8IChBcml0aG1ldGljID0ge30pKTtcbnZhciB0cmFuc2Zvcm1lcnMgPSB7XG4gICAgQXJpdGhtZXRpYzogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEgPT09IEFyaXRobWV0aWMuaW5maW5pdHkpXG4gICAgICAgICAgICByZXR1cm4gSW5maW5pdHk7XG4gICAgICAgIGlmIChkYXRhID09PSBBcml0aG1ldGljLm1pbnVzSW5maW5pdHkpXG4gICAgICAgICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgICAgICBpZiAoZGF0YSA9PT0gQXJpdGhtZXRpYy5taW51c1plcm8pXG4gICAgICAgICAgICByZXR1cm4gLTA7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgSFRNTEVsZW1lbnQ6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBzYW5kYm94ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwic2FuZGJveFwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2FuZGJveC5jcmVhdGVFbGVtZW50KGRhdGEudGFnTmFtZSk7XG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGRhdGEuaW5uZXJIVE1MO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGRhdGEuYXR0cmlidXRlcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIGRhdGEuYXR0cmlidXRlc1thdHRyaWJ1dGVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBGdW5jdGlvbjogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHRlbXBGdW4gPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0ZW1wRnVuLCBcInRvU3RyaW5nXCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBcImZ1bmN0aW9uIFwiLmNvbmNhdChkYXRhLm5hbWUsIFwiKCkge1wiKS5jb25jYXQoZGF0YS5ib2R5LCBcIn1cIik7IH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGVtcEZ1bjtcbiAgICB9LFxuICAgIFwiW1tOYU5dXVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgfSxcbiAgICBcIltbdW5kZWZpbmVkXV1cIjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH0sXG4gICAgXCJbW0RhdGVdXVwiOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgZGF0ZS5zZXRUaW1lKHZhbCk7XG4gICAgICAgIHJldHVybiBkYXRlO1xuICAgIH0sXG4gICAgXCJbW1JlZ0V4cF1dXCI6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAodmFsLnNyYywgdmFsLmZsYWdzKTtcbiAgICB9LFxuICAgIFwiW1tFcnJvcl1dXCI6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgdmFyIEN0b3IgPSBHTE9CQUxbdmFsLm5hbWVdIHx8IEVycm9yO1xuICAgICAgICB2YXIgZXJyID0gbmV3IEN0b3IodmFsLm1lc3NhZ2UpO1xuICAgICAgICBlcnIuc3RhY2sgPSB2YWwuc3RhY2s7XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgfSxcbiAgICBcIltbQXJyYXlCdWZmZXJdXVwiOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmIChBUlJBWV9CVUZGRVJfU1VQUE9SVEVEKSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHZhbC5sZW5ndGgpO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgSW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgICB2aWV3LnNldCh2YWwpO1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG4gICAgXCJbW1R5cGVkQXJyYXldXVwiOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgR0xPQkFMW3ZhbC5jdG9yTmFtZV0gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBuZXcgR0xPQkFMW3ZhbC5jdG9yTmFtZV0odmFsLmFycilcbiAgICAgICAgICAgIDogdmFsLmFycjtcbiAgICB9LFxuICAgIFwiW1tNYXBdXVwiOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmIChNQVBfU1VQUE9SVEVEKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBuZXcgTWFwKGl0ZXJhYmxlKSBpcyBub3Qgc3VwcG9ydGVkIGJ5IGFsbCBicm93c2Vyc1xuICAgICAgICAgICAgdmFyIG1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSArPSAyKVxuICAgICAgICAgICAgICAgIG1hcC5zZXQodmFsW2ldLCB2YWxbaSArIDFdKTtcbiAgICAgICAgICAgIHJldHVybiBtYXA7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGt2QXJyID0gW107XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWwubGVuZ3RoOyBqICs9IDIpXG4gICAgICAgICAgICBrdkFyci5wdXNoKFt2YWxbaV0sIHZhbFtpICsgMV1dKTtcbiAgICAgICAgcmV0dXJuIGt2QXJyO1xuICAgIH0sXG4gICAgXCJbW1NldF1dXCI6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgaWYgKFNFVF9TVVBQT1JURUQpIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IG5ldyBTZXQoaXRlcmFibGUpIGlzIG5vdCBzdXBwb3J0ZWQgYnkgYWxsIGJyb3dzZXJzXG4gICAgICAgICAgICB2YXIgc2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgc2V0LmFkZCh2YWxbaV0pO1xuICAgICAgICAgICAgcmV0dXJuIHNldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvYXJyYXktdHlwZSAqL1xudmFyIGZvcm1hdFN5bWJvbHMgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBfYTtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgdHlwZW9mIG1lc3NhZ2UgPT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgbWVzc2FnZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5tYXAoZm9ybWF0U3ltYm9scyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09IFwib2JqZWN0XCIgJiYgVFJBTlNGT1JNRURfVFlQRV9LRVkgaW4gbWVzc2FnZSkge1xuICAgICAgICB2YXIgdHlwZSA9IG1lc3NhZ2VbVFJBTlNGT1JNRURfVFlQRV9LRVldO1xuICAgICAgICB2YXIgdHJhbnNmb3JtID0gdHJhbnNmb3JtZXJzW3R5cGVdO1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtKG1lc3NhZ2UuZGF0YSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgVFJBTlNGT1JNRURfVFlQRV9LRVlfQUxURVJOQVRFIGluIG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBtZXNzYWdlW1RSQU5TRk9STUVEX1RZUEVfS0VZX0FMVEVSTkFURV07XG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1lcnNbdHlwZV07XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0obWVzc2FnZS5kYXRhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAoKF9hID0gbWVzc2FnZS5jb25zdHJ1Y3RvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5hbWUpID09PSBcIk5vZGVMaXN0XCIpIHtcbiAgICAgICAgdmFyIE5vZGVMaXN0XzEgPSB7fTtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobWVzc2FnZSkuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBfYVswXSwgdmFsdWUgPSBfYVsxXTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIE5vZGVMaXN0XzFba2V5XSA9IGZvcm1hdFN5bWJvbHModmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE5vZGVMaXN0XzE7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xufTtcbnZhciBhcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKG91dHB1dCwgcmVmZXJlbmNlcywgbGV2ZWwpIHtcbiAgICB2YXIgbWVyZ2VBcnJheSA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyciwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KGFjYykuY29uY2F0KGluZGV4ID8gXCIsIFwiIDogXCJcIikuY29uY2F0KGZyb21Db25zb2xlVG9TdHJpbmcoY3VyciwgcmVmZXJlbmNlcywgbGV2ZWwpKTtcbiAgICB9LCBcIlwiKTtcbiAgICByZXR1cm4gXCJbXCIuY29uY2F0KG1lcmdlQXJyYXksIFwiXVwiKTtcbn07XG52YXIgb2JqZWN0VG9TdHJpbmcgPSBmdW5jdGlvbiAob3V0cHV0LCByZWZlcmVuY2VzLCBsZXZlbCkge1xuICAgIHZhciBjb25zdHJ1Y3Rvck5hbWUgPSBvdXRwdXQuY29uc3RydWN0b3IubmFtZSAhPT0gXCJPYmplY3RcIiA/IFwiXCIuY29uY2F0KG91dHB1dC5jb25zdHJ1Y3Rvci5uYW1lLCBcIiBcIikgOiBcIlwiO1xuICAgIGlmIChsZXZlbCA+IE1BWF9ORVNUX0xFVkVMKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvck5hbWU7XG4gICAgfVxuICAgIHZhciBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMob3V0cHV0KTtcbiAgICB2YXIgZm9ybWF0dGVkT2JqZWN0ID0gT2JqZWN0LmVudHJpZXMob3V0cHV0KS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgX2EsIGluZGV4KSB7XG4gICAgICAgIHZhciBrZXkgPSBfYVswXSwgdmFsdWUgPSBfYVsxXTtcbiAgICAgICAgdmFyIGNvbW1hID0gaW5kZXggPT09IDAgPyBcIlwiIDogXCIsIFwiO1xuICAgICAgICB2YXIgYnJlYWtMaW5lID0gZW50cmllcy5sZW5ndGggPiAxMCA/IFwiXFxuICBcIiA6IFwiXCI7XG4gICAgICAgIHZhciBmb3JtYXR0ZWQgPSBmcm9tQ29uc29sZVRvU3RyaW5nKHZhbHVlLCByZWZlcmVuY2VzLCBsZXZlbCk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gTUFYX0tFWVMpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2MgKyBicmVha0xpbmUgKyBcIi4uLlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluZGV4ID4gTUFYX0tFWVMpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYyArIFwiXCIuY29uY2F0KGNvbW1hKS5jb25jYXQoYnJlYWtMaW5lKS5jb25jYXQoa2V5LCBcIjogXCIpICsgZm9ybWF0dGVkO1xuICAgIH0sIFwiXCIpO1xuICAgIHJldHVybiBcIlwiLmNvbmNhdChjb25zdHJ1Y3Rvck5hbWUsIFwieyBcIikuY29uY2F0KGZvcm1hdHRlZE9iamVjdCkuY29uY2F0KGVudHJpZXMubGVuZ3RoID4gMTAgPyBcIlxcblwiIDogXCIgXCIsIFwifVwiKTtcbn07XG52YXIgZnJvbUNvbnNvbGVUb1N0cmluZyA9IGZ1bmN0aW9uIChtZXNzYWdlLCByZWZlcmVuY2VzLCBsZXZlbCkge1xuICAgIHZhciBfYTtcbiAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IDA7IH1cbiAgICB0cnkge1xuICAgICAgICB2YXIgb3V0cHV0XzEgPSBmb3JtYXRTeW1ib2xzKG1lc3NhZ2UpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRfMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheVRvU3RyaW5nKG91dHB1dF8xLCByZWZlcmVuY2VzLCBsZXZlbCArIDEpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIG91dHB1dF8xKSB7XG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXFxcIlwiLmNvbmNhdChvdXRwdXRfMSwgXCJcXFwiXCIpLnNsaWNlKDAsIE1BWF9MRU5HVEhfU1RSSU5HKTtcbiAgICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRfMS50b1N0cmluZygpO1xuICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKG91dHB1dF8xKTtcbiAgICAgICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dF8xIGluc3RhbmNlb2YgUmVnRXhwIHx8XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dF8xIGluc3RhbmNlb2YgRXJyb3IgfHxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0XzEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRfMS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0XzEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dF8xIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dF8xLm91dGVySFRNTC5zbGljZSgwLCBNQVhfTEVOR1RIX1NUUklORyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZW50cmllcyhvdXRwdXRfMSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInt9XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChDSVJDVUxBUl9SRUZfS0VZIGluIG91dHB1dF8xKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+IE1BWF9ORVNUX0xFVkVMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJVbmFibGUgdG8gcHJpbnQgaW5mb3JtYXRpb25cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3TWVzc2FnZSA9IHJlZmVyZW5jZXNbb3V0cHV0XzFbQ0lSQ1VMQVJfUkVGX0tFWV1dO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJvbUNvbnNvbGVUb1N0cmluZyhuZXdNZXNzYWdlLCByZWZlcmVuY2VzLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKChfYSA9IG91dHB1dF8xLmNvbnN0cnVjdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmFtZSkgPT09IFwiTm9kZUxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoXzEgPSBvdXRwdXRfMS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IG5ldyBBcnJheShsZW5ndGhfMSkuZmlsbChudWxsKS5tYXAoZnVuY3Rpb24gKF8sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJvbUNvbnNvbGVUb1N0cmluZyhvdXRwdXRfMVtpbmRleF0sIHJlZmVyZW5jZXMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiTm9kZUxpc3QoXCIuY29uY2F0KG91dHB1dF8xLmxlbmd0aCwgXCIpW1wiKS5jb25jYXQobm9kZXMsIFwiXVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKG91dHB1dF8xLCByZWZlcmVuY2VzLCBsZXZlbCArIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChfYikge1xuICAgICAgICByZXR1cm4gXCJVbmFibGUgdG8gcHJpbnQgaW5mb3JtYXRpb25cIjtcbiAgICB9XG59O1xuXG52YXIgZ2V0VHlwZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgc3dpdGNoIChtZXNzYWdlKSB7XG4gICAgICAgIGNhc2UgXCJ3YXJuXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ3YXJuaW5nXCI7XG4gICAgICAgIGNhc2UgXCJjbGVhclwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiY2xlYXJcIjtcbiAgICAgICAgY2FzZSBcImVycm9yXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xuICAgICAgICBjYXNlIFwibG9nXCI6XG4gICAgICAgIGNhc2UgXCJpbmZvXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJpbmZvXCI7XG4gICAgfVxufTtcblxudmFyIF9hO1xudmFyIENvbnNvbGVMaXN0ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGRhdGEgPSBfYS5kYXRhO1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHJldHVybiAoanN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBkYXRhLm1hcChmdW5jdGlvbiAoX2EsIGxvZ0luZGV4LCByZWZlcmVuY2VzKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IF9hLmRhdGEsIGlkID0gX2EuaWQsIG1ldGhvZCA9IF9hLm1ldGhvZDtcbiAgICAgICAgICAgIGlmICghZGF0YSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChqc3goUmVhY3QuRnJhZ21lbnQsIHsgY2hpbGRyZW46IGRhdGEubWFwKGZ1bmN0aW9uIChtc2csIG1zZ0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZml4UmVmZXJlbmNlcyA9IHJlZmVyZW5jZXMuc2xpY2UobG9nSW5kZXgsIHJlZmVyZW5jZXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiY29uc29sZS1pdGVtXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZUl0ZW1DbGFzc05hbWUoeyB2YXJpYW50OiBnZXRUeXBlKG1ldGhvZCkgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksIGNoaWxkcmVuOiBqc3goQ29kZU1pcnJvciwgeyBjb2RlOiBtZXRob2QgPT09IFwiY2xlYXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBtc2dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZnJvbUNvbnNvbGVUb1N0cmluZyhtc2csIGZpeFJlZmVyZW5jZXMpLCBmaWxlVHlwZTogXCJqc1wiLCBpbml0TW9kZTogXCJ1c2VyLXZpc2libGVcIiwgc2hvd1JlYWRPbmx5OiBmYWxzZSwgcmVhZE9ubHk6IHRydWUsIHdyYXBDb250ZW50OiB0cnVlIH0pIH0sIFwiXCIuY29uY2F0KGlkLCBcIi1cIikuY29uY2F0KG1zZ0luZGV4KSkpO1xuICAgICAgICAgICAgICAgICAgICB9KSB9LCBpZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pIH0pKTtcbn07XG52YXIgY29uc29sZUl0ZW1DbGFzc05hbWUgPSBjc3MoKF9hID0ge1xuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIHBhZGRpbmc6IFwiJHNwYWNlJDMgJHNwYWNlJDJcIixcbiAgICAgICAgZm9udFNpemU6IFwiLjhlbVwiLFxuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICBcIiY6bm90KDpmaXJzdC1jaGlsZCk6YWZ0ZXJcIjoge1xuICAgICAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDEsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiRjb2xvcnMkc3VyZmFjZTNcIixcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVkaXRvciByZXNldFxuICAgICAgICAgKi9cbiAgICAgICAgXCIuc3AtY21cIjoge1xuICAgICAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tZWRpdG9yXCI6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IFwibm9uZVwiLFxuICAgICAgICB9LFxuICAgICAgICBcIi5jbS1jb250ZW50XCI6IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9hW1wiLlwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLXByZS1wbGFjZWhvbGRlclwiKV0gPSB7XG4gICAgICAgIG1hcmdpbjogXCIwICFpbXBvcnRhbnRcIixcbiAgICAgICAgZm9udFNpemU6IFwiMWVtXCIsXG4gICAgfSxcbiAgICBfYS52YXJpYW50cyA9IHtcbiAgICAgICAgdmFyaWFudDoge1xuICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogXCIkY29sb3JzJGVycm9yXCIsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIkY29sb3JzJGVycm9yU3VyZmFjZVwiLFxuICAgICAgICAgICAgICAgIFwiJjpub3QoOmZpcnN0LWNoaWxkKTphZnRlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiJGNvbG9ycyRlcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjA3LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd2FybmluZzoge1xuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiRjb2xvcnMkd2FybmluZ1wiLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiJGNvbG9ycyR3YXJuaW5nU3VyZmFjZVwiLFxuICAgICAgICAgICAgICAgIFwiJjpub3QoOmZpcnN0LWNoaWxkKTphZnRlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiJGNvbG9ycyR3YXJuaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMDcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhcjoge1xuICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogXCJpdGFsaWNcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbmZvOiB7fSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIF9hKSk7XG5cbnZhciB3cmFwcGVyQ2xhc3NOYW1lID0gY3NzKHtcbiAgICBqdXN0aWZ5Q29udGVudDogXCJzcGFjZS1iZXR3ZWVuXCIsXG4gICAgYm9yZGVyQm90dG9tOiBcIjFweCBzb2xpZCAkY29sb3JzJHN1cmZhY2UyXCIsXG4gICAgcGFkZGluZzogXCIwICRzcGFjZSQyXCIsXG4gICAgZm9udEZhbWlseTogXCIkZm9udCRtb25vXCIsXG4gICAgaGVpZ2h0OiBcIiRsYXlvdXQkaGVhZGVySGVpZ2h0XCIsXG4gICAgbWluSGVpZ2h0OiBcIiRsYXlvdXQkaGVhZGVySGVpZ2h0XCIsXG4gICAgb3ZlcmZsb3dYOiBcImF1dG9cIixcbiAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiLFxufSk7XG52YXIgZmxleENsYXNzTmFtZSA9IGNzcyh7XG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgZmxleERpcmVjdGlvbjogXCJyb3dcIixcbiAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgIGdhcDogXCIkc3BhY2UkMlwiLFxufSk7XG52YXIgSGVhZGVyID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGN1cnJlbnRUYWIgPSBfYS5jdXJyZW50VGFiLCBzZXRDdXJyZW50VGFiID0gX2Euc2V0Q3VycmVudFRhYiwgbm9kZSA9IF9hLm5vZGU7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB1c2VDbGFzc05hbWVzKCk7XG4gICAgdmFyIGJ1dHRvbnNDbGFzc05hbWUgPSBjbGFzc05hbWVzKFwiY29uc29sZS1oZWFkZXItYnV0dG9uXCIsIFtcbiAgICAgICAgYnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICByb3VuZGVkQnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICBjc3MoeyBwYWRkaW5nOiBcIiRzcGFjZSQxICRzcGFjZSQzXCIgfSksXG4gICAgXSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiY29uc29sZS1oZWFkZXJcIiwgW1xuICAgICAgICAgICAgd3JhcHBlckNsYXNzTmFtZSxcbiAgICAgICAgICAgIGZsZXhDbGFzc05hbWUsXG4gICAgICAgIF0pLCBjaGlsZHJlbjogW2pzeHMoXCJwXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiY29uc29sZS1oZWFkZXItdGl0bGVcIiwgW1xuICAgICAgICAgICAgICAgICAgICBjc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiRjb2xvcnMkYmFzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiJGZvbnQkc2l6ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiBcIiRzcGFjZSQyXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0pLCBjaGlsZHJlbjogW2pzeChDb25zb2xlSWNvbiwge30pLCBqc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IFwiVGVybWluYWxcIiB9KV0gfSksIG5vZGUgJiYgKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJjb25zb2xlLWhlYWRlci1hY3Rpb25zXCIsIFtmbGV4Q2xhc3NOYW1lXSksIGNoaWxkcmVuOiBbanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBidXR0b25zQ2xhc3NOYW1lLCBcImRhdGEtYWN0aXZlXCI6IGN1cnJlbnRUYWIgPT09IFwic2VydmVyXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldEN1cnJlbnRUYWIoXCJzZXJ2ZXJcIik7IH0sIHR5cGU6IFwiYnV0dG9uXCIsIGNoaWxkcmVuOiBcIlNlcnZlclwiIH0pLCBqc3goXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IGJ1dHRvbnNDbGFzc05hbWUsIFwiZGF0YS1hY3RpdmVcIjogY3VycmVudFRhYiA9PT0gXCJjbGllbnRcIiwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0Q3VycmVudFRhYihcImNsaWVudFwiKTsgfSwgdHlwZTogXCJidXR0b25cIiwgY2hpbGRyZW46IFwiQ2xpZW50XCIgfSldIH0pKV0gfSkpO1xufTtcblxuLyoqXG4gKiBJdCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gY29uc3VtZSB0aGUgbG9ncyBmcm9tIGEgc2FuZHBhY2sgY2xpZW50LlxuICpcbiAqIEBjYXRlZ29yeSBIb29rc1xuICovXG52YXIgdXNlU2FuZHBhY2tDb25zb2xlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGNsaWVudElkID0gX2EuY2xpZW50SWQsIF9iID0gX2EubWF4TWVzc2FnZUNvdW50LCBtYXhNZXNzYWdlQ291bnQgPSBfYiA9PT0gdm9pZCAwID8gTUFYX01FU1NBR0VfQ09VTlQgOiBfYiwgX2MgPSBfYS5zaG93U3ludGF4RXJyb3IsIHNob3dTeW50YXhFcnJvciA9IF9jID09PSB2b2lkIDAgPyBmYWxzZSA6IF9jLCBfZCA9IF9hLnJlc2V0T25QcmV2aWV3UmVzdGFydCwgcmVzZXRPblByZXZpZXdSZXN0YXJ0ID0gX2QgPT09IHZvaWQgMCA/IGZhbHNlIDogX2Q7XG4gICAgdmFyIF9lID0gUmVhY3QudXNlU3RhdGUoW10pLCBsb2dzID0gX2VbMF0sIHNldExvZ3MgPSBfZVsxXTtcbiAgICB2YXIgbGlzdGVuID0gdXNlU2FuZHBhY2soKS5saXN0ZW47XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gbGlzdGVuKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAocmVzZXRPblByZXZpZXdSZXN0YXJ0ICYmIG1lc3NhZ2UudHlwZSA9PT0gXCJzdGFydFwiKSB7XG4gICAgICAgICAgICAgICAgc2V0TG9ncyhbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiY29uc29sZVwiICYmIG1lc3NhZ2UuY29kZXNhbmRib3gpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGF5bG9hZExvZyA9IEFycmF5LmlzQXJyYXkobWVzc2FnZS5sb2cpXG4gICAgICAgICAgICAgICAgICAgID8gbWVzc2FnZS5sb2dcbiAgICAgICAgICAgICAgICAgICAgOiBbbWVzc2FnZS5sb2ddO1xuICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkTG9nLmZpbmQoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBfYS5tZXRob2Q7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2QgPT09IFwiY2xlYXJcIjtcbiAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0TG9ncyhbQ0xFQVJfTE9HXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsb2dzTWVzc2FnZXNfMSA9IHNob3dTeW50YXhFcnJvclxuICAgICAgICAgICAgICAgICAgICA/IHBheWxvYWRMb2dcbiAgICAgICAgICAgICAgICAgICAgOiBwYXlsb2FkTG9nLmZpbHRlcihmdW5jdGlvbiAobWVzc2FnZUl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzV2l0aG91dFN5bnRheEVycm9ycyA9IChfYyA9IChfYiA9IChfYSA9IG1lc3NhZ2VJdGVtID09PSBudWxsIHx8IG1lc3NhZ2VJdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXNzYWdlSXRlbS5kYXRhKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlsdGVyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgZnVuY3Rpb24gKGRhdGFJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhSXRlbSAhPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBTWU5UQVhfRVJST1JfUEFUVEVSTi5maWx0ZXIoZnVuY3Rpb24gKGxvb2tGb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFJdGVtLnN0YXJ0c1dpdGgobG9va0Zvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXMubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VzV2l0aG91dFN5bnRheEVycm9ycy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWxvZ3NNZXNzYWdlc18xKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgc2V0TG9ncyhmdW5jdGlvbiAocHJldikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIHByZXYsIHRydWUpLCBsb2dzTWVzc2FnZXNfMSwgdHJ1ZSkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIHNlbGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCA9PT0gc2VsZi5maW5kSW5kZXgoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuaWQgPT09IHZhbHVlLmlkOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChtZXNzYWdlcy5sZW5ndGggPiBtYXhNZXNzYWdlQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBjbGllbnRJZCk7XG4gICAgICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgICB9LCBbc2hvd1N5bnRheEVycm9yLCBtYXhNZXNzYWdlQ291bnQsIGNsaWVudElkLCByZXNldE9uUHJldmlld1Jlc3RhcnRdKTtcbiAgICByZXR1cm4geyBsb2dzOiBsb2dzLCByZXNldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0TG9ncyhbXSk7IH0gfTtcbn07XG5cbi8qKlxuICogYFNhbmRwYWNrQ29uc29sZWAgaXMgYSBTYW5kcGFjayBkZXZ0b29sIHRoYXQgYWxsb3dzIHByaW50aW5nXG4gKiB0aGUgY29uc29sZSBsb2dzIGZyb20gYSBTYW5kcGFjayBjbGllbnQuIEl0IGlzIGRlc2lnbmVkIHRvIGJlXG4gKiBhIGxpZ2h0IHZlcnNpb24gb2YgYSBicm93c2VyIGNvbnNvbGUsIHdoaWNoIG1lYW5zIHRoYXQgaXQnc1xuICogbGltaXRlZCB0byBhIHNldCBvZiBjb21tb24gdXNlIGNhc2VzIHlvdSBtYXkgZW5jb3VudGVyIHdoZW4gY29kaW5nLlxuICovXG52YXIgU2FuZHBhY2tDb25zb2xlID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX2EsIHJlZikge1xuICAgIHZhciBfYjtcbiAgICB2YXIgX2MgPSBfYS5zaG93SGVhZGVyLCBzaG93SGVhZGVyID0gX2MgPT09IHZvaWQgMCA/IHRydWUgOiBfYywgX2QgPSBfYS5zaG93U3ludGF4RXJyb3IsIHNob3dTeW50YXhFcnJvciA9IF9kID09PSB2b2lkIDAgPyBmYWxzZSA6IF9kLCBtYXhNZXNzYWdlQ291bnQgPSBfYS5tYXhNZXNzYWdlQ291bnQsIG9uTG9nc0NoYW5nZSA9IF9hLm9uTG9nc0NoYW5nZSwgY2xhc3NOYW1lID0gX2EuY2xhc3NOYW1lOyBfYS5zaG93U2V0dXBQcm9ncmVzczsgdmFyIF9mID0gX2Euc2hvd1Jlc2V0Q29uc29sZUJ1dHRvbiwgc2hvd1Jlc2V0Q29uc29sZUJ1dHRvbiA9IF9mID09PSB2b2lkIDAgPyB0cnVlIDogX2YsIF9nID0gX2Euc2hvd1Jlc3RhcnRCdXR0b24sIHNob3dSZXN0YXJ0QnV0dG9uID0gX2cgPT09IHZvaWQgMCA/IHRydWUgOiBfZywgX2ggPSBfYS5yZXNldE9uUHJldmlld1Jlc3RhcnQsIHJlc2V0T25QcmV2aWV3UmVzdGFydCA9IF9oID09PSB2b2lkIDAgPyBmYWxzZSA6IF9oLCBfaiA9IF9hLmFjdGlvbnNDaGlsZHJlbiwgYWN0aW9uc0NoaWxkcmVuID0gX2ogPT09IHZvaWQgMCA/IGpzeChGcmFnbWVudCwge30pIDogX2osIF9rID0gX2Euc3RhbmRhbG9uZSwgc3RhbmRhbG9uZSA9IF9rID09PSB2b2lkIDAgPyBmYWxzZSA6IF9rLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wic2hvd0hlYWRlclwiLCBcInNob3dTeW50YXhFcnJvclwiLCBcIm1heE1lc3NhZ2VDb3VudFwiLCBcIm9uTG9nc0NoYW5nZVwiLCBcImNsYXNzTmFtZVwiLCBcInNob3dTZXR1cFByb2dyZXNzXCIsIFwic2hvd1Jlc2V0Q29uc29sZUJ1dHRvblwiLCBcInNob3dSZXN0YXJ0QnV0dG9uXCIsIFwicmVzZXRPblByZXZpZXdSZXN0YXJ0XCIsIFwiYWN0aW9uc0NoaWxkcmVuXCIsIFwic3RhbmRhbG9uZVwiXSk7XG4gICAgdmFyIGVudmlyb25tZW50ID0gdXNlU2FuZHBhY2soKS5zYW5kcGFjay5lbnZpcm9ubWVudDtcbiAgICB2YXIgX2wgPSB1c2VTYW5kcGFja0NsaWVudCgpLCBpZnJhbWUgPSBfbC5pZnJhbWUsIGludGVybmFsQ2xpZW50SWQgPSBfbC5jbGllbnRJZDtcbiAgICB2YXIgcmVzdGFydCA9IHVzZVNhbmRwYWNrU2hlbGwoKS5yZXN0YXJ0O1xuICAgIHZhciBfbSA9IFJlYWN0LnVzZVN0YXRlKGVudmlyb25tZW50ID09PSBcIm5vZGVcIiA/IFwic2VydmVyXCIgOiBcImNsaWVudFwiKSwgY3VycmVudFRhYiA9IF9tWzBdLCBzZXRDdXJyZW50VGFiID0gX21bMV07XG4gICAgdmFyIGNsaWVudElkID0gc3RhbmRhbG9uZSA/IGludGVybmFsQ2xpZW50SWQgOiB1bmRlZmluZWQ7XG4gICAgdmFyIF9vID0gdXNlU2FuZHBhY2tDb25zb2xlKHtcbiAgICAgICAgbWF4TWVzc2FnZUNvdW50OiBtYXhNZXNzYWdlQ291bnQsXG4gICAgICAgIHNob3dTeW50YXhFcnJvcjogc2hvd1N5bnRheEVycm9yLFxuICAgICAgICByZXNldE9uUHJldmlld1Jlc3RhcnQ6IHJlc2V0T25QcmV2aWV3UmVzdGFydCxcbiAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgIH0pLCBjb25zb2xlRGF0YSA9IF9vLmxvZ3MsIHJlc2V0Q29uc29sZSA9IF9vLnJlc2V0O1xuICAgIHZhciBfcCA9IHVzZVNhbmRwYWNrU2hlbGxTdGRvdXQoe1xuICAgICAgICBtYXhNZXNzYWdlQ291bnQ6IG1heE1lc3NhZ2VDb3VudCxcbiAgICAgICAgcmVzZXRPblByZXZpZXdSZXN0YXJ0OiByZXNldE9uUHJldmlld1Jlc3RhcnQsXG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICB9KSwgc3Rkb3V0RGF0YSA9IF9wLmxvZ3MsIHJlc2V0U3Rkb3V0ID0gX3AucmVzZXQ7XG4gICAgdmFyIHdyYXBwZXJSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25Mb2dzQ2hhbmdlID09PSBudWxsIHx8IG9uTG9nc0NoYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25Mb2dzQ2hhbmdlKGNvbnNvbGVEYXRhKTtcbiAgICAgICAgaWYgKHdyYXBwZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgd3JhcHBlclJlZi5jdXJyZW50LnNjcm9sbFRvcCA9IHdyYXBwZXJSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9LCBbb25Mb2dzQ2hhbmdlLCBjb25zb2xlRGF0YSwgc3Rkb3V0RGF0YSwgY3VycmVudFRhYl0pO1xuICAgIHZhciBpc1NlcnZlclRhYiA9IGN1cnJlbnRUYWIgPT09IFwic2VydmVyXCI7XG4gICAgdmFyIGlzTm9kZUVudmlyb25tZW50ID0gZW52aXJvbm1lbnQgPT09IFwibm9kZVwiO1xuICAgIFJlYWN0LnVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgICAgICByZXNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzZXRDb25zb2xlKCk7XG4gICAgICAgICAgICByZXNldFN0ZG91dCgpO1xuICAgICAgICB9LFxuICAgIH0pOyB9KTtcbiAgICB2YXIgY2xhc3NOYW1lcyA9IHVzZUNsYXNzTmFtZXMoKTtcbiAgICByZXR1cm4gKGpzeHMoU2FuZHBhY2tTdGFjaywgX19hc3NpZ24oeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJjb25zb2xlXCIsIFtcbiAgICAgICAgICAgIGNzcygoX2IgPSB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiJHN1cmZhY2UxXCIsXG4gICAgICAgICAgICAgICAgICAgIGlmcmFtZTogeyBkaXNwbGF5OiBcIm5vbmVcIiB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfYltcIi5cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1icmlkZ2UtZnJhbWVcIildID0ge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcImJsb2NrXCIsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogXCIkc3BhY2UkMlwiLFxuICAgICAgICAgICAgICAgICAgICBib3R0b206IFwiJHNwYWNlJDJcIixcbiAgICAgICAgICAgICAgICAgICAgekluZGV4OiBcIiR0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMixcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMzAlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1peEJsZW5kTW9kZTogXCJtdWx0aXBseVwiLFxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9iKSksXG4gICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgIF0pIH0sIHByb3BzLCB7IGNoaWxkcmVuOiBbc2hvd0hlYWRlciAmJiBpc05vZGVFbnZpcm9ubWVudCAmJiAoanN4KEhlYWRlciwgeyBjdXJyZW50VGFiOiBjdXJyZW50VGFiLCBub2RlOiBpc05vZGVFbnZpcm9ubWVudCwgc2V0Q3VycmVudFRhYjogc2V0Q3VycmVudFRhYiB9KSksIGpzeChcImRpdlwiLCB7IHJlZjogd3JhcHBlclJlZiwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiY29uc29sZS1saXN0XCIsIFtcbiAgICAgICAgICAgICAgICAgICAgY3NzKHsgb3ZlcmZsb3c6IFwiYXV0b1wiLCBzY3JvbGxCZWhhdmlvcjogXCJzbW9vdGhcIiB9KSxcbiAgICAgICAgICAgICAgICBdKSwgY2hpbGRyZW46IGlzU2VydmVyVGFiID8gKGpzeChTdGRvdXRMaXN0LCB7IGRhdGE6IHN0ZG91dERhdGEgfSkpIDogKGpzeChDb25zb2xlTGlzdCwgeyBkYXRhOiBjb25zb2xlRGF0YSB9KSkgfSksIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJjb25zb2xlLWFjdGlvbnNcIiwgW1xuICAgICAgICAgICAgICAgICAgICBjc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogXCIkc3BhY2UkMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IFwiJHNwYWNlJDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiBcIiRzcGFjZSQyXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0pLCBjaGlsZHJlbjogW2FjdGlvbnNDaGlsZHJlbiwgc2hvd1Jlc3RhcnRCdXR0b24gJiYgaXNTZXJ2ZXJUYWIgJiYgKGpzeChSb3VuZGVkQnV0dG9uLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDb25zb2xlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRTdGRvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNoaWxkcmVuOiBqc3goUmVzdGFydEljb24sIHt9KSB9KSksIHNob3dSZXNldENvbnNvbGVCdXR0b24gJiYgKGpzeChSb3VuZGVkQnV0dG9uLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRhYiA9PT0gXCJjbGllbnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldENvbnNvbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0U3Rkb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgY2hpbGRyZW46IGpzeChDbGVhbkljb24sIHt9KSB9KSldIH0pLCBzdGFuZGFsb25lICYmIChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbanN4KERlcGVuZGVuY2llc1Byb2dyZXNzLCB7IGNsaWVudElkOiBjbGllbnRJZCB9KSwganN4KFwiaWZyYW1lXCIsIHsgcmVmOiBpZnJhbWUgfSldIH0pKV0gfSkpKTtcbn0pO1xuXG52YXIgU2FuZHBhY2sgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qO1xuICAgIHZhciBvcHRpb25zID0gX2Eub3B0aW9ucywgdGVtcGxhdGUgPSBfYS50ZW1wbGF0ZSwgY3VzdG9tU2V0dXAgPSBfYS5jdXN0b21TZXR1cCwgZmlsZXMgPSBfYS5maWxlcywgdGhlbWUgPSBfYS50aGVtZSwgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcIm9wdGlvbnNcIiwgXCJ0ZW1wbGF0ZVwiLCBcImN1c3RvbVNldHVwXCIsIFwiZmlsZXNcIiwgXCJ0aGVtZVwiXSk7XG4gICAgb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDogKG9wdGlvbnMgPSB7fSk7XG4gICAgKF9iID0gb3B0aW9ucy5yZXNpemFibGVQYW5lbHMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IChvcHRpb25zLnJlc2l6YWJsZVBhbmVscyA9IHRydWUpO1xuICAgIChfYyA9IG9wdGlvbnMuZWRpdG9yV2lkdGhQZXJjZW50YWdlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAob3B0aW9ucy5lZGl0b3JXaWR0aFBlcmNlbnRhZ2UgPSA1MCk7XG4gICAgKF9kID0gb3B0aW9ucy5zaG93Q29uc29sZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogKG9wdGlvbnMuc2hvd0NvbnNvbGUgPSBmYWxzZSk7XG4gICAgdmFyIHJ0bExheW91dCA9IChfZSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ydGwpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IGZhbHNlO1xuICAgIHZhciBjb2RlRWRpdG9yT3B0aW9ucyA9IHtcbiAgICAgICAgc2hvd1RhYnM6IG9wdGlvbnMuc2hvd1RhYnMsXG4gICAgICAgIHNob3dMaW5lTnVtYmVyczogb3B0aW9ucy5zaG93TGluZU51bWJlcnMsXG4gICAgICAgIHNob3dJbmxpbmVFcnJvcnM6IG9wdGlvbnMuc2hvd0lubGluZUVycm9ycyxcbiAgICAgICAgd3JhcENvbnRlbnQ6IG9wdGlvbnMud3JhcENvbnRlbnQsXG4gICAgICAgIGNsb3NhYmxlVGFiczogb3B0aW9ucy5jbG9zYWJsZVRhYnMsXG4gICAgICAgIGluaXRNb2RlOiBvcHRpb25zLmluaXRNb2RlLFxuICAgICAgICBleHRlbnNpb25zOiAoX2YgPSBvcHRpb25zLmNvZGVFZGl0b3IpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5leHRlbnNpb25zLFxuICAgICAgICBleHRlbnNpb25zS2V5bWFwOiAoX2cgPSBvcHRpb25zLmNvZGVFZGl0b3IpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5leHRlbnNpb25zS2V5bWFwLFxuICAgICAgICByZWFkT25seTogb3B0aW9ucy5yZWFkT25seSxcbiAgICAgICAgc2hvd1JlYWRPbmx5OiBvcHRpb25zLnNob3dSZWFkT25seSxcbiAgICAgICAgYWRkaXRpb25hbExhbmd1YWdlczogKF9oID0gb3B0aW9ucy5jb2RlRWRpdG9yKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guYWRkaXRpb25hbExhbmd1YWdlcyxcbiAgICB9O1xuICAgIHZhciBwcm92aWRlck9wdGlvbnMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUUy13aHk6IFR5cGUgJ3N0cmluZyB8IG51bWJlciB8IHN5bWJvbCcgaXMgbm90IGFzc2lnbmFibGUgdG8gdHlwZSAnc3RyaW5nJ1xuICAgICAgICAgKi9cbiAgICAgICAgYWN0aXZlRmlsZTogb3B0aW9ucy5hY3RpdmVGaWxlLFxuICAgICAgICB2aXNpYmxlRmlsZXM6IG9wdGlvbnMudmlzaWJsZUZpbGVzLFxuICAgICAgICByZWNvbXBpbGVNb2RlOiBvcHRpb25zLnJlY29tcGlsZU1vZGUsXG4gICAgICAgIHJlY29tcGlsZURlbGF5OiBvcHRpb25zLnJlY29tcGlsZURlbGF5LFxuICAgICAgICBhdXRvcnVuOiBvcHRpb25zLmF1dG9ydW4sXG4gICAgICAgIGF1dG9SZWxvYWQ6IG9wdGlvbnMuYXV0b1JlbG9hZCxcbiAgICAgICAgYnVuZGxlclVSTDogb3B0aW9ucy5idW5kbGVyVVJMLFxuICAgICAgICBzdGFydFJvdXRlOiBvcHRpb25zLnN0YXJ0Um91dGUsXG4gICAgICAgIHNraXBFdmFsOiBvcHRpb25zLnNraXBFdmFsLFxuICAgICAgICBmaWxlUmVzb2x2ZXI6IG9wdGlvbnMuZmlsZVJlc29sdmVyLFxuICAgICAgICBpbml0TW9kZTogb3B0aW9ucy5pbml0TW9kZSxcbiAgICAgICAgaW5pdE1vZGVPYnNlcnZlck9wdGlvbnM6IG9wdGlvbnMuaW5pdE1vZGVPYnNlcnZlck9wdGlvbnMsXG4gICAgICAgIGV4dGVybmFsUmVzb3VyY2VzOiBvcHRpb25zLmV4dGVybmFsUmVzb3VyY2VzLFxuICAgICAgICBsb2dMZXZlbDogb3B0aW9ucy5sb2dMZXZlbCxcbiAgICAgICAgY2xhc3Nlczogb3B0aW9ucy5jbGFzc2VzLFxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29uc29sZVxuICAgICAqL1xuICAgIHZhciBfayA9IFJlYWN0LnVzZVN0YXRlKG9wdGlvbnMuc2hvd0NvbnNvbGUpLCBjb25zb2xlVmlzaWJpbGl0eSA9IF9rWzBdLCBzZXRDb25zb2xlVmlzaWJpbGl0eSA9IF9rWzFdO1xuICAgIHZhciBfbCA9IFJlYWN0LnVzZVN0YXRlKDApLCBjb3VudGVyID0gX2xbMF0sIHNldENvdW50ZXIgPSBfbFsxXTtcbiAgICB2YXIgaGFzUmlnaHRDb2x1bW4gPSBvcHRpb25zLnNob3dDb25zb2xlIHx8IG9wdGlvbnMuc2hvd0NvbnNvbGVCdXR0b247XG4gICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiAgICB2YXIgdGVtcGxhdGVGaWxlcyA9IChfaiA9IFNBTkRCT1hfVEVNUExBVEVTW3RlbXBsYXRlXSkgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDoge307XG4gICAgdmFyIG1vZGUgPSAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5sYXlvdXQpXG4gICAgICAgID8gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmxheW91dFxuICAgICAgICA6IFwibW9kZVwiIGluIHRlbXBsYXRlRmlsZXNcbiAgICAgICAgICAgID8gdGVtcGxhdGVGaWxlcy5tb2RlXG4gICAgICAgICAgICA6IFwicHJldmlld1wiKTtcbiAgICB2YXIgYWN0aW9uc0NoaWxkcmVuID0gb3B0aW9ucy5zaG93Q29uc29sZUJ1dHRvbiA/IChqc3goQ29uc29sZUNvdW50ZXJCdXR0b24sIHsgY291bnRlcjogY291bnRlciwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0Q29uc29sZVZpc2liaWxpdHkoZnVuY3Rpb24gKHByZXYpIHsgcmV0dXJuICFwcmV2OyB9KTsgfSB9KSkgOiB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogUmVzaXphYmxlXG4gICAgICovXG4gICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuICAgIHZhciBkcmFnRXZlbnRUYXJnZXRSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gICAgdmFyIF9tID0gUmVhY3QudXNlU3RhdGUob3B0aW9ucy5lZGl0b3JXaWR0aFBlcmNlbnRhZ2UpLCBob3Jpem9udGFsU2l6ZSA9IF9tWzBdLCBzZXRIb3Jpem9udGFsU2l6ZSA9IF9tWzFdO1xuICAgIHZhciBfbyA9IFJlYWN0LnVzZVN0YXRlKDcwKSwgdmVydGljYWxTaXplID0gX29bMF0sIHNldFZlcnRpY2FsU2l6ZSA9IF9vWzFdO1xuICAgIHZhciBSaWdodENvbHVtbiA9IGhhc1JpZ2h0Q29sdW1uID8gU2FuZHBhY2tTdGFjayA6IFJlYWN0LkZyYWdtZW50O1xuICAgIHZhciByaWdodENvbHVtblN0eWxlID0ge1xuICAgICAgICBmbGV4R3JvdzogMTAwIC0gaG9yaXpvbnRhbFNpemUsXG4gICAgICAgIGZsZXhTaHJpbms6IDEwMCAtIGhvcml6b250YWxTaXplLFxuICAgICAgICBmbGV4QmFzaXM6IDAsXG4gICAgICAgIHdpZHRoOiAxMDAgLSBob3Jpem9udGFsU2l6ZSArIFwiJVwiLFxuICAgICAgICBnYXA6IGNvbnNvbGVWaXNpYmlsaXR5ID8gMSA6IDAsXG4gICAgICAgIGhlaWdodDogb3B0aW9ucy5lZGl0b3JIZWlnaHQsIC8vIHVzZSB0aGUgb3JpZ2luYWwgZWRpdG9yIGhlaWdodFxuICAgIH07XG4gICAgdmFyIHRvcFJvd1N0eWxlID0gaGFzUmlnaHRDb2x1bW5cbiAgICAgICAgPyB7XG4gICAgICAgICAgICBmbGV4R3JvdzogdmVydGljYWxTaXplLFxuICAgICAgICAgICAgZmxleFNocmluazogdmVydGljYWxTaXplLFxuICAgICAgICAgICAgZmxleEJhc2lzOiAwLFxuICAgICAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgIH1cbiAgICAgICAgOiByaWdodENvbHVtblN0eWxlO1xuICAgIHZhciBvbkRyYWdNb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICghZHJhZ0V2ZW50VGFyZ2V0UmVmLmN1cnJlbnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBjb250YWluZXIgPSBkcmFnRXZlbnRUYXJnZXRSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpZiAoIWNvbnRhaW5lcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRyYWdFdmVudFRhcmdldFJlZi5jdXJyZW50LmRhdGFzZXQuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSBcImhvcml6b250YWxcIjtcbiAgICAgICAgdmFyIF9hID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBsZWZ0ID0gX2EubGVmdCwgdG9wID0gX2EudG9wLCBoZWlnaHQgPSBfYS5oZWlnaHQsIHdpZHRoID0gX2Eud2lkdGg7XG4gICAgICAgIHZhciBvZmZzZXQgPSBpc0hvcml6b250YWxcbiAgICAgICAgICAgID8gKChldmVudC5jbGllbnRYIC0gbGVmdCkgLyB3aWR0aCkgKiAxMDBcbiAgICAgICAgICAgIDogKChldmVudC5jbGllbnRZIC0gdG9wKSAvIGhlaWdodCkgKiAxMDA7XG4gICAgICAgIHZhciBib3VuZGFyaWVzID0gTWF0aC5taW4oTWF0aC5tYXgob2Zmc2V0LCAyNSksIDc1KTtcbiAgICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgc2V0SG9yaXpvbnRhbFNpemUocnRsTGF5b3V0ID8gMTAwIC0gYm91bmRhcmllcyA6IGJvdW5kYXJpZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2V0VmVydGljYWxTaXplKGJvdW5kYXJpZXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiLmNvbmNhdChUSEVNRV9QUkVGSVgsIFwiLXN0YWNrXCIpKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB2YXIgc3RvcERyYWdnaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBjb250YWluZXIgPSAoX2EgPSBkcmFnRXZlbnRUYXJnZXRSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGlmICghY29udGFpbmVyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5cIi5jb25jYXQoVEhFTUVfUFJFRklYLCBcIi1zdGFja1wiKSkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbS5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJcIjtcbiAgICAgICAgfSk7XG4gICAgICAgIGRyYWdFdmVudFRhcmdldFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yZXNpemFibGVQYW5lbHMpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25EcmFnTW92ZSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc3RvcERyYWdnaW5nKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbkRyYWdNb3ZlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc3RvcERyYWdnaW5nKTtcbiAgICAgICAgfTtcbiAgICB9LCBbb3B0aW9uc10pO1xuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgc2V0Q29uc29sZVZpc2liaWxpdHkoKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNob3dDb25zb2xlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSk7XG4gICAgfSwgW29wdGlvbnMuc2hvd0NvbnNvbGVdKTtcbiAgICB2YXIgcmlnaHRDb2x1bW5Qcm9wcyA9IGhhc1JpZ2h0Q29sdW1uXG4gICAgICAgID8geyBjbGFzc05hbWU6IFRIRU1FX1BSRUZJWCArIFwiLXByZXNldC1jb2x1bW5cIiwgc3R5bGU6IHJpZ2h0Q29sdW1uU3R5bGUgfVxuICAgICAgICA6IHt9O1xuICAgIHZhciBjbGFzc05hbWVzID0gdXNlQ2xhc3NOYW1lcygpO1xuICAgIHJldHVybiAoanN4KFNhbmRwYWNrUHJvdmlkZXIsIF9fYXNzaWduKHsgY3VzdG9tU2V0dXA6IGN1c3RvbVNldHVwLCBmaWxlczogZmlsZXMsIG9wdGlvbnM6IHByb3ZpZGVyT3B0aW9ucywgdGVtcGxhdGU6IHRlbXBsYXRlLCB0aGVtZTogdGhlbWUgfSwgcHJvcHMsIHsgY2hpbGRyZW46IGpzeHMoU2FuZHBhY2tMYXlvdXQsIHsgY2xhc3NOYW1lOiBydGxMYXlvdXQgPyBjbGFzc05hbWVzKFwicnRsLWxheW91dFwiLCBbcnRsTGF5b3V0Q2xhc3NOYW1lXSkgOiBcIlwiLCBjaGlsZHJlbjogW2pzeChTYW5kcGFja0NvZGVFZGl0b3IsIF9fYXNzaWduKHt9LCBjb2RlRWRpdG9yT3B0aW9ucywgeyBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBvcHRpb25zLmVkaXRvckhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXhHcm93OiBob3Jpem9udGFsU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXhTaHJpbms6IGhvcml6b250YWxTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxleEJhc2lzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgICAgICAgICAgIH0gfSkpLCBvcHRpb25zLnJlc2l6YWJsZVBhbmVscyAmJiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwicmVzaXplLWhhbmRsZXJcIiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0hhbmRsZXIoeyBkaXJlY3Rpb246IFwiaG9yaXpvbnRhbFwiIH0pLFxuICAgICAgICAgICAgICAgICAgICBdKSwgXCJkYXRhLWRpcmVjdGlvblwiOiBcImhvcml6b250YWxcIiwgb25Nb3VzZURvd246IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0V2ZW50VGFyZ2V0UmVmLmN1cnJlbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBcImNhbGMoXCIuY29uY2F0KHJ0bExheW91dCA/IDEwMCAtIGhvcml6b250YWxTaXplIDogaG9yaXpvbnRhbFNpemUsIFwiJSAtIDVweClcIiksXG4gICAgICAgICAgICAgICAgICAgIH0gfSkpLCBqc3hzKFJpZ2h0Q29sdW1uLCBfX2Fzc2lnbih7fSwgcmlnaHRDb2x1bW5Qcm9wcywgeyBjaGlsZHJlbjogW21vZGUgPT09IFwicHJldmlld1wiICYmIChqc3goU2FuZHBhY2tQcmV2aWV3LCB7IGFjdGlvbnNDaGlsZHJlbjogYWN0aW9uc0NoaWxkcmVuLCBzaG93TmF2aWdhdG9yOiBvcHRpb25zLnNob3dOYXZpZ2F0b3IsIHNob3dSZWZyZXNoQnV0dG9uOiBvcHRpb25zLnNob3dSZWZyZXNoQnV0dG9uLCBzdHlsZTogdG9wUm93U3R5bGUgfSkpLCBtb2RlID09PSBcInRlc3RzXCIgJiYgKGpzeChTYW5kcGFja1Rlc3RzLCB7IGFjdGlvbnNDaGlsZHJlbjogYWN0aW9uc0NoaWxkcmVuLCBzdHlsZTogdG9wUm93U3R5bGUgfSkpLCBtb2RlID09PSBcImNvbnNvbGVcIiAmJiAoanN4KFNhbmRwYWNrQ29uc29sZSwgeyBhY3Rpb25zQ2hpbGRyZW46IGFjdGlvbnNDaGlsZHJlbiwgc3R5bGU6IHRvcFJvd1N0eWxlLCBzdGFuZGFsb25lOiB0cnVlIH0pKSwgKG9wdGlvbnMuc2hvd0NvbnNvbGVCdXR0b24gfHwgY29uc29sZVZpc2liaWxpdHkpICYmIChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbb3B0aW9ucy5yZXNpemFibGVQYW5lbHMgJiYgY29uc29sZVZpc2liaWxpdHkgJiYgKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInJlc2l6ZS1oYW5kbGVyXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnSGFuZGxlcih7IGRpcmVjdGlvbjogXCJ2ZXJ0aWNhbFwiIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksIFwiZGF0YS1kaXJlY3Rpb25cIjogXCJ2ZXJ0aWNhbFwiLCBvbk1vdXNlRG93bjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0V2ZW50VGFyZ2V0UmVmLmN1cnJlbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBzdHlsZTogeyB0b3A6IFwiY2FsYyhcIi5jb25jYXQodmVydGljYWxTaXplLCBcIiUgLSA1cHgpXCIpIH0gfSkpLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJjb25zb2xlLXdyYXBwZXJcIiwgW2NvbnNvbGVXcmFwcGVyXSksIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleEdyb3c6IGNvbnNvbGVWaXNpYmlsaXR5ID8gMTAwIC0gdmVydGljYWxTaXplIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4U2hyaW5rOiBjb25zb2xlVmlzaWJpbGl0eSA/IDEwMCAtIHZlcnRpY2FsU2l6ZSA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleEJhc2lzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgY2hpbGRyZW46IGpzeChTYW5kcGFja0NvbnNvbGUsIHsgb25Mb2dzQ2hhbmdlOiBmdW5jdGlvbiAobG9ncykgeyByZXR1cm4gc2V0Q291bnRlcihsb2dzLmxlbmd0aCk7IH0sIHNob3dIZWFkZXI6IGZhbHNlIH0pIH0pXSB9KSldIH0pKV0gfSkgfSksIHRlbXBsYXRlKSk7XG59O1xudmFyIGRyYWdIYW5kbGVyID0gY3NzKHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIHpJbmRleDogXCIkdG9wXCIsXG4gICAgdmFyaWFudHM6IHtcbiAgICAgICAgZGlyZWN0aW9uOiB7XG4gICAgICAgICAgICB2ZXJ0aWNhbDoge1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMCxcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwibnMtcmVzaXplXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaG9yaXpvbnRhbDoge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwLFxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJldy1yZXNpemVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBcIkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KVwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwibm9uZVwiLFxuICAgIH0sXG59KTtcbnZhciBDb25zb2xlQ291bnRlckJ1dHRvbiA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBvbkNsaWNrID0gX2Eub25DbGljaywgY291bnRlciA9IF9hLmNvdW50ZXI7XG4gICAgcmV0dXJuIChqc3hzKFJvdW5kZWRCdXR0b24sIHsgY2xhc3NOYW1lOiBidXR0b25Db3VudGVyLnRvU3RyaW5nKCksIG9uQ2xpY2s6IG9uQ2xpY2ssIGNoaWxkcmVuOiBbanN4KENvbnNvbGVJY29uLCB7fSksIGNvdW50ZXIgPiAwICYmIGpzeChcInN0cm9uZ1wiLCB7IGNoaWxkcmVuOiBjb3VudGVyIH0pXSB9KSk7XG59O1xudmFyIGJ1dHRvbkNvdW50ZXIgPSBjc3Moe1xuICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgc3Ryb25nOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiJGNvbG9ycyRjbGlja2FibGVcIixcbiAgICAgICAgY29sb3I6IFwiJGNvbG9ycyRzdXJmYWNlMVwiLFxuICAgICAgICBtaW5XaWR0aDogMTIsXG4gICAgICAgIGhlaWdodDogMTIsXG4gICAgICAgIHBhZGRpbmc6IFwiMCAycHhcIixcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAxMixcbiAgICAgICAgZm9udFNpemU6IDgsXG4gICAgICAgIGxpbmVIZWlnaHQ6IFwiMTJweFwiLFxuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICBmb250V2VpZ2h0OiBcIm5vcm1hbFwiLFxuICAgIH0sXG59KTtcbnZhciBjb25zb2xlV3JhcHBlciA9IGNzcyh7XG4gICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxufSk7XG52YXIgcnRsTGF5b3V0Q2xhc3NOYW1lID0gY3NzKHtcbiAgICBmbGV4RGlyZWN0aW9uOiBcInJvdy1yZXZlcnNlXCIsXG4gICAgXCJAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjhweClcIjoge1xuICAgICAgICBmbGV4RmxvdzogXCJ3cmFwLXJldmVyc2UgIWltcG9ydGFudFwiLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImluaXRpYWxcIixcbiAgICB9LFxufSk7XG5cbmV4cG9ydCB7IEFOR1VMQVJfVEVNUExBVEUsIEFTVFJPX1RFTVBMQVRFLCBCYWNrd2FyZEljb24sIENsZWFuSWNvbiwgQ2xvc2VJY29uLCBDb2RlTWlycm9yIGFzIENvZGVFZGl0b3IsIENvbnNvbGVJY29uLCBEZXBlbmRlbmNpZXNQcm9ncmVzcywgRGlyZWN0b3J5SWNvbkNsb3NlZCwgRGlyZWN0b3J5SWNvbk9wZW4sIEVycm9yT3ZlcmxheSwgRXhwb3J0SWNvbiwgRkFERV9BTklNQVRJT05fRFVSQVRJT04sIEZpbGVJY29uLCBGaWxlVGFicywgRm9yd2FyZEljb24sIExvYWRpbmdPdmVybGF5LCBOYXZpZ2F0b3IsIE9wZW5JbkNvZGVTYW5kYm94QnV0dG9uLCBSRUFDVF9URU1QTEFURSwgUkVBQ1RfVFlQRVNDUklQVF9URU1QTEFURSwgUmVmcmVzaEljb24sIFJlc3RhcnRJY29uLCBSb3VuZGVkQnV0dG9uLCBSdW5CdXR0b24kMSBhcyBSdW5CdXR0b24sIFJ1bkljb24sIFNBTkRCT1hfVEVNUExBVEVTLCBTQU5EUEFDS19USEVNRVMsIFNPTElEX1RFTVBMQVRFLCBTVkVMVEVfVEVNUExBVEUsIFNhbmRwYWNrLCBTYW5kcGFja0NvZGVFZGl0b3IsIFNhbmRwYWNrQ29kZVZpZXdlciwgU2FuZHBhY2tDb25zb2xlLCBTYW5kcGFja0NvbnN1bWVyLCBTYW5kcGFja0ZpbGVFeHBsb3JlciwgU2FuZHBhY2tMYXlvdXQsIFNhbmRwYWNrUHJldmlldywgU2FuZHBhY2tQcm92aWRlciwgU2FuZHBhY2skMSBhcyBTYW5kcGFja1JlYWN0Q29udGV4dCwgU2FuZHBhY2tTdGFjaywgU2FuZHBhY2tUZXN0cywgU2FuZHBhY2tUaGVtZUNvbnN1bWVyLCBTYW5kcGFja1RoZW1lQ29udGV4dCwgU2FuZHBhY2tUaGVtZVByb3ZpZGVyLCBTYW5kcGFja1RyYW5zcGlsZWRDb2RlLCBTaWduSW5JY29uLCBTaWduT3V0SWNvbiwgVEVTVF9UWVBFU0NSSVBUX1RFTVBMQVRFLCBVbnN0eWxlZE9wZW5JbkNvZGVTYW5kYm94QnV0dG9uLCBWQU5JTExBX1RFTVBMQVRFLCBWQU5JTExBX1RZUEVTQ1JJUFRfVEVNUExBVEUsIFZVRV9URU1QTEFURSwgZGVmYXVsdERhcmssIGRlZmF1bHRMaWdodCwgZ2V0Q3NzVGV4dCBhcyBnZXRTYW5kcGFja0Nzc1RleHQsIGxheW91dENsYXNzTmFtZSwgc3RhY2tDbGFzc05hbWUsIHRhYkJ1dHRvbiwgdXNlQWN0aXZlQ29kZSwgdXNlQ2xhc3NOYW1lcywgdXNlRXJyb3JNZXNzYWdlLCB1c2VMb2FkaW5nT3ZlcmxheVN0YXRlLCB1c2VTYW5kcGFjaywgdXNlU2FuZHBhY2tDbGllbnQsIHVzZVNhbmRwYWNrQ29uc29sZSwgdXNlU2FuZHBhY2tOYXZpZ2F0aW9uLCB1c2VTYW5kcGFja1ByZXZpZXdQcm9ncmVzcywgdXNlU2FuZHBhY2tTaGVsbCwgdXNlU2FuZHBhY2tTaGVsbFN0ZG91dCwgdXNlU2FuZHBhY2tUaGVtZSwgdXNlVHJhbnNwaWxlZENvZGUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@codesandbox/sandpack-react/dist/index.mjs\n");

/***/ })

};
;