"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_codesandbox_sandpack-client_dist_clients_runtime_index_mjs"],{

/***/ "(app-pages-browser)/./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs ***!
  \**************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S: function() { return /* binding */ SandpackClient; }\n/* harmony export */ });\n/* harmony import */ var dequal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dequal */ \"(app-pages-browser)/./node_modules/dequal/dist/index.mjs\");\n\n\nvar SandpackClient = /** @class */ (function () {\n    function SandpackClient(iframeSelector, sandboxSetup, options) {\n        if (options === void 0) { options = {}; }\n        this.status = \"idle\";\n        this.options = options;\n        this.sandboxSetup = sandboxSetup;\n        this.iframeSelector = iframeSelector;\n    }\n    /**\n     * Clients handles\n     */\n    SandpackClient.prototype.updateOptions = function (options) {\n        if (!(0,dequal__WEBPACK_IMPORTED_MODULE_0__.dequal)(this.options, options)) {\n            this.options = options;\n            this.updateSandbox();\n        }\n    };\n    SandpackClient.prototype.updateSandbox = function (_sandboxSetup, _isInitializationCompile) {\n        if (_sandboxSetup === void 0) { _sandboxSetup = this.sandboxSetup; }\n        throw Error(\"Method not implemented\");\n    };\n    SandpackClient.prototype.destroy = function () {\n        throw Error(\"Method not implemented\");\n    };\n    /**\n     * Bundler communication\n     */\n    SandpackClient.prototype.dispatch = function (_message) {\n        throw Error(\"Method not implemented\");\n    };\n    SandpackClient.prototype.listen = function (_listener) {\n        throw Error(\"Method not implemented\");\n    };\n    return SandpackClient;\n}());\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvYmFzZS04MGExZjc2MC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBZ0M7O0FBRWhDO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4Q0FBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRThCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvYmFzZS04MGExZjc2MC5tanM/MjQ5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXF1YWwgfSBmcm9tICdkZXF1YWwnO1xuXG52YXIgU2FuZHBhY2tDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2FuZHBhY2tDbGllbnQoaWZyYW1lU2VsZWN0b3IsIHNhbmRib3hTZXR1cCwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB0aGlzLnN0YXR1cyA9IFwiaWRsZVwiO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLnNhbmRib3hTZXR1cCA9IHNhbmRib3hTZXR1cDtcbiAgICAgICAgdGhpcy5pZnJhbWVTZWxlY3RvciA9IGlmcmFtZVNlbGVjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGllbnRzIGhhbmRsZXNcbiAgICAgKi9cbiAgICBTYW5kcGFja0NsaWVudC5wcm90b3R5cGUudXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmICghZGVxdWFsKHRoaXMub3B0aW9ucywgb3B0aW9ucykpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNhbmRib3goKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FuZHBhY2tDbGllbnQucHJvdG90eXBlLnVwZGF0ZVNhbmRib3ggPSBmdW5jdGlvbiAoX3NhbmRib3hTZXR1cCwgX2lzSW5pdGlhbGl6YXRpb25Db21waWxlKSB7XG4gICAgICAgIGlmIChfc2FuZGJveFNldHVwID09PSB2b2lkIDApIHsgX3NhbmRib3hTZXR1cCA9IHRoaXMuc2FuZGJveFNldHVwOyB9XG4gICAgICAgIHRocm93IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9O1xuICAgIFNhbmRwYWNrQ2xpZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdW5kbGVyIGNvbW11bmljYXRpb25cbiAgICAgKi9cbiAgICBTYW5kcGFja0NsaWVudC5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoX21lc3NhZ2UpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH07XG4gICAgU2FuZHBhY2tDbGllbnQucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChfbGlzdGVuZXIpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhbmRwYWNrQ2xpZW50O1xufSgpKTtcblxuZXhwb3J0IHsgU2FuZHBhY2tDbGllbnQgYXMgUyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@codesandbox/sandpack-client/dist/clients/runtime/index.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@codesandbox/sandpack-client/dist/clients/runtime/index.mjs ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SandpackRuntime: function() { return /* binding */ SandpackRuntime; }\n/* harmony export */ });\n/* harmony import */ var _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../types-0877c553.mjs */ \"(app-pages-browser)/./node_modules/@codesandbox/sandpack-client/dist/types-0877c553.mjs\");\n/* harmony import */ var dequal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dequal */ \"(app-pages-browser)/./node_modules/dequal/dist/index.mjs\");\n/* harmony import */ var _base_80a1f760_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../base-80a1f760.mjs */ \"(app-pages-browser)/./node_modules/@codesandbox/sandpack-client/dist/base-80a1f760.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! outvariant */ \"(app-pages-browser)/./node_modules/outvariant/lib/index.mjs\");\n\n\n\n\n\n/**\n * This file is a copy of the resolver from the `codesandbox-api` package.\n * We wanted to avoid to reference codesandbox-api because of the code that runs on load in the package.\n * The plan is to take some time and refactor codesandbox-api into what it was supposed to be in the first place,\n * an abstraction over the actions that can be dispatched between the bundler and the iframe.\n */\nvar Protocol = /** @class */ (function () {\n    function Protocol(type, handleMessage, protocol) {\n        var _this = this;\n        this.type = type;\n        this.handleMessage = handleMessage;\n        this.protocol = protocol;\n        this._disposeMessageListener = this.protocol.channelListen(function (msg) { return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__._)(_this, void 0, void 0, function () {\n            var message, result, response, err_1, response;\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(msg.type === this.getTypeId() && msg.method)) return [3 /*break*/, 4];\n                        message = msg;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.handleMessage(message)];\n                    case 2:\n                        result = _a.sent();\n                        response = {\n                            type: this.getTypeId(),\n                            msgId: message.msgId,\n                            result: result,\n                        };\n                        this.protocol.dispatch(response);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        response = {\n                            type: this.getTypeId(),\n                            msgId: message.msgId,\n                            error: {\n                                message: err_1.message,\n                            },\n                        };\n                        this.protocol.dispatch(response);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); });\n    }\n    Protocol.prototype.getTypeId = function () {\n        return \"protocol-\".concat(this.type);\n    };\n    Protocol.prototype.dispose = function () {\n        this._disposeMessageListener();\n    };\n    return Protocol;\n}());\n\nvar IFrameProtocol = /** @class */ (function () {\n    function IFrameProtocol(iframe, origin) {\n        // React to messages from any iframe\n        this.globalListeners = {};\n        this.globalListenersCount = 0;\n        // React to messages from the iframe owned by this instance\n        this.channelListeners = {};\n        this.channelListenersCount = 0;\n        // Random number to identify this instance of the client when messages are coming from multiple iframes\n        this.channelId = Math.floor(Math.random() * 1000000);\n        this.frameWindow = iframe.contentWindow;\n        this.origin = origin;\n        this.globalListeners = [];\n        this.channelListeners = [];\n        this.eventListener = this.eventListener.bind(this);\n        if (typeof window !== \"undefined\") {\n            window.addEventListener(\"message\", this.eventListener);\n        }\n    }\n    IFrameProtocol.prototype.cleanup = function () {\n        window.removeEventListener(\"message\", this.eventListener);\n        this.globalListeners = {};\n        this.channelListeners = {};\n        this.globalListenersCount = 0;\n        this.channelListenersCount = 0;\n    };\n    // Sends the channelId and triggers an iframeHandshake promise to resolve,\n    // so the iframe can start listening for messages (based on the id)\n    IFrameProtocol.prototype.register = function () {\n        if (!this.frameWindow) {\n            return;\n        }\n        this.frameWindow.postMessage({\n            type: \"register-frame\",\n            origin: document.location.origin,\n            id: this.channelId,\n        }, this.origin);\n    };\n    // Messages are dispatched from the client directly to the instance iframe\n    IFrameProtocol.prototype.dispatch = function (message) {\n        if (!this.frameWindow) {\n            return;\n        }\n        this.frameWindow.postMessage((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({ $id: this.channelId, codesandbox: true }, message), this.origin);\n    };\n    // Add a listener that is called on any message coming from an iframe in the page\n    // This is needed for the `initialize` message which comes without a channelId\n    IFrameProtocol.prototype.globalListen = function (listener) {\n        var _this = this;\n        if (typeof listener !== \"function\") {\n            return function () {\n                return;\n            };\n        }\n        var listenerId = this.globalListenersCount;\n        this.globalListeners[listenerId] = listener;\n        this.globalListenersCount++;\n        return function () {\n            delete _this.globalListeners[listenerId];\n        };\n    };\n    // Add a listener that is called on any message coming from an iframe with the instance channelId\n    // All other messages (eg: from other iframes) are ignored\n    IFrameProtocol.prototype.channelListen = function (listener) {\n        var _this = this;\n        if (typeof listener !== \"function\") {\n            return function () {\n                return;\n            };\n        }\n        var listenerId = this.channelListenersCount;\n        this.channelListeners[listenerId] = listener;\n        this.channelListenersCount++;\n        return function () {\n            delete _this.channelListeners[listenerId];\n        };\n    };\n    // Handles message windows coming from iframes\n    IFrameProtocol.prototype.eventListener = function (evt) {\n        // skip events originating from different iframes\n        if (evt.source !== this.frameWindow) {\n            return;\n        }\n        var message = evt.data;\n        if (!message.codesandbox) {\n            return;\n        }\n        Object.values(this.globalListeners).forEach(function (listener) {\n            return listener(message);\n        });\n        if (message.$id !== this.channelId) {\n            return;\n        }\n        Object.values(this.channelListeners).forEach(function (listener) {\n            return listener(message);\n        });\n    };\n    return IFrameProtocol;\n}());\n\nvar MAX_CLIENT_DEPENDENCY_COUNT = 50;\nfunction getTemplate(pkg, \n/* eslint-disable @typescript-eslint/no-explicit-any */\nmodules) {\n    if (!pkg) {\n        return \"static\";\n    }\n    var _a = pkg.dependencies, dependencies = _a === void 0 ? {} : _a, _b = pkg.devDependencies, devDependencies = _b === void 0 ? {} : _b;\n    var totalDependencies = (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.i)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.i)([], Object.keys(dependencies), true), Object.keys(devDependencies), true);\n    var moduleNames = Object.keys(modules);\n    var adonis = [\"@adonisjs/framework\", \"@adonisjs/core\"];\n    if (totalDependencies.some(function (dep) { return adonis.indexOf(dep) > -1; })) {\n        return \"adonis\";\n    }\n    var nuxt = [\"nuxt\", \"nuxt-edge\", \"nuxt-ts\", \"nuxt-ts-edge\", \"nuxt3\"];\n    if (totalDependencies.some(function (dep) { return nuxt.indexOf(dep) > -1; })) {\n        return \"nuxt\";\n    }\n    if (totalDependencies.indexOf(\"next\") > -1) {\n        return \"next\";\n    }\n    var apollo = [\n        \"apollo-server\",\n        \"apollo-server-express\",\n        \"apollo-server-hapi\",\n        \"apollo-server-koa\",\n        \"apollo-server-lambda\",\n        \"apollo-server-micro\",\n    ];\n    if (totalDependencies.some(function (dep) { return apollo.indexOf(dep) > -1; })) {\n        return \"apollo\";\n    }\n    if (totalDependencies.indexOf(\"mdx-deck\") > -1) {\n        return \"mdx-deck\";\n    }\n    if (totalDependencies.indexOf(\"gridsome\") > -1) {\n        return \"gridsome\";\n    }\n    if (totalDependencies.indexOf(\"vuepress\") > -1) {\n        return \"vuepress\";\n    }\n    if (totalDependencies.indexOf(\"ember-cli\") > -1) {\n        return \"ember\";\n    }\n    if (totalDependencies.indexOf(\"sapper\") > -1) {\n        return \"sapper\";\n    }\n    if (totalDependencies.indexOf(\"gatsby\") > -1) {\n        return \"gatsby\";\n    }\n    if (totalDependencies.indexOf(\"quasar\") > -1) {\n        return \"quasar\";\n    }\n    if (totalDependencies.indexOf(\"@docusaurus/core\") > -1) {\n        return \"docusaurus\";\n    }\n    if (totalDependencies.indexOf(\"remix\") > -1) {\n        return \"remix\";\n    }\n    if (totalDependencies.indexOf(\"astro\") > -1) {\n        return \"node\";\n    }\n    // CLIENT\n    if (moduleNames.some(function (m) { return m.endsWith(\".re\"); })) {\n        return \"reason\";\n    }\n    var parcel = [\"parcel-bundler\", \"parcel\"];\n    if (totalDependencies.some(function (dep) { return parcel.indexOf(dep) > -1; })) {\n        return \"parcel\";\n    }\n    var dojo = [\"@dojo/core\", \"@dojo/framework\"];\n    if (totalDependencies.some(function (dep) { return dojo.indexOf(dep) > -1; })) {\n        return \"@dojo/cli-create-app\";\n    }\n    if (totalDependencies.indexOf(\"@nestjs/core\") > -1 ||\n        totalDependencies.indexOf(\"@nestjs/common\") > -1) {\n        return \"nest\";\n    }\n    if (totalDependencies.indexOf(\"react-styleguidist\") > -1) {\n        return \"styleguidist\";\n    }\n    if (totalDependencies.indexOf(\"react-scripts\") > -1) {\n        return \"create-react-app\";\n    }\n    if (totalDependencies.indexOf(\"react-scripts-ts\") > -1) {\n        return \"create-react-app-typescript\";\n    }\n    if (totalDependencies.indexOf(\"@angular/core\") > -1) {\n        return \"angular-cli\";\n    }\n    if (totalDependencies.indexOf(\"preact-cli\") > -1) {\n        return \"preact-cli\";\n    }\n    if (totalDependencies.indexOf(\"@sveltech/routify\") > -1 ||\n        totalDependencies.indexOf(\"@roxi/routify\") > -1) {\n        return \"node\";\n    }\n    if (totalDependencies.indexOf(\"vite\") > -1) {\n        return \"node\";\n    }\n    if (totalDependencies.indexOf(\"@frontity/core\") > -1) {\n        return \"node\";\n    }\n    if (totalDependencies.indexOf(\"svelte\") > -1) {\n        return \"svelte\";\n    }\n    if (totalDependencies.indexOf(\"vue\") > -1) {\n        return \"vue-cli\";\n    }\n    if (totalDependencies.indexOf(\"cx\") > -1) {\n        return \"cxjs\";\n    }\n    var nodeDeps = [\n        \"express\",\n        \"koa\",\n        \"nodemon\",\n        \"ts-node\",\n        \"@tensorflow/tfjs-node\",\n        \"webpack-dev-server\",\n        \"snowpack\",\n    ];\n    if (totalDependencies.some(function (dep) { return nodeDeps.indexOf(dep) > -1; })) {\n        return \"node\";\n    }\n    if (Object.keys(dependencies).length >= MAX_CLIENT_DEPENDENCY_COUNT) {\n        // The dependencies are too much for client sandboxes to handle\n        return \"node\";\n    }\n    return undefined;\n}\n\nvar _a;\nvar BUNDLER_URL = \"https://\".concat((_a = \"2.12.0\") === null || _a === void 0 ? void 0 : _a.replace(/\\./g, \"-\"), \"-sandpack.codesandbox.io/\");\nvar SandpackRuntime = /** @class */ (function (_super) {\n    (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(SandpackRuntime, _super);\n    function SandpackRuntime(selector, sandboxSetup, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, selector, sandboxSetup, options) || this;\n        _this.getTranspilerContext = function () {\n            return new Promise(function (resolve) {\n                var unsubscribe = _this.listen(function (message) {\n                    if (message.type === \"transpiler-context\") {\n                        resolve(message.data);\n                        unsubscribe();\n                    }\n                });\n                _this.dispatch({ type: \"get-transpiler-context\" });\n            });\n        };\n        _this.bundlerURL = options.bundlerURL || BUNDLER_URL;\n        if (options.teamId) {\n            _this.bundlerURL =\n                _this.bundlerURL.replace(\"https://\", \"https://\" + options.teamId + \"-\") +\n                    \"?cache=\".concat(Date.now());\n        }\n        _this.bundlerState = undefined;\n        _this.errors = [];\n        _this.status = \"initializing\";\n        if (typeof selector === \"string\") {\n            _this.selector = selector;\n            var element = document.querySelector(selector);\n            (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(element, \"The element '\".concat(selector, \"' was not found\"));\n            _this.element = element;\n            _this.iframe = document.createElement(\"iframe\");\n            _this.initializeElement();\n        }\n        else {\n            _this.element = selector;\n            _this.iframe = selector;\n        }\n        if (!_this.iframe.getAttribute(\"sandbox\")) {\n            _this.iframe.setAttribute(\"sandbox\", \"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts allow-downloads allow-pointer-lock\");\n            _this.iframe.setAttribute(\"allow\", \"accelerometer; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; clipboard-write;\");\n        }\n        _this.setLocationURLIntoIFrame();\n        _this.iframeProtocol = new IFrameProtocol(_this.iframe, _this.bundlerURL);\n        _this.unsubscribeGlobalListener = _this.iframeProtocol.globalListen(function (mes) {\n            if (mes.type !== \"initialized\" || !_this.iframe.contentWindow) {\n                return;\n            }\n            _this.iframeProtocol.register();\n            if (_this.options.fileResolver) {\n                _this.fileResolverProtocol = new Protocol(\"fs\", function (data) { return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__._)(_this, void 0, void 0, function () {\n                    return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(this, function (_a) {\n                        if (data.method === \"isFile\") {\n                            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                            return [2 /*return*/, this.options.fileResolver.isFile(data.params[0])];\n                        }\n                        else if (data.method === \"readFile\") {\n                            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                            return [2 /*return*/, this.options.fileResolver.readFile(data.params[0])];\n                        }\n                        else {\n                            throw new Error(\"Method not supported\");\n                        }\n                    });\n                }); }, _this.iframeProtocol);\n            }\n            _this.updateSandbox(_this.sandboxSetup, true);\n        });\n        _this.unsubscribeChannelListener = _this.iframeProtocol.channelListen(function (mes) {\n            switch (mes.type) {\n                case \"start\": {\n                    _this.errors = [];\n                    break;\n                }\n                case \"status\": {\n                    _this.status = mes.status;\n                    break;\n                }\n                case \"action\": {\n                    if (mes.action === \"show-error\") {\n                        _this.errors = (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.i)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.i)([], _this.errors, true), [(0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.e)(mes)], false);\n                    }\n                    break;\n                }\n                case \"done\": {\n                    _this.status = \"done\";\n                    break;\n                }\n                case \"state\": {\n                    _this.bundlerState = mes.state;\n                    break;\n                }\n            }\n        });\n        return _this;\n    }\n    SandpackRuntime.prototype.setLocationURLIntoIFrame = function () {\n        var _a;\n        var urlSource = this.options.startRoute\n            ? new URL(this.options.startRoute, this.bundlerURL).toString()\n            : this.bundlerURL;\n        (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.location.replace(urlSource);\n        this.iframe.src = urlSource;\n    };\n    SandpackRuntime.prototype.destroy = function () {\n        this.unsubscribeChannelListener();\n        this.unsubscribeGlobalListener();\n        this.iframeProtocol.cleanup();\n    };\n    SandpackRuntime.prototype.updateOptions = function (options) {\n        if (!(0,dequal__WEBPACK_IMPORTED_MODULE_0__.dequal)(this.options, options)) {\n            this.options = options;\n            this.updateSandbox();\n        }\n    };\n    SandpackRuntime.prototype.updateSandbox = function (sandboxSetup, isInitializationCompile) {\n        var _a, _b, _c, _d;\n        if (sandboxSetup === void 0) { sandboxSetup = this.sandboxSetup; }\n        this.sandboxSetup = (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({}, this.sandboxSetup), sandboxSetup);\n        var files = this.getFiles();\n        var modules = Object.keys(files).reduce(function (prev, next) {\n            var _a;\n            return ((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({}, prev), (_a = {}, _a[next] = {\n                code: files[next].code,\n                path: next,\n            }, _a)));\n        }, {});\n        var packageJSON = JSON.parse((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.b)(this.sandboxSetup.dependencies, this.sandboxSetup.devDependencies, this.sandboxSetup.entry));\n        try {\n            packageJSON = JSON.parse(files[\"/package.json\"].code);\n        }\n        catch (e) {\n            console.error((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(\"could not parse package.json file: \" + e.message));\n        }\n        // TODO move this to a common format\n        var normalizedModules = Object.keys(files).reduce(function (prev, next) {\n            var _a;\n            return ((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({}, prev), (_a = {}, _a[next] = {\n                content: files[next].code,\n                path: next,\n            }, _a)));\n        }, {});\n        this.dispatch({\n            type: \"compile\",\n            codesandbox: true,\n            version: 3,\n            isInitializationCompile: isInitializationCompile,\n            modules: modules,\n            reactDevTools: this.options.reactDevTools,\n            externalResources: this.options.externalResources || [],\n            hasFileResolver: Boolean(this.options.fileResolver),\n            disableDependencyPreprocessing: this.sandboxSetup.disableDependencyPreprocessing,\n            template: this.sandboxSetup.template ||\n                getTemplate(packageJSON, normalizedModules),\n            showOpenInCodeSandbox: (_a = this.options.showOpenInCodeSandbox) !== null && _a !== void 0 ? _a : true,\n            showErrorScreen: (_b = this.options.showErrorScreen) !== null && _b !== void 0 ? _b : true,\n            showLoadingScreen: (_c = this.options.showLoadingScreen) !== null && _c !== void 0 ? _c : false,\n            skipEval: this.options.skipEval || false,\n            clearConsoleDisabled: !this.options.clearConsoleOnFirstCompile,\n            logLevel: (_d = this.options.logLevel) !== null && _d !== void 0 ? _d : _types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.S.Info,\n            customNpmRegistries: this.options.customNpmRegistries,\n            teamId: this.options.teamId,\n            sandboxId: this.options.sandboxId,\n        });\n    };\n    SandpackRuntime.prototype.dispatch = function (message) {\n        /**\n         * Intercept \"refresh\" dispatch: this will make sure\n         * that the iframe is still in the location it's supposed to be.\n         * External links inside the iframe will change the location and\n         * prevent the user from navigating back.\n         */\n        if (message.type === \"refresh\") {\n            this.setLocationURLIntoIFrame();\n        }\n        this.iframeProtocol.dispatch(message);\n    };\n    SandpackRuntime.prototype.listen = function (listener) {\n        return this.iframeProtocol.channelListen(listener);\n    };\n    /**\n     * Get the URL of the contents of the current sandbox\n     */\n    SandpackRuntime.prototype.getCodeSandboxURL = function () {\n        var files = this.getFiles();\n        var paramFiles = Object.keys(files).reduce(function (prev, next) {\n            var _a;\n            return ((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)((0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.h)({}, prev), (_a = {}, _a[next.replace(\"/\", \"\")] = {\n                content: files[next].code,\n                isBinary: false,\n            }, _a)));\n        }, {});\n        return fetch(\"https://codesandbox.io/api/v1/sandboxes/define?json=1\", {\n            method: \"POST\",\n            body: JSON.stringify({ files: paramFiles }),\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n            },\n        })\n            .then(function (x) { return x.json(); })\n            .then(function (res) { return ({\n            sandboxId: res.sandbox_id,\n            editorUrl: \"https://codesandbox.io/s/\".concat(res.sandbox_id),\n            embedUrl: \"https://codesandbox.io/embed/\".concat(res.sandbox_id),\n        }); });\n    };\n    SandpackRuntime.prototype.getFiles = function () {\n        var sandboxSetup = this.sandboxSetup;\n        if (sandboxSetup.files[\"/package.json\"] === undefined) {\n            return (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.d)(sandboxSetup.files, sandboxSetup.dependencies, sandboxSetup.devDependencies, sandboxSetup.entry);\n        }\n        return this.sandboxSetup.files;\n    };\n    SandpackRuntime.prototype.initializeElement = function () {\n        this.iframe.style.border = \"0\";\n        this.iframe.style.width = this.options.width || \"100%\";\n        this.iframe.style.height = this.options.height || \"100%\";\n        this.iframe.style.overflow = \"hidden\";\n        (0,_types_0877c553_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(this.element.parentNode, \"The given iframe does not have a parent.\");\n        this.element.parentNode.replaceChild(this.iframe, this.element);\n    };\n    return SandpackRuntime;\n}(_base_80a1f760_mjs__WEBPACK_IMPORTED_MODULE_3__.S));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvY2xpZW50cy9ydW50aW1lL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3UTtBQUN4TztBQUM4QjtBQUMxQzs7QUFFcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLE9BQU8sc0RBQVM7QUFDcEc7QUFDQSxtQkFBbUIsc0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzREFBUSxHQUFHLHdDQUF3QztBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxxRUFBcUU7QUFDdEksNEJBQTRCLHNEQUFhLENBQUMsc0RBQWE7QUFDdkQ7QUFDQTtBQUNBLGdEQUFnRCxrQ0FBa0M7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGdDQUFnQztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxrQ0FBa0M7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDJCQUEyQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Qsa0NBQWtDO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxnQ0FBZ0M7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Qsb0NBQW9DO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSSxzREFBUztBQUNiO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsaUNBQWlDLGdDQUFnQztBQUNqRSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFFBQVEsaUJBQWlCLGFBQWEsV0FBVyxLQUFLLFlBQVksTUFBTSxnQkFBZ0I7QUFDdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLE9BQU8sc0RBQVM7QUFDbEcsMkJBQTJCLHNEQUFXO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCLElBQUk7QUFDckI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsc0RBQWEsQ0FBQyxzREFBYSwyQkFBMkIsc0RBQW1CO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOENBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDLDRCQUE0QixzREFBUSxDQUFDLHNEQUFRLEdBQUc7QUFDaEQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFRLENBQUMsc0RBQVEsR0FBRyxpQkFBaUI7QUFDekQ7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLElBQUk7QUFDYixxQ0FBcUMsc0RBQWlCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNEQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFRLENBQUMsc0RBQVEsR0FBRyxpQkFBaUI7QUFDekQ7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLGtEQUFnQjtBQUNwRztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzREFBUSxDQUFDLHNEQUFRLEdBQUcsaUJBQWlCO0FBQ3pEO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBLG1DQUFtQyxtQkFBbUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxpQ0FBaUMsa0JBQWtCO0FBQ25ELG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzREFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQVU7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxDQUFDLGlEQUFjOztBQUVXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AY29kZXNhbmRib3gvc2FuZHBhY2stY2xpZW50L2Rpc3QvY2xpZW50cy9ydW50aW1lL2luZGV4Lm1qcz82ODNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF8gYXMgX19hd2FpdGVyLCBhIGFzIF9fZ2VuZXJhdG9yLCBoIGFzIF9fYXNzaWduLCBpIGFzIF9fc3ByZWFkQXJyYXksIGcgYXMgX19leHRlbmRzLCBiIGFzIGNyZWF0ZVBhY2thZ2VKU09OLCBjIGFzIGNyZWF0ZUVycm9yLCBTIGFzIFNhbmRwYWNrTG9nTGV2ZWwsIGQgYXMgYWRkUGFja2FnZUpTT05JZk5lZWRlZCwgbiBhcyBudWxsdGhyb3dzLCBlIGFzIGV4dHJhY3RFcnJvckRldGFpbHMgfSBmcm9tICcuLi8uLi90eXBlcy0wODc3YzU1My5tanMnO1xuaW1wb3J0IHsgZGVxdWFsIH0gZnJvbSAnZGVxdWFsJztcbmltcG9ydCB7IFMgYXMgU2FuZHBhY2tDbGllbnQgfSBmcm9tICcuLi8uLi9iYXNlLTgwYTFmNzYwLm1qcyc7XG5pbXBvcnQgJ291dHZhcmlhbnQnO1xuXG4vKipcbiAqIFRoaXMgZmlsZSBpcyBhIGNvcHkgb2YgdGhlIHJlc29sdmVyIGZyb20gdGhlIGBjb2Rlc2FuZGJveC1hcGlgIHBhY2thZ2UuXG4gKiBXZSB3YW50ZWQgdG8gYXZvaWQgdG8gcmVmZXJlbmNlIGNvZGVzYW5kYm94LWFwaSBiZWNhdXNlIG9mIHRoZSBjb2RlIHRoYXQgcnVucyBvbiBsb2FkIGluIHRoZSBwYWNrYWdlLlxuICogVGhlIHBsYW4gaXMgdG8gdGFrZSBzb21lIHRpbWUgYW5kIHJlZmFjdG9yIGNvZGVzYW5kYm94LWFwaSBpbnRvIHdoYXQgaXQgd2FzIHN1cHBvc2VkIHRvIGJlIGluIHRoZSBmaXJzdCBwbGFjZSxcbiAqIGFuIGFic3RyYWN0aW9uIG92ZXIgdGhlIGFjdGlvbnMgdGhhdCBjYW4gYmUgZGlzcGF0Y2hlZCBiZXR3ZWVuIHRoZSBidW5kbGVyIGFuZCB0aGUgaWZyYW1lLlxuICovXG52YXIgUHJvdG9jb2wgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJvdG9jb2wodHlwZSwgaGFuZGxlTWVzc2FnZSwgcHJvdG9jb2wpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5oYW5kbGVNZXNzYWdlID0gaGFuZGxlTWVzc2FnZTtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IHByb3RvY29sO1xuICAgICAgICB0aGlzLl9kaXNwb3NlTWVzc2FnZUxpc3RlbmVyID0gdGhpcy5wcm90b2NvbC5jaGFubmVsTGlzdGVuKGZ1bmN0aW9uIChtc2cpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlLCByZXN1bHQsIHJlc3BvbnNlLCBlcnJfMSwgcmVzcG9uc2U7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtc2cudHlwZSA9PT0gdGhpcy5nZXRUeXBlSWQoKSAmJiBtc2cubWV0aG9kKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbXNnO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5oYW5kbGVNZXNzYWdlKG1lc3NhZ2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdGhpcy5nZXRUeXBlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dJZDogbWVzc2FnZS5tc2dJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3RvY29sLmRpc3BhdGNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMuZ2V0VHlwZUlkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnSWQ6IG1lc3NhZ2UubXNnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyXzEubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvdG9jb2wuZGlzcGF0Y2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfSk7XG4gICAgfVxuICAgIFByb3RvY29sLnByb3RvdHlwZS5nZXRUeXBlSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcInByb3RvY29sLVwiLmNvbmNhdCh0aGlzLnR5cGUpO1xuICAgIH07XG4gICAgUHJvdG9jb2wucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VNZXNzYWdlTGlzdGVuZXIoKTtcbiAgICB9O1xuICAgIHJldHVybiBQcm90b2NvbDtcbn0oKSk7XG5cbnZhciBJRnJhbWVQcm90b2NvbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJRnJhbWVQcm90b2NvbChpZnJhbWUsIG9yaWdpbikge1xuICAgICAgICAvLyBSZWFjdCB0byBtZXNzYWdlcyBmcm9tIGFueSBpZnJhbWVcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgICAgIC8vIFJlYWN0IHRvIG1lc3NhZ2VzIGZyb20gdGhlIGlmcmFtZSBvd25lZCBieSB0aGlzIGluc3RhbmNlXG4gICAgICAgIHRoaXMuY2hhbm5lbExpc3RlbmVycyA9IHt9O1xuICAgICAgICB0aGlzLmNoYW5uZWxMaXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgICAgIC8vIFJhbmRvbSBudW1iZXIgdG8gaWRlbnRpZnkgdGhpcyBpbnN0YW5jZSBvZiB0aGUgY2xpZW50IHdoZW4gbWVzc2FnZXMgYXJlIGNvbWluZyBmcm9tIG11bHRpcGxlIGlmcmFtZXNcbiAgICAgICAgdGhpcy5jaGFubmVsSWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKTtcbiAgICAgICAgdGhpcy5mcmFtZVdpbmRvdyA9IGlmcmFtZS5jb250ZW50V2luZG93O1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5jaGFubmVsTGlzdGVuZXJzID0gW107XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lciA9IHRoaXMuZXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuZXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSUZyYW1lUHJvdG9jb2wucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLmV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB0aGlzLmdsb2JhbExpc3RlbmVycyA9IHt9O1xuICAgICAgICB0aGlzLmNoYW5uZWxMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuY2hhbm5lbExpc3RlbmVyc0NvdW50ID0gMDtcbiAgICB9O1xuICAgIC8vIFNlbmRzIHRoZSBjaGFubmVsSWQgYW5kIHRyaWdnZXJzIGFuIGlmcmFtZUhhbmRzaGFrZSBwcm9taXNlIHRvIHJlc29sdmUsXG4gICAgLy8gc28gdGhlIGlmcmFtZSBjYW4gc3RhcnQgbGlzdGVuaW5nIGZvciBtZXNzYWdlcyAoYmFzZWQgb24gdGhlIGlkKVxuICAgIElGcmFtZVByb3RvY29sLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lV2luZG93KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcmFtZVdpbmRvdy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICB0eXBlOiBcInJlZ2lzdGVyLWZyYW1lXCIsXG4gICAgICAgICAgICBvcmlnaW46IGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIGlkOiB0aGlzLmNoYW5uZWxJZCxcbiAgICAgICAgfSwgdGhpcy5vcmlnaW4pO1xuICAgIH07XG4gICAgLy8gTWVzc2FnZXMgYXJlIGRpc3BhdGNoZWQgZnJvbSB0aGUgY2xpZW50IGRpcmVjdGx5IHRvIHRoZSBpbnN0YW5jZSBpZnJhbWVcbiAgICBJRnJhbWVQcm90b2NvbC5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVXaW5kb3cpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lV2luZG93LnBvc3RNZXNzYWdlKF9fYXNzaWduKHsgJGlkOiB0aGlzLmNoYW5uZWxJZCwgY29kZXNhbmRib3g6IHRydWUgfSwgbWVzc2FnZSksIHRoaXMub3JpZ2luKTtcbiAgICB9O1xuICAgIC8vIEFkZCBhIGxpc3RlbmVyIHRoYXQgaXMgY2FsbGVkIG9uIGFueSBtZXNzYWdlIGNvbWluZyBmcm9tIGFuIGlmcmFtZSBpbiB0aGUgcGFnZVxuICAgIC8vIFRoaXMgaXMgbmVlZGVkIGZvciB0aGUgYGluaXRpYWxpemVgIG1lc3NhZ2Ugd2hpY2ggY29tZXMgd2l0aG91dCBhIGNoYW5uZWxJZFxuICAgIElGcmFtZVByb3RvY29sLnByb3RvdHlwZS5nbG9iYWxMaXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3RlbmVySWQgPSB0aGlzLmdsb2JhbExpc3RlbmVyc0NvdW50O1xuICAgICAgICB0aGlzLmdsb2JhbExpc3RlbmVyc1tsaXN0ZW5lcklkXSA9IGxpc3RlbmVyO1xuICAgICAgICB0aGlzLmdsb2JhbExpc3RlbmVyc0NvdW50Kys7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWxldGUgX3RoaXMuZ2xvYmFsTGlzdGVuZXJzW2xpc3RlbmVySWRdO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgLy8gQWRkIGEgbGlzdGVuZXIgdGhhdCBpcyBjYWxsZWQgb24gYW55IG1lc3NhZ2UgY29taW5nIGZyb20gYW4gaWZyYW1lIHdpdGggdGhlIGluc3RhbmNlIGNoYW5uZWxJZFxuICAgIC8vIEFsbCBvdGhlciBtZXNzYWdlcyAoZWc6IGZyb20gb3RoZXIgaWZyYW1lcykgYXJlIGlnbm9yZWRcbiAgICBJRnJhbWVQcm90b2NvbC5wcm90b3R5cGUuY2hhbm5lbExpc3RlbiA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGlzdGVuZXJJZCA9IHRoaXMuY2hhbm5lbExpc3RlbmVyc0NvdW50O1xuICAgICAgICB0aGlzLmNoYW5uZWxMaXN0ZW5lcnNbbGlzdGVuZXJJZF0gPSBsaXN0ZW5lcjtcbiAgICAgICAgdGhpcy5jaGFubmVsTGlzdGVuZXJzQ291bnQrKztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5jaGFubmVsTGlzdGVuZXJzW2xpc3RlbmVySWRdO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgLy8gSGFuZGxlcyBtZXNzYWdlIHdpbmRvd3MgY29taW5nIGZyb20gaWZyYW1lc1xuICAgIElGcmFtZVByb3RvY29sLnByb3RvdHlwZS5ldmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAvLyBza2lwIGV2ZW50cyBvcmlnaW5hdGluZyBmcm9tIGRpZmZlcmVudCBpZnJhbWVzXG4gICAgICAgIGlmIChldnQuc291cmNlICE9PSB0aGlzLmZyYW1lV2luZG93KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBldnQuZGF0YTtcbiAgICAgICAgaWYgKCFtZXNzYWdlLmNvZGVzYW5kYm94KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmdsb2JhbExpc3RlbmVycykuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihtZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChtZXNzYWdlLiRpZCAhPT0gdGhpcy5jaGFubmVsSWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuY2hhbm5lbExpc3RlbmVycykuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihtZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gSUZyYW1lUHJvdG9jb2w7XG59KCkpO1xuXG52YXIgTUFYX0NMSUVOVF9ERVBFTkRFTkNZX0NPVU5UID0gNTA7XG5mdW5jdGlvbiBnZXRUZW1wbGF0ZShwa2csIFxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xubW9kdWxlcykge1xuICAgIGlmICghcGtnKSB7XG4gICAgICAgIHJldHVybiBcInN0YXRpY1wiO1xuICAgIH1cbiAgICB2YXIgX2EgPSBwa2cuZGVwZW5kZW5jaWVzLCBkZXBlbmRlbmNpZXMgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSwgX2IgPSBwa2cuZGV2RGVwZW5kZW5jaWVzLCBkZXZEZXBlbmRlbmNpZXMgPSBfYiA9PT0gdm9pZCAwID8ge30gOiBfYjtcbiAgICB2YXIgdG90YWxEZXBlbmRlbmNpZXMgPSBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIE9iamVjdC5rZXlzKGRlcGVuZGVuY2llcyksIHRydWUpLCBPYmplY3Qua2V5cyhkZXZEZXBlbmRlbmNpZXMpLCB0cnVlKTtcbiAgICB2YXIgbW9kdWxlTmFtZXMgPSBPYmplY3Qua2V5cyhtb2R1bGVzKTtcbiAgICB2YXIgYWRvbmlzID0gW1wiQGFkb25pc2pzL2ZyYW1ld29ya1wiLCBcIkBhZG9uaXNqcy9jb3JlXCJdO1xuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5zb21lKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGFkb25pcy5pbmRleE9mKGRlcCkgPiAtMTsgfSkpIHtcbiAgICAgICAgcmV0dXJuIFwiYWRvbmlzXCI7XG4gICAgfVxuICAgIHZhciBudXh0ID0gW1wibnV4dFwiLCBcIm51eHQtZWRnZVwiLCBcIm51eHQtdHNcIiwgXCJudXh0LXRzLWVkZ2VcIiwgXCJudXh0M1wiXTtcbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuc29tZShmdW5jdGlvbiAoZGVwKSB7IHJldHVybiBudXh0LmluZGV4T2YoZGVwKSA+IC0xOyB9KSkge1xuICAgICAgICByZXR1cm4gXCJudXh0XCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwibmV4dFwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcIm5leHRcIjtcbiAgICB9XG4gICAgdmFyIGFwb2xsbyA9IFtcbiAgICAgICAgXCJhcG9sbG8tc2VydmVyXCIsXG4gICAgICAgIFwiYXBvbGxvLXNlcnZlci1leHByZXNzXCIsXG4gICAgICAgIFwiYXBvbGxvLXNlcnZlci1oYXBpXCIsXG4gICAgICAgIFwiYXBvbGxvLXNlcnZlci1rb2FcIixcbiAgICAgICAgXCJhcG9sbG8tc2VydmVyLWxhbWJkYVwiLFxuICAgICAgICBcImFwb2xsby1zZXJ2ZXItbWljcm9cIixcbiAgICBdO1xuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5zb21lKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGFwb2xsby5pbmRleE9mKGRlcCkgPiAtMTsgfSkpIHtcbiAgICAgICAgcmV0dXJuIFwiYXBvbGxvXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwibWR4LWRlY2tcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJtZHgtZGVja1wiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcImdyaWRzb21lXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3JpZHNvbWVcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJ2dWVwcmVzc1wiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcInZ1ZXByZXNzXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwiZW1iZXItY2xpXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwiZW1iZXJcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJzYXBwZXJcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJzYXBwZXJcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJnYXRzYnlcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJnYXRzYnlcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJxdWFzYXJcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJxdWFzYXJcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJAZG9jdXNhdXJ1cy9jb3JlXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwiZG9jdXNhdXJ1c1wiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInJlbWl4XCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwicmVtaXhcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJhc3Ryb1wiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcIm5vZGVcIjtcbiAgICB9XG4gICAgLy8gQ0xJRU5UXG4gICAgaWYgKG1vZHVsZU5hbWVzLnNvbWUoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uZW5kc1dpdGgoXCIucmVcIik7IH0pKSB7XG4gICAgICAgIHJldHVybiBcInJlYXNvblwiO1xuICAgIH1cbiAgICB2YXIgcGFyY2VsID0gW1wicGFyY2VsLWJ1bmRsZXJcIiwgXCJwYXJjZWxcIl07XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLnNvbWUoZnVuY3Rpb24gKGRlcCkgeyByZXR1cm4gcGFyY2VsLmluZGV4T2YoZGVwKSA+IC0xOyB9KSkge1xuICAgICAgICByZXR1cm4gXCJwYXJjZWxcIjtcbiAgICB9XG4gICAgdmFyIGRvam8gPSBbXCJAZG9qby9jb3JlXCIsIFwiQGRvam8vZnJhbWV3b3JrXCJdO1xuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5zb21lKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGRvam8uaW5kZXhPZihkZXApID4gLTE7IH0pKSB7XG4gICAgICAgIHJldHVybiBcIkBkb2pvL2NsaS1jcmVhdGUtYXBwXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwiQG5lc3Rqcy9jb3JlXCIpID4gLTEgfHxcbiAgICAgICAgdG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcIkBuZXN0anMvY29tbW9uXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwibmVzdFwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInJlYWN0LXN0eWxlZ3VpZGlzdFwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcInN0eWxlZ3VpZGlzdFwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInJlYWN0LXNjcmlwdHNcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJjcmVhdGUtcmVhY3QtYXBwXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwicmVhY3Qtc2NyaXB0cy10c1wiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcImNyZWF0ZS1yZWFjdC1hcHAtdHlwZXNjcmlwdFwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcIkBhbmd1bGFyL2NvcmVcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJhbmd1bGFyLWNsaVwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInByZWFjdC1jbGlcIikgPiAtMSkge1xuICAgICAgICByZXR1cm4gXCJwcmVhY3QtY2xpXCI7XG4gICAgfVxuICAgIGlmICh0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwiQHN2ZWx0ZWNoL3JvdXRpZnlcIikgPiAtMSB8fFxuICAgICAgICB0b3RhbERlcGVuZGVuY2llcy5pbmRleE9mKFwiQHJveGkvcm91dGlmeVwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcIm5vZGVcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJ2aXRlXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZVwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcIkBmcm9udGl0eS9jb3JlXCIpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZVwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInN2ZWx0ZVwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcInN2ZWx0ZVwiO1xuICAgIH1cbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuaW5kZXhPZihcInZ1ZVwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcInZ1ZS1jbGlcIjtcbiAgICB9XG4gICAgaWYgKHRvdGFsRGVwZW5kZW5jaWVzLmluZGV4T2YoXCJjeFwiKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBcImN4anNcIjtcbiAgICB9XG4gICAgdmFyIG5vZGVEZXBzID0gW1xuICAgICAgICBcImV4cHJlc3NcIixcbiAgICAgICAgXCJrb2FcIixcbiAgICAgICAgXCJub2RlbW9uXCIsXG4gICAgICAgIFwidHMtbm9kZVwiLFxuICAgICAgICBcIkB0ZW5zb3JmbG93L3RmanMtbm9kZVwiLFxuICAgICAgICBcIndlYnBhY2stZGV2LXNlcnZlclwiLFxuICAgICAgICBcInNub3dwYWNrXCIsXG4gICAgXTtcbiAgICBpZiAodG90YWxEZXBlbmRlbmNpZXMuc29tZShmdW5jdGlvbiAoZGVwKSB7IHJldHVybiBub2RlRGVwcy5pbmRleE9mKGRlcCkgPiAtMTsgfSkpIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZVwiO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoZGVwZW5kZW5jaWVzKS5sZW5ndGggPj0gTUFYX0NMSUVOVF9ERVBFTkRFTkNZX0NPVU5UKSB7XG4gICAgICAgIC8vIFRoZSBkZXBlbmRlbmNpZXMgYXJlIHRvbyBtdWNoIGZvciBjbGllbnQgc2FuZGJveGVzIHRvIGhhbmRsZVxuICAgICAgICByZXR1cm4gXCJub2RlXCI7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbnZhciBfYTtcbnZhciBCVU5ETEVSX1VSTCA9IFwiaHR0cHM6Ly9cIi5jb25jYXQoKF9hID0gXCIyLjEyLjBcIikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlcGxhY2UoL1xcLi9nLCBcIi1cIiksIFwiLXNhbmRwYWNrLmNvZGVzYW5kYm94LmlvL1wiKTtcbnZhciBTYW5kcGFja1J1bnRpbWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNhbmRwYWNrUnVudGltZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYW5kcGFja1J1bnRpbWUoc2VsZWN0b3IsIHNhbmRib3hTZXR1cCwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzZWxlY3Rvciwgc2FuZGJveFNldHVwLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5nZXRUcmFuc3BpbGVyQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHZhciB1bnN1YnNjcmliZSA9IF90aGlzLmxpc3RlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcInRyYW5zcGlsZXItY29udGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuZGlzcGF0Y2goeyB0eXBlOiBcImdldC10cmFuc3BpbGVyLWNvbnRleHRcIiB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5idW5kbGVyVVJMID0gb3B0aW9ucy5idW5kbGVyVVJMIHx8IEJVTkRMRVJfVVJMO1xuICAgICAgICBpZiAob3B0aW9ucy50ZWFtSWQpIHtcbiAgICAgICAgICAgIF90aGlzLmJ1bmRsZXJVUkwgPVxuICAgICAgICAgICAgICAgIF90aGlzLmJ1bmRsZXJVUkwucmVwbGFjZShcImh0dHBzOi8vXCIsIFwiaHR0cHM6Ly9cIiArIG9wdGlvbnMudGVhbUlkICsgXCItXCIpICtcbiAgICAgICAgICAgICAgICAgICAgXCI/Y2FjaGU9XCIuY29uY2F0KERhdGUubm93KCkpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmJ1bmRsZXJTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgX3RoaXMuZXJyb3JzID0gW107XG4gICAgICAgIF90aGlzLnN0YXR1cyA9IFwiaW5pdGlhbGl6aW5nXCI7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgbnVsbHRocm93cyhlbGVtZW50LCBcIlRoZSBlbGVtZW50ICdcIi5jb25jYXQoc2VsZWN0b3IsIFwiJyB3YXMgbm90IGZvdW5kXCIpKTtcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgX3RoaXMuaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbiAgICAgICAgICAgIF90aGlzLmluaXRpYWxpemVFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gc2VsZWN0b3I7XG4gICAgICAgICAgICBfdGhpcy5pZnJhbWUgPSBzZWxlY3RvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIV90aGlzLmlmcmFtZS5nZXRBdHRyaWJ1dGUoXCJzYW5kYm94XCIpKSB7XG4gICAgICAgICAgICBfdGhpcy5pZnJhbWUuc2V0QXR0cmlidXRlKFwic2FuZGJveFwiLCBcImFsbG93LWZvcm1zIGFsbG93LW1vZGFscyBhbGxvdy1wb3B1cHMgYWxsb3ctcHJlc2VudGF0aW9uIGFsbG93LXNhbWUtb3JpZ2luIGFsbG93LXNjcmlwdHMgYWxsb3ctZG93bmxvYWRzIGFsbG93LXBvaW50ZXItbG9ja1wiKTtcbiAgICAgICAgICAgIF90aGlzLmlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd1wiLCBcImFjY2VsZXJvbWV0ZXI7IGNhbWVyYTsgZW5jcnlwdGVkLW1lZGlhOyBnZW9sb2NhdGlvbjsgZ3lyb3Njb3BlOyBoaWQ7IG1pY3JvcGhvbmU7IG1pZGk7IGNsaXBib2FyZC13cml0ZTtcIik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc2V0TG9jYXRpb25VUkxJbnRvSUZyYW1lKCk7XG4gICAgICAgIF90aGlzLmlmcmFtZVByb3RvY29sID0gbmV3IElGcmFtZVByb3RvY29sKF90aGlzLmlmcmFtZSwgX3RoaXMuYnVuZGxlclVSTCk7XG4gICAgICAgIF90aGlzLnVuc3Vic2NyaWJlR2xvYmFsTGlzdGVuZXIgPSBfdGhpcy5pZnJhbWVQcm90b2NvbC5nbG9iYWxMaXN0ZW4oZnVuY3Rpb24gKG1lcykge1xuICAgICAgICAgICAgaWYgKG1lcy50eXBlICE9PSBcImluaXRpYWxpemVkXCIgfHwgIV90aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuaWZyYW1lUHJvdG9jb2wucmVnaXN0ZXIoKTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmZpbGVSZXNvbHZlcikge1xuICAgICAgICAgICAgICAgIF90aGlzLmZpbGVSZXNvbHZlclByb3RvY29sID0gbmV3IFByb3RvY29sKFwiZnNcIiwgZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubWV0aG9kID09PSBcImlzRmlsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5vcHRpb25zLmZpbGVSZXNvbHZlci5pc0ZpbGUoZGF0YS5wYXJhbXNbMF0pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEubWV0aG9kID09PSBcInJlYWRGaWxlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLm9wdGlvbnMuZmlsZVJlc29sdmVyLnJlYWRGaWxlKGRhdGEucGFyYW1zWzBdKV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7IH0sIF90aGlzLmlmcmFtZVByb3RvY29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVNhbmRib3goX3RoaXMuc2FuZGJveFNldHVwLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIF90aGlzLnVuc3Vic2NyaWJlQ2hhbm5lbExpc3RlbmVyID0gX3RoaXMuaWZyYW1lUHJvdG9jb2wuY2hhbm5lbExpc3RlbihmdW5jdGlvbiAobWVzKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1lcy50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhdHVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RhdHVzID0gbWVzLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3Rpb25cIjoge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzLmFjdGlvbiA9PT0gXCJzaG93LWVycm9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9ycyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX3RoaXMuZXJyb3JzLCB0cnVlKSwgW2V4dHJhY3RFcnJvckRldGFpbHMobWVzKV0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcImRvbmVcIjoge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGF0dXMgPSBcImRvbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmJ1bmRsZXJTdGF0ZSA9IG1lcy5zdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTYW5kcGFja1J1bnRpbWUucHJvdG90eXBlLnNldExvY2F0aW9uVVJMSW50b0lGcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgdXJsU291cmNlID0gdGhpcy5vcHRpb25zLnN0YXJ0Um91dGVcbiAgICAgICAgICAgID8gbmV3IFVSTCh0aGlzLm9wdGlvbnMuc3RhcnRSb3V0ZSwgdGhpcy5idW5kbGVyVVJMKS50b1N0cmluZygpXG4gICAgICAgICAgICA6IHRoaXMuYnVuZGxlclVSTDtcbiAgICAgICAgKF9hID0gdGhpcy5pZnJhbWUuY29udGVudFdpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxvY2F0aW9uLnJlcGxhY2UodXJsU291cmNlKTtcbiAgICAgICAgdGhpcy5pZnJhbWUuc3JjID0gdXJsU291cmNlO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlQ2hhbm5lbExpc3RlbmVyKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVHbG9iYWxMaXN0ZW5lcigpO1xuICAgICAgICB0aGlzLmlmcmFtZVByb3RvY29sLmNsZWFudXAoKTtcbiAgICB9O1xuICAgIFNhbmRwYWNrUnVudGltZS5wcm90b3R5cGUudXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmICghZGVxdWFsKHRoaXMub3B0aW9ucywgb3B0aW9ucykpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNhbmRib3goKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS51cGRhdGVTYW5kYm94ID0gZnVuY3Rpb24gKHNhbmRib3hTZXR1cCwgaXNJbml0aWFsaXphdGlvbkNvbXBpbGUpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBpZiAoc2FuZGJveFNldHVwID09PSB2b2lkIDApIHsgc2FuZGJveFNldHVwID0gdGhpcy5zYW5kYm94U2V0dXA7IH1cbiAgICAgICAgdGhpcy5zYW5kYm94U2V0dXAgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zYW5kYm94U2V0dXApLCBzYW5kYm94U2V0dXApO1xuICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmdldEZpbGVzKCk7XG4gICAgICAgIHZhciBtb2R1bGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgbmV4dCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldiksIChfYSA9IHt9LCBfYVtuZXh0XSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiBmaWxlc1tuZXh0XS5jb2RlLFxuICAgICAgICAgICAgICAgIHBhdGg6IG5leHQsXG4gICAgICAgICAgICB9LCBfYSkpKTtcbiAgICAgICAgfSwge30pO1xuICAgICAgICB2YXIgcGFja2FnZUpTT04gPSBKU09OLnBhcnNlKGNyZWF0ZVBhY2thZ2VKU09OKHRoaXMuc2FuZGJveFNldHVwLmRlcGVuZGVuY2llcywgdGhpcy5zYW5kYm94U2V0dXAuZGV2RGVwZW5kZW5jaWVzLCB0aGlzLnNhbmRib3hTZXR1cC5lbnRyeSkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFja2FnZUpTT04gPSBKU09OLnBhcnNlKGZpbGVzW1wiL3BhY2thZ2UuanNvblwiXS5jb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihjcmVhdGVFcnJvcihcImNvdWxkIG5vdCBwYXJzZSBwYWNrYWdlLmpzb24gZmlsZTogXCIgKyBlLm1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIG1vdmUgdGhpcyB0byBhIGNvbW1vbiBmb3JtYXRcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRNb2R1bGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgbmV4dCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldiksIChfYSA9IHt9LCBfYVtuZXh0XSA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWxlc1tuZXh0XS5jb2RlLFxuICAgICAgICAgICAgICAgIHBhdGg6IG5leHQsXG4gICAgICAgICAgICB9LCBfYSkpKTtcbiAgICAgICAgfSwge30pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwiY29tcGlsZVwiLFxuICAgICAgICAgICAgY29kZXNhbmRib3g6IHRydWUsXG4gICAgICAgICAgICB2ZXJzaW9uOiAzLFxuICAgICAgICAgICAgaXNJbml0aWFsaXphdGlvbkNvbXBpbGU6IGlzSW5pdGlhbGl6YXRpb25Db21waWxlLFxuICAgICAgICAgICAgbW9kdWxlczogbW9kdWxlcyxcbiAgICAgICAgICAgIHJlYWN0RGV2VG9vbHM6IHRoaXMub3B0aW9ucy5yZWFjdERldlRvb2xzLFxuICAgICAgICAgICAgZXh0ZXJuYWxSZXNvdXJjZXM6IHRoaXMub3B0aW9ucy5leHRlcm5hbFJlc291cmNlcyB8fCBbXSxcbiAgICAgICAgICAgIGhhc0ZpbGVSZXNvbHZlcjogQm9vbGVhbih0aGlzLm9wdGlvbnMuZmlsZVJlc29sdmVyKSxcbiAgICAgICAgICAgIGRpc2FibGVEZXBlbmRlbmN5UHJlcHJvY2Vzc2luZzogdGhpcy5zYW5kYm94U2V0dXAuZGlzYWJsZURlcGVuZGVuY3lQcmVwcm9jZXNzaW5nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMuc2FuZGJveFNldHVwLnRlbXBsYXRlIHx8XG4gICAgICAgICAgICAgICAgZ2V0VGVtcGxhdGUocGFja2FnZUpTT04sIG5vcm1hbGl6ZWRNb2R1bGVzKSxcbiAgICAgICAgICAgIHNob3dPcGVuSW5Db2RlU2FuZGJveDogKF9hID0gdGhpcy5vcHRpb25zLnNob3dPcGVuSW5Db2RlU2FuZGJveCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dFcnJvclNjcmVlbjogKF9iID0gdGhpcy5vcHRpb25zLnNob3dFcnJvclNjcmVlbikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dMb2FkaW5nU2NyZWVuOiAoX2MgPSB0aGlzLm9wdGlvbnMuc2hvd0xvYWRpbmdTY3JlZW4pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlLFxuICAgICAgICAgICAgc2tpcEV2YWw6IHRoaXMub3B0aW9ucy5za2lwRXZhbCB8fCBmYWxzZSxcbiAgICAgICAgICAgIGNsZWFyQ29uc29sZURpc2FibGVkOiAhdGhpcy5vcHRpb25zLmNsZWFyQ29uc29sZU9uRmlyc3RDb21waWxlLFxuICAgICAgICAgICAgbG9nTGV2ZWw6IChfZCA9IHRoaXMub3B0aW9ucy5sb2dMZXZlbCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogU2FuZHBhY2tMb2dMZXZlbC5JbmZvLFxuICAgICAgICAgICAgY3VzdG9tTnBtUmVnaXN0cmllczogdGhpcy5vcHRpb25zLmN1c3RvbU5wbVJlZ2lzdHJpZXMsXG4gICAgICAgICAgICB0ZWFtSWQ6IHRoaXMub3B0aW9ucy50ZWFtSWQsXG4gICAgICAgICAgICBzYW5kYm94SWQ6IHRoaXMub3B0aW9ucy5zYW5kYm94SWQsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcmNlcHQgXCJyZWZyZXNoXCIgZGlzcGF0Y2g6IHRoaXMgd2lsbCBtYWtlIHN1cmVcbiAgICAgICAgICogdGhhdCB0aGUgaWZyYW1lIGlzIHN0aWxsIGluIHRoZSBsb2NhdGlvbiBpdCdzIHN1cHBvc2VkIHRvIGJlLlxuICAgICAgICAgKiBFeHRlcm5hbCBsaW5rcyBpbnNpZGUgdGhlIGlmcmFtZSB3aWxsIGNoYW5nZSB0aGUgbG9jYXRpb24gYW5kXG4gICAgICAgICAqIHByZXZlbnQgdGhlIHVzZXIgZnJvbSBuYXZpZ2F0aW5nIGJhY2suXG4gICAgICAgICAqL1xuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcInJlZnJlc2hcIikge1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhdGlvblVSTEludG9JRnJhbWUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlmcmFtZVByb3RvY29sLmRpc3BhdGNoKG1lc3NhZ2UpO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWZyYW1lUHJvdG9jb2wuY2hhbm5lbExpc3RlbihsaXN0ZW5lcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFVSTCBvZiB0aGUgY29udGVudHMgb2YgdGhlIGN1cnJlbnQgc2FuZGJveFxuICAgICAqL1xuICAgIFNhbmRwYWNrUnVudGltZS5wcm90b3R5cGUuZ2V0Q29kZVNhbmRib3hVUkwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaWxlcyA9IHRoaXMuZ2V0RmlsZXMoKTtcbiAgICAgICAgdmFyIHBhcmFtRmlsZXMgPSBPYmplY3Qua2V5cyhmaWxlcykucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBuZXh0KSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2KSwgKF9hID0ge30sIF9hW25leHQucmVwbGFjZShcIi9cIiwgXCJcIildID0ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpbGVzW25leHRdLmNvZGUsXG4gICAgICAgICAgICAgICAgaXNCaW5hcnk6IGZhbHNlLFxuICAgICAgICAgICAgfSwgX2EpKSk7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9hcGkvdjEvc2FuZGJveGVzL2RlZmluZT9qc29uPTFcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZmlsZXM6IHBhcmFtRmlsZXMgfSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5qc29uKCk7IH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiAoe1xuICAgICAgICAgICAgc2FuZGJveElkOiByZXMuc2FuZGJveF9pZCxcbiAgICAgICAgICAgIGVkaXRvclVybDogXCJodHRwczovL2NvZGVzYW5kYm94LmlvL3MvXCIuY29uY2F0KHJlcy5zYW5kYm94X2lkKSxcbiAgICAgICAgICAgIGVtYmVkVXJsOiBcImh0dHBzOi8vY29kZXNhbmRib3guaW8vZW1iZWQvXCIuY29uY2F0KHJlcy5zYW5kYm94X2lkKSxcbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5nZXRGaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNhbmRib3hTZXR1cCA9IHRoaXMuc2FuZGJveFNldHVwO1xuICAgICAgICBpZiAoc2FuZGJveFNldHVwLmZpbGVzW1wiL3BhY2thZ2UuanNvblwiXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkUGFja2FnZUpTT05JZk5lZWRlZChzYW5kYm94U2V0dXAuZmlsZXMsIHNhbmRib3hTZXR1cC5kZXBlbmRlbmNpZXMsIHNhbmRib3hTZXR1cC5kZXZEZXBlbmRlbmNpZXMsIHNhbmRib3hTZXR1cC5lbnRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2FuZGJveFNldHVwLmZpbGVzO1xuICAgIH07XG4gICAgU2FuZHBhY2tSdW50aW1lLnByb3RvdHlwZS5pbml0aWFsaXplRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pZnJhbWUuc3R5bGUuYm9yZGVyID0gXCIwXCI7XG4gICAgICAgIHRoaXMuaWZyYW1lLnN0eWxlLndpZHRoID0gdGhpcy5vcHRpb25zLndpZHRoIHx8IFwiMTAwJVwiO1xuICAgICAgICB0aGlzLmlmcmFtZS5zdHlsZS5oZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0IHx8IFwiMTAwJVwiO1xuICAgICAgICB0aGlzLmlmcmFtZS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIG51bGx0aHJvd3ModGhpcy5lbGVtZW50LnBhcmVudE5vZGUsIFwiVGhlIGdpdmVuIGlmcmFtZSBkb2VzIG5vdCBoYXZlIGEgcGFyZW50LlwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMuaWZyYW1lLCB0aGlzLmVsZW1lbnQpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhbmRwYWNrUnVudGltZTtcbn0oU2FuZHBhY2tDbGllbnQpKTtcblxuZXhwb3J0IHsgU2FuZHBhY2tSdW50aW1lIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@codesandbox/sandpack-client/dist/clients/runtime/index.mjs\n"));

/***/ })

}]);